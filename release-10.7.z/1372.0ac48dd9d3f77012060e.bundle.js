"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1372,6560,7046],{27046:function(e,t,n){n.r(t),n.d(t,{getCommands:function(){return m},show:function(){return g}}),n(5769),n(63238),n(61418),n(17460),n(14078),n(52077),n(911),n(23938);var a=n(47518),i=n(53754),r=n(32465),o=n(38102),s=n(6383),l=n(71616),u=n(53218),d=n(53913),c=n(38440);function m(e){var t=e.item,n=e.user,r=u.O.canPlay(t),s=(a.Z.operaTv||a.Z.web0s)&&!n.Policy.IsAdministrator,d=[];r&&"Photo"!==t.MediaType&&(!1!==e.play&&d.push({name:i.ZP.translate("Play"),id:"resume",icon:"play_arrow"}),e.playAllFromHere&&"Program"!==t.Type&&"TvChannel"!==t.Type&&d.push({name:i.ZP.translate("PlayAllFromHere"),id:"playallfromhere",icon:"play_arrow"})),null!==u.O.getCurrentPlayer()&&(e.stopPlayback&&d.push({name:i.ZP.translate("StopPlayback"),id:"stopPlayback",icon:"stop"}),e.clearQueue&&d.push({name:i.ZP.translate("ClearQueue"),id:"clearQueue",icon:"clear_all"})),u.O.canQueue(t)&&(!1!==e.queue&&d.push({name:i.ZP.translate("AddToPlayQueue"),id:"queue",icon:"playlist_add"}),!1!==e.queue&&d.push({name:i.ZP.translate("PlayNext"),id:"queuenext",icon:"playlist_add"})),(t.IsFolder||"MusicArtist"===t.Type||"MusicGenre"===t.Type)&&"livetv"!==t.CollectionType&&!1!==e.shuffle&&d.push({name:i.ZP.translate("Shuffle"),id:"shuffle",icon:"shuffle"}),"Audio"!==t.MediaType&&"MusicAlbum"!==t.Type&&"MusicArtist"!==t.Type&&"MusicGenre"!==t.Type||!1===e.instantMix||l.ZP.isLocalItem(t)||d.push({name:i.ZP.translate("InstantMix"),id:"instantmix",icon:"explore"}),d.length&&d.push({divider:!0}),s||(l.ZP.supportsAddingToCollection(t)&&d.push({name:i.ZP.translate("AddToCollection"),id:"addtocollection",icon:"playlist_add"}),l.ZP.supportsAddingToPlaylist(t)&&!1!==e.playlist&&d.push({name:i.ZP.translate("AddToPlaylist"),id:"addtoplaylist",icon:"playlist_add"})),"Timer"===t.Type&&n.Policy.EnableLiveTvManagement&&!1!==e.cancelTimer&&d.push({name:i.ZP.translate("CancelRecording"),id:"canceltimer",icon:"cancel"}),"Recording"===t.Type&&"InProgress"===t.Status&&n.Policy.EnableLiveTvManagement&&!1!==e.cancelTimer&&d.push({name:i.ZP.translate("CancelRecording"),id:"canceltimer",icon:"cancel"}),"SeriesTimer"===t.Type&&n.Policy.EnableLiveTvManagement&&!1!==e.cancelTimer&&d.push({name:i.ZP.translate("CancelSeries"),id:"cancelseriestimer",icon:"cancel"}),t.CanDelete&&!1!==e.deleteItem&&("Playlist"===t.Type||"BoxSet"===t.Type?d.push({name:i.ZP.translate("Delete"),id:"delete",icon:"delete"}):d.push({name:i.ZP.translate("DeleteMedia"),id:"delete",icon:"delete"})),t.CanDownload&&o.M.supports("filedownload")&&"Book"!==t.Type&&(d.push({name:i.ZP.translate("Download"),id:"download",icon:"file_download"}),d.push({name:i.ZP.translate("CopyStreamURL"),id:"copy-stream",icon:"content_copy"})),d.length&&d.push({divider:!0});var c=l.ZP.canEdit(n,t);if(c&&!1!==e.edit&&"SeriesTimer"!==t.Type){var m="Timer"===t.Type||"SeriesTimer"===t.Type?i.ZP.translate("Edit"):i.ZP.translate("EditMetadata");d.push({name:m,id:"edit",icon:"edit"})}return l.ZP.canEditImages(n,t)&&!1!==e.editImages&&d.push({name:i.ZP.translate("EditImages"),id:"editimages",icon:"image"}),c&&("Video"!==t.MediaType||"TvChannel"===t.Type||"Program"===t.Type||"Virtual"===t.LocationType||"Recording"===t.Type&&"Completed"!==t.Status||!1!==e.editSubtitles&&d.push({name:i.ZP.translate("EditSubtitles"),id:"editsubtitles",icon:"closed_caption"})),!1!==e.identify&&l.ZP.canIdentify(n,t)&&d.push({name:i.ZP.translate("Identify"),id:"identify",icon:"edit"}),t.MediaSources&&!1!==e.moremediainfo&&d.push({name:i.ZP.translate("MoreMediaInfo"),id:"moremediainfo",icon:"info"}),"Program"===t.Type&&!1!==e.record&&t.TimerId&&d.push({name:i.ZP.translate("ManageRecording"),id:"record",icon:"fiber_manual_record"}),"Program"===t.Type&&!1!==e.record&&(t.TimerId||d.push({name:i.ZP.translate("Record"),id:"record",icon:"fiber_manual_record"})),l.ZP.canRefreshMetadata(t,n)&&d.push({name:i.ZP.translate("RefreshMetadata"),id:"refresh",icon:"refresh"}),t.PlaylistItemId&&e.playlistId&&d.push({name:i.ZP.translate("RemoveFromPlaylist"),id:"removefromplaylist",icon:"remove"}),e.collectionId&&d.push({name:i.ZP.translate("RemoveFromCollection"),id:"removefromcollection",icon:"remove"}),s||!0===e.share&&l.ZP.canShare(t,n)&&d.push({name:i.ZP.translate("Share"),id:"share",icon:"share"}),!1!==e.sync&&l.ZP.canSync(n,t)&&d.push({name:i.ZP.translate("Sync"),id:"sync",icon:"sync"}),!1!==e.openAlbum&&t.AlbumId&&"Photo"!==t.MediaType&&d.push({name:i.ZP.translate("ViewAlbum"),id:"album",icon:"album"}),!1!==e.openArtist&&t.AlbumArtists&&t.AlbumArtists.length&&d.push({name:i.ZP.translate("ViewAlbumArtist"),id:"artist",icon:"person"}),d}function p(e,t,n,a){return function(){e({command:t,updated:n,deleted:a})}}function f(e,t,n,a){var i=n?a?"queueNext":"queue":"play",r=0;t&&e.UserData&&e.UserData.PlaybackPositionTicks&&(r=e.UserData.PlaybackPositionTicks),"Program"===e.Type?u.O[i]({ids:[e.ChannelId],startPositionTicks:r,serverId:e.ServerId}):u.O[i]({items:[e],startPositionTicks:r})}function g(e){var t=m(e);return t.length?r.default.show({items:t,positionTo:e.positionTo,resolveOnClick:["share"]}).then((function(t){return function(e,t,a){var r=e.Id,o=e.ServerId,l=d.Z.getApiClient(o);return new Promise((function(d,m){switch(t){case"addtocollection":n.e(6372).then(n.bind(n,86372)).then((function(e){new(0,e.default)({items:[r],serverId:o}).then(p(d,t,!0),p(d,t))}));break;case"addtoplaylist":n.e(8013).then(n.bind(n,8013)).then((function(e){new(0,e.default)({items:[r],serverId:o}).then(p(d,t,!0),p(d,t))}));break;case"download":n.e(4111).then(n.bind(n,84111)).then((function(n){var a=l.getItemDownloadUrl(r);n.download([{url:a,itemId:r,serverId:o,title:e.Name,filename:e.Path.replace(/^.*[\\\/]/,"")}]),p(p(d,t),t)()}));break;case"copy-stream":var g=l.getItemDownloadUrl(r),y=function(){var e=document.createElement("textarea");e.value=g,document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy")?(0,c.Z)(i.ZP.translate("CopyStreamURLSuccess")):prompt(i.ZP.translate("CopyStreamURL"),g),document.body.removeChild(e)};void 0===navigator.clipboard?y():navigator.clipboard.writeText(g).then((function(){(0,c.Z)(i.ZP.translate("CopyStreamURLSuccess"))})).catch((function(){y()})),p(d,t)();break;case"editsubtitles":n.e(1569).then(n.bind(n,91569)).then((function(e){e.default.show(r,o).then(p(d,t,!0),p(d,t))}));break;case"edit":(function(e,t){return new Promise((function(a,i){var r=e.serverInfo().Id;"Timer"===t.Type?n.e(132).then(n.bind(n,80132)).then((function(e){e.default.show(t.Id,r).then(a,i)})):"SeriesTimer"===t.Type?n.e(4281).then(n.bind(n,44281)).then((function(e){e.default.show(t.Id,r).then(a,i)})):n.e(6508).then(n.bind(n,66508)).then((function(e){e.default.show(t.Id,r).then(a,i)}))}))})(l,e).then(p(d,t,!0),p(d,t));break;case"editimages":n.e(7067).then(n.bind(n,87067)).then((function(e){e.show({itemId:r,serverId:o}).then(p(d,t,!0),p(d,t))}));break;case"identify":n.e(5598).then(n.bind(n,35598)).then((function(e){e.show(r,o).then(p(d,t,!0),p(d,t))}));break;case"moremediainfo":n.e(1765).then(n.bind(n,81765)).then((function(e){e.show(r,o).then(p(d,t),p(d,t))}));break;case"refresh":!function(e,t){n.e(4231).then(n.bind(n,14231)).then((function(n){new(0,n.default)({itemIds:[t.Id],serverId:e.serverInfo().Id,mode:"CollectionFolder"===t.Type?"scan":null}).show()}))}(l,e),p(d,t)();break;case"open":s.appRouter.showItem(e),p(d,t)();break;case"play":f(e,!1),p(d,t)();break;case"resume":f(e,!0),p(d,t)();break;case"queue":f(e,!1,!0),p(d,t)();break;case"queuenext":f(e,!1,!0,!0),p(d,t)();break;case"stopPlayback":u.O.stop();break;case"clearQueue":u.O.clearQueue();break;case"record":n.e(4104).then(n.bind(n,34104)).then((function(e){e.default.show(r,o).then(p(d,t,!0),p(d,t))}));break;case"shuffle":u.O.shuffle(e),p(d,t)();break;case"instantmix":u.O.instantMix(e),p(d,t)();break;case"delete":(function(e,t){return new Promise((function(e,a){n.e(6860).then(n.bind(n,96860)).then((function(n){n.deleteItem({item:t,navigate:!1}).then((function(){e(!0)}),a)}))}))})(0,e).then(p(d,t,!0,!0),p(d,t));break;case"share":navigator.share({title:e.Name,text:e.Overview,url:"".concat(l.serverAddress(),"/web/index.html").concat(s.appRouter.getRouteUrl(e))});break;case"album":s.appRouter.showItem(e.AlbumId,e.ServerId),p(d,t)();break;case"artist":s.appRouter.showItem(e.AlbumArtists[0].Id,e.ServerId),p(d,t)();break;case"playallfromhere":case"queueallfromhere":p(d,t)();break;case"removefromplaylist":l.ajax({url:l.getUrl("Playlists/"+a.playlistId+"/Items",{EntryIds:[e.PlaylistItemId].join(",")}),type:"DELETE"}).then((function(){p(d,t,!0)()}));break;case"removefromcollection":l.ajax({type:"DELETE",url:l.getUrl("Collections/"+a.collectionId+"/Items",{Ids:[e.Id].join(",")})}).then((function(){p(d,t,!0)()}));break;case"canceltimer":!function(e,t,a,i){Promise.resolve().then(n.bind(n,58104)).then((function(e){var n=e.default,r=t.TimerId||t.Id;n.cancelTimerWithConfirmation(r,t.ServerId).then((function(){p(a,i,!0)()}))}))}(0,e,d,t);break;case"cancelseriestimer":!function(e,t,a,i){Promise.resolve().then(n.bind(n,58104)).then((function(e){e.default.cancelSeriesTimerWithConfirmation(t.Id,t.ServerId).then((function(){p(a,i,!0)()}))}))}(0,e,d,t);break;default:m()}}))}(e.item,t,e)})):Promise.reject()}t.default={getCommands:m,show:g}},51372:function(e,t,n){n.r(t),n(63238),n(55849),n(43512),n(27471),n(48410);var a=n(28469),i=n(47005),r=n(47518),o=n(91081),s=n(78695),l=n(53218),u=n(92642),d=n(38102),c=n(83094),m=n(27046),p=(n(21865),n(76560),n(53913)),f=(n(19068),n(87211),n(25901),n(92189),n(95163),n(99785),n(91047),n(5769),n(17460),n(14078),n(1892)),g=n.n(f),y=n(89562);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function v(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t);if("object"!==h(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a.key,"string"),"symbol"===h(i)?i:String(i)),a)}var i}g()(y.Z,{insert:"head",singleton:!1}),y.Z.locals;var b,P,w,I,T,k,S,B,C,x,Z,A,L,E,M,R=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n,a=this;a.element=((n=document.createElement("div")).classList.add("appfooter"),document.body.appendChild(n),n),a.add=function(e){a.element.appendChild(e)},a.insert=function(e){"string"==typeof e?a.element.insertAdjacentHTML("afterbegin",e):a.element.insertBefore(e,a.element.firstChild)}}var t,n;return t=e,(n=[{key:"destroy",value:function(){this.element=null}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),O=new R({}),q=n(67962),N=n(78535),U=(g()(N.Z,{insert:"head",singleton:!1}),N.Z.locals,n(83495),n(6383)),_=[],D=0,j={},F=0,V=!0;function Q(){this.classList.add("hide")}function H(){l.O.playPause(b)}function z(){if(E)return E;var e,t,n=O.element;return(E=n.querySelector(".nowPlayingBar"))||(n.insertAdjacentHTML("afterbegin",(e="",e+='<div class="nowPlayingBar hide nowPlayingBar-hidden">',e+='<div class="nowPlayingBarTop">',e+='<div class="nowPlayingBarPositionContainer sliderContainer">',e+='<input type="range" is="emby-slider" pin step=".01" min="0" max="100" value="0" class="slider-medium-thumb nowPlayingBarPositionSlider" data-slider-keep-progress="true"/>',e+="</div>",e+='<div class="nowPlayingBarInfoContainer">',e+='<div class="nowPlayingImage"></div>',e+='<div class="nowPlayingBarText"></div>',e+="</div>",e+='<div class="nowPlayingBarCenter">',e+='<button is="paper-icon-button-light" class="previousTrackButton mediaButton"><span class="material-icons skip_previous"></span></button>',e+='<button is="paper-icon-button-light" class="playPauseButton mediaButton"><span class="material-icons pause"></span></button>',e+='<button is="paper-icon-button-light" class="stopButton mediaButton"><span class="material-icons stop"></span></button>',s.Z.mobile||(e+='<button is="paper-icon-button-light" class="nextTrackButton mediaButton"><span class="material-icons skip_next"></span></button>'),e+='<div class="nowPlayingBarCurrentTime"></div>',e+="</div>",e+='<div class="nowPlayingBarRight">',e+='<button is="paper-icon-button-light" class="muteButton mediaButton"><span class="material-icons volume_up"></span></button>',e+='<div class="sliderContainer nowPlayingBarVolumeSliderContainer hide" style="width:9em;vertical-align:middle;display:inline-flex;">',e+='<input type="range" is="emby-slider" pin step="1" min="0" max="100" value="0" class="slider-medium-thumb nowPlayingBarVolumeSlider"/>',e+="</div>",e+='<button is="paper-icon-button-light" class="toggleRepeatButton mediaButton"><span class="material-icons repeat"></span></button>',e+='<button is="paper-icon-button-light" class="btnShuffleQueue mediaButton"><span class="material-icons shuffle"></span></button>',e+='<div class="nowPlayingBarUserDataButtons">',e+="</div>",e+='<button is="paper-icon-button-light" class="playPauseButton mediaButton"><span class="material-icons pause"></span></button>',s.Z.mobile?e+='<button is="paper-icon-button-light" class="nextTrackButton mediaButton"><span class="material-icons skip_next"></span></button>':e+='<button is="paper-icon-button-light" class="btnToggleContextMenu mediaButton"><span class="material-icons more_vert"></span></button>',e+="</div>",(e+="</div>")+"</div>")),window.CustomElements.upgradeSubtree(n),E=n.querySelector(".nowPlayingBar"),s.Z.mobile&&(W(E.querySelector(".btnShuffleQueue")),W(E.querySelector(".nowPlayingBarCenter"))),r.Z.safari&&r.Z.slow&&E.classList.add("noMediaProgress"),q.ZP.on(E),P=(t=E).querySelector(".nowPlayingBarCurrentTime"),w=t.querySelector(".nowPlayingImage"),I=t.querySelector(".nowPlayingBarText"),T=t.querySelector(".nowPlayingBarUserDataButtons"),x=t.querySelector(".nowPlayingBarPositionSlider"),k=t.querySelector(".muteButton"),C=t.querySelectorAll(".playPauseButton"),Z=t.querySelector(".toggleRepeatButton"),S=t.querySelector(".nowPlayingBarVolumeSlider"),B=t.querySelector(".nowPlayingBarVolumeSliderContainer"),k.addEventListener("click",(function(){b&&l.O.toggleMute(b)})),t.querySelector(".stopButton").addEventListener("click",(function(){b&&l.O.stop(b)})),C.forEach((function(e){e.addEventListener("click",H)})),t.querySelector(".nextTrackButton").addEventListener("click",(function(){b&&l.O.nextTrack(b)})),t.querySelector(".previousTrackButton").addEventListener("click",(function(e){if(b)if("Audio"===j.NowPlayingItem.MediaType&&(b._currentTime>=5||!l.O.previousTrack(b))){if(e.detail>1&&l.O.previousTrack(b))return;l.O.seekPercent(0,b),x.value=0}else l.O.previousTrack(b)})),t.querySelector(".previousTrackButton").addEventListener("dblclick",(function(){b&&l.O.previousTrack(b)})),t.querySelector(".btnShuffleQueue").addEventListener("click",(function(){b&&l.O.toggleQueueShuffleMode()})),(Z=t.querySelector(".toggleRepeatButton")).addEventListener("click",(function(){switch(l.O.getRepeatMode()){case"RepeatAll":l.O.setRepeatMode("RepeatOne");break;case"RepeatOne":l.O.setRepeatMode("RepeatNone");break;case"RepeatNone":l.O.setRepeatMode("RepeatAll")}})),A=Z.querySelector(".material-icons"),B.classList.toggle("hide",d.M.supports("physicalvolumecontrol")),S.addEventListener("input",(function(e){b&&b.setVolume(e.target.value)})),x.addEventListener("change",(function(){if(b){var e=parseFloat(this.value);l.O.seekPercent(e,b)}})),x.getBubbleText=function(e){if(!j||!j.NowPlayingItem||!F)return"--:--";var t=F;return t/=100,t*=e,a.ZP.getDisplayRunningTime(t)},t.addEventListener("click",(function(e){c.ZP.parentWithTag(e.target,["BUTTON","INPUT"])||U.appRouter.showNowPlaying()}))),E}function W(e){e.classList.add("hide")}function Y(e){C&&C.forEach((function(t){var n=t.querySelector(".material-icons");n.classList.remove("play_arrow","pause"),n.classList.add(e?"play_arrow":"pause")}))}function G(e){A.classList.remove("repeat","repeat_one");var t="buttonActive";switch(e){case"RepeatAll":A.classList.add("repeat"),Z.classList.add(t);break;case"RepeatOne":A.classList.add("repeat_one"),Z.classList.add(t);break;default:A.classList.add("repeat"),Z.classList.remove(t)}}function J(e,t,n){if(x&&!x.dragging)if(t){var i=e/t;i*=100,x.value=i}else x.value=0;if(x&&x.setBufferedRanges(n,t,e),P){var r=null==e?"--:--":a.ZP.getDisplayRunningTime(e);t&&(r+=" / "+a.ZP.getDisplayRunningTime(t)),P.innerHTML=r}}function K(e,t){var n=_,a=!0,i=!0;-1===n.indexOf("ToggleMute")&&(a=!1);var r=k.querySelector(".material-icons");r.classList.remove("volume_off","volume_up"),r.classList.add(e?"volume_off":"volume_up"),-1===n.indexOf("SetVolume")&&(i=!1),b.isLocalPlayer&&d.M.supports("physicalvolumecontrol")&&(a=!1,i=!1),a?k.classList.remove("hide"):W(k),S&&(B.classList.toggle("hide",!i),S.dragging||(S.value=t||0))}function X(e,t){console.debug("nowplaying event: "+e.type),ie.call(this,e,t)}function $(){L&&G(l.O.getRepeatMode())}function ee(){if(L){var e=l.O.getQueueShuffleMode(),t="buttonActive",n=E.querySelector(".btnShuffleQueue");"Shuffle"===e?n.classList.add(t):n.classList.remove(t)}}function te(){L=!1;var e=document.getElementsByClassName("nowPlayingBar")[0];e&&function(e){e.offsetWidth,e.classList.add("nowPlayingBar-hidden"),c.ZP.addEventListener(e,c.ZP.whichTransitionEvent(),Q,{once:!0})}(e)}function ne(e,t){console.debug("nowplaying event: "+e.type),this.isLocalPlayer?"Audio"!==t.NextMediaType&&te():t.NextMediaType||te()}function ae(e){L&&Y(this.paused())}function ie(e,t){console.debug("nowplaying event: "+e.type);t.NowPlayingItem&&!s.Z.tv&&!1!==t.IsFullscreen?this.isLocalPlayer&&t.NowPlayingItem&&"Video"===t.NowPlayingItem.MediaType?te():(L=!0,E||z(),function(e,t,n){var a;V?(a=z(),c.ZP.removeEventListener(a,c.ZP.whichTransitionEvent(),Q,{once:!0}),a.classList.remove("hide"),a.offsetWidth,a.classList.remove("nowPlayingBar-hidden")):te(),j=t;var i=l.O.getPlayerInfo(),r=t.PlayState||{};Y(r.IsPaused);var d=i.supportedCommands;if(_=d,-1===d.indexOf("SetRepeatMode")?Z.classList.add("hide"):Z.classList.remove("hide"),G(l.O.getRepeatMode()),ee(),K(r.IsMuted,r.VolumeLevel),x&&!x.dragging){x.disabled=!r.CanSeek;var f=t.MediaSource&&null==t.MediaSource.RunTimeTicks;x.setIsClear(f)}var g=t.NowPlayingItem||{};J(r.PositionTicks,g.RunTimeTicks,l.O.getBufferedRanges(n)),function(e){var t=e.NowPlayingItem,n=t?u.Z.getNowPlayingNames(t):[];if(I.innerHTML="",n){var a=document.createElement("div"),i=document.createElement("div");if(i.classList.add("nowPlayingBarSecondaryText"),n.length>1&&(n[1].secondary=!0,n[1].text)){var r=document.createElement("a");r.innerHTML=n[1].text,i.appendChild(r)}if(n[0].text){var l=document.createElement("a");l.innerHTML=n[0].text,a.appendChild(l)}I.appendChild(a),I.appendChild(i)}var d=t?function(e,t){if(!e)throw new Error("item cannot be null!");if("Episode"!==e.Type)return null;if((t=t||{}).type=t.type||"Primary","Primary"===t.type&&e.SeriesPrimaryImageTag)return t.tag=e.SeriesPrimaryImageTag,p.Z.getApiClient(e.ServerId).getScaledImageUrl(e.SeriesId,t);if("Thumb"===t.type){if(e.SeriesThumbImageTag)return t.tag=e.SeriesThumbImageTag,p.Z.getApiClient(e.ServerId).getScaledImageUrl(e.SeriesId,t);if(e.ParentThumbImageTag)return t.tag=e.ParentThumbImageTag,p.Z.getApiClient(e.ServerId).getScaledImageUrl(e.ParentThumbItemId,t)}return null}(t,{height:70})||function(e,t){if(!e)throw new Error("item cannot be null!");return(t=t||{}).type=t.type||"Primary",e.ImageTags&&e.ImageTags[t.type]?(t.tag=e.ImageTags[t.type],p.Z.getApiClient(e.ServerId).getScaledImageUrl(e.PrimaryImageItemId||e.Id,t)):e.AlbumId&&e.AlbumPrimaryImageTag?(t.tag=e.AlbumPrimaryImageTag,p.Z.getApiClient(e.ServerId).getScaledImageUrl(e.AlbumId,t)):null}(t,{height:70}):null,c=!1;if(d!==M&&(M=d,c=!0,d?(o.default.lazyImage(w,d),w.style.display=null,I.style.marginLeft=null):(w.style.backgroundImage="",w.style.display="none",I.style.marginLeft="1em")),t.Id){if(c){var f=p.Z.getApiClient(t.ServerId);f.getItem(f.getCurrentUserId(),t.Id).then((function(e){var t=e.UserData||{},n=null==t.Likes?"":t.Likes;if(!s.Z.mobile){var a=E.querySelector(".btnToggleContextMenu"),i=a.cloneNode(!0);a.parentNode.replaceChild(i,a);var r={play:!1,queue:!1,stopPlayback:!0,clearQueue:!0,positionTo:a=E.querySelector(".btnToggleContextMenu")};f.getCurrentUser().then((function(t){a.addEventListener("click",(function(){m.default.show(Object.assign({item:e,user:t},r))}))}))}T.innerHTML='<button is="emby-ratingbutton" type="button" class="listItemButton mediaButton paper-icon-button-light" data-id="'+e.Id+'" data-serverid="'+e.ServerId+'" data-itemtype="'+e.Type+'" data-likes="'+n+'" data-isfavorite="'+t.IsFavorite+'"><span class="material-icons favorite"></span></button>'}))}}else T.innerHTML=""}(t)}(0,t,this)):te()}function re(e){if(L){var t=(new Date).getTime();if(!(t-D<700)){D=t;var n=this;F=l.O.duration(n),J(1e4*l.O.currentTime(n),F,l.O.getBufferedRanges(n))}}}function oe(e){L&&K(this.isMuted(),this.getVolume())}function se(e){var t=l.O.getPlayerState(e);ie.call(e,{type:"init"},t)}function le(e){e!==b&&(function(){var e=b;e&&(i.Events.off(e,"playbackstart",X),i.Events.off(e,"statechange",X),i.Events.off(e,"repeatmodechange",$),i.Events.off(e,"shufflequeuemodechange",ee),i.Events.off(e,"playbackstop",ne),i.Events.off(e,"volumechange",oe),i.Events.off(e,"pause",ae),i.Events.off(e,"unpause",ae),i.Events.off(e,"timeupdate",re),b=null,te())}(),b=e,e&&(se(e),i.Events.on(e,"playbackstart",X),i.Events.on(e,"statechange",X),i.Events.on(e,"repeatmodechange",$),i.Events.on(e,"shufflequeuemodechange",ee),i.Events.on(e,"playbackstop",ne),i.Events.on(e,"volumechange",oe),i.Events.on(e,"pause",ae),i.Events.on(e,"unpause",ae),i.Events.on(e,"timeupdate",re)))}i.Events.on(l.O,"playerchange",(function(){le(l.O.getCurrentPlayer())})),le(l.O.getCurrentPlayer()),document.addEventListener("viewbeforeshow",(function(e){e.detail.options.enableMediaControl?V||(V=!0,b?se(b):te()):V&&(V=!1,te())}))},92642:function(e,t,n){n(61013),t.Z={getNowPlayingNames:function(e,t){var n=e,a=null,i=e.Name;e.AlbumId&&"Audio"===e.MediaType&&(n={Id:e.AlbumId,Name:e.Album,Type:"MusicAlbum",IsFolder:!0}),"Video"===e.MediaType&&(null!=e.IndexNumber&&(i=e.IndexNumber+" - "+i),null!=e.ParentIndexNumber&&(i=e.ParentIndexNumber+"."+i));var r="";e.ArtistItems&&e.ArtistItems.length?(a={Id:e.ArtistItems[0].Id,Name:e.ArtistItems[0].Name,Type:"MusicArtist",IsFolder:!0},r=e.ArtistItems.map((function(e){return e.Name})).join(", ")):e.Artists&&e.Artists.length?r=e.Artists.join(", "):e.SeriesName||e.Album?(r=i,i=e.SeriesName||e.Album,a=n,n=e.SeriesId?{Id:e.SeriesId,Name:e.SeriesName,Type:"Series",IsFolder:!0}:null):e.ProductionYear&&!1!==t&&(r=e.ProductionYear);var o=[];return o.push({text:i,item:n}),r&&o.push({text:r,item:a}),o}}},76560:function(e,t,n){n.r(t);var a=n(1197),i=n(47005),r=n(53754),o=n(78066),s=n(53913);function l(e){var t=this,n=t.getAttribute("data-id"),a=t.getAttribute("data-serverid"),i=s.Z.getApiClient(a),r=this.getAttribute("data-likes");r="true"===r||"false"!==r&&null,function(e,t,n,a,i){return t.updateFavoriteStatus(t.getCurrentUserId(),n,!i)}(0,i,n,0,"true"===this.getAttribute("data-isfavorite")).then((function(e){d(t,e.Likes,e.IsFavorite)}))}function u(e,t,n){n.ItemId===this.getAttribute("data-id")&&d(this,n.Likes,n.IsFavorite)}function d(e,t,n,a){var i=e.querySelector(".material-icons");n?(i&&(i.classList.add("favorite"),i.classList.add("ratingbutton-icon-withrating")),e.classList.add("ratingbutton-withrating")):(i&&(i.classList.add("favorite"),i.classList.remove("ratingbutton-icon-withrating")),e.classList.remove("ratingbutton-withrating")),!1!==a&&(e.setAttribute("data-isfavorite",n),e.setAttribute("data-likes",null===t?"":t))}function c(e){var t,n,r;e.removeEventListener("click",l),(r=(t=e)[n="UserDataChanged"])&&(i.Events.off(a.default,n,r),t[n]=null)}function m(e){var t,n,r;c(e),e.addEventListener("click",l),t=e,n="UserDataChanged",r=u.bind(t),i.Events.on(a.default,n,r),t[n]=r}var p=Object.create(o.Z);p.createdCallback=function(){o.Z.createdCallback&&o.Z.createdCallback.call(this)},p.attachedCallback=function(){o.Z.attachedCallback&&o.Z.attachedCallback.call(this);var e=this.getAttribute("data-id"),t=this.getAttribute("data-serverid");if(e&&t){var n=this.getAttribute("data-likes");d(this,n="true"===n||"false"!==n&&null,"true"===this.getAttribute("data-isfavorite"),!1),m(this)}!function(e){e.title=r.ZP.translate("Favorite");var t=e.querySelector(".button-text");t&&(t.innerHTML=e.title)}(this)},p.detachedCallback=function(){o.Z.detachedCallback&&o.Z.detachedCallback.call(this),c(this)},p.setItem=function(e){if(e){this.setAttribute("data-id",e.Id),this.setAttribute("data-serverid",e.ServerId);var t=e.UserData||{};d(this,t.Likes,t.IsFavorite),m(this)}else this.removeAttribute("data-id"),this.removeAttribute("data-serverid"),this.removeAttribute("data-likes"),this.removeAttribute("data-isfavorite"),c(this)},document.registerElement("emby-ratingbutton",{prototype:p,extends:"button"})},89562:function(e,t,n){var a=n(93476),i=n.n(a)()((function(e){return e[1]}));i.push([e.id,".appfooter{position:fixed;left:0;right:0;z-index:10;bottom:0;transition:-webkit-transform .18s linear;transition:transform .18s linear;transition:transform .18s linear,-webkit-transform .18s linear;contain:layout style}.appfooter.headroom--unpinned{-webkit-transform:translateY(100%)!important;transform:translateY(100%)!important}",""]),t.Z=i},78535:function(e,t,n){var a=n(93476),i=n.n(a)()((function(e){return e[1]}));i.push([e.id,".nowPlayingBarInfoContainer{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;height:100%;width:40%;overflow:hidden}.nowPlayingBar{text-align:center;will-change:transform;contain:layout style;transition:-webkit-transform .2s ease-out;transition:transform .2s ease-out;transition:transform .2s ease-out,-webkit-transform .2s ease-out}.nowPlayingBar-hidden{-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}.nowPlayingBarTop{display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-align-items:center;align-items:center;height:4.2em;position:relative;-webkit-justify-content:center;justify-content:center}.mediaButton,.nowPlayingBarUserDataButtons .btnUserItemRating{vertical-align:middle;margin:0;text-align:center}.mediaButton{font-size:120%}.nowPlayingBar .nowPlayingImage{background-position:50%;background-repeat:no-repeat;background-size:contain;height:70%;width:4.2em;-webkit-flex-shrink:0;flex-shrink:0}.nowPlayingBarText{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;text-align:left;font-size:92%;margin-right:1em;margin-left:.5em}.nowPlayingBarCenter,.nowPlayingBarText{vertical-align:middle;-webkit-flex-grow:1;flex-grow:1}.nowPlayingBarCenter{text-align:center;z-index:2;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center;position:absolute}.nowPlayingBarPositionContainer{position:absolute!important;left:0;top:-.56em;right:0;z-index:1}.headroom--unpinned .nowPlayingBarPositionContainer,.noMediaProgress .nowPlayingBarPositionContainer{display:none}.nowPlayingBarRight{position:relative;margin:0 .5em 0 auto;z-index:2;display:-webkit-flex;display:flex;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-align-items:center;align-items:center;-webkit-flex-shrink:0;flex-shrink:0}.nowPlayingBarCurrentTime{vertical-align:middle;text-align:center;display:inline-block;padding-left:1.5em}.nowPlayingBarVolumeSliderContainer{margin-right:2em}.nowPlayingBarUserDataButtons{display:inline-block}.nowPlayingBarPositionSlider::-webkit-slider-thumb{width:1.2em!important;height:1.2em!important}@media (max-width:70em){.nowPlayingBarRight .nowPlayingBarUserDataButtons{display:none}}@media (max-width:66em){.nowPlayingBar .btnShuffleQueue,.toggleRepeatButton{display:none!important}}@media (max-width:80em){.nowPlayingBarCenter .nowPlayingBarCurrentTime,.nowPlayingBarCenter .stopButton{display:none!important}.nowPlayingBarInfoContainer{width:45%}}.layout-desktop .nowPlayingBarRight .playPauseButton,.layout-mobile .nowPlayingBarRight button:not(.playPauseButton):not(.nextTrackButton),.layout-mobile .nowPlayingBarRight div,.layout-mobile .nowPlayingBarRight input,.layout-tv .nowPlayingBarRight .playPauseButton{display:none}@media (max-width:56em){.nowPlayingBarCenter{display:none!important}}@media (max-width:60em){.nowPlayingBarRight .nowPlayingBarVolumeSliderContainer{display:none!important}.nowPlayingBarInfoContainer{width:100%}}@media (max-width:24em){.nowPlayingBar .muteButton,.nowPlayingBar .unmuteButton{display:none}}",""]),t.Z=i}}]);