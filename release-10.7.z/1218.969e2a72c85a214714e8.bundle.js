(self.webpackChunk=self.webpackChunk||[]).push([[1218],{51218:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return S},show:function(){return w}}),a(52077),a(1203),a(90938),a(63238),a(61418);var o,i,n,r=a(1115),l=a(83094),s=a(6594),d=a(74227),c=a(78695),u=a(53754),p=(a(78066),a(50447),a(16589),a(1892)),m=a.n(p),f=a(83976),g=(m()(f.Z,{insert:"head",singleton:!1}),f.Z.locals,a(53913)),v=a(38440),h=a(83065),y=a.n(h),b=!1;function I(e){switch(s.ZP.hide(),e.target.error.code){case e.target.error.NOT_FOUND_ERR:(0,v.Z)(u.ZP.translate("MessageFileReadError"));break;case e.target.error.ABORT_ERR:break;default:(0,v.Z)(u.ZP.translate("MessageFileReadError"))}}function Z(e){var t=n;if(!t)return!1;if(!t.type.startsWith("image/"))return(0,v.Z)(u.ZP.translate("MessageImageFileTypeAllowed")),e.preventDefault(),!1;s.ZP.show();var a=l.ZP.parentWithClass(this,"dialog"),d=a.querySelector("#selectImageType").value;return"None"===d?((0,v.Z)(u.ZP.translate("MessageImageTypeNotSelected")),e.preventDefault(),!1):(g.Z.getApiClient(i).uploadItemImage(o,d,t).then((function(){a.querySelector("#uploadImage").value="",s.ZP.hide(),b=!0,r.default.close(a)})),e.preventDefault(),!1)}function w(e){return new Promise((function(t){b=!1,function(e,t){o=(e=e||{}).itemId,i=e.serverId;var a={removeOnClose:!0};c.Z.tv?a.size="fullscreen":a.size="small";var l,p=r.default.createDialog(a);p.classList.add("formDialog"),p.innerHTML=u.ZP.translateHtml(y(),"core"),c.Z.tv&&d.default.centerFocus.on(p,!1),p.addEventListener("close",(function(){c.Z.tv&&d.default.centerFocus.off(p,!1),s.ZP.hide(),t(b)})),r.default.open(p),(l=p).querySelector("form").addEventListener("submit",Z),l.querySelector("#uploadImage").addEventListener("change",(function(){!function(e,t){var a=t[0];if(!a||!a.type.match("image.*"))return e.querySelector("#imageOutput").innerHTML="",e.querySelector("#fldUpload").classList.add("hide"),void(n=null);n=a;var o,i=new FileReader;i.onerror=I,i.onloadstart=function(){e.querySelector("#fldUpload").classList.add("hide")},i.onabort=function(){s.ZP.hide(),console.debug("File read cancelled")},i.onload=(o=a,function(t){var a=['<img style="max-width:100%;max-height:100%;" src="',t.target.result,'" title="',escape(o.name),'"/>'].join("");e.querySelector("#imageOutput").innerHTML=a,e.querySelector("#dropImageText").classList.add("hide"),e.querySelector("#fldUpload").classList.remove("hide")}),i.readAsDataURL(a)}(l,this.files)})),l.querySelector(".btnBrowse").addEventListener("click",(function(){l.querySelector("#uploadImage").click()})),p.querySelector("#selectImageType").value=e.imageType||"Primary",p.querySelector(".btnCancel").addEventListener("click",(function(){r.default.close(p)}))}(e,t)}))}var S={show:w}},83976:function(e,t,a){"use strict";var o=a(93476),i=a.n(o)()((function(e){return e[1]}));i.push([e.id,".imageEditor-dropZone{border:.2em dashed;border-radius:.25em;text-align:center;position:relative;height:12em;display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center}",""]),t.Z=i},83065:function(e){e.exports='<div class="formDialogHeader"> <button is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1"><span class="material-icons arrow_back"></span></button> <h3 class="formDialogHeaderTitle"> ${HeaderUploadImage} </h3> </div> <div class="formDialogContent smoothScrollY"> <div class="dialogContentInner"> <form class="uploadItemImageForm" style="max-width:100%"> <div class="flex align-items-center" style="margin:1.5em 0"> <h2 style="margin:0">${HeaderAddUpdateImage}</h2> <button is="emby-button" type="button" class="raised raised-mini btnBrowse" style="margin-left:1.5em"> <span class="material-icons folder"></span> <span>${Browse}</span> </button> </div> <div> <div class="imageEditor-dropZone fieldDescription"> <div id="dropImageText">${LabelDropImageHere}</div> <output id="imageOutput" class="flex align-items-center justify-content-center" style="position:absolute;top:0;left:0;right:0;bottom:0;width:100%"></output> <input type="file" accept="image/*" id="uploadImage" name="uploadImage" style="position:absolute;top:0;left:0;right:0;bottom:0;width:100%;opacity:0"/> </div> <div id="fldUpload" class="hide"> <br/> <div class="selectContainer"> <select is="emby-select" id="selectImageType" name="selectImageType" label="${LabelImageType}"> <option value="None"></option> <option value="Primary">${Primary}</option> <option value="Art">${Art}</option> <option value="Backdrop">${Backdrop}</option> <option value="Banner">${Banner}</option> <option value="Box">${Box}</option> <option value="BoxRear">${BoxRear}</option> <option value="Disc">${Disc}</option> <option value="Logo">${Logo}</option> <option value="Menu">${Menu}</option> <option value="Screenshot">${Screenshot}</option> <option value="Thumb">${Thumb}</option> </select> </div> <button is="emby-button" type="submit" class="raised button-submit block"> <span>${Upload}</span> </button> </div> </div> </form> </div> </div> '}}]);