(self.webpackChunk=self.webpackChunk||[]).push([[5223],{35223:function(e,t,n){"use strict";n.r(t),n(5769),n(63238),n(61418),n(99785),n(17460),n(14078);var r=n(53754),i=n(47005),s=n(1197),o=n(6594),a=n(83094),c=n(58104),d=(n(78066),n(21865),n(12086),n(93462),n(53913)),l=n(38440),u=n(50020),g=n.n(u);function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e){var t=e.options,n=d.Z.getApiClient(t.serverId);return t.parent.querySelector(".recordingFields").classList.remove("hide"),n.getLiveTvProgram(t.programId,n.getCurrentUserId()).then((function(n){e.TimerId=n.TimerId,e.Status=n.Status,e.SeriesTimerId=n.SeriesTimerId,function(e,t,n){t.IsSeries?e.querySelector(".recordSeriesContainer").classList.remove("hide"):e.querySelector(".recordSeriesContainer").classList.add("hide"),t.SeriesTimerId?(e.querySelector(".btnManageSeriesRecording").classList.remove("hide"),e.querySelector(".seriesRecordingButton .recordingIcon").classList.add("recordingIcon-active"),e.querySelector(".seriesRecordingButton .buttonText").innerHTML=r.ZP.translate("CancelSeries")):(e.querySelector(".btnManageSeriesRecording").classList.add("hide"),e.querySelector(".seriesRecordingButton .recordingIcon").classList.remove("recordingIcon-active"),e.querySelector(".seriesRecordingButton .buttonText").innerHTML=r.ZP.translate("RecordSeries")),t.TimerId&&"Cancelled"!==t.Status?(e.querySelector(".btnManageRecording").classList.remove("hide"),e.querySelector(".singleRecordingButton .recordingIcon").classList.add("recordingIcon-active"),"InProgress"===t.Status?e.querySelector(".singleRecordingButton .buttonText").innerHTML=r.ZP.translate("StopRecording"):e.querySelector(".singleRecordingButton .buttonText").innerHTML=r.ZP.translate("DoNotRecord")):(e.querySelector(".btnManageRecording").classList.add("hide"),e.querySelector(".singleRecordingButton .recordingIcon").classList.remove("recordingIcon-active"),e.querySelector(".singleRecordingButton .buttonText").innerHTML=r.ZP.translate("Record"))}(t.parent,n)}))}function f(e,t,n){var r=this.options,i=!1;n.Id&&this.TimerId===n.Id&&(i=!0),n.ProgramId&&r&&r.programId===n.ProgramId&&(i=!0),i&&this.refresh()}function v(e,t,n){var r=this.options,i=!1;n.Id&&this.SeriesTimerId===n.Id&&(i=!0),n.ProgramId&&r&&r.programId===n.ProgramId&&(i=!0),i&&this.refresh()}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.embed();var n=f.bind(this);this.timerChangedHandler=n,i.Events.on(s.default,"TimerCreated",n),i.Events.on(s.default,"TimerCancelled",n);var r=v.bind(this);this.seriesTimerChangedHandler=r,i.Events.on(s.default,"SeriesTimerCreated",r),i.Events.on(s.default,"SeriesTimerCancelled",r)}var t,n;return t=e,(n=[{key:"embed",value:function(){var e=this;return new Promise((function(t,n){var i=e.options.parent;i.innerHTML=r.ZP.translateHtml(g(),"core"),i.querySelector(".singleRecordingButton").addEventListener("click",I.bind(e)),i.querySelector(".seriesRecordingButton").addEventListener("click",p.bind(e)),i.querySelector(".btnManageRecording").addEventListener("click",S.bind(e)),i.querySelector(".btnManageSeriesRecording").addEventListener("click",T.bind(e)),m(e).then(t)}))}},{key:"hasChanged",value:function(){return this.changed}},{key:"refresh",value:function(){m(this)}},{key:"destroy",value:function(){var e=this.timerChangedHandler;this.timerChangedHandler=null,i.Events.off(s.default,"TimerCreated",e),i.Events.off(s.default,"TimerCancelled",e);var t=this.seriesTimerChangedHandler;this.seriesTimerChangedHandler=null,i.Events.off(s.default,"SeriesTimerCreated",t),i.Events.off(s.default,"SeriesTimerCancelled",t)}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function S(e){var t=this.options;if(this.TimerId&&"Cancelled"!==this.Status){var r=this;n.e(132).then(n.bind(n,80132)).then((function(e){e.default.show(r.TimerId,t.serverId,{enableCancel:!1}).then((function(){r.changed=!0}))}))}}function T(e){var t=this.options;if(this.SeriesTimerId){var r=this;n.e(4281).then(n.bind(n,44281)).then((function(e){e.default.show(r.SeriesTimerId,t.serverId,{enableCancel:!1}).then((function(){r.changed=!0}))}))}}function I(e){this.changed=!0;var t=this,n=this.options,r=d.Z.getApiClient(n.serverId),s=!a.ZP.parentWithTag(e.target,"BUTTON").querySelector(".material-icons").classList.contains("recordingIcon-active"),l=this.TimerId&&"Cancelled"!==this.Status;s?l||(o.ZP.show(),c.default.createRecording(r,n.programId,!1).then((function(){i.Events.trigger(t,"recordingchanged"),m(t),o.ZP.hide()}))):l&&(o.ZP.show(),c.default.cancelTimer(r,this.TimerId,!0).then((function(){i.Events.trigger(t,"recordingchanged"),m(t),o.ZP.hide()})))}function p(e){this.changed=!0;var t=this,n=this.options,i=d.Z.getApiClient(n.serverId);a.ZP.parentWithTag(e.target,"BUTTON").querySelector(".material-icons").classList.contains("recordingIcon-active")?this.SeriesTimerId&&i.cancelLiveTvSeriesTimer(this.SeriesTimerId).then((function(){var e;e=r.ZP.translate("RecordingCancelled"),(0,l.Z)(e),m(t)})):(n.parent.querySelector(".recordSeriesContainer").classList.remove("hide"),this.SeriesTimerId||(this.TimerId?c.default.changeRecordingToSeries(i,this.TimerId,n.programId):c.default.createRecording(i,n.programId,!0)).then((function(){m(t)})))}t.default=b},40383:function(e,t,n){"use strict";var r=n(93476),i=n.n(r)()((function(e){return e[1]}));i.push([e.id,".recordingButton{margin-left:0;min-width:10em}.recordingIcon-active{color:#c33}.recordSeriesContainer{margin-bottom:.8em}",""]),t.Z=i},50020:function(e){e.exports='<div class="recordingFields hide"> <div class="recordSeriesContainer recordingFields-buttons flex align-items-center hide"> <div> <button is="emby-button" type="button" class="raised recordingButton seriesRecordingButton"> <span class="material-icons recordingIcon fiber_smart_record"></span> <span class="buttonText">${RecordSeries}</span> </button> </div> <button is="emby-button" type="button" class="button-flat secondaryText manageRecordingButton btnManageSeriesRecording hide"> <span class="manageButtonText">${SeriesSettings}</span> </button> </div> <div class="recordingFields-buttons flex align-items-center"> <div> <button is="emby-button" type="button" class="raised recordingButton singleRecordingButton"> <span class="material-icons recordingIcon fiber_manual_record"></span> <span class="buttonText">${Record}</span> </button> </div> <button is="emby-button" type="button" class="button-flat secondaryText manageRecordingButton btnManageRecording hide"> <span class="manageButtonText">${Settings}</span> </button> </div> </div> '},12086:function(e,t,n){"use strict";var r=n(1892),i=n.n(r),s=n(40383);i()(s.Z,{insert:"head",singleton:!1}),s.Z.locals}}]);