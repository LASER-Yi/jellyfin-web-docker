"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4231],{14231:function(e,t,a){a.r(t),a(5769),a(63238),a(61418),a(17460),a(14078),a(55849),a(19068),a(87211),a(25901),a(92189),a(95163),a(99785),a(91047);var o=a(83094),n=a(1115),r=a(6594),l=a(78695),s=a(53754),i=(a(30983),a(78066),a(21865),a(65219),a(50447),a(56561),a(16589),a(53913)),c=a(38440);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,n=function(e,t){if("object"!==u(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var o=a.call(e,t);if("object"!==u(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key,"string"),"symbol"===u(n)?n:String(n)),o)}var n}function f(e,t,o){Promise.resolve().then(a.bind(a,74227)).then((function(a){var n=o?"on":"off";a.centerFocus[n](e,t)}))}function p(e){r.ZP.show();var t=o.ZP.parentWithClass(e.target,"dialog"),a=this.options,l=i.Z.getApiClient(a.serverId),u="all"===t.querySelector("#selectMetadataRefreshMode").value,d="scan"===t.querySelector("#selectMetadataRefreshMode").value?"Default":"FullRefresh",f="FullRefresh"===d&&t.querySelector(".chkReplaceImages").checked;return a.itemIds.forEach((function(e){l.refreshItem(e,{Recursive:!0,ImageRefreshMode:d,MetadataRefreshMode:d,ReplaceAllImages:f,ReplaceAllMetadata:u})})),n.default.close(t),(0,c.Z)(s.ZP.translate("RefreshQueued")),r.ZP.hide(),e.preventDefault(),!1}var m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t}var t,a;return t=e,(a=[{key:"show",value:function(){var e={removeOnClose:!0,scrollY:!1};l.Z.tv?e.size="fullscreen":e.size="small";var t=n.default.createDialog(e);t.classList.add("formDialog");var a="";return a+='<div class="formDialogHeader">',a+='<button is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1"><span class="material-icons arrow_back"></span></button>',a+='<h3 class="formDialogHeaderTitle">',a+=s.ZP.translate("RefreshMetadata"),a+="</h3>",a+="</div>",a+=function(){var e="";return e+='<div class="formDialogContent smoothScrollY" style="padding-top:2em;">',e+='<div class="dialogContentInner dialog-content-centered">',e+='<form style="margin:auto;">',e+='<div class="fldSelectPlaylist selectContainer">',e+='<select is="emby-select" id="selectMetadataRefreshMode" label="'+s.ZP.translate("LabelRefreshMode")+'">',e+='<option value="scan">'+s.ZP.translate("ScanForNewAndUpdatedFiles")+"</option>",e+='<option value="missing">'+s.ZP.translate("SearchForMissingMetadata")+"</option>",e+='<option value="all" selected>'+s.ZP.translate("ReplaceAllMetadata")+"</option>",e+="</select>",e+="</div>",e+='<label class="checkboxContainer hide fldReplaceExistingImages">',e+='<input type="checkbox" is="emby-checkbox" class="chkReplaceImages" />',e+="<span>"+s.ZP.translate("ReplaceExistingImages")+"</span>",e+="</label>",e+='<div class="fieldDescription">',e+=s.ZP.translate("RefreshDialogHelp"),e+="</div>",e+='<input type="hidden" class="fldSelectedItemIds" />',e+="<br />",e+='<div class="formDialogFooter">',e+='<button is="emby-button" type="submit" class="raised btnSubmit block formDialogFooterItem button-submit">'+s.ZP.translate("Refresh")+"</button>",e+="</div>",e+="</form>",(e+="</div>")+"</div>"}(),t.innerHTML=a,t.querySelector("form").addEventListener("submit",p.bind(this)),t.querySelector("#selectMetadataRefreshMode").addEventListener("change",(function(){"scan"===this.value?t.querySelector(".fldReplaceExistingImages").classList.add("hide"):t.querySelector(".fldReplaceExistingImages").classList.remove("hide")})),this.options.mode&&(t.querySelector("#selectMetadataRefreshMode").value=this.options.mode),t.querySelector("#selectMetadataRefreshMode").dispatchEvent(new CustomEvent("change")),t.querySelector(".btnCancel").addEventListener("click",(function(){n.default.close(t)})),l.Z.tv&&f(t.querySelector(".formDialogContent"),!1,!0),new Promise((function(e,a){l.Z.tv&&f(t.querySelector(".formDialogContent"),!1,!1),t.addEventListener("close",e),n.default.open(t)}))}}])&&d(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=m}}]);