(self.webpackChunk=self.webpackChunk||[]).push([[5598],{35598:function(e,t,a){"use strict";a.r(t),a.d(t,{show:function(){return x},showFindNew:function(){return C}}),a(32081),a(23938),a(63238),a(61418);var r,i,o,n,l,c,s=a(1115),d=a(6594),u=a(53754),p=a(74227),v=a(78695),f=a(27515),m=a(47518),y=(a(30983),a(65219),a(21865),a(16589),a(56561),a(5100),a(53913)),h=a(38440),b=a(12034),g=a.n(b),S=!m.Z.slow&&!m.Z.edge,L=!1;function I(){return y.Z.getApiClient(o)}function k(e){var t,a,o,n={ProviderIds:{}},l=e.querySelectorAll(".identifyField");for(t=0,a=l.length;t<a;t++)(o=l[t].value)&&("number"===l[t].type&&(o=parseInt(o)),n[l[t].getAttribute("data-lookup")]=o);var p=!1,m=e.querySelectorAll(".txtLookupId");for(t=0,a=m.length;t<a;t++)(o=m[t].value)&&(p=!0),n.ProviderIds[m[t].getAttribute("data-providerkey")]=o;if(p||n.Name){n={SearchInfo:n},r&&r.Id?n.ItemId=r.Id:n.IncludeDisabledProviders=!0,d.ZP.show();var y=I();y.ajax({type:"POST",url:y.getUrl("Items/RemoteSearch/".concat(i)),data:JSON.stringify(n),contentType:"application/json",dataType:"json"}).then((function(t){d.ZP.hide(),function(e,t){var a=e.querySelector(".identificationSearchResults");e.querySelector(".popupIdentifyForm").classList.add("hide"),a.classList.remove("hide"),e.querySelector(".identifyOptionsForm").classList.add("hide"),e.querySelector(".dialogContentInner").classList.remove("dialog-content-centered");var i,o,n="";for(i=0,o=t.length;i<o;i++)n+=P(t[i],i);var l=e.querySelector(".identificationSearchResultList");function u(){var a,i=parseInt(this.getAttribute("data-index")),o=t[i];null!=r?function(e,t){var a=e.querySelector(".identifyOptionsForm");e.querySelector(".popupIdentifyForm").classList.add("hide"),e.querySelector(".identificationSearchResults").classList.add("hide"),a.classList.remove("hide"),e.querySelector("#chkIdentifyReplaceImages").checked=!0,e.querySelector(".dialogContentInner").classList.add("dialog-content-centered"),c=t;var r=[];r.push(t.Name),t.ProductionYear&&r.push(t.ProductionYear);var i=r.join("<br/>");t.ImageUrl&&(i='<div style="display:flex;align-items:center;"><img src="'.concat(t.ImageUrl,'" style="max-height:240px;" /><div style="margin-left:1em;">').concat(i,"</div>")),e.querySelector(".selectedSearchResult").innerHTML=i,f.Z.focus(a.querySelector(".btnSubmit"))}(e,o):(a=e,c=o,L=!0,d.ZP.hide(),s.default.close(a))}l.innerHTML=n;var p=l.querySelectorAll(".card");for(i=0,o=p.length;i<o;i++)p[i].addEventListener("click",u);v.Z.tv&&f.Z.autoFocus(a)}(e,t)}))}else(0,h.Z)(u.ZP.translate("PleaseEnterNameOrId"))}function P(e,t){var a,r="",o="card scalableCard";"Episode"===i?(o+=" backdropCard backdropCard-scalable",a="cardPadder-backdrop"):"MusicAlbum"===i||"MusicArtist"===i?(o+=" squareCard squareCard-scalable",a="cardPadder-square"):(o+=" portraitCard portraitCard-scalable",a="cardPadder-portrait"),v.Z.tv&&(o+=" show-focus",S&&(o+=" show-animation")),r+='<button type="button" class="'.concat(o,'" data-index="').concat(t,'">'),r+='<div class="'.concat("cardBox cardBox-bottompadded",'">'),r+='<div class="cardScalable">',r+='<div class="'.concat(a,'"></div>'),r+='<div class="cardContent searchImage">',e.ImageUrl?r+='<div class="cardImageContainer coveredImage" style="background-image:url(\''.concat(e.ImageUrl,"');\"></div>"):r+='<div class="cardImageContainer coveredImage defaultCardBackground defaultCardBackground1"><div class="cardText cardCenteredText">'.concat(e.Name,"</div></div>"),r+="</div>",r+="</div>";var n=3;"MusicAlbum"===i&&n++;var l=[e.Name];l.push(e.SearchProviderName),e.AlbumArtist&&l.push(e.AlbumArtist.Name),e.ProductionYear&&l.push(e.ProductionYear);for(var c=0;c<n;c++)r+=0===c?'<div class="cardText cardText-first cardTextCentered">':'<div class="cardText cardText-secondary cardTextCentered">',r+=l[c]||"&nbsp;",r+="</div>";return(r+="</div>")+"</button>"}function q(){d.ZP.hide(),L?n():l()}function x(e,t){return new Promise((function(a,f){n=a,l=f,o=t,L=!1,function(e){d.ZP.show();var t=I();t.getItem(t.getCurrentUserId(),e).then((function(e){i=(r=e).Type;var t={size:"small",removeOnClose:!0,scrollY:!1};v.Z.tv&&(t.size="fullscreen");var a=s.default.createDialog(t);a.classList.add("formDialog"),a.classList.add("recordingDialog");var o="";o+=u.ZP.translateHtml(g(),"core"),a.innerHTML=o,a.addEventListener("close",q),v.Z.tv&&p.default.centerFocus.on(a.querySelector(".formDialogContent"),!1),e.Path?a.querySelector(".fldPath").classList.remove("hide"):a.querySelector(".fldPath").classList.add("hide"),a.querySelector(".txtPath").innerHTML=e.Path||"",s.default.open(a),a.querySelector(".popupIdentifyForm").addEventListener("submit",(function(e){return e.preventDefault(),k(a),!1})),a.querySelector(".identifyOptionsForm").addEventListener("submit",(function(e){return e.preventDefault(),function(e){d.ZP.show();var t={ReplaceAllImages:e.querySelector("#chkIdentifyReplaceImages").checked},a=I();a.ajax({type:"POST",url:a.getUrl("Items/RemoteSearch/Apply/".concat(r.Id),t),data:JSON.stringify(c),contentType:"application/json"}).then((function(){L=!0,d.ZP.hide(),s.default.close(e)}),(function(){d.ZP.hide(),s.default.close(e)}))}(a),!1})),a.querySelector(".btnCancel").addEventListener("click",(function(){s.default.close(a)})),a.classList.add("identifyDialog"),function(e,t){var a=I();a.getJSON(a.getUrl("Items/".concat(t.Id,"/ExternalIdInfos"))).then((function(a){for(var r="",i=0,o=a.length;i<o;i++){var n=a[i],l="txtLookup".concat(n.Key);r+='<div class="inputContainer">';var c=n.Name;n.Type&&(c="".concat(n.Name," ").concat(u.ZP.translate(n.Type)));var s=u.ZP.translate("LabelDynamicExternalId",c);r+='<input is="emby-input" class="txtLookupId" data-providerkey="'.concat(n.Key,'" id="').concat(l,'" label="').concat(s,'"/>'),r+="</div>"}e.querySelector("#txtLookupName").value="","Person"===t.Type||"BoxSet"===t.Type?(e.querySelector(".fldLookupYear").classList.add("hide"),e.querySelector("#txtLookupYear").value=""):(e.querySelector(".fldLookupYear").classList.remove("hide"),e.querySelector("#txtLookupYear").value=""),e.querySelector(".identifyProviderIds").innerHTML=r,e.querySelector(".formDialogHeaderTitle").innerHTML=u.ZP.translate("Identify")}))}(a,e),d.ZP.hide()}))}(e)}))}function C(e,t,a,n){return new Promise((function(l){o=n,L=!1,function(e,t,a,o){r=null,i=a;var n={size:"small",removeOnClose:!0,scrollY:!1};v.Z.tv&&(n.size="fullscreen");var l=s.default.createDialog(n);l.classList.add("formDialog"),l.classList.add("recordingDialog");var f="";f+=u.ZP.translateHtml(g(),"core"),l.innerHTML=f,v.Z.tv&&p.default.centerFocus.on(l.querySelector(".formDialogContent"),!1),s.default.open(l),l.querySelector(".btnCancel").addEventListener("click",(function(){s.default.close(l)})),l.querySelector(".popupIdentifyForm").addEventListener("submit",(function(e){return e.preventDefault(),k(l),!1})),l.addEventListener("close",(function(){d.ZP.hide(),o(L?c:null)})),l.classList.add("identifyDialog"),function(e,t,a,r){e.querySelector("#txtLookupName").value=t,"Person"===r||"BoxSet"===r?(e.querySelector(".fldLookupYear").classList.add("hide"),e.querySelector("#txtLookupYear").value=""):(e.querySelector(".fldLookupYear").classList.remove("hide"),e.querySelector("#txtLookupYear").value=a),e.querySelector(".formDialogHeaderTitle").innerHTML=u.ZP.translate("Search")}(l,e,t,a)}(e,t,a,l)}))}t.default={show:x,showFindNew:C}},12034:function(e){e.exports='<div class="formDialogHeader"> <button is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1"> <span class="material-icons arrow_back"></span> </button> <h3 class="formDialogHeaderTitle">${Identify}</h3> </div> <div class="formDialogContent smoothScrollY"> <div class="dialogContentInner dialog-content-centered"> <form class="popupIdentifyForm" style="margin:auto"> <p>${HeaderIdentifyItemHelp}</p> <div class="padded-bottom fldPath hide"> <div>${LabelPath}</div> <div class="txtPath fieldDescription"></div> </div> <div class="inputContainer"> <input is="emby-input" type="text" id="txtLookupName" class="identifyField" data-lookup="Name" label="${LabelName}"/> </div> <div class="fldLookupYear inputContainer"> <input is="emby-input" type="number" id="txtLookupYear" class="identifyField" data-lookup="Year" pattern="[0-9]*" min="1800" label="${LabelYear}"/> </div> <div class="identifyProviderIds"></div> <div class="formDialogFooter"> <button is="emby-button" type="submit" class="raised button-submit block formDialogFooterItem"> <span>${Search}</span> </button> </div> </form> <div class="identificationSearchResults hide"> <h1>${SearchResults}</h1> <div class="identificationSearchResultList itemsContainer vertical-wrap"></div> </div> <form class="identifyOptionsForm hide" style="margin:auto"> <br/> <div class="selectedSearchResult"></div> <br/> <label class="checkboxContainer"> <input type="checkbox" is="emby-checkbox" id="chkIdentifyReplaceImages"/> <span>${ReplaceExistingImages}</span> </label> <div class="formDialogFooter"> <button is="emby-button" type="submit" class="raised button-submit block btnSubmit formDialogFooterItem"> <span>${ButtonOk}</span> </button> </div> </form> </div> </div> '}}]);