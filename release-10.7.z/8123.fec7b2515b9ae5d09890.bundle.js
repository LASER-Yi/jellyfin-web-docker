(self.webpackChunk=self.webpackChunk||[]).push([[8123],{98123:function(t,e,r){"use strict";r.r(e),r.d(e,{showEditor:function(){return w}}),r(5769),r(48410),r(32081),r(98010),r(63238),r(61013),r(61418),r(17460),r(14078),r(19068),r(87211),r(25901),r(92189),r(95163),r(99785),r(91047),r(71848);var n=r(6594),i=r(1115),a=r(83094),o=r(28046),l=r(53754),s=(r(78066),r(17734),r(21865),r(16589),r(32819),r(93462),r(38440)),d=r(56346),c=r(81128),u=r.n(c);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==b(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e);if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key,"string"),"symbol"===b(i)?i:String(i)),n)}var i}function y(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(){if(I)return!1;I=!0,n.ZP.show();var t=a.ZP.parentWithClass(this,"dlg-libraryeditor"),e=o.ZP.getLibraryOptions(t.querySelector(".libraryOptions"));return e=Object.assign(k.library.LibraryOptions||{},e),ApiClient.updateVirtualFolderOptions(k.library.ItemId,e).then((function(){Z=!0,I=!1,n.ZP.hide(),i.default.close(t)}),(function(){I=!1,n.ZP.hide()})),!1}function p(t){var e=a.ZP.parentWithClass(t.target,"listItem");if(e){var r=parseInt(e.getAttribute("data-index")),n=(k.library.LibraryOptions||{}).PathInfos||[],i=null==r?{}:n[r]||{},o=i.Path||(null==r?null:k.library.Locations[r]),c=a.ZP.parentWithClass(t.target,"btnRemovePath");if(c)return void function(t,e){var r=t,n=k.library;(0,d.Z)({title:l.ZP.translate("HeaderRemoveMediaLocation"),text:l.ZP.translate("MessageConfirmRemoveMediaLocation"),confirmText:l.ZP.translate("Delete"),primary:"delete"}).then((function(){var t=k.refresh;ApiClient.removeMediaPath(n.Name,e,t).then((function(){Z=!0,v(a.ZP.parentWithClass(r,"dlg-libraryeditor"))}),(function(){(0,s.Z)(l.ZP.translate("ErrorDefault"))}))}))}(c,o);L(a.ZP.parentWithClass(e,"dlg-libraryeditor"),o,i.NetworkPath)}}function h(t,e){var r="";return r+='<div class="listItem listItem-border lnkPath" data-index="'.concat(e,'" style="padding-left:.5em;">'),r+='<div class="'.concat(t.NetworkPath?"listItemBody two-line":"listItemBody",'">'),r+='<h3 class="listItemBodyText">',r+=t.Path,r+="</h3>",t.NetworkPath&&(r+='<div class="listItemBodyText secondary">'.concat(t.NetworkPath,"</div>")),r+="</div>",(r+='<button type="button" is="paper-icon-button-light" class="listItemButton btnRemovePath" data-index="'.concat(e,'"><span class="material-icons remove_circle"></span></button>'))+"</div>"}function v(t){ApiClient.getVirtualFolders().then((function(e){var r=e.filter((function(t){return t.Name===k.library.Name}))[0];r&&(k.library=r,g(t,k))}))}function g(t,e){var r=(e.library.LibraryOptions||{}).PathInfos||[];r.length||(r=e.library.Locations.map((function(t){return{Path:t}}))),"boxsets"===e.library.CollectionType?t.querySelector(".folders").classList.add("hide"):t.querySelector(".folders").classList.remove("hide"),t.querySelector(".folderList").innerHTML=r.map(h).join("")}function P(){L(a.ZP.parentWithClass(this,"dlg-libraryeditor"))}function L(t,e,n){r.e(3688).then(r.bind(r,63688)).then((function(r){var i=new(0,r.default);i.show({enableNetworkSharePath:!0,pathReadOnly:null!=e,path:e,networkSharePath:n,callback:function(r,n){r&&(e?function(t,e,r){var n=k.library;ApiClient.updateMediaPath(n.Name,{Path:e,NetworkPath:r}).then((function(){Z=!0,v(t)}),(function(){(0,s.Z)(l.ZP.translate("ErrorAddingMediaPathToVirtualFolder"))}))}(t,e,n):function(t,e,r){var n=k.library,i=k.refresh;ApiClient.addMediaPath(n.Name,e,r,i).then((function(){Z=!0,v(t)}),(function(){(0,s.Z)(l.ZP.translate("ErrorAddingMediaPathToVirtualFolder"))}))}(t,r,n)),i.close()}})}))}function C(){S.resolveWith(null,[Z])}var S,k,w=y((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=jQuery.Deferred();k=e,S=r,Z=!1;var n=i.default.createDialog({size:"small",modal:!1,removeOnClose:!0,scrollY:!1});return n.classList.add("dlg-libraryeditor"),n.classList.add("ui-body-a"),n.classList.add("background-theme-a"),n.classList.add("formDialog"),n.innerHTML=l.ZP.translateHtml(u()),n.querySelector(".formDialogHeaderTitle").innerHTML=e.library.Name,function(t,e){g(t,e),t.querySelector(".btnAddFolder").addEventListener("click",P),t.querySelector(".folderList").addEventListener("click",p),t.querySelector(".btnSubmit").addEventListener("click",m),o.ZP.embed(t.querySelector(".libraryOptions"),e.library.CollectionType,e.library.LibraryOptions)}(n,e),n.addEventListener("close",C),i.default.open(n),n.querySelector(".btnCancel").addEventListener("click",(function(){i.default.close(n)})),v(n),r.promise()})),Z=!1,I=!1;e.default=w},81128:function(t){t.exports='<div class="formDialogHeader"> <button type="button" is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1"><span class="material-icons arrow_back"></span></button> <h3 class="formDialogHeaderTitle"></h3> </div> <div class="formDialogContent scrollY" style="padding-top:2em"> <div class="dialogContentInner dialog-content-centered"> <div class="infoBanner" style="margin-bottom:1.8em"> ${ChangingMetadataImageSettingsNewContent} </div> <div class="folders hide"> <div style="display:flex;align-items:center"> <h1 style="margin:.5em 0">${Folders}</h1> <button is="emby-button" type="button" class="fab btnAddFolder submit" style="margin-left:1em" title="${Add}"> <span class="material-icons add"></span> </button> </div> <div class="paperList folderList" style="margin-bottom:2em"></div> </div> <div class="libraryOptions"></div> </div> </div> <div class="formDialogFooter"> <button is="emby-button" type="button" class="raised btnSubmit button-submit block formDialogFooterItem"> <span>${ButtonOk}</span> </button> </div> '}}]);