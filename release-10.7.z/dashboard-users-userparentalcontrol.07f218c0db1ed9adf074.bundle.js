"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4681],{94707:function(e,t,a){a.r(t),a(5769),a(27471),a(61013),a(98010),a(63238),a(38217),a(32081),a(61418),a(17460),a(14078),a(71848);var n=a(28469),i=a(6594),l=a(17025),r=a(53754),o=(a(17734),a(21865),a(38440));function s(e,t){var a=t.map((function(e){var t='<div class="listItem">';return t+='<div class="listItemBody">',t+='<h3 class="listItemBodyText">',t+=e,t+="</h3>",t+="</div>",(t+='<button type="button" is="paper-icon-button-light" class="blockedTag btnDeleteTag listItemButton" data-tag="'+e+'"><span class="material-icons delete"></span></button>')+"</div>"})).join("");a&&(a='<div class="paperList">'+a+"</div>");var n=$(".blockedTags",e).html(a).trigger("create");$(".btnDeleteTag",n).on("click",(function(){var a=this.getAttribute("data-tag"),n=t.filter((function(e){return e!=a}));s(e,n)}))}function c(e,t){var a="",n=0;a+=t.map((function(e){var t="";return t+='<div class="liSchedule listItem" data-day="'+e.DayOfWeek+'" data-start="'+e.StartHour+'" data-end="'+e.EndHour+'">',t+='<div class="listItemBody two-line">',t+='<h3 class="listItemBodyText">',t+=r.ZP.translate("Option"+e.DayOfWeek),t+="</h3>",t+='<div class="listItemBodyText secondary">'+u(e.StartHour)+" - "+u(e.EndHour)+"</div>",t+="</div>",t+='<button type="button" is="paper-icon-button-light" class="btnDelete listItemButton" data-index="'+n+'"><span class="material-icons delete"></span></button>',n++,t+"</div>"})).join("");var i=e.querySelector(".accessScheduleList");i.innerHTML=a,$(".btnDelete",i).on("click",(function(){!function(e,t,a){t.splice(a,1),c(e,t)}(e,t,parseInt(this.getAttribute("data-index")))}))}function u(e){var t=0,a=e%1;return a&&(t=parseInt(60*a)),n.ZP.getDisplayTime(new Date(2e3,1,1,e,t,0,0))}function d(e){return $(".liSchedule",e).map((function(){return{DayOfWeek:this.getAttribute("data-day"),StartHour:this.getAttribute("data-start"),EndHour:this.getAttribute("data-end")}})).get()}function h(e){return $(".blockedTag",e).map((function(){return this.getAttribute("data-tag")})).get()}window.UserParentalControlPage={onSubmit:function(){var e=$(this).parents(".page");i.ZP.show();var t=getParameterByName("userId");return ApiClient.getUser(t).then((function(t){!function(e,t){e.Policy.MaxParentalRating=$("#selectMaxParentalRating",t).val()||null,e.Policy.BlockUnratedItems=$(".chkUnratedItem",t).get().filter((function(e){return e.checked})).map((function(e){return e.getAttribute("data-itemtype")})),e.Policy.AccessSchedules=d(t),e.Policy.BlockedTags=h(t),ApiClient.updateUserPolicy(e.Id,e.Policy).then((function(){i.ZP.hide(),(0,o.Z)(r.ZP.translate("SettingsSaved"))}))}(t,e)})),!1}},$(document).on("pageinit","#userParentalControlPage",(function(){var e=this;$(".btnAddSchedule",e).on("click",(function(){!function(e,t,n){t=t||{},a.e(1100).then(a.bind(a,61100)).then((function(a){a.default.show({schedule:t}).then((function(t){var a=d(e);-1==n&&(n=a.length),a[n]=t,c(e,a)}))}))}(e,{},-1)})),$(".btnAddBlockedTag",e).on("click",(function(){!function(e){a.e(5506).then(a.bind(a,95506)).then((function(t){(0,t.default)({label:r.ZP.translate("LabelTag")}).then((function(t){var a=h(e);-1==a.indexOf(t)&&(a.push(t),s(e,a))}))}))}(e)})),$(".userParentalControlForm").off("submit",UserParentalControlPage.onSubmit).on("submit",UserParentalControlPage.onSubmit)})).on("pageshow","#userParentalControlPage",(function(){var e=this;i.ZP.show();var t=getParameterByName("userId"),a=ApiClient.getUser(t),n=ApiClient.getParentalRatings();Promise.all([a,n]).then((function(t){!function(e,t,a){e.querySelector(".username").innerHTML=t.Name,l.Z.setTitle(t.Name),function(e,t){var a=[{name:r.ZP.translate("Books"),value:"Book"},{name:r.ZP.translate("Channels"),value:"ChannelContent"},{name:r.ZP.translate("LiveTV"),value:"LiveTvChannel"},{name:r.ZP.translate("Movies"),value:"Movie"},{name:r.ZP.translate("Music"),value:"Music"},{name:r.ZP.translate("Trailers"),value:"Trailer"},{name:r.ZP.translate("Shows"),value:"Series"}],n="";n+='<h3 class="checkboxListLabel">'+r.ZP.translate("HeaderBlockItemsWithNoRating")+"</h3>",n+='<div class="checkboxList paperList checkboxList-paperList">';for(var i=0,l=a.length;i<l;i++){var o=a[i],s=-1!=t.Policy.BlockUnratedItems.indexOf(o.value)?' checked="checked"':"";n+='<label><input type="checkbox" is="emby-checkbox" class="chkUnratedItem" data-itemtype="'+o.value+'" type="checkbox"'+s+"><span>"+o.name+"</span></label>"}n+="</div>",$(".blockUnratedItems",e).html(n).trigger("create")}(e,t),s(e,t.Policy.BlockedTags),function(e,t){var a,n="";n+="<option value=''></option>";for(var i=[],l=0,r=e.length;l<r;l++){if(a=e[l],i.length){var o=i[i.length-1];if(o.Value===a.Value){o.Name+="/"+a.Name;continue}}i.push({Name:a.Name,Value:a.Value})}for(var s=0,c=i.length;s<c;s++)n+="<option value='"+(a=i[s]).Value+"'>"+a.Name+"</option>";$("#selectMaxParentalRating",t).html(n)}(a,e);var n="";if(t.Policy.MaxParentalRating)for(var o=0,u=a.length;o<u;o++){var d=a[o];t.Policy.MaxParentalRating>=d.Value&&(n=d.Value)}$("#selectMaxParentalRating",e).val(n),t.Policy.IsAdministrator?$(".accessScheduleSection",e).hide():$(".accessScheduleSection",e).show(),c(e,t.Policy.AccessSchedules||[]),i.ZP.hide()}(e,t[0],t[1])}))}))}}]);