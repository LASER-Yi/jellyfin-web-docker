"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6810],{83178:function(e,t,n){n.r(t),n(27471),n(61013),n(32081),n(43512),n(98010),n(63238),n(72410),n(15610),n(17460),n(52077),n(25901),n(92189),n(91047),n(5769),n(14078),n(71848);var c=n(6594),o=n(17025),i=n(53754),l=n(76543),r=n(38440);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var c=0,o=function(){};return{s:o,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){r=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(r)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,c=new Array(t);n<t;n++)c[n]=e[n];return c}function d(){var e=$(this).parents(".page")[0];return c.ZP.show(),h().then((function(t){!function(e,t){e.Name=$("#txtUserName",t).val(),e.Policy.IsAdministrator=$("#chkIsAdmin",t).is(":checked"),e.Policy.IsHidden=$("#chkIsHidden",t).is(":checked"),e.Policy.IsDisabled=$("#chkDisabled",t).is(":checked"),e.Policy.EnableRemoteControlOfOtherUsers=$("#chkEnableRemoteControlOtherUsers",t).is(":checked"),e.Policy.EnableLiveTvManagement=$("#chkManageLiveTv",t).is(":checked"),e.Policy.EnableLiveTvAccess=$("#chkEnableLiveTvAccess",t).is(":checked"),e.Policy.EnableSharedDeviceControl=$("#chkRemoteControlSharedDevices",t).is(":checked"),e.Policy.EnableMediaPlayback=$("#chkEnableMediaPlayback",t).is(":checked"),e.Policy.EnableAudioPlaybackTranscoding=$("#chkEnableAudioPlaybackTranscoding",t).is(":checked"),e.Policy.EnableVideoPlaybackTranscoding=$("#chkEnableVideoPlaybackTranscoding",t).is(":checked"),e.Policy.EnablePlaybackRemuxing=$("#chkEnableVideoPlaybackRemuxing",t).is(":checked"),e.Policy.ForceRemoteSourceTranscoding=$("#chkForceRemoteSourceTranscoding",t).is(":checked"),e.Policy.EnableContentDownloading=$("#chkEnableDownloading",t).is(":checked"),e.Policy.EnableRemoteAccess=$("#chkRemoteAccess",t).is(":checked"),e.Policy.RemoteClientBitrateLimit=parseInt(1e6*parseFloat($("#txtRemoteClientBitrateLimit",t).val()||"0")),e.Policy.LoginAttemptsBeforeLockout=parseInt($("#txtLoginAttemptsBeforeLockout",t).val()||"0"),e.Policy.MaxActiveSessions=parseInt($("#txtMaxActiveSessions",t).val()||"0"),e.Policy.AuthenticationProviderId=t.querySelector(".selectLoginProvider").value,e.Policy.PasswordResetProviderId=t.querySelector(".selectPasswordResetProvider").value,e.Policy.EnableContentDeletion=$("#chkEnableDeleteAllFolders",t).is(":checked"),e.Policy.EnableContentDeletionFromFolders=e.Policy.EnableContentDeletion?[]:$(".chkFolder",t).get().filter((function(e){return e.checked})).map((function(e){return e.getAttribute("data-id")})),ApiClient.isMinServerVersion("10.6.0")&&(e.Policy.SyncPlayAccess=t.querySelector("#selectSyncPlayAccess").value),ApiClient.updateUser(e).then((function(){ApiClient.updateUserPolicy(e.Id,e.Policy).then((function(){l.ZP.navigate("userprofiles.html"),c.ZP.hide(),(0,r.Z)(i.ZP.translate("SettingsSaved"))}))}))}(t,e)})),!1}function h(){var e=getParameterByName("userId");return ApiClient.getUser(e)}$(document).on("pageinit","#editUserPage",(function(){$(".editUserProfileForm").off("submit",d).on("submit",d);var e=this;$("#chkEnableDeleteAllFolders",this).on("change",(function(){this.checked?$(".deleteAccess",e).hide():$(".deleteAccess",e).show()})),ApiClient.getServerConfiguration().then((function(t){t.EnableRemoteAccess?e.querySelector(".fldRemoteAccess").classList.remove("hide"):e.querySelector(".fldRemoteAccess").classList.add("hide")}))})).on("pagebeforeshow","#editUserPage",(function(){var e;e=this,c.ZP.show(),h().then((function(t){!function(e,t){ApiClient.getJSON(ApiClient.getUrl("Auth/Providers")).then((function(n){!function(e,t,n){n.length>1?e.querySelector(".fldSelectLoginProvider").classList.remove("hide"):e.querySelector(".fldSelectLoginProvider").classList.add("hide");var c=t.Policy.AuthenticationProviderId;e.querySelector(".selectLoginProvider").innerHTML=n.map((function(e){var t=e.Id===c||n.length<2?" selected":"";return'<option value="'+e.Id+'"'+t+">"+e.Name+"</option>"}))}(e,t,n)})),ApiClient.getJSON(ApiClient.getUrl("Auth/PasswordResetProviders")).then((function(n){!function(e,t,n){n.length>1?e.querySelector(".fldSelectPasswordResetProvider").classList.remove("hide"):e.querySelector(".fldSelectPasswordResetProvider").classList.add("hide");var c=t.Policy.PasswordResetProviderId;e.querySelector(".selectPasswordResetProvider").innerHTML=n.map((function(e){var t=e.Id===c||n.length<2?" selected":"";return'<option value="'+e.Id+'"'+t+">"+e.Name+"</option>"}))}(e,t,n)})),ApiClient.getJSON(ApiClient.getUrl("Library/MediaFolders",{IsHidden:!1})).then((function(n){!function(e,t,n){ApiClient.getJSON(ApiClient.getUrl("Channels",{SupportsMediaDeletion:!0})).then((function(c){var o,i,l="",r=a(n);try{for(r.s();!(i=r.n()).done;){var s=i.value;o=t.Policy.EnableContentDeletion||-1!=t.Policy.EnableContentDeletionFromFolders.indexOf(s.Id)?' checked="checked"':"",l+='<label><input type="checkbox" is="emby-checkbox" class="chkFolder" data-id="'+s.Id+'" '+o+"><span>"+s.Name+"</span></label>"}}catch(e){r.e(e)}finally{r.f()}var d,h=a(c.Items);try{for(h.s();!(d=h.n()).done;){var u=d.value;o=t.Policy.EnableContentDeletion||-1!=t.Policy.EnableContentDeletionFromFolders.indexOf(u.Id)?' checked="checked"':"",l+='<label><input type="checkbox" is="emby-checkbox" class="chkFolder" data-id="'+u.Id+'" '+o+"><span>"+u.Name+"</span></label>"}}catch(e){h.e(e)}finally{h.f()}$(".deleteAccess",e).html(l).trigger("create"),$("#chkEnableDeleteAllFolders",e).prop("checked",t.Policy.EnableContentDeletion)}))}(e,t,n.Items)})),t.Policy.IsDisabled?$(".disabledUserBanner",e).show():$(".disabledUserBanner",e).hide(),$("#txtUserName",e).prop("disabled","").removeAttr("disabled"),$("#fldConnectInfo",e).show(),$(".lnkEditUserPreferences",e).attr("href","mypreferencesmenu.html?userId="+t.Id),o.Z.setTitle(t.Name),e.querySelector(".username").innerHTML=t.Name,$("#txtUserName",e).val(t.Name),$("#chkIsAdmin",e).prop("checked",t.Policy.IsAdministrator),$("#chkDisabled",e).prop("checked",t.Policy.IsDisabled),$("#chkIsHidden",e).prop("checked",t.Policy.IsHidden),$("#chkRemoteControlSharedDevices",e).prop("checked",t.Policy.EnableSharedDeviceControl),$("#chkEnableRemoteControlOtherUsers",e).prop("checked",t.Policy.EnableRemoteControlOfOtherUsers),$("#chkEnableDownloading",e).prop("checked",t.Policy.EnableContentDownloading),$("#chkManageLiveTv",e).prop("checked",t.Policy.EnableLiveTvManagement),$("#chkEnableLiveTvAccess",e).prop("checked",t.Policy.EnableLiveTvAccess),$("#chkEnableMediaPlayback",e).prop("checked",t.Policy.EnableMediaPlayback),$("#chkEnableAudioPlaybackTranscoding",e).prop("checked",t.Policy.EnableAudioPlaybackTranscoding),$("#chkEnableVideoPlaybackTranscoding",e).prop("checked",t.Policy.EnableVideoPlaybackTranscoding),$("#chkEnableVideoPlaybackRemuxing",e).prop("checked",t.Policy.EnablePlaybackRemuxing),$("#chkForceRemoteSourceTranscoding",e).prop("checked",t.Policy.ForceRemoteSourceTranscoding),$("#chkRemoteAccess",e).prop("checked",null==t.Policy.EnableRemoteAccess||t.Policy.EnableRemoteAccess),$("#txtRemoteClientBitrateLimit",e).val(t.Policy.RemoteClientBitrateLimit/1e6||""),$("#txtLoginAttemptsBeforeLockout",e).val(t.Policy.LoginAttemptsBeforeLockout||"0"),$("#txtMaxActiveSessions",e).val(t.Policy.MaxActiveSessions||"0"),ApiClient.isMinServerVersion("10.6.0")&&$("#selectSyncPlayAccess").val(t.Policy.SyncPlayAccess),c.ZP.hide()}(e,t)}))}))}}]);