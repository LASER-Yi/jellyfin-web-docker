"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2016],{661:function(e,t,n){n.r(t),n.d(t,{default:function(){return J}}),n(5769),n(63238),n(61418),n(17460),n(14078),n(20266),n(52077),n(911),n(23938),n(27471),n(61370),n(61013),n(32081),n(43512);var i=n(65009),a=n.n(i),r=n(53218),s=n(8782),o=n(47518),l=n(83094),c=n(12392),d=n(5099),u=n(28469),f=n(71616),m=n(70294),p=n(27515),b=n(47005),v=n(44614),h=n(94389),g=n(78695),y=n(28978),w=n(74783),k=(n(87201),n(61022),n(21865),n(1892)),S=n.n(k),P=n(95760),T=n.n(P),x=n(38311),L=n.n(x),O=n(58192),E=n.n(O),C=n(38060),Z=n.n(C),q=n(54865),I=n.n(q),M=n(79993),F={};F.styleTagTransform=I(),F.setAttributes=E(),F.insert=L().bind(null,"head"),F.domAPI=T(),F.insertStyleElement=Z(),S()(M.Z,F),M.Z&&M.Z.locals&&M.Z.locals;var D,B,R,H,A,N=n(53913),_=n(29856),K=(n(1203),n(76056),n(99785),n(34988)),V={};function z(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function U(e){var t=document.createElement("div");document.body.appendChild(t),t.innerHTML='<div class="subtitleSync"> <div class="subtitleSyncContainer"> <button type="button" is="paper-icon-button-light" class="subtitleSync-closeButton"><span class="material-icons close" aria-hidden="true"></span></button> <div class="subtitleSyncTextField" contenteditable="true" spellcheck="false">0s</div> <div class="sliderContainer subtitleSyncSliderContainer"> <input is="emby-slider" type="range" step=".1" min="0" max="100" value="50" class="subtitleSyncSlider" data-slider-keep-progress="true"/> </div> </div> </div> ',B=t.querySelector(".subtitleSyncSlider"),R=t.querySelector(".subtitleSyncTextField"),H=t.querySelector(".subtitleSync-closeButton"),A=t.querySelector(".subtitleSyncContainer"),g.Z.tv&&(B.classList.add("focusable"),setTimeout((function(){B.enableKeyboardDragging()}),0)),A.classList.add("hide"),R.updateOffset=function(e){this.textContent=e+"s"},R.addEventListener("click",(function(){this.hasFocus=!0})),R.addEventListener("keydown",(function(e){if("Enter"===e.key){var t=/[-+]?\d+\.?\d*/g.exec(this.textContent);t?(t=t[0],t=parseFloat(t),t=Math.min(30,Math.max(-30,t)),this.textContent=t+"s",r.O.setSubtitleOffset(t,D),B.updateOffset((n=t/30,n*=50,n+=50,Math.min(100,Math.max(0,n.toFixed(1)))))):this.textContent=(r.O.getPlayerSubtitleOffset(D)||0)+"s",this.hasFocus=!1,e.preventDefault()}else this.hasFocus=!0,null===e.key.match(/[+-\d.s]/)&&e.preventDefault();var n;e.stopPropagation()})),R.blur=function(){!this.hasFocus&&this.prototype&&this.prototype.blur()},B.updateOffset=function(e){this.value=void 0===e?50:e},B.addEventListener("change",(function(){r.O.setSubtitleOffset(j(this.value),D),R.updateOffset(j(this.value))})),B.getBubbleHtml=function(e){var t=j(e);return'<h1 class="sliderBubbleText">'+(t>0?"+":"")+parseFloat(t)+"s</h1>"},H.addEventListener("click",(function(){r.O.disableShowingSubtitleOffset(D),W.prototype.toggle("forceToHide")})),e.element=t}function j(e){var t=(e-50)/50;return(t*=30).toFixed(1)}V.styleTagTransform=I(),V.setAttributes=E(),V.insert=L().bind(null,"head"),V.domAPI=T(),V.insertStyleElement=Z(),S()(K.Z,V),K.Z&&K.Z.locals&&K.Z.locals;var W=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),D=t,U(this)}var t,n;return t=e,(n=[{key:"destroy",value:function(){e.prototype.toggle("forceToHide"),D&&(r.O.disableShowingSubtitleOffset(D),r.O.setSubtitleOffset(0,D));var t=this.element;t&&(t.parentNode.removeChild(t),this.element=null)}},{key:"toggle",value:function(e){if(D&&r.O.supportSubtitleOffset(D))switch(e){case void 0:if(r.O.isShowingSubtitleOffsetEnabled(D)&&r.O.canHandleOffsetOnCurrentSubtitle(D)){r.O.getPlayerSubtitleOffset(D)||R.hasFocus||(B.value="50",R.textContent="0s",r.O.setSubtitleOffset(0,D)),A.classList.remove("hide");break}case"hide":if(R.hasFocus)break;case"forceToHide":A.classList.add("hide")}}}])&&z(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),G=W,X=n(86628);function Y(){return document.querySelector(".dialogContainer .dialog.opened")}function J(e){function t(t){if(!t||"Program"!==t.Type)return Z&&(Z.destroy(),Z=null),void e.querySelector(".btnRecord").classList.add("hide");N.Z.getApiClient(t.ServerId).getCurrentUser().then((function(i){i.Policy.EnableLiveTvManagement&&n.e(3989).then(n.bind(n,63989)).then((function(n){var i=n.default;Z?Z.refreshItem(t):(Z=new i({item:t,button:e.querySelector(".btnRecord")}),e.querySelector(".btnRecord").classList.remove("hide"))}))}))}function i(n){var i=n.originalItem;C=i;var a=n.displayItem||i;t(a);var r=a.SeriesName||a.Album;(a.EpisodeTitle||a.IsSeries)&&(r=a.Name),function(e,t){var n=f.ZP.getDisplayName(e,{includeParentInfo:"Program"!==e.Type,includeIndexNumber:"Program"!==e.Type});n&&t&&(n="".concat(t," - ").concat(n)),n||(n=t||""),X.appRouter.setTitle(n);var i=t||(e?e.Name:null);i&&(document.title=i)}(a,r);var s=e.querySelector(".osdSecondaryMediaInfo"),o=m.ZP.getSecondaryMediaInfoHtml(a,{startDate:!1,programTime:!1});s.innerHTML=o,o?s.classList.remove("hide"):s.classList.add("hide"),q?(S(Ve,a.StartDate),S(ze,a.EndDate),Ve.classList.remove("hide"),ze.classList.remove("hide"),De=a.StartDate?u.ZP.parseISO8601Date(a.StartDate).getTime():0,Be=a.EndDate?u.ZP.parseISO8601Date(a.EndDate).getTime():0):(Ve.classList.add("hide"),ze.classList.add("hide"),Ve.innerHTML="",ze.innerHTML="",De=0,Be=0)}function k(e,t){return t?u.ZP.toLocaleTimeString(e,{hour:"numeric",minute:"2-digit",second:"2-digit"}).toLowerCase().replace("am","").replace("pm","").trim():u.ZP.getDisplayTime(e).toLowerCase().replace("am","").replace("pm","").trim()}function S(e,t){var n;t&&(n=k(t=u.ZP.parseISO8601Date(t))),e.innerHTML=n||""}var P,T,x,L,O,E,C,Z,q,I,M,F,D,B=!1;function R(){Xe.classList.remove("osdHeader-hidden"),function(){if(!I){var e=Ye;I="osd",K(e),e.classList.remove("hide"),e.classList.remove("videoOsdBottom-hidden"),g.Z.mobile||setTimeout((function(){p.Z.focus(e.querySelector(".btnPause"))}),50),ye()}}(),z()}function H(){Xe.classList.add("osdHeader-hidden"),function(){if("osd"===I){var e=Ye;K(e),e.classList.add("videoOsdBottom-hidden"),l.ZP.addEventListener(e,Ge,V,{once:!0}),I=null,ye("hide"),document.activeElement&&document.activeElement.blur()}}(),d.ZP.hideCursor()}function A(){F&&(clearTimeout(F),F=null)}function K(e){l.ZP.removeEventListener(e,Ge,V,{once:!0})}function V(e){var t=e.target;t==Ye&&(t.classList.add("hide"),l.ZP.removeEventListener(t,Ge,V,{once:!0}))}function z(){!I||B||Y()?A():(A(),F=setTimeout(H,3e3))}function U(e){if("mouse"===(e.pointerType||(g.Z.mobile?"touch":"mouse"))){var t=e.screenX||e.clientX||0,n=e.screenY||e.clientY||0,i=D;if(!i)return void(D={x:t,y:n});if(Math.abs(t-i.x)<10&&Math.abs(n-i.y)<10)return;i.x=t,i.y=n,R()}}function j(t){var n,i=x;switch(t.detail.command){case"left":"osd"===I?R():I||(t.preventDefault(),r.O.rewind(i));break;case"right":"osd"===I?R():I||(t.preventDefault(),r.O.fastForward(i));break;case"pageup":r.O.nextChapter(i);break;case"pagedown":r.O.previousChapter(i);break;case"up":case"down":case"select":case"menu":case"info":case"play":case"playpause":case"pause":case"fastforward":case"rewind":case"next":case"previous":R();break;case"record":(n=e.querySelector(".btnRecord")).classList.contains("hide")||n.click(),R();break;case"togglestats":he();break;case"back":"osd"!==I||Y()||(H(),t.preventDefault())}}function W(){var t,n;!x.forcedFullscreen||r.O.isFullscreen(x)?((n=(t=e.querySelector(".btnFullscreen")).querySelector(".material-icons")).classList.remove("fullscreen_exit","fullscreen"),r.O.isFullscreen(x)?(t.setAttribute("title",v.ZP.translate("ExitFullscreen")+" (f)"),n.classList.add("fullscreen_exit")):(t.setAttribute("title",v.ZP.translate("Fullscreen")+" (f)"),n.classList.add("fullscreen"))):X.appRouter.back()}function J(){oe(r.O.getCurrentPlayer())}function Q(n,a){var s,o;a.NowPlayingItem&&(E=!0,function(n,a,s){var o=s.PlayState||{};ue(o.IsPaused);var l=r.O.getSupportedCommands(a);Ie=l,pe(a,o.IsMuted,o.VolumeLevel),Ne&&!Ne.dragging&&(Ne.disabled=!o.CanSeek),We.disabled=!o.CanSeek,je.disabled=!o.CanSeek;var c=s.NowPlayingItem||{};Re=o.PlaybackStartTimeTicks,me(o.PositionTicks,c.RunTimeTicks,o.PlaybackStartTimeTicks,o.PlaybackRate,o.BufferedRanges||[]),function(n,a){var s,o=a.NowPlayingItem;if(C=o,!o)return t(null),X.appRouter.setTitle(""),He.disabled=!0,Ne.disabled=!0,We.disabled=!0,je.disabled=!0,e.querySelector(".btnSubtitles").classList.add("hide"),e.querySelector(".btnAudio").classList.add("hide"),e.querySelector(".osdTitle").innerHTML="",void(e.querySelector(".osdMediaInfo").innerHTML="");q=function(e){return!("TvChannel"!==e.Type||!e.CurrentProgram)}(o),function(e){if("TvChannel"===e.Type){var t=N.Z.getApiClient(e.ServerId);return t.getItem(t.getCurrentUserId(),e.Id).then((function(e){return{originalItem:e,displayItem:e.CurrentProgram}}))}return Promise.resolve({originalItem:e})}(o).then(i),He.disabled=!1,Ne.disabled=!1,We.disabled=!1,je.disabled=!1,r.O.subtitleTracks(n).length?(e.querySelector(".btnSubtitles").classList.remove("hide"),ye()):(e.querySelector(".btnSubtitles").classList.add("hide"),ye("forceToHide")),r.O.audioTracks(n).length>1?e.querySelector(".btnAudio").classList.remove("hide"):e.querySelector(".btnAudio").classList.add("hide"),(null===(s=C.Chapters)||void 0===s?void 0:s.length)>1?(e.querySelector(".btnPreviousChapter").classList.remove("hide"),e.querySelector(".btnNextChapter").classList.remove("hide")):(e.querySelector(".btnPreviousChapter").classList.add("hide"),e.querySelector(".btnNextChapter").classList.add("hide"))}(a,s);var d=s.MediaSource&&null==s.MediaSource.RunTimeTicks;Ne.setIsClear(d),c.RunTimeTicks&&Ne.setKeyboardSteps(1e6*y.skipBackLength()/c.RunTimeTicks,1e6*y.skipForwardLength()/c.RunTimeTicks),-1===l.indexOf("ToggleFullscreen")||a.isLocalPlayer&&g.Z.tv&&r.O.isFullscreen(a)?e.querySelector(".btnFullscreen").classList.add("hide"):e.querySelector(".btnFullscreen").classList.remove("hide"),-1===l.indexOf("PictureInPicture")?e.querySelector(".btnPip").classList.add("hide"):e.querySelector(".btnPip").classList.remove("hide"),-1===l.indexOf("AirPlay")?e.querySelector(".btnAirPlay").classList.add("hide"):e.querySelector(".btnAirPlay").classList.remove("hide"),W()}(0,this,a),s=e.querySelector(".btnPreviousTrack"),o=e.querySelector(".btnNextTrack"),s.classList.remove("hide"),o.classList.remove("hide"),o.disabled=!1,s.disabled=!1,!0,e.removeEventListener("viewbeforehide",Ce),r.O.isPlayingVideo(x)&&e.addEventListener("viewbeforehide",Ce),function(e){var t=sessionStorage.getItem("playbackRateSpeed");null!==t&&e.setPlaybackRate(t)}(this))}function $(){E&&ue(this.paused())}function ee(){if(E){var e=this;pe(e,e.isMuted(),e.getVolume())}}function te(e,t){console.debug("nowplaying event: "+e.type),Q.call(this,e,t),ne()}function ne(){L=!1,O&&(O.destroy(),O=null)}function ie(t,n){Me=null,ne(),console.debug("nowplaying event: "+t.type),"Video"!==n.NextMediaType&&(e.removeEventListener("viewbeforehide",Ce),X.appRouter.back())}function ae(){var e=r.O.getPlayerState(this);Q.call(this,{type:"init"},e)}function re(){document.querySelector(".osdMediaStatus").classList.remove("hide")}function se(){document.querySelector(".osdMediaStatus").classList.add("hide")}function oe(e){if(e===x||(le(),x=e,e)){var t=r.O.getPlayerState(e);Q.call(e,{type:"init"},t),b.Events.on(e,"playbackstart",te),b.Events.on(e,"playbackstop",ie),b.Events.on(e,"volumechange",ee),b.Events.on(e,"pause",$),b.Events.on(e,"unpause",$),b.Events.on(e,"timeupdate",ce),b.Events.on(e,"fullscreenchange",W),b.Events.on(e,"mediastreamschange",ae),b.Events.on(e,"beginFetch",re),b.Events.on(e,"endFetch",se),ne(),e.isFetching&&re()}}function le(){ge(),we(),ne();var e=x;e&&(b.Events.off(e,"playbackstart",te),b.Events.off(e,"playbackstop",ie),b.Events.off(e,"volumechange",ee),b.Events.off(e,"pause",$),b.Events.off(e,"unpause",$),b.Events.off(e,"timeupdate",ce),b.Events.off(e,"fullscreenchange",W),b.Events.off(e,"mediastreamschange",ae),x=null)}function ce(){if(E&&C){var t=(new Date).getTime();if(!(t-Fe<700)){Fe=t;var i=this;Me=r.O.duration(i);var a=1e4*r.O.currentTime(i);me(a,Me,r.O.playbackStartTime(i),r.O.getPlaybackRate(i),r.O.getBufferedRanges(i));var s=C;!function(e,t){if("TvChannel"===t.Type){var n=t.CurrentProgram;if(n&&n.EndDate)try{var i=u.ZP.parseISO8601Date(n.EndDate);if((new Date).getTime()>=i.getTime()){console.debug("program info needs to be refreshed");var a=r.O.getPlayerState(e);Q.call(e,{type:"init"},a)}}catch(e){console.error("error parsing date: "+n.EndDate)}}}(i,s),function(t,i,a,s){s&&a&&!L&&!I&&"Episode"===i.Type&&y.enableNextVideoInfoOverlay()&&a>=s-1e3*(s>=3e10?40:s>=24e9?35:30)*1e4&&s>=6e9&&s-a>=2e8&&function(t){n.e(3651).then(n.bind(n,13651)).then((function(n){var i=n.default;I||O||(I="upnext",L=!0,r.O.nextItem(t).then((function(n){O=new i({parent:e.querySelector(".upNextContainer"),player:t,nextItem:n}),b.Events.on(O,"hide",de)}),de))}))}(t)}(i,s,a,Me)}}}function de(){"upnext"===I&&(I=null)}function ue(t){var n,i,a=e.querySelector(".btnPause"),r=a.querySelector(".material-icons");r.classList.remove("play_arrow","pause"),t?(n="play_arrow",i=v.ZP.translate("Play")):(n="pause",i=v.ZP.translate("ButtonPause")),r.classList.add(n),l.ZP.setElementTitle(a,i+" (k)",i)}function fe(e,t,n){return(n-e)/t*100}function me(e,t,n,i,a){if(q){if(Ne&&!Ne.dragging)if(De&&Be){var r=(n+(e||0))/1e4,s=Be-De;if(Ne.value=fe(De,s,r),a.length){var o=fe(De,s,(n+(a[0].start||0))/1e4),l=fe(De,s,(n+(a[0].end||0))/1e4);Ne.setBufferedRanges([{start:o,end:l}])}else Ne.setBufferedRanges([])}else Ne.value=0,Ne.setBufferedRanges([]);_e.innerHTML="",Ke.innerHTML=""}else{if(Ne&&!Ne.dragging){if(t){var c=e/t;c*=100,Ne.value=c}else Ne.value=0;t&&null!=e&&Me&&!q&&C.RunTimeTicks&&"Recording"!==C.Type&&null!==i?Ue.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;"+m.ZP.getEndsAtFromPosition(t,e,i,!0):Ue.innerHTML=""}Ne&&Ne.setBufferedRanges(a,t,e),e>=0?(be(_e,e),_e.classList.remove("hide")):_e.classList.add("hide");var d=t-e;d>=0?(be(Ke,d),Ke.classList.remove("hide")):_e.classList.add("hide")}}function pe(t,n,i){var a=Ie,r=!0,s=!0;-1===a.indexOf("Mute")&&(r=!1),-1===a.indexOf("SetVolume")&&(s=!1),t.isLocalPlayer&&h.M.supports("physicalvolumecontrol")&&(r=!1,s=!1);var o=e.querySelector(".buttonMute"),l=o.querySelector(".material-icons");l.classList.remove("volume_off","volume_up"),n?(o.setAttribute("title",v.ZP.translate("Unmute")+" (m)"),l.classList.add("volume_off")):(o.setAttribute("title",v.ZP.translate("Mute")+" (m)"),l.classList.add("volume_up")),r?o.classList.remove("hide"):o.classList.add("hide"),He&&(s?Ae.classList.remove("hide"):Ae.classList.add("hide"),He.dragging||(He.value=i||0))}function be(e,t,n){if(null!=t){var i=u.ZP.getDisplayRunningTime(t);n&&(i="&nbsp;/&nbsp;"+i),e.innerHTML=i}else e.innerHTML=""}function ve(e){if("stats"===e)he();else if("suboffset"===e){var t=x;t&&(r.O.enableShowingSubtitleOffset(t),ye())}}function he(){n.e(1392).then(n.bind(n,1392)).then((function(e){var t=e.default,n=x;n&&(M?M.toggle():M=new t({player:n}))}))}function ge(){M&&(M.destroy(),M=null)}function ye(e){var t=x;Ze?Ze.toggle(e):t&&(Ze=new G(t))}function we(){Ze&&(Ze.destroy(),Ze=null)}function ke(e){if(!e.target.contains(P))return e.preventDefault(),e.stopPropagation(),!1}function Se(e){P=e.target;var t=w.ZP.getKeyName(e),n=e.ctrlKey||e.altKey||e.metaKey;if(32===e.keyCode)return"BUTTON"===e.target.tagName&&g.Z.tv||(r.O.playPause(x),e.preventDefault(),e.stopPropagation(),P=null),void R();if(g.Z.tv&&w.ZP.isNavigationKey(t))R();else switch(t){case"Enter":R();break;case"Escape":case"Back":"osd"!==I||Y()||(H(),e.stopPropagation());break;case"k":r.O.playPause(x),R();break;case"ArrowUp":case"Up":r.O.volumeUp(x);break;case"ArrowDown":case"Down":r.O.volumeDown(x);break;case"l":case"ArrowRight":case"Right":r.O.fastForward(x),R();break;case"j":case"ArrowLeft":case"Left":r.O.rewind(x),R();break;case"f":e.ctrlKey||e.metaKey||(r.O.toggleFullscreen(x),R());break;case"m":r.O.toggleMute(x),R();break;case"p":case"P":e.shiftKey&&r.O.previousTrack(x);break;case"n":case"N":e.shiftKey&&r.O.nextTrack(x);break;case"NavigationLeft":case"GamepadDPadLeft":case"GamepadLeftThumbstickLeft":document.hasFocus()&&(r.O.rewind(x),R());break;case"NavigationRight":case"GamepadDPadRight":case"GamepadLeftThumbstickRight":document.hasFocus()&&(r.O.fastForward(x),R());break;case"Home":r.O.seekPercent(0,x);break;case"End":r.O.seekPercent(100,x);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(!n){var i=10*parseInt(t,10);r.O.seekPercent(i,x)}break;case">":r.O.increasePlaybackRate(x);break;case"<":r.O.decreasePlaybackRate(x);break;case"PageUp":r.O.nextChapter(x);break;case"PageDown":r.O.previousChapter(x)}}function Pe(){z()}function Te(e){P=e.target,B=!0,z()}function xe(){B=!1,z()}function Le(e){P=e.target,B=!0,z()}function Oe(){B=!1,z()}function Ee(){B=!1,z()}function Ce(){if(r.O.isPlayingVideo()){_.Z.disableFullscreen(),clearTimeout(T);var t=x;e.removeEventListener("viewbeforehide",Ce),le(),r.O.stop(t)}}_.Z.enableFullscreen();var Ze,qe=this,Ie=[],Me=0,Fe=0,De=0,Be=0,Re=0,He=e.querySelector(".osdVolumeSlider"),Ae=e.querySelector(".osdVolumeSliderContainer"),Ne=e.querySelector(".osdPositionSlider"),_e=e.querySelector(".osdPositionText"),Ke=e.querySelector(".osdDurationText"),Ve=e.querySelector(".startTimeText"),ze=e.querySelector(".endTimeText"),Ue=e.querySelector(".endsAtText"),je=e.querySelector(".btnRewind"),We=e.querySelector(".btnFastForward"),Ge=l.ZP.whichTransitionEvent(),Xe=document.querySelector(".skinHeader"),Ye=document.querySelector(".videoOsdBottom-maincontrols");Ne.enableKeyboardDragging(),He.enableKeyboardDragging(),g.Z.tv&&Ne.classList.add("focusable"),e.addEventListener("viewbeforeshow",(function(){Xe.classList.add("osdHeader"),X.appRouter.setTransparency("full")})),e.addEventListener("viewshow",(function(){try{b.Events.on(r.O,"playerchange",J),oe(r.O.getCurrentPlayer()),l.ZP.addEventListener(document,window.PointerEvent?"pointermove":"mousemove",U,{passive:!0}),R(),c.default.on(window,j),document.addEventListener("keydown",Se),l.ZP.addEventListener(document,"keydown",Pe,{capture:!0,passive:!0}),l.ZP.addEventListener(window,window.PointerEvent?"pointerdown":"mousedown",Te,{capture:!0,passive:!0}),l.ZP.addEventListener(window,window.PointerEvent?"pointerup":"mouseup",xe,{capture:!0,passive:!0}),l.ZP.addEventListener(window,"touchstart",Le,{capture:!0,passive:!0}),["touchend","touchcancel"].forEach((function(e){l.ZP.addEventListener(window,e,Oe,{capture:!0,passive:!0})})),l.ZP.addEventListener(window,"dragend",Ee,{capture:!0,passive:!0}),(o.Z.firefox||o.Z.edge)&&l.ZP.addEventListener(document,"click",ke,{capture:!0})}catch(e){X.appRouter.goHome()}})),e.addEventListener("viewbeforehide",(function(){M&&M.enabled(!1),document.removeEventListener("keydown",Se),l.ZP.removeEventListener(document,"keydown",Pe,{capture:!0,passive:!0}),l.ZP.removeEventListener(window,window.PointerEvent?"pointerdown":"mousedown",Te,{capture:!0,passive:!0}),l.ZP.removeEventListener(window,window.PointerEvent?"pointerup":"mouseup",xe,{capture:!0,passive:!0}),l.ZP.removeEventListener(window,"touchstart",Le,{capture:!0,passive:!0}),["touchend","touchcancel"].forEach((function(e){l.ZP.removeEventListener(window,e,Oe,{capture:!0,passive:!0})})),l.ZP.removeEventListener(window,"dragend",Ee,{capture:!0,passive:!0}),(o.Z.firefox||o.Z.edge)&&l.ZP.removeEventListener(document,"click",ke,{capture:!0}),A(),Xe.classList.remove("osdHeader"),Xe.classList.remove("osdHeader-hidden"),l.ZP.removeEventListener(document,window.PointerEvent?"pointermove":"mousemove",U,{passive:!0}),c.default.off(window,j),b.Events.off(r.O,"playerchange",J),le()})),e.querySelector(".btnFullscreen").addEventListener("click",(function(){r.O.toggleFullscreen(x)})),e.querySelector(".btnPip").addEventListener("click",(function(){r.O.togglePictureInPicture(x)})),e.querySelector(".btnAirPlay").addEventListener("click",(function(){r.O.toggleAirPlay(x)})),e.querySelector(".btnVideoOsdSettings").addEventListener("click",(function(){var e=this;n.e(4268).then(n.bind(n,84268)).then((function(t){var n=x;if(n){var i,a=r.O.getPlayerState(n),s=r.O.supportSubtitleOffset(n)&&r.O.canHandleOffsetOnCurrentSubtitle(n);t.show({mediaType:"Video",player:n,positionTo:e,quality:null===(i=a.MediaSource)||void 0===i?void 0:i.SupportsTranscoding,stats:!0,suboffset:s,onOption:ve}).finally((function(){z()})),setTimeout(z,0)}}))})),e.addEventListener("viewhide",(function(){Xe.classList.remove("hide")})),e.addEventListener("viewdestroy",(function(){qe.touchHelper&&(qe.touchHelper.destroy(),qe.touchHelper=null),Z&&(Z.destroy(),Z=null),ge(),we()}));var Je=0;l.ZP.addEventListener(e,window.PointerEvent?"pointerdown":"click",(function(e){if(l.ZP.parentWithClass(e.target,["videoOsdBottom","upNextContainer"]))R();else{var t=e.pointerType||(g.Z.mobile?"touch":"mouse"),n=(new Date).getTime();switch(t){case"touch":n-Je>300&&(Je=n,"osd"===I?H():I||R());break;case"mouse":e.button||(T?(clearTimeout(T),T=0):T=setTimeout((function(){r.O.playPause(x),R(),T=0}),300));break;default:r.O.playPause(x),R()}}}),{passive:!0}),l.ZP.addEventListener(e,"dblclick",(function(t){t.target===e&&r.O.toggleFullscreen(x)})),e.querySelector(".buttonMute").addEventListener("click",(function(){r.O.toggleMute(x)})),He.addEventListener("input",(function(e){r.O.setVolume(e.target.value,x)})),Ne.addEventListener("change",(function(){var e=x;if(e){var t=parseFloat(this.value);if(q){var n=t/100*(Be-De)*1e4;n+=1e4*De,n-=Re,r.O.seek(n,e)}else r.O.seekPercent(t,e)}})),Ne.getBubbleHtml=function(e){if(R(),q){if(De&&Be){var t=Be-De;return t/=100,t*=e,t+=De,'<h1 class="sliderBubbleText">'+k(new Date(parseInt(t)),!0)+"</h1>"}return"--:--"}if(!Me)return"--:--";var n=Me;n/=100,n*=e;var i=C;if(i&&i.Chapters&&i.Chapters.length&&i.Chapters[0].ImageTag){var r=function(e,t,n,i){for(var r,s=-1,o=0,l=n.length;o<l;o++){var c=n[o];i>=c.StartPositionTicks&&(r=c,s=o)}if(!r)return null;var d=function(e,t,n,i,a){return t.ImageTag?a.getScaledImageUrl(e.Id,{maxWidth:400,tag:t.ImageTag,type:"Chapter",index:n}):null}(t,r,s,0,e);if(d){var f='<div class="chapterThumbContainer">';return f+='<img class="chapterThumb" src="'+d+'" />',f+='<div class="chapterThumbTextContainer">',f+='<div class="chapterThumbText chapterThumbText-dim">',f+=a()(r.Name),f+="</div>",f+='<h2 class="chapterThumbText">',f+=u.ZP.getDisplayRunningTime(i),f+="</h2>",(f+="</div>")+"</div>"}return null}(N.Z.getApiClient(i.ServerId),i,i.Chapters,n);if(r)return r}return'<h1 class="sliderBubbleText">'+u.ZP.getDisplayRunningTime(n)+"</h1>"},e.querySelector(".btnPreviousTrack").addEventListener("click",(function(){r.O.previousTrack(x)})),e.querySelector(".btnPreviousChapter").addEventListener("click",(function(){r.O.previousChapter(x)})),e.querySelector(".btnPause").addEventListener("click",(function(){r.O.playPause(x)})),e.querySelector(".btnNextChapter").addEventListener("click",(function(){r.O.nextChapter(x)})),e.querySelector(".btnNextTrack").addEventListener("click",(function(){r.O.nextTrack(x)})),je.addEventListener("click",(function(){r.O.rewind(x)})),We.addEventListener("click",(function(){r.O.fastForward(x)})),e.querySelector(".btnAudio").addEventListener("click",(function(){var e=x,t=r.O.audioTracks(e),i=r.O.getAudioStreamIndex(e),a=t.map((function(e){var t={name:e.DisplayTitle,id:e.Index};return e.Index===i&&(t.selected=!0),t})),s=this;Promise.resolve().then(n.bind(n,78407)).then((function(t){t.default.show({items:a,title:v.ZP.translate("Audio"),positionTo:s}).then((function(t){var n=parseInt(t);n!==i&&r.O.setAudioStreamIndex(n,e)})).finally((function(){z()})),setTimeout(z,0)}))})),e.querySelector(".btnSubtitles").addEventListener("click",(function(){var e=x,t=r.O.subtitleTracks(e),i=r.O.getSubtitleStreamIndex(e);null==i&&(i=-1),t.unshift({Index:-1,DisplayTitle:v.ZP.translate("Off")});var a=t.map((function(e){var t={name:e.DisplayTitle,id:e.Index};return e.Index===i&&(t.selected=!0),t})),s=this;Promise.resolve().then(n.bind(n,78407)).then((function(t){t.default.show({title:v.ZP.translate("Subtitles"),items:a,positionTo:s}).then((function(t){var n=parseInt(t);n!==i&&r.O.setSubtitleStreamIndex(n,e),ye()})).finally((function(){z()})),setTimeout(z,0)}))}));var Qe=function(t){var n="",i="",a="oneShotPulse",r=1500,s=e.querySelector("#syncPlayIcon");switch(t){case"schedule-play":n="sync spin",i="play_arrow centered",a="infinitePulse",r=-1,H();break;case"unpause":n="play_circle_outline";break;case"pause":n="pause_circle_outline",R();break;case"seek":n="update",a="infinitePulse",r=-1;break;case"buffering":n="schedule",a="infinitePulse",r=-1;break;case"wait-pause":n="schedule",i="pause shifted",a="infinitePulse",r=-1;break;case"wait-unpause":n="schedule",i="play_arrow shifted",a="infinitePulse",r=-1;break;default:return void(s.style.visibility="hidden")}s.setAttribute("class","syncPlayIconCircle "+a),s.querySelector(".primary-icon").setAttribute("class","primary-icon material-icons "+n),s.querySelector(".secondary-icon").setAttribute("class","secondary-icon material-icons "+i);var o=s.cloneNode(!0);o.style.visibility="visible",s.parentNode.replaceChild(o,s),r<0||setTimeout((function(){o.style.visibility="hidden"}),r)};b.Events.on(s.Z.Manager,"enabled",(function(t,n){n||(e.querySelector("#syncPlayIcon").style.visibility="hidden")})),b.Events.on(s.Z.Manager,"notify-osd",(function(e,t){Qe(t)})),b.Events.on(s.Z.Manager,"group-state-update",(function(e,t,n){"Playing"===t&&"Unpause"===n||"Playing"===t&&"Ready"===n?Qe("schedule-play"):"Paused"===t&&"Pause"===n?Qe("pause"):"Paused"===t&&"Ready"===n?Qe("clear"):"Waiting"===t&&"Seek"===n?Qe("seek"):"Waiting"===t&&"Buffer"===n?Qe("buffering"):"Waiting"===t&&"Pause"===n?Qe("wait-pause"):"Waiting"===t&&"Unpause"===n&&Qe("wait-unpause")}))}},79993:function(e,t,n){var i=n(54933),a=n.n(i),r=n(93476),s=n.n(r)()(a());s.push([e.id,".chapterThumbTextContainer,.videoOsdBottom{user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.videoOsdBottom{-webkit-touch-callout:none;background:linear-gradient(0deg,hsla(0,0%,6%,.75),hsla(0,0%,6%,0));bottom:0;color:#fff;display:-webkit-flex;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-justify-content:center;justify-content:center;left:0;padding-bottom:1.75em;padding-top:7.5em;pointer-events:none;position:fixed;right:0;transition:opacity .3s ease-out;-webkit-user-select:none;-ms-user-select:none;user-select:none;will-change:opacity}.skinHeader-withBackground.osdHeader{-webkit-backdrop-filter:none;backdrop-filter:none;background:linear-gradient(180deg,hsla(0,0%,6%,.75),hsla(0,0%,6%,0));color:#eee;height:7.5em;pointer-events:none;position:relative;transition:opacity .3s ease-out;z-index:1}.osdHeader-hidden{opacity:0}.osdHeader .headerTop{max-height:3.5em;pointer-events:all}.osdHeader .headerButton:not(.headerBackButton):not(.headerCastButton):not(.headerSyncButton){display:none}.chapterThumbContainer{box-shadow:0 0 1.9vh #000;-webkit-flex-grow:1;flex-grow:1;position:relative}.chapterThumb{background-position:50%;background-repeat:no-repeat;background-size:contain;border:0;height:20vh;min-width:20vh}@media (orientation:portrait){.chapterThumb{height:30vw;min-width:30vw}}@media (max-height:50em)and (orientation:landscape){.chapterThumb{height:30vh;min-width:30vh}}.chapterThumbTextContainer{background:rgba(0,0,0,.7);bottom:0;left:0;padding:.25em .5em;position:absolute;right:0;-webkit-user-select:none;-ms-user-select:none;user-select:none}.chapterThumbText{margin:0;opacity:1;padding:.25em 0}.chapterThumbText-dim{opacity:.6}.videoOsdBottom-hidden{opacity:0}.osdControls{-webkit-flex-grow:1;flex-grow:1;padding:0 .8em;pointer-events:all}.layout-desktop .osdControls{max-width:175vh}.videoOsdBottom .buttons{-webkit-align-items:center;align-items:center;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;padding:.25em 0 0}.osdVolumeSliderContainer{-webkit-flex-grow:1;flex-grow:1;width:9em}.osdMediaInfo,.volumeButtons{-webkit-box-align:center;display:flex}.osdMediaInfo,.volumeButtons{-webkit-align-items:center;align-items:center;display:-webkit-flex}.volumeButtons{display:flex;margin:0 1em 0 .29em}.osdTimeText{margin-left:1em;margin-right:auto;-webkit-user-select:none;-ms-user-select:none;user-select:none}.osdTitle,.osdTitleSmall{margin:0 1em 0 0}.osdMediaInfo{-webkit-align-items:center;align-items:center;display:-webkit-flex;display:flex}.osdSecondaryMediaInfo{padding-left:.6em!important}.osdTextContainer{-webkit-align-items:center;align-items:center;display:-webkit-flex;display:flex;margin-bottom:.7em;padding-left:.5em;-webkit-user-select:none;-ms-user-select:none;user-select:none}.osdMainTextContainer{-webkit-align-items:baseline;align-items:baseline}.osdMediaStatus{margin-left:auto}@-webkit-keyframes spin{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.osdMediaStatus .animate{-webkit-animation:spin 4s linear infinite;animation:spin 4s linear infinite}@media (max-width:30em){.osdMediaInfo,.osdPoster{display:none!important}}@media (max-width:33.75em){.videoOsdBottom .paper-icon-button-light{margin:0}}@media (max-width:43em){.osdMediaStatus span,.videoOsdBottom .volumeButtons{display:none!important}}@media (max-width:50em){.videoOsdBottom .btnFastForward,.videoOsdBottom .btnRewind{display:none!important}}@media (max-width:75em){.videoOsdBottom .endsAtText{display:none!important}}.syncPlayContainer{-webkit-align-items:center;align-items:center;bottom:0;display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;left:0;pointer-events:none;position:absolute;right:0;top:0}.primary-icon{-webkit-align-self:center;align-self:center;font-size:64px;position:absolute}.primary-icon.spin{-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite;font-size:76px!important}.secondary-icon{font-size:24px;position:absolute}.secondary-icon.centered{-webkit-align-self:center;align-self:center;font-size:28px!important}.secondary-icon.shifted{bottom:0;font-size:52px;right:0}.syncPlayIconCircle{background:rgba(0,164,220,0);border-radius:50%;box-shadow:0 0 0 0 rgba(0,164,220,0);color:rgba(0,164,220,0);display:-webkit-flex;display:flex;height:96px;-webkit-justify-content:center;justify-content:center;margin:60px;position:relative;-webkit-transform:scale(1);transform:scale(1);visibility:hidden;width:96px}.syncPlayIconCircle.oneShotPulse{-webkit-animation:pulse 1.5s 1;animation:pulse 1.5s 1}.syncPlayIconCircle.infinitePulse{-webkit-animation:infinite-pulse 1.5s infinite;animation:infinite-pulse 1.5s infinite}@-webkit-keyframes pulse{0%{background:rgba(0,164,220,.3);box-shadow:0 0 0 0 rgba(0,164,220,.3);color:rgba(0,164,220,.7);-webkit-transform:scale(.95);transform:scale(.95)}70%{background:rgba(0,164,220,0);box-shadow:0 0 0 60px rgba(0,164,220,0);color:rgba(0,164,220,0);-webkit-transform:scale(1);transform:scale(1)}to{background:rgba(0,164,220,0);box-shadow:0 0 0 0 rgba(0,164,220,0);color:rgba(0,164,220,0);-webkit-transform:scale(.95);transform:scale(.95)}}@keyframes pulse{0%{background:rgba(0,164,220,.3);box-shadow:0 0 0 0 rgba(0,164,220,.3);color:rgba(0,164,220,.7);-webkit-transform:scale(.95);transform:scale(.95)}70%{background:rgba(0,164,220,0);box-shadow:0 0 0 60px rgba(0,164,220,0);color:rgba(0,164,220,0);-webkit-transform:scale(1);transform:scale(1)}to{background:rgba(0,164,220,0);box-shadow:0 0 0 0 rgba(0,164,220,0);color:rgba(0,164,220,0);-webkit-transform:scale(.95);transform:scale(.95)}}@-webkit-keyframes infinite-pulse{0%{background:rgba(0,164,220,.3);box-shadow:0 0 0 0 rgba(0,164,220,.3);color:rgba(0,164,220,.7);-webkit-transform:scale(.95);transform:scale(.95)}70%{background:rgba(0,164,220,0);box-shadow:0 0 0 60px rgba(0,164,220,0);color:rgba(0,164,220,.6);-webkit-transform:scale(1);transform:scale(1)}to{background:rgba(0,164,220,.3);box-shadow:0 0 0 0 rgba(0,164,220,0);color:rgba(0,164,220,.7);-webkit-transform:scale(.95);transform:scale(.95)}}@keyframes infinite-pulse{0%{background:rgba(0,164,220,.3);box-shadow:0 0 0 0 rgba(0,164,220,.3);color:rgba(0,164,220,.7);-webkit-transform:scale(.95);transform:scale(.95)}70%{background:rgba(0,164,220,0);box-shadow:0 0 0 60px rgba(0,164,220,0);color:rgba(0,164,220,.6);-webkit-transform:scale(1);transform:scale(1)}to{background:rgba(0,164,220,.3);box-shadow:0 0 0 0 rgba(0,164,220,0);color:rgba(0,164,220,.7);-webkit-transform:scale(.95);transform:scale(.95)}}@keyframes spin{to{-webkit-transform:rotate(-1turn);transform:rotate(-1turn)}}",""]),t.Z=s},34988:function(e,t,n){var i=n(54933),a=n.n(i),r=n(93476),s=n.n(r)()(a());s.push([e.id,".subtitleSync{position:absolute;width:100%}.subtitleSyncContainer{background:rgba(28,28,28,.8);border-radius:.3em;color:#fff;height:4.2em;margin-left:auto;margin-right:auto;min-width:18em;position:relative;width:40%}.subtitleSync-closeButton{color:#ccc;position:absolute;right:0;top:0;z-index:2}.subtitleSyncTextField{color:#fff;font-size:20px;left:0;margin-left:30%;margin-right:30%;position:absolute;text-align:center;top:.1em;width:40%;z-index:2}#prompt{-webkit-flex-shrink:0;flex-shrink:0}.subtitleSyncSliderContainer{border-radius:.3em;-webkit-flex-grow:1;flex-grow:1;height:1.4em;margin-left:1%;margin-right:1%;top:2.5em;width:98%;z-index:1}",""]),t.Z=s}}]);