"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[570],{16735:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}}),a(69217),a(76056),a(72326);var s=a(56705),n=a(47005),i=a(44614),l=a(1197),r=a(64258),o=a(24724),d=a(9785);function c(t){ApiClient.getScheduledTasks({isHidden:!1}).then((function(e){!function(t,e){var a;e=e.sort((function(t,e){return(t=t.Category+" "+t.Name)==(e=e.Category+" "+e.Name)?0:t<e?-1:1}));for(var s="",n=0;n<e.length;n++){var l=e[n];l.Category!=a&&((a=l.Category)&&(s+="</div>",s+="</div>"),s+='<div class="verticalSection verticalSection-extrabottompadding">',s+='<div class="sectionTitleContainer" style="margin-bottom:1em;">',s+='<h2 class="sectionTitle">',s+=a,s+="</h2>",0===n&&(s+='<a is="emby-linkbutton" class="raised button-alt headerHelpButton" target="_blank" href="https://docs.jellyfin.org/general/server/tasks.html">'+i.ZP.translate("Help")+"</a>"),s+="</div>",s+='<div class="paperList">'),s+='<div class="listItem listItem-border scheduledTaskPaperIconItem" data-status="'+l.State+'">',s+="<a is='emby-linkbutton' style='margin:0;padding:0;' class='clearLink listItemIconContainer' href='scheduledtask.html?id="+l.Id+"'>",s+='<span class="material-icons listItemIcon schedule" aria-hidden="true"></span>',s+="</a>",s+='<div class="listItemBody two-line">',s+="<a class='clearLink' style='margin:0;padding:0;display:block;text-align:left;' is='emby-linkbutton' href='scheduledtask.html?id="+l.Id+"'>",s+="<h3 class='listItemBodyText'>"+l.Name+"</h3>",s+="<div class='secondary listItemBodyText' id='taskProgress"+l.Id+"'>"+u(l)+"</div>",s+="</a>",s+="</div>","Running"===l.State?s+='<button type="button" is="paper-icon-button-light" id="btnTask'+l.Id+'" class="btnStopTask" data-taskid="'+l.Id+'" title="'+i.ZP.translate("ButtonStop")+'"><span class="material-icons stop" aria-hidden="true"></span></button>':"Idle"===l.State&&(s+='<button type="button" is="paper-icon-button-light" id="btnTask'+l.Id+'" class="btnStartTask" data-taskid="'+l.Id+'" title="'+i.ZP.translate("ButtonStart")+'"><span class="material-icons play_arrow" aria-hidden="true"></span></button>'),s+="</div>"}e.length&&(s+="</div>",s+="</div>"),t.querySelector(".divScheduledTasks").innerHTML=s}(t,e),s.ZP.hide()}))}function u(t){var e="";if("Idle"===t.State){if(t.LastExecutionResult){var a=Date.parse(t.LastExecutionResult.EndTimeUtc),s=Date.parse(t.LastExecutionResult.StartTimeUtc);e+=i.ZP.translate("LabelScheduledTaskLastRan",(0,r.Z)(a,d.mF),(0,o.Z)(s,a,{locale:(0,d.Kd)()})),"Failed"===t.LastExecutionResult.Status?e+=" <span style='color:#FF0000;'>("+i.ZP.translate("LabelFailed")+")</span>":"Cancelled"===t.LastExecutionResult.Status?e+=" <span style='color:#0026FF;'>("+i.ZP.translate("LabelCancelled")+")</span>":"Aborted"===t.LastExecutionResult.Status&&(e+=" <span style='color:#FF0000;'>"+i.ZP.translate("LabelAbortedByServerShutdown")+"</span>")}}else if("Running"===t.State){var n=(t.CurrentProgressPercentage||0).toFixed(1);e+='<div style="display:flex;align-items:center;">',e+='<div class="taskProgressOuter" title="'+n+'%" style="flex-grow:1;">',e+='<div class="taskProgressInner" style="width:'+n+'%;">',e+="</div>",e+="</div>",e+="<span style='color:#00a4dc;margin-left:5px;'>"+n+"%</span>",e+="</div>"}else e+="<span style='color:#FF0000;'>"+i.ZP.translate("LabelStopping")+"</span>";return e}function Z(t,e){var a=t.querySelector(".material-icons");a.classList.remove("stop","play_arrow"),a.classList.add(e)}function p(t,e){"Running"===e?(t.classList.remove("btnStartTask"),t.classList.add("btnStopTask"),Z(t,"stop"),t.title=i.ZP.translate("ButtonStop")):"Idle"===e&&(t.classList.add("btnStartTask"),t.classList.remove("btnStopTask"),Z(t,"play_arrow"),t.title=i.ZP.translate("ButtonStart")),$(t).parents(".listItem")[0].setAttribute("data-status",e)}function h(t){function e(){ApiClient.isMessageChannelOpen()||c(t)}function a(e,a,s){a.serverId()===r&&function(e){for(var a=0;a<e.length;a++){var s=e[a];t.querySelector("#taskProgress"+s.Id).innerHTML=u(s),p(t.querySelector("#btnTask"+s.Id),s.State)}}(s)}var i,r=ApiClient.serverId();$(".divScheduledTasks",t).on("click",".btnStartTask",(function(){var e=this,a=e.getAttribute("data-taskid");ApiClient.startScheduledTask(a).then((function(){p(e,"Running"),c(t)}))})),$(".divScheduledTasks",t).on("click",".btnStopTask",(function(){var e=this,a=e.getAttribute("data-taskid");ApiClient.stopScheduledTask(a).then((function(){p(e,""),c(t)}))})),t.addEventListener("viewbeforehide",(function(){n.Events.off(l.default,"ScheduledTasksInfo",a),ApiClient.sendMessage("ScheduledTasksInfoStop"),i&&clearInterval(i)})),t.addEventListener("viewshow",(function(){s.ZP.show(),ApiClient.sendMessage("ScheduledTasksInfoStart","1000,1000"),i&&clearInterval(i),i=setInterval(e,1e4),c(t),n.Events.on(l.default,"ScheduledTasksInfo",a)}))}a(664),a(78066)},9785:function(t,e,a){a.d(e,{Kd:function(){return st},mF:function(){return nt}}),a(52077),a(911);var s=a(77946),n=a(42845),i=a(11401),l=a(84146),r=a(59996),o=a(78210),d=a(9477),c=a(28024),u=a(33026),Z=a(91814),p=a(88303),h=a(22410),v=a(35997),f=a(73956),k=a(86496),b=a(47182),g=a(6902),S=a(35163),m=a(36749),y=a(89310),I=a(22481),T=a(75710),L=a(11109),P=a(74270),C=a(37159),x=a(27324),w=a(68490),F=a(19046),A=a(81905),E=a(19656),R=a(5905),B=a(64660),H=a(82025),M=a(69509),q=a(69984),_=a(84216),z=a(195),N=a(77411),$=a(23282),j=a(42395),D=a(30318),K=a(45614),O=a(83305),U=a(95861),W=a(37405),G=a(6148),J=a(63258),Q=a(50281),V=a(67889),X=a(44362),Y=a(69244),tt=a(96730),et=a(44614),at=function(t){return{af:s.Z,ar:n.Z,"be-by":i.Z,"bg-bg":l.Z,bn:r.Z,ca:o.Z,cs:d.Z,cy:c.Z,da:u.Z,de:Z.Z,el:p.Z,"en-gb":h.Z,"en-us":v.Z,eo:f.Z,es:k.Z,"es-ar":k.Z,"es-do":k.Z,"es-mx":k.Z,et:b.Z,fa:g.Z,fi:S.Z,fr:m.Z,"fr-ca":y.Z,gl:I.Z,gsw:Z.Z,he:T.Z,"hi-in":L.Z,hr:P.Z,hu:C.Z,id:x.Z,is:w.Z,it:F.Z,ja:A.Z,kk:E.Z,ko:R.Z,"lt-lt":B.Z,lv:H.Z,ms:M.Z,nb:q.Z,nl:_.Z,nn:z.Z,pl:N.Z,pt:$.Z,"pt-br":j.Z,"pt-pt":$.Z,ro:D.Z,ru:K.Z,sk:O.Z,"sl-si":U.Z,sv:W.Z,ta:G.Z,th:J.Z,tr:Q.Z,uk:V.Z,vi:X.Z,"zh-cn":Y.Z,"zh-hk":Y.Z,"zh-tw":tt.Z}[t]};function st(){return at(et.ZP.getCurrentLocale())||at(et.ZP.getCurrentLocale().replace(/-.*/,""))||v.Z}var nt={addSuffix:!0,locale:st()};e.ZP={getLocale:st,localeWithSuffix:nt}}}]);