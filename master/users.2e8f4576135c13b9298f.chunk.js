"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[58809],{27239:function(e,r,t){t.r(r),t.d(r,{default:function(){return g}});var a=t(62540),n=t(63696),c=t(89100),o=t(5898),s=t(8566),i=t(47629),u=t(40532),l=t(80096),d=t(93721),f=t(85817),h=t(84851),p=t(36645),v=function(e){var r,t,n,c=e.user,s=void 0===c?{}:c,i="card squareCard scalableCard squareCard-scalable";(null===(r=s.Policy)||void 0===r?void 0:r.IsDisabled)&&(i+=" grayscale"),s.PrimaryImageTag&&s.Id&&(n=window.ApiClient.getUserImageUrl(s.Id,{width:300,tag:s.PrimaryImageTag,type:"Primary"}));var u="cardImage";(null===(t=s.Policy)||void 0===t?void 0:t.IsDisabled)&&(u+=" disabledUser");var v,m=(v=s.LastActivityDate)?o.Ay.translate("LastSeen",(0,l.A)(Date.parse(v),(0,d.OE)())):"",b=n?(0,a.jsx)("div",{className:u,style:{backgroundImage:"url(".concat(n,")")}}):(0,a.jsx)("div",{className:"".concat(u," ").concat((0,p.Qp)(s.Name)," flex align-items-center justify-content-center"),children:(0,a.jsx)("span",{className:"material-icons cardImageIcon person","aria-hidden":"true"})});return(0,a.jsx)("div",{"data-userid":s.Id,"data-username":s.Name,className:i,children:(0,a.jsxs)("div",{className:"cardBox visualCardBox",children:[(0,a.jsxs)("div",{className:"cardScalable visualCardBox-cardScalable",children:[(0,a.jsx)("div",{className:"cardPadder cardPadder-square"}),(0,a.jsx)(h.A,{className:"cardContent",href:"#/dashboard/users/profile?userId=".concat(s.Id),children:b})]}),(0,a.jsxs)("div",{className:"cardFooter visualCardBox-cardFooter",children:[(0,a.jsx)("div",{style:{textAlign:"right",float:"right",paddingTop:"5px"},children:(0,a.jsx)(f.A,{is:"paper-icon-button-light",className:"btnUserMenu flex-shrink-zero",icon:"more_vert"})}),(0,a.jsx)("div",{className:"cardText",children:(0,a.jsx)("span",{children:s.Name})}),(0,a.jsx)("div",{className:"cardText cardText-secondary",children:(0,a.jsx)("span",{children:""!=m?m:""})})]})]})})},m=t(30658),b=(t(10353),t(15453),t(65242)),g=function(){var e=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var a,n,c=t.call(e),o=[];try{for(;(void 0===r||r-- >0)&&!(a=c.next()).done;)o.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(t=c.return)&&t.call(c)}finally{if(n)throw n.error}}return o}((0,n.useState)([]),2),r=e[0],l=e[1],d=(0,n.useRef)(null),f=function(){s.Ay.show(),window.ApiClient.getUsers().then((function(e){l(e),s.Ay.hide()})).catch((function(e){console.error("[userprofiles] failed to fetch users",e)}))};return(0,n.useEffect)((function(){var e=d.current;if(e){f();e.addEventListener("click",(function(e){var r=i.Ay.parentWithClass(e.target,"btnUserMenu");r&&function(e){var r=i.Ay.parentWithClass(e,"card"),a=null==r?void 0:r.getAttribute("data-userid"),n=null==r?void 0:r.getAttribute("data-username");if(a){var l=[];l.push({name:o.Ay.translate("ButtonEditUser"),id:"open",icon:"mode_edit"}),l.push({name:o.Ay.translate("ButtonLibraryAccess"),id:"access",icon:"lock"}),l.push({name:o.Ay.translate("ButtonParentalControl"),id:"parentalcontrol",icon:"person"}),l.push({name:o.Ay.translate("Delete"),id:"delete",icon:"delete"}),t.e(62882).then(t.bind(t,62882)).then((function(e){e.default.show({items:l,positionTo:r,callback:function(e){switch(e){case"open":c.default.navigate("/dashboard/users/profile?userId="+a).catch((function(e){console.error("[userprofiles] failed to navigate to user edit page",e)}));break;case"access":c.default.navigate("/dashboard/users/access?userId="+a).catch((function(e){console.error("[userprofiles] failed to navigate to user library page",e)}));break;case"parentalcontrol":c.default.navigate("/dashboard/users/parentalcontrol?userId="+a).catch((function(e){console.error("[userprofiles] failed to navigate to parental control page",e)}));break;case"delete":!function(e,r){var t=r?o.Ay.translate("DeleteName",r):o.Ay.translate("DeleteUser"),a=o.Ay.translate("DeleteUserConfirmation");(0,u.A)({title:t,text:a,confirmText:o.Ay.translate("Delete"),primary:"delete"}).then((function(){s.Ay.show(),window.ApiClient.deleteUser(e).then((function(){f()})).catch((function(e){console.error("[userprofiles] failed to delete user",e)}))})).catch((function(){}))}(a,n)}}}).catch((function(){}))})).catch((function(e){console.error("[userprofiles] failed to load action sheet",e)}))}else console.error("Unexpected null user id")}(r)})),e.querySelector("#btnAddUser").addEventListener("click",(function(){c.default.navigate("/dashboard/users/add").catch((function(e){console.error("[userprofiles] failed to navigate to new user page",e)}))}))}else console.error("Unexpected null reference")}),[]),(0,a.jsx)(b.A,{id:"userProfilesPage",className:"mainAnimatedPage type-interior userProfilesPage fullWidthContent",title:o.Ay.translate("HeaderUsers"),children:(0,a.jsxs)("div",{ref:d,className:"content-primary",children:[(0,a.jsx)("div",{className:"verticalSection",children:(0,a.jsx)(m.A,{title:o.Ay.translate("HeaderUsers"),isBtnVisible:!0,btnId:"btnAddUser",btnClassName:"fab submit sectionTitleButton",btnTitle:"ButtonAddUser",btnIcon:"add"})}),(0,a.jsx)("div",{className:"localUsers itemsContainer vertical-wrap",children:r.map((function(e){return(0,a.jsx)(v,{user:e},e.Id)}))})]})})}},30658:function(e,r,t){var a=t(62540),n=(t(63696),t(85817));r.A=function(e){var r=e.SectionClassName,t=e.title,c=e.isBtnVisible,o=void 0!==c&&c,s=e.btnId,i=e.btnClassName,u=e.btnTitle,l=e.btnIcon;return(0,a.jsxs)("div",{className:"".concat(r," sectionTitleContainer flex align-items-center"),children:[(0,a.jsx)("h2",{className:"sectionTitle",children:t}),o&&(0,a.jsx)(n.A,{is:"emby-button",id:s,className:i,title:u,icon:l})]})}},36645:function(e,r,t){t.d(r,{QW:function(){return y},Qp:function(){return b},Rn:function(){return m},Tj:function(){return h},a_:function(){return p},hn:function(){return l},n5:function(){return d},uA:function(){return v},w:function(){return f},zo:function(){return x}});var a=t(76942),n=t(58953),c=t(4452),o=t.n(c),s=2/3,i=16/9,u=1e3/185,l=function(e){return"Program"===e||"Timer"===e||"Recording"===e},d=function(e){return"play"===e.defaultAction&&e.isFolder?"link":e.isPhoto?"play":e.defaultAction},f=function(e){var r=window.screen;return!!(r&&r.availWidth-e>20)},h=function(e){return null==e?a.G8.MixedSquare:e>=1.33?a.G8.MixedBackdrop:e>.8?a.G8.MixedSquare:a.G8.MixedPortrait},p=function(e){var r;return o()(((r={card:!0})["".concat(e.shape,"Card")]=e.shape,r["".concat(e.cardCssClass)]=e.cardCssClass,r["".concat(e.cardClass)]=e.cardClass,r["card-hoverable"]=e.isDesktop,r["show-focus"]=e.isTV,r["show-animation"]=e.isTV&&e.enableFocusTransform,r.groupedCard=e.showChildCountIndicator&&e.childCount,r["card-withuserdata"]=!["MusicAlbum","MusicArtist","Audio"].includes(e.itemType),r.itemAction="button"===e.tagName,r))},v=function(e){var r;return o()(((r={cardImageContainer:!0,coveredImage:e.hasCoverImage,"coveredImage-contain":e.hasCoverImage&&"TvChannel"===e.itemType})[b(e.itemName)]=!e.imgUrl,r))},m=function(e){return o()({cardBox:!0,visualCardBox:e.cardLayout,"cardBox-bottompadded":e.hasOuterCardFooter&&!e.cardLayout})},b=function(e){return"defaultCardBackground defaultCardBackground".concat(g(e))},g=function(e){if(e){for(var r=Math.floor(e.length/2),t=String(e.slice(r,r+1).charCodeAt(0)),a=0,c=0;c<t.length;c++)a+=parseInt(t.charAt(c),10);return parseInt(String(a).slice(-1),10)%5+1}return(0,n.HO)(1,5)},x=function(e){return e?-1!==(e=e.toLowerCase()).indexOf("portrait")?s:-1!==e.indexOf("backdrop")?i:-1!==e.indexOf("square")?1:-1!==e.indexOf("banner")?u:null:null},y=function(e,r,t,a){switch(e){case"portrait":return w(r,a);case"square":return A(r,a);case"banner":return C(r);case"backdrop":return k(r,a);case"smallBackdrop":return I(r);case"overflowSmallBackdrop":return j(r,t,a);case"overflowPortrait":return N(r,t,a);case"overflowSquare":return P(r,t,a);case"overflowBackdrop":return B(r,t,a);default:return 4}},w=function(e,r){switch(!0){case r:return 5.9999999988;case e>=2200:return 10;case e>=1920:return 9.000000000009;case e>=1600:return 8;case e>=1400:return 7.0000000000021;case e>=1200:return 5.9999999988;case e>=800:return 5;case e>=700:return 4;default:return 3.0000000003}},A=function(e,r){switch(!0){case r:return 5.9999999988;case e>=2200:return 10;case e>=1920:return 9.000000000009;case e>=1600:return 8;case e>=1400:return 7.0000000000021;case e>=1200:return 5.9999999988;case e>=800:return 5;case e>=700:return 4;case e>=500:return 3.0000000003;default:return 2}},C=function(e){switch(!0){case e>=2200:return 4;case e>=1200:return 3.0000000003;case e>=800:return 2;default:return 1}},k=function(e,r){switch(!0){case r:return 4;case e>=2500:return 6;case e>=1600:return 5;case e>=1200:return 4;case e>=770:return 3;case e>=420:return 2;default:return 1}},I=function(e){switch(!0){case e>=1600:return 8;case e>=1400:return 7.000000000007001;case e>=1200:return 5.9999999988;case e>=1e3:return 5;case e>=800:return 4;case e>=500:return 3.0000000003;default:return 2}},j=function(e,r,t){switch(!0){case t:return 100/18.9;case r&&e>=800:return 100/15.5;case r:return 100/23.3;case e>=540:return 100/30;default:return 100/72}},N=function(e,r,t){switch(!0){case t:return 100/15.5;case r&&e>=1700:return 100/11.6;case r:return 100/15.5;case e>=1400:return 100/15;case e>=1200:return 100/18;case e>=760:return 100/23;case e>=400:return 100/31.5;default:return 100/42}},P=function(e,r,t){switch(!0){case t:return 100/15.5;case r&&e>=1700:return 100/11.6;case r:return 100/15.5;case e>=1400:return 100/15;case e>=1200:return 100/18;case e>=760:return 100/23;case e>=540:return 100/31.5;default:return 100/42}},B=function(e,r,t){switch(!0){case t:return 100/23.3;case r&&e>=1700:return 100/18.5;case r:return 100/23.3;case e>=1800:return 100/23.5;case e>=1400:return 100/30;case e>=760:return 2.5;case e>=640:return 100/56;default:return 100/72}}},76942:function(e,r,t){var a;function n(e){return void 0===e&&(e=!0),e?a.SquareOverflow:a.Square}function c(e){return void 0===e&&(e=!0),e?a.BackdropOverflow:a.Backdrop}function o(e){return void 0===e&&(e=!0),e?a.PortraitOverflow:a.Portrait}t.d(r,{G8:function(){return a},UI:function(){return c},xK:function(){return o},zP:function(){return n}}),function(e){e.Backdrop="backdrop",e.BackdropOverflow="overflowBackdrop",e.Banner="banner",e.Portrait="portrait",e.PortraitOverflow="overflowPortrait",e.Square="square",e.SquareOverflow="overflowSquare",e.Auto="auto",e.AutoHome="autohome",e.AutoOverflow="autooverflow",e.AutoVertical="autoVertical",e.Mixed="mixed",e.MixedSquare="mixedSquare",e.MixedBackdrop="mixedBackdrop",e.MixedPortrait="mixedPortrait"}(a||(a={}))},84851:function(e,r,t){var a=t(62540),n=t(63696),c=t(4452),o=t.n(c),s=t(46782),i=t(13615),u=t(70267),l=t(22622),d=function(){return d=Object.assign||function(e){for(var r,t=1,a=arguments.length;t<a;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e},d.apply(this,arguments)};r.A=function(e){var r=e.className,t=e.isAutoHideEnabled,c=e.href,f=e.target,h=e.onClick,p=e.children,v=function(e,r){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&r.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)r.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(t[a[n]]=e[a[n]])}return t}(e,["className","isAutoHideEnabled","href","target","onClick","children"]),m=(0,n.useCallback)((function(e){var r=c||"";"#"!==r?f?l.g.supports("targetblank")||(e.preventDefault(),i.A.openUrl(r)):(e.preventDefault(),u.appRouter.show(r).catch((function(e){console.error("[LinkButton] failed to show url",r,e)}))):e.preventDefault(),null==h||h(e)}),[c,f,h]);if(!0===t&&!l.g.supports("externallinks"))return null;var b=o()("emby-button",r,{"show-focus":s.A.tv});return(0,a.jsx)("a",d({className:b,href:c,target:f,onClick:m},v,{children:p}))}},85817:function(e,r,t){var a=t(62540),n=(t(63696),t(5898));r.A=function(e){var r=e.is,t=e.id,c=e.className,o=e.title,s=e.icon,i=e.dataIndex,u=e.dataTag,l=e.dataProfileid,d=e.onClick,f=function(e){var r=e.id,t=e.className,a=e.title,n=e.icon,c=e.dataIndex,o=e.dataTag,s=e.dataProfileid;return{__html:'<button\n        is="'.concat(e.is,'"\n        type="button"\n        ').concat(r,'\n        class="').concat(t,'"\n        ').concat(a,"\n        ").concat(c,"\n        ").concat(o,"\n        ").concat(s,'\n    >\n        <span class="material-icons ').concat(n,'" aria-hidden="true"></span>\n    </button>')}}({is:r,id:t?'id="'.concat(t,'"'):"",className:c,title:o?'title="'.concat(n.Ay.translate(o),'"'):"",icon:s,dataIndex:i||0===i?'data-index="'.concat(i,'"'):"",dataTag:u?'data-tag="'.concat(u,'"'):"",dataProfileid:l?'data-profileid="'.concat(l,'"'):""});return void 0!==d?(0,a.jsx)("button",{style:{all:"unset"},dangerouslySetInnerHTML:f,onClick:d}):(0,a.jsx)("div",{dangerouslySetInnerHTML:f})}}}]);