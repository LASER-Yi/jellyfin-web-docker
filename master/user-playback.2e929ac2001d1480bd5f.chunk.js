"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3736],{9389:function(e,t,a){var i=a(94389),n=a(33942);t.ZP={getVideoQualityOptions:function(e){var t,a=e.currentMaxBitrate,l=e.videoWidth,o=e.videoHeight;l/o<16/9&&(l=o*(16/9));var s=(null===(t=i.M.screen())||void 0===t?void 0:t.maxAllowedWidth)||4096,r=l||4096,c=[],u={name:n.ZP.translate("Auto"),bitrate:0,selected:e.isAutomaticBitrateEnabled};if(e.enableAuto&&c.push(u),r>=3800&&s>=1930&&(c.push({name:"4K - 120 Mbps",maxHeight:2160,bitrate:12e7}),c.push({name:"4K - 80 Mbps",maxHeight:2160,bitrate:8e7})),r>=1900&&s>=1290&&(c.push({name:"1080p - 60 Mbps",maxHeight:1080,bitrate:6e7}),c.push({name:"1080p - 40 Mbps",maxHeight:1080,bitrate:4e7}),c.push({name:"1080p - 20 Mbps",maxHeight:1080,bitrate:2e7}),c.push({name:"1080p - 15 Mbps",maxHeight:1080,bitrate:15e6}),c.push({name:"1080p - 10 Mbps",maxHeight:1080,bitrate:1e7})),r>=1260&&s>=650&&(c.push({name:"720p - 8 Mbps",maxHeight:720,bitrate:8e6}),c.push({name:"720p - 6 Mbps",maxHeight:720,bitrate:6e6}),c.push({name:"720p - 4 Mbps",maxHeight:720,bitrate:4e6})),r>=620&&(c.push({name:"480p - 3 Mbps",maxHeight:480,bitrate:3e6}),c.push({name:"480p - 1.5 Mbps",maxHeight:480,bitrate:15e5}),c.push({name:"480p - 720 kbps",maxHeight:480,bitrate:72e4})),c.push({name:"360p - 420 kbps",maxHeight:360,bitrate:42e4}),a){for(var d=c.length-1,b=0,h=c.length;b<h;b++){var p=c[b];if(p.bitrate>0&&p.bitrate<=a){d=b;break}}var y=c[d];e.isAutomaticBitrateEnabled?u.autoText=y.name:y.selected=!0}return c},getAudioQualityOptions:function(e){var t=e.currentMaxBitrate,a=[],i={name:n.ZP.translate("Auto"),bitrate:0,selected:e.isAutomaticBitrateEnabled};if(e.enableAuto&&a.push(i),a.push({name:"2 Mbps",bitrate:2e6}),a.push({name:"1.5 Mbps",bitrate:15e5}),a.push({name:"1 Mbps",bitrate:1e6}),a.push({name:"320 kbps",bitrate:32e4}),a.push({name:"256 kbps",bitrate:256e3}),a.push({name:"192 kbps",bitrate:192e3}),a.push({name:"128 kbps",bitrate:128e3}),a.push({name:"96 kbps",bitrate:96e3}),a.push({name:"64 kbps",bitrate:64e3}),t){for(var l=a.length-1,o=0,s=a.length;o<s;o++){var r=a[o];if(r.bitrate>0&&r.bitrate<=t){l=o;break}}var c=a[l];e.isAutomaticBitrateEnabled?i.autoText=c.name:c.selected=!0}return a}}},25466:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}}),a(61013),a(23938),a(99785);var i=a(47518),n=a(67469),l=a(94389),o=a(27515),s=a(9389),r=a(33942),c=a(56705),u=a(47005),d=(a(20716),a(45368),a(53913)),b=a(25152);function h(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e){e.innerHTML=[5,10,15,20,25,30].map((function(e){return{name:r.ZP.translate("ValueSeconds",e),value:1e3*e}})).map((function(e){return'<option value="'.concat(e.value,'">').concat(e.name,"</option>")})).join("")}function y(e,t,a){var i="Audio"===a?s.ZP.getAudioQualityOptions({currentMaxBitrate:n.Z.maxStreamingBitrate(t,a),isAutomaticBitrateEnabled:n.Z.enableAutomaticBitrateDetection(t,a),enableAuto:!0}):s.ZP.getVideoQualityOptions({currentMaxBitrate:n.Z.maxStreamingBitrate(t,a),isAutomaticBitrateEnabled:n.Z.enableAutomaticBitrateDetection(t,a),enableAuto:!0});e.innerHTML=i.map((function(e){return'<option value="'.concat(e.bitrate||"",'">').concat(e.name,"</option>")})).join(""),n.Z.enableAutomaticBitrateDetection(t,a)?e.value="":e.value=n.Z.maxStreamingBitrate(t,a)}function m(e,t,a){e.value?(n.Z.maxStreamingBitrate(t,a,e.value),n.Z.enableAutomaticBitrateDetection(t,a,!1)):n.Z.enableAutomaticBitrateDetection(t,a,!0)}function v(e){var t=this,a=d.Z.getApiClient(t.options.serverId),i=t.options.userId,l=t.options.userSettings;return l.setUserInfo(i,a).then((function(){var e=t.options.enableSaveConfirmation;!function(e,t,a,i,l,o){c.ZP.show(),l.getUser(a).then((function(a){(function(e,t,a,i){return n.Z.enableSystemExternalPlayers(e.querySelector(".chkExternalVideoPlayer").checked),n.Z.maxChromecastBitrate(e.querySelector(".selectChromecastVideoQuality").value),m(e.querySelector(".selectVideoInNetworkQuality"),!0,"Video"),m(e.querySelector(".selectVideoInternetQuality"),!1,"Video"),m(e.querySelector(".selectMusicInternetQuality"),!1,"Audio"),a.allowedAudioChannels(e.querySelector("#selectAllowedAudioChannels").value),t.Configuration.AudioLanguagePreference=e.querySelector("#selectAudioLanguage").value,t.Configuration.PlayDefaultAudioTrack=e.querySelector(".chkPlayDefaultAudioTrack").checked,t.Configuration.EnableNextEpisodeAutoPlay=e.querySelector(".chkEpisodeAutoPlay").checked,a.preferFmp4HlsContainer(e.querySelector(".chkPreferFmp4HlsContainer").checked),a.enableCinemaMode(e.querySelector(".chkEnableCinemaMode").checked),a.enableNextVideoInfoOverlay(e.querySelector(".chkEnableNextVideoOverlay").checked),a.enableSetUsingLastTracks(e.querySelector(".chkSetUsingLastTracks").checked),a.chromecastVersion(e.querySelector(".selectChromecastVersion").value),a.skipForwardLength(e.querySelector(".selectSkipForwardLength").value),a.skipBackLength(e.querySelector(".selectSkipBackLength").value),i.updateUserConfiguration(t.Id,t.Configuration)})(t,a,i,l).then((function(){c.ZP.hide(),o&&(0,b.Z)(r.ZP.translate("SettingsSaved")),u.Events.trigger(e,"saved")}),(function(){c.ZP.hide()}))}))}(t,t.options.element,i,l,a,e)})),e&&e.preventDefault(),!1}var k=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,function(e,t){e.element.innerHTML=r.ZP.translateHtml('<form style="margin:0 auto"> <div class="verticalSection verticalSection-extrabottompadding"> <h2 class="sectionTitle"> ${HeaderAudioSettings} </h2> <div class="selectContainer"> <select is="emby-select" id="selectAllowedAudioChannels" label="${LabelAllowedAudioChannels}"> <option value="-1">${Auto}</option> <option value="1">${LabelSelectMono}</option> <option value="2">${LabelSelectStereo}</option> <option value="6">5.1 ${LabelSelectAudioChannels}</option> <option value="8">7.1 ${LabelSelectAudioChannels}</option> </select> </div> <div class="selectContainer"> <select is="emby-select" id="selectAudioLanguage" label="${LabelAudioLanguagePreference}"></select> </div> <label class="checkboxContainer"> <input type="checkbox" is="emby-checkbox" class="chkPlayDefaultAudioTrack"/> <span>${LabelPlayDefaultAudioTrack}</span> </label> </div> <div class="qualitySections hide"> <div class="verticalSection verticalSection-extrabottompadding videoQualitySection hide"> <h2 class="sectionTitle"> ${HeaderVideoQuality} </h2> <div class="selectContainer fldVideoInNetworkQuality hide"> <select is="emby-select" class="selectVideoInNetworkQuality" label="${LabelHomeNetworkQuality}"></select> </div> <div class="selectContainer fldVideoInternetQuality hide"> <select is="emby-select" class="selectVideoInternetQuality" label="${LabelInternetQuality}"></select> </div> <div class="selectContainer fldChromecastQuality hide"> <select is="emby-select" class="selectChromecastVideoQuality" label="${LabelMaxChromecastBitrate}"></select> </div> </div> <div class="verticalSection verticalSection-extrabottompadding musicQualitySection hide"> <h2> ${HeaderMusicQuality} </h2> <div class="selectContainer"> <select is="emby-select" class="selectMusicInternetQuality" label="${LabelInternetQuality}"></select> </div> </div> </div> <div class="verticalSection verticalSection-extrabottompadding"> <h2 class="sectionTitle"> ${TabAdvanced} </h2> <div class="checkboxContainer checkboxContainer-withDescription"> <label> <input type="checkbox" is="emby-checkbox" class="chkPreferFmp4HlsContainer"/> <span>${PreferFmp4HlsContainer}</span> </label> <div class="fieldDescription checkboxFieldDescription">${PreferFmp4HlsContainerHelp}</div> </div> <div class="checkboxContainer checkboxContainer-withDescription cinemaModeOptions"> <label> <input type="checkbox" is="emby-checkbox" class="chkEnableCinemaMode"/> <span>${EnableCinemaMode}</span> </label> <div class="fieldDescription checkboxFieldDescription">${CinemaModeConfigurationHelp}</div> </div> <div class="checkboxContainer fldEpisodeAutoPlay hide"> <label> <input type="checkbox" is="emby-checkbox" class="chkEpisodeAutoPlay"/> <span>${PlayNextEpisodeAutomatically}</span> </label> </div> <div class="checkboxContainer checkboxContainer-withDescription"> <label> <input type="checkbox" is="emby-checkbox" class="chkSetUsingLastTracks"/> <span>${SetUsingLastTracks}</span> </label> <div class="fieldDescription checkboxFieldDescription">${SetUsingLastTracksHelp}</div> </div> <div class="checkboxContainer checkboxContainer-withDescription fldEnableNextVideoOverlay"> <label> <input type="checkbox" is="emby-checkbox" class="chkEnableNextVideoOverlay"/> <span>${EnableNextVideoInfoOverlay}</span> </label> <div class="fieldDescription checkboxFieldDescription">${EnableNextVideoInfoOverlayHelp}</div> </div> <div class="checkboxContainer fldExternalPlayer checkboxContainer-withDescription hide"> <label> <input type="checkbox" is="emby-checkbox" class="chkExternalVideoPlayer"/> <span>${EnableExternalVideoPlayers}</span> </label> <div class="fieldDescription checkboxFieldDescription"> <div class="labelNativeExternalPlayers">${EnableExternalVideoPlayersHelp}</div> </div> </div> <div class="selectContainer"> <select is="emby-select" class="selectChromecastVersion" label="${LabelChromecastVersion}"> <option value="stable">${LabelStable}</option> <option value="unstable">${LabelUnstable}</option> </select> </div> <div class="selectContainer"> <select is="emby-select" class="selectSkipForwardLength" label="${LabelSkipForwardLength}"></select> </div> <div class="selectContainer"> <select is="emby-select" class="selectSkipBackLength" label="${LabelSkipBackLength}"></select> </div> </div> <button is="emby-button" type="submit" class="raised button-submit block btnSave hide"> <span>${Save}</span> </button> </form> ',"core"),e.element.querySelector("form").addEventListener("submit",v.bind(t)),e.enableSaveButton&&e.element.querySelector(".btnSave").classList.remove("hide"),t.loadData(),e.autoFocus&&o.Z.autoFocus(e.element)}(t,this)}var t,a;return t=e,a=[{key:"loadData",value:function(){var e=this,t=e.options.element;c.ZP.show();var a=e.options.userId,o=d.Z.getApiClient(e.options.serverId),u=e.options.userSettings;o.getUser(a).then((function(d){u.setUserInfo(a,o).then((function(){e.dataLoaded=!0,function(e,t,a,o){var u,d,b=o.getCurrentUserId(),h=t.Id;!function(e,t,a){if(t.Policy.EnableVideoPlaybackTranscoding?e.querySelector(".videoQualitySection").classList.remove("hide"):e.querySelector(".videoQualitySection").classList.add("hide"),l.M.supports("multiserver"))return e.querySelector(".fldVideoInNetworkQuality").classList.remove("hide"),e.querySelector(".fldVideoInternetQuality").classList.remove("hide"),void(t.Policy.EnableAudioPlaybackTranscoding?e.querySelector(".musicQualitySection").classList.remove("hide"):e.querySelector(".musicQualitySection").classList.add("hide"));a.getEndpointInfo().then((function(a){a.IsInNetwork?(e.querySelector(".fldVideoInNetworkQuality").classList.remove("hide"),e.querySelector(".fldVideoInternetQuality").classList.add("hide"),e.querySelector(".musicQualitySection").classList.add("hide")):(e.querySelector(".fldVideoInNetworkQuality").classList.add("hide"),e.querySelector(".fldVideoInternetQuality").classList.remove("hide"),t.Policy.EnableAudioPlaybackTranscoding?e.querySelector(".musicQualitySection").classList.remove("hide"):e.querySelector(".musicQualitySection").classList.add("hide"))}))}(e,t,o),e.querySelector("#selectAllowedAudioChannels").value=a.allowedAudioChannels(),o.getCultures().then((function(a){!function(e,t){var a="";a+="<option value=''>".concat(r.ZP.translate("AnyLanguage"),"</option>");for(var i=0,n=t.length;i<n;i++){var l=t[i];a+="<option value='".concat(l.ThreeLetterISOLanguageName,"'>").concat(l.DisplayName,"</option>")}e.innerHTML=a}(e.querySelector("#selectAudioLanguage"),a),e.querySelector("#selectAudioLanguage",e).value=t.Configuration.AudioLanguagePreference||"",e.querySelector(".chkEpisodeAutoPlay").checked=t.Configuration.EnableNextEpisodeAutoPlay||!1})),l.M.supports("externalplayerintent")&&h===b?e.querySelector(".fldExternalPlayer").classList.remove("hide"):e.querySelector(".fldExternalPlayer").classList.add("hide"),h===b&&(t.Policy.EnableVideoPlaybackTranscoding||t.Policy.EnableAudioPlaybackTranscoding)?(e.querySelector(".qualitySections").classList.remove("hide"),l.M.supports("chromecast")&&t.Policy.EnableVideoPlaybackTranscoding?e.querySelector(".fldChromecastQuality").classList.remove("hide"):e.querySelector(".fldChromecastQuality").classList.add("hide")):(e.querySelector(".qualitySections").classList.add("hide"),e.querySelector(".fldChromecastQuality").classList.add("hide")),e.querySelector(".chkPlayDefaultAudioTrack").checked=t.Configuration.PlayDefaultAudioTrack||!1,e.querySelector(".chkPreferFmp4HlsContainer").checked=a.preferFmp4HlsContainer(),e.querySelector(".chkEnableCinemaMode").checked=a.enableCinemaMode(),e.querySelector(".chkEnableNextVideoOverlay").checked=a.enableNextVideoInfoOverlay(),e.querySelector(".chkSetUsingLastTracks").checked=a.enableSetUsingLastTracks(),e.querySelector(".chkExternalVideoPlayer").checked=n.Z.enableSystemExternalPlayers(),y(e.querySelector(".selectVideoInNetworkQuality"),!0,"Video"),y(e.querySelector(".selectVideoInternetQuality"),!1,"Video"),y(e.querySelector(".selectMusicInternetQuality"),!1,"Audio"),u=e.querySelector(".selectChromecastVideoQuality"),d=s.ZP.getVideoQualityOptions({currentMaxBitrate:n.Z.maxChromecastBitrate(),isAutomaticBitrateEnabled:!n.Z.maxChromecastBitrate(),enableAuto:!0}),u.innerHTML=d.map((function(e){return'<option value="'.concat(e.bitrate||"",'">').concat(e.name,"</option>")})).join(""),u.value=n.Z.maxChromecastBitrate()||"",e.querySelector(".selectChromecastVersion").value=a.chromecastVersion();var m=e.querySelector(".selectSkipForwardLength");p(m),m.value=a.skipForwardLength();var v=e.querySelector(".selectSkipBackLength");p(v),v.value=a.skipBackLength(),function(e){i.Z.tizen||i.Z.web0s?e.querySelector(".fldEpisodeAutoPlay").classList.add("hide"):e.querySelector(".fldEpisodeAutoPlay").classList.remove("hide")}(e),c.ZP.hide()}(t,d,u,o)}))}))}},{key:"submit",value:function(){v.call(this)}},{key:"destroy",value:function(){this.options=null}}],a&&h(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),S=k,f=a(28978),g=a(6610),x=(a(664),f.UserSettings);function C(e,t){var a,i=t.userId||ApiClient.getCurrentUserId(),n=i===ApiClient.getCurrentUserId()?f:new x;e.addEventListener("viewshow",(function(){a?a.loadData():a=new S({serverId:ApiClient.serverId(),userId:i,element:e.querySelector(".settingsContainer"),userSettings:n,enableSaveButton:!0,enableSaveConfirmation:!0,autoFocus:g.default.isEnabled()})})),e.addEventListener("viewdestroy",(function(){a&&(a.destroy(),a=null)}))}}}]);