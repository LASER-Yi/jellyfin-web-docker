"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[66781],{1573:function(e,t){var a;t._=void 0,(a=t._||(t._={})).Primary="Primary",a.Art="Art",a.Backdrop="Backdrop",a.Banner="Banner",a.Logo="Logo",a.Thumb="Thumb",a.Disc="Disc",a.Box="Box",a.Screenshot="Screenshot",a.Menu="Menu",a.Chapter="Chapter",a.BoxRear="BoxRear",a.Profile="Profile"},6055:function(e,t,a){var n=a(24246),r=a(27378),s=a(53424),o=function(){return o=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};t.Z=function(e){var t=e.children,a=e.id,i=e.className,l=void 0===i?"":i,c=e.title,d=e.isBackButtonEnabled,u=void 0===d||d,m=e.isMenuButtonEnabled,p=void 0!==m&&m,f=e.isNowPlayingBarEnabled,h=void 0===f||f,P=e.isThemeMediaSupported,y=void 0!==P&&P,v=e.backDropType,w=(0,r.useRef)(null);return(0,r.useEffect)((function(){s.Z.hideView()}),[]),(0,r.useEffect)((function(){var e,t,a,n,r={bubbles:!0,cancelable:!1,detail:{isRestored:!1,options:{enableMediaControl:h,supportsThemeMedia:y}}};null===(e=w.current)||void 0===e||e.dispatchEvent(new CustomEvent("viewbeforeshow",r)),null===(t=w.current)||void 0===t||t.dispatchEvent(new CustomEvent("pagebeforeshow",r)),null===(a=w.current)||void 0===a||a.dispatchEvent(new CustomEvent("viewshow",r)),null===(n=w.current)||void 0===n||n.dispatchEvent(new CustomEvent("pageshow",r))}),[w,h,y]),(0,n.jsx)("div",o({ref:w,id:a,"data-role":"page",className:"page ".concat(l),"data-title":c,"data-backbutton":u,"data-menubutton":p,"data-backdroptype":v},{children:t}))}},42363:function(e,t,a){var n=a(24246),r=a(27378),s=a(60635),o=a(94994),i=a(71487),l=a(3137),c=a(28540),d=a(56663),u=a(48606),m=a(76197),p=a(8121),f=function(){return f=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},f.apply(this,arguments)};t.Z=function(e){var t=e.userId,h=(0,r.useRef)(null),P=(0,r.useCallback)((function(){var e=h.current;e?(window.ApiClient.getUser(t).then((function(t){s.ZP.getCurrentUser().then((function(n){var r,s;if(!t.Policy)throw new Error("Unexpected null user.Policy");if(!t.Configuration)throw new Error("Unexpected null user.Configuration");i.Z.setTitle(t.Name);var o=!1;t.HasConfiguredPassword?(e.querySelector("#btnResetPassword").classList.remove("hide"),e.querySelector("#fldCurrentPassword").classList.remove("hide"),o=!0):(e.querySelector("#btnResetPassword").classList.add("hide"),e.querySelector("#fldCurrentPassword").classList.add("hide")),(null===(r=null==n?void 0:n.Policy)||void 0===r?void 0:r.IsAdministrator)||t.Policy.EnableUserPreferenceAccess?e.querySelector(".passwordSection").classList.remove("hide"):e.querySelector(".passwordSection").classList.add("hide"),o&&((null===(s=null==n?void 0:n.Policy)||void 0===s?void 0:s.IsAdministrator)||t.Policy.EnableUserPreferenceAccess)?e.querySelector(".localAccessSection").classList.remove("hide"):e.querySelector(".localAccessSection").classList.add("hide");var l=e.querySelector("#txtEasyPassword");l.value="",t.HasConfiguredEasyPassword?(l.placeholder="******",e.querySelector("#btnResetEasyPassword").classList.remove("hide")):(l.removeAttribute("placeholder"),l.placeholder="",e.querySelector("#btnResetEasyPassword").classList.add("hide")),e.querySelector(".chkEnableLocalEasyPassword").checked=t.Configuration.EnableLocalPassword||!1,Promise.resolve().then(a.bind(a,87680)).then((function(t){t.default.autoFocus(e)}))}))})),e.querySelector("#txtCurrentPassword").value="",e.querySelector("#txtNewPassword").value="",e.querySelector("#txtNewPasswordConfirm").value=""):console.error("Unexpected null reference")}),[t]);return(0,r.useEffect)((function(){var e=h.current;if(e){P();var a=function(){window.ApiClient.getUser(t).then((function(t){if(!t.Configuration)throw new Error("Unexpected null user.Configuration");if(!t.Id)throw new Error("Unexpected null user.Id");t.Configuration.EnableLocalPassword=e.querySelector(".chkEnableLocalEasyPassword").checked,window.ApiClient.updateUserConfiguration(t.Id,t.Configuration).then((function(){c.ZP.hide(),(0,d.Z)(o.ZP.translate("SettingsSaved")),P()}))}))};e.querySelector(".updatePasswordForm").addEventListener("submit",(function(a){return e.querySelector("#txtNewPassword").value!=e.querySelector("#txtNewPasswordConfirm").value?(0,d.Z)(o.ZP.translate("PasswordMatchError")):(c.ZP.show(),n=e.querySelector("#txtCurrentPassword").value,r=e.querySelector("#txtNewPassword").value,e.querySelector("#fldCurrentPassword").classList.contains("hide")&&(n=""),window.ApiClient.updateUserPassword(t,n,r).then((function(){c.ZP.hide(),(0,d.Z)(o.ZP.translate("PasswordSaved")),P()}),(function(){c.ZP.hide(),s.ZP.alert({title:o.ZP.translate("HeaderLoginFailure"),message:o.ZP.translate("MessageInvalidUser")})}))),a.preventDefault(),!1;var n,r})),e.querySelector(".localAccessForm").addEventListener("submit",(function(n){return c.ZP.show(),(r=e.querySelector("#txtEasyPassword").value)?window.ApiClient.updateEasyPassword(t,r).then((function(){a()})):a(),n.preventDefault(),!1;var r})),e.querySelector("#btnResetEasyPassword").addEventListener("click",(function(){var e=o.ZP.translate("PinCodeResetConfirmation");(0,l.Z)(e,o.ZP.translate("HeaderPinCodeReset")).then((function(){c.ZP.show(),window.ApiClient.resetEasyPassword(t).then((function(){c.ZP.hide(),s.ZP.alert({message:o.ZP.translate("PinCodeResetComplete"),title:o.ZP.translate("HeaderPinCodeReset")}),P()}))}))})),e.querySelector("#btnResetPassword").addEventListener("click",(function(){var e=o.ZP.translate("PasswordResetConfirmation");(0,l.Z)(e,o.ZP.translate("ResetPassword")).then((function(){c.ZP.show(),window.ApiClient.resetUserPassword(t).then((function(){c.ZP.hide(),s.ZP.alert({message:o.ZP.translate("PasswordResetComplete"),title:o.ZP.translate("ResetPassword")}),P()}))}))}))}else console.error("Unexpected null reference")}),[P,t]),(0,n.jsxs)("div",f({ref:h},{children:[(0,n.jsx)("form",f({className:"updatePasswordForm passwordSection hide",style:{margin:"0 auto 2em"}},{children:(0,n.jsxs)("div",f({className:"detailSection"},{children:[(0,n.jsx)("div",f({id:"fldCurrentPassword",className:"inputContainer hide"},{children:(0,n.jsx)(p.Z,{type:"password",id:"txtCurrentPassword",label:"LabelCurrentPassword",options:'autoComplete="off"'})})),(0,n.jsx)("div",f({className:"inputContainer"},{children:(0,n.jsx)(p.Z,{type:"password",id:"txtNewPassword",label:"LabelNewPassword",options:'autoComplete="off"'})})),(0,n.jsx)("div",f({className:"inputContainer"},{children:(0,n.jsx)(p.Z,{type:"password",id:"txtNewPasswordConfirm",label:"LabelNewPasswordConfirm",options:'autoComplete="off"'})})),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{children:[(0,n.jsx)(u.Z,{type:"submit",className:"raised button-submit block",title:"Save"}),(0,n.jsx)(u.Z,{type:"button",id:"btnResetPassword",className:"raised button-cancel block hide",title:"ResetPassword"})]})]}))})),(0,n.jsx)("br",{}),(0,n.jsx)("form",f({className:"localAccessForm localAccessSection",style:{margin:"0 auto"}},{children:(0,n.jsxs)("div",f({className:"detailSection"},{children:[(0,n.jsx)("div",f({className:"detailSectionHeader"},{children:o.ZP.translate("HeaderEasyPinCode")})),(0,n.jsx)("br",{}),(0,n.jsx)("div",{children:o.ZP.translate("EasyPasswordHelp")}),(0,n.jsx)("br",{}),(0,n.jsx)("div",f({className:"inputContainer"},{children:(0,n.jsx)(p.Z,{type:"number",id:"txtEasyPassword",label:"LabelEasyPinCode",options:'autoComplete="off" pattern="[0-9]*" step="1" maxlength="5"'})})),(0,n.jsx)("br",{}),(0,n.jsxs)("div",f({className:"checkboxContainer checkboxContainer-withDescription"},{children:[(0,n.jsx)(m.Z,{className:"chkEnableLocalEasyPassword",title:"LabelInNetworkSignInWithEasyPassword"}),(0,n.jsx)("div",f({className:"fieldDescription checkboxFieldDescription"},{children:o.ZP.translate("LabelInNetworkSignInWithEasyPasswordHelp")}))]})),(0,n.jsxs)("div",{children:[(0,n.jsx)(u.Z,{type:"submit",className:"raised button-submit block",title:"Save"}),(0,n.jsx)(u.Z,{type:"button",id:"btnResetEasyPassword",className:"raised button-cancel block hide",title:"ButtonResetEasyPassword"})]})]}))}))]}))}},48606:function(e,t,a){var n=a(24246),r=a(94994),s=function(e){var t=e.type,a=e.id,n=e.className,r=e.title,s=e.leftIcon,o=e.rightIcon;return{__html:'<button\n        is="emby-button"\n        type="'.concat(t,'"\n        ').concat(a,'\n        class="').concat(n,'"\n        >\n        ').concat(s,"\n        <span>").concat(r,"</span>\n        ").concat(o,"\n    </button>")}};t.Z=function(e){var t=e.type,a=e.id,o=e.className,i=e.title,l=e.leftIcon,c=e.rightIcon;return(0,n.jsx)("div",{dangerouslySetInnerHTML:s({type:t,id:a?'id="'.concat(a,'"'):"",className:o,title:r.ZP.translate(i),leftIcon:l?'<span class="material-icons '.concat(l,'" aria-hidden="true"></span>'):"",rightIcon:c?'<span class="material-icons '.concat(c,'" aria-hidden="true"></span>'):""})})}},76197:function(e,t,a){var n=a(24246),r=a(65009),s=a.n(r),o=a(94994),i=function(e){var t=e.labelClassName,a=e.className,n=e.id,r=e.dataFilter,s=e.dataItemType,o=e.dataId,i=e.checkedAttribute,l=e.renderContent;return{__html:"<label ".concat(t,'>\n        <input\n            is="emby-checkbox"\n            type="checkbox"\n            class="').concat(a,'"\n            ').concat(n,"\n            ").concat(r,"\n            ").concat(s,"\n            ").concat(o,"\n            ").concat(i,"\n        />\n        ").concat(l,"\n    </label>")}};t.Z=function(e){var t=e.labelClassName,a=e.className,r=e.elementId,l=e.dataFilter,c=e.itemType,d=e.itemId,u=e.itemAppName,m=e.itemCheckedAttribute,p=e.itemName,f=e.title,h=u?"- ".concat(u):"",P=p?"<span>".concat(s()(p||"")," ").concat(h,"</span>"):"<span>".concat(o.ZP.translate(f),"</span>");return(0,n.jsx)("div",{className:"sectioncheckbox",dangerouslySetInnerHTML:i({labelClassName:t?"class='".concat(t,"'"):"",className:a,id:r?"id='".concat(r,"'"):"",dataFilter:l?"data-filter='".concat(l,"'"):"",dataItemType:c?"data-itemtype='".concat(c,"'"):"",dataId:d?"data-id='".concat(d,"'"):"",checkedAttribute:m||"",renderContent:P})})}},8121:function(e,t,a){var n=a(24246),r=a(94994),s=function(e){var t=e.type,a=e.id,n=e.label,r=e.options;return{__html:'<input\n        is="emby-input"\n        type="'.concat(t,'"\n        id="').concat(a,'"\n        label="').concat(n,'"\n        ').concat(r,"\n    />")}};t.Z=function(e){var t=e.type,a=e.id,o=e.label,i=e.options;return(0,n.jsx)("div",{dangerouslySetInnerHTML:s({type:t,id:a,label:r.ZP.translate(o),options:i||""})})}},18412:function(e,t,a){a.r(t);var n=a(24246),r=a(1573),s=a(27378),o=a(60635),i=a(94994),l=a(71487),c=a(84881),d=a(3137),u=a(48606),m=a(42363),p=a(28540),f=a(56663),h=a(85951),P=a(6055),y=function(){return y=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},y.apply(this,arguments)};t.default=function(){var e=(0,h.a)("userId"),t=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,s=a.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}return o}((0,s.useState)(""),2),a=t[0],v=t[1],w=(0,s.useRef)(null),b=(0,s.useCallback)((function(){var t=w.current;t?(p.ZP.show(),window.ApiClient.getUser(e).then((function(e){if(!e.Name)throw new Error("Unexpected null user.Name");if(!e.Id)throw new Error("Unexpected null user.Id");v(e.Name),l.Z.setTitle(e.Name);var a="assets/img/avatar.png";e.PrimaryImageTag&&(a=window.ApiClient.getUserImageUrl(e.Id,{tag:e.PrimaryImageTag,type:"Primary"})),t.querySelector("#image").style.backgroundImage="url("+a+")",o.ZP.getCurrentUser().then((function(a){var n;if(!e.Policy)throw new Error("Unexpected null user.Policy");e.PrimaryImageTag?(t.querySelector("#btnAddImage").classList.add("hide"),t.querySelector("#btnDeleteImage").classList.remove("hide")):c.M.supports("fileinput")&&((null===(n=null==a?void 0:a.Policy)||void 0===n?void 0:n.IsAdministrator)||e.Policy.EnableUserPreferenceAccess)&&(t.querySelector("#btnDeleteImage").classList.add("hide"),t.querySelector("#btnAddImage").classList.remove("hide"))})),p.ZP.hide()}))):console.error("Unexpected null reference")}),[e]);return(0,s.useEffect)((function(){var t=w.current;if(t){b();var a=function(e){var t,a;switch(p.ZP.hide(),null===(a=null===(t=e.target)||void 0===t?void 0:t.error)||void 0===a?void 0:a.code){case DOMException.NOT_FOUND_ERR:(0,f.Z)(i.ZP.translate("FileNotFound"));break;case DOMException.ABORT_ERR:n();break;default:(0,f.Z)(i.ZP.translate("FileReadError"))}},n=function(){p.ZP.hide(),(0,f.Z)(i.ZP.translate("FileReadCancelled"))};t.querySelector("#btnDeleteImage").addEventListener("click",(function(){(0,d.Z)(i.ZP.translate("DeleteImageConfirmation"),i.ZP.translate("DeleteImage")).then((function(){p.ZP.show(),window.ApiClient.deleteUserImage(e,r._.Primary).then((function(){p.ZP.hide(),b()}))}))})),t.querySelector("#btnAddImage").addEventListener("click",(function(){var e=t.querySelector("#uploadImage");e.value="",e.click()})),t.querySelector("#uploadImage").addEventListener("change",(function(s){!function(s){var o=t.querySelector("#image"),i=s.target.files[0];if(!i||!i.type.match("image.*"))return!1;var l=new FileReader;l.onerror=a,l.onabort=n,l.onload=function(){o.style.backgroundImage="url("+l.result+")",window.ApiClient.uploadUserImage(e,r._.Primary,i).then((function(){p.ZP.hide(),b()}))},l.readAsDataURL(i)}(s)}))}else console.error("Unexpected null reference")}),[b,e]),(0,n.jsx)(P.Z,y({id:"userProfilePage",title:i.ZP.translate("Profile"),className:"mainAnimatedPage libraryPage userPreferencesPage userPasswordPage noSecondaryNavPage"},{children:(0,n.jsxs)("div",y({ref:w,className:"padded-left padded-right padded-bottom-page"},{children:[(0,n.jsxs)("div",y({className:"readOnlyContent",style:{margin:"0 auto",marginBottom:"1.8em",padding:"0 1em",display:"flex",flexDirection:"row",alignItems:"center"}},{children:[(0,n.jsxs)("div",y({className:"imagePlaceHolder",style:{position:"relative",display:"inline-block",maxWidth:200}},{children:[(0,n.jsx)("input",{id:"uploadImage",type:"file",accept:"image/*",style:{position:"absolute",right:0,width:"100%",height:"100%",opacity:0,cursor:"pointer"}}),(0,n.jsx)("div",{id:"image",style:{width:200,height:200,backgroundRepeat:"no-repeat",backgroundPosition:"center",borderRadius:"100%",backgroundSize:"cover"}})]})),(0,n.jsxs)("div",y({style:{verticalAlign:"top",margin:"1em 2em",display:"flex",flexDirection:"column",alignItems:"center"}},{children:[(0,n.jsx)("h2",y({className:"username",style:{margin:0,fontSize:"xx-large"}},{children:a})),(0,n.jsx)("br",{}),(0,n.jsx)(u.Z,{type:"button",id:"btnAddImage",className:"raised button-submit hide",title:"ButtonAddImage"}),(0,n.jsx)(u.Z,{type:"button",id:"btnDeleteImage",className:"raised hide",title:"DeleteImage"})]}))]})),(0,n.jsx)(m.Z,{userId:e})]}))}))}}}]);