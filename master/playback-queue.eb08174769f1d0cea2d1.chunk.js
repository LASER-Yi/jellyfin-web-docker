"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[15098,49213,83264],{69011:function(e,t,n){n(61013),t.Z={getNowPlayingNames:function(e,t){var n,i,a=e,r=null,s=e.Name;e.AlbumId&&"Audio"===e.MediaType&&(a={Id:e.AlbumId,Name:e.Album,Type:"MusicAlbum",IsFolder:!0}),"Video"===e.MediaType&&(null!=e.IndexNumber&&(s=e.IndexNumber+" - "+s),null!=e.ParentIndexNumber&&(s=e.ParentIndexNumber+"."+s));var l="";null!==(n=e.ArtistItems)&&void 0!==n&&n.length?(r={Id:e.ArtistItems[0].Id,Name:e.ArtistItems[0].Name,Type:"MusicArtist",IsFolder:!0},l=e.ArtistItems.map((function(e){return e.Name})).join(", ")):null!==(i=e.Artists)&&void 0!==i&&i.length?l=e.Artists.join(", "):e.SeriesName||e.Album?(l=s,s=e.SeriesName||e.Album,r=a,a=e.SeriesId?{Id:e.SeriesId,Name:e.SeriesName,Type:"Series",IsFolder:!0}:null):e.ProductionYear&&!1!==t&&(l=e.ProductionYear);var o=[];return o.push({text:s,item:a}),l&&o.push({text:l,item:r}),o}}},62010:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}}),n(15610),n(25901),n(92189),n(91047),n(5769),n(61013),n(63238),n(61418),n(17460),n(14078),n(32081),n(52077),n(911),n(23938),n(72410),n(48410),n(27471),n(95623),n(61514),n(95163),n(98010),n(43512);var i=n(65009),a=n.n(i),r=n(61693),s=n(57084),l=n(63873),o=n(81038),d=n(48957),u=n(69011),c=n(67561),m=n(84881),f=n(94994),h=n(30325),v=n(60934),g=n(9337),y=(n(38228),n(61414),n(82427),n(27636),n(42855),n(18613)),p=n(56663),b=n(66560),S=n(26059);function I(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw r}}}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var L=!0,P=!0;function k(e,t){t?e.classList.remove("hide"):e.classList.add("hide")}function w(){function e(e,n,r){z=r;var l=r.NowPlayingItem,o=d.O.getPlayerInfo().supportedCommands;X=o;var c=r.PlayState||{},m=o.includes("DisplayMessage")||o.includes("SendString")||o.includes("Select");if(k(n.querySelector(".btnToggleFullscreen"),l&&"Video"==l.MediaType&&o.includes("ToggleFullscreen")),function(e,t){var n=X;k(t.querySelector(".btnAudioTracks"),d.O.audioTracks(e).length>1&&-1!=n.indexOf("SetAudioStreamIndex"))}(e,n),function(e,t){var n=X;k(t.querySelector(".btnSubtitles"),d.O.subtitleTracks(e).length&&-1!=n.indexOf("SetSubtitleStreamIndex"))}(e,n),o.includes("DisplayMessage")&&!K.isLocalPlayer?n.querySelector(".sendMessageSection").classList.remove("hide"):n.querySelector(".sendMessageSection").classList.add("hide"),o.includes("SendString")&&!K.isLocalPlayer?n.querySelector(".sendTextSection").classList.remove("hide"):n.querySelector(".sendTextSection").classList.add("hide"),o.includes("Select")&&!K.isLocalPlayer?n.querySelector(".navigationSection").classList.remove("hide"):n.querySelector(".navigationSection").classList.add("hide"),m&&!K.isLocalPlayer?n.querySelector(".remoteControlSection").classList.remove("hide"):n.querySelector(".remoteControlSection").classList.add("hide"),k(n.querySelector(".btnStop"),null!=l),k(n.querySelector(".btnNextTrack"),null!=l),k(n.querySelector(".btnPreviousTrack"),null!=l),h.Z.mobile){var f=d.O.isPlayingVideo()&&null!==l,p=!d.O.isPlayingVideo()&&null!==l,b=p&&"AudioBook"==l.Type;k(n.querySelector(".btnRepeat"),p&&!b),k(n.querySelector(".btnShuffleQueue"),p&&!b),k(n.querySelector(".btnRewind"),f||b),k(n.querySelector(".btnFastForward"),f||b),k(n.querySelector(".nowPlayingSecondaryButtons .btnShuffleQueue"),f),k(n.querySelector(".nowPlayingSecondaryButtons .btnRepeat"),f)}else k(n.querySelector(".btnRewind"),null!=l),k(n.querySelector(".btnFastForward"),null!=l);var L=n.querySelector(".nowPlayingPositionSlider");if(L&&l&&l.RunTimeTicks&&L.setKeyboardSteps(1e6*v.skipBackLength()/l.RunTimeTicks,1e6*v.skipForwardLength()/l.RunTimeTicks),L&&!L.dragging){L.disabled=!c.CanSeek;var P=r.MediaSource&&null==r.MediaSource.RunTimeTicks;L.setIsClear(P)}T(c.IsPaused,null!=l),w(c.PositionTicks,l?l.RunTimeTicks:null),i(n,c.IsMuted,c.VolumeLevel),l&&"Video"==l.MediaType?n.classList.remove("hideVideoButtons"):n.classList.add("hideVideoButtons"),t(d.O.getRepeatMode()),M(!1),function(e,t,n){var i,r=t.NowPlayingItem,l=r?(i=r,u.Z.getNowPlayingNames(i,void 0).map((function(e){return a()(e.text)})).join("<br/>")).replace("<br/>"," - "):"";if(r){var o=r.ServerId||n;if("AudioBook"==r.Type||"Audio"==r.Type||"Audio"==r.MediaStreams[0].Type){var d="",c="";if(null!=r.Artists)if(null!=r.ArtistItems){var m,f=I(r.ArtistItems);try{for(f.s();!(m=f.n()).done;){var h=m.value;d+='<a class="button-link emby-button" is="emby-linkbutton" href="#/details?id='.concat(h.Id,"&serverId=").concat(o,'">').concat(a()(h.Name),"</a>"),h!==r.ArtistItems.slice(-1)[0]&&(d+=", ")}}catch(e){f.e(e)}finally{f.f()}}else if(r.Artists){var v,p=I(r.Artists);try{for(p.s();!(v=p.n()).done;){var b=v.value;d+="<a>".concat(a()(b),"</a>"),b!==r.Artists.slice(-1)[0]&&(d+=", ")}}catch(e){p.e(e)}finally{p.f()}}null!=r.Album&&(c='<a class="button-link emby-button" is="emby-linkbutton" href="#/details?id='+r.AlbumId+"&serverId=".concat(o,'">')+a()(r.Album)+"</a>"),e.querySelector(".nowPlayingAlbum").innerHTML=c,e.querySelector(".nowPlayingArtist").innerHTML=d,e.querySelector(".nowPlayingSongName").innerText=r.Name}else if("Episode"==r.Type){if(null!=r.SeasonName){var T=r.SeasonName;e.querySelector(".nowPlayingSeason").innerHTML='<a class="button-link emby-button" is="emby-linkbutton" href="#/details?id='+r.SeasonId+"&serverId=".concat(o,'">').concat(a()(T),"</a>")}if(null!=r.SeriesName){var L=r.SeriesName;null!=r.SeriesId?e.querySelector(".nowPlayingSerie").innerHTML='<a class="button-link emby-button" is="emby-linkbutton" href="#/details?id='+r.SeriesId+"&serverId=".concat(o,'">').concat(a()(L),"</a>"):e.querySelector(".nowPlayingSerie").innerText=L}e.querySelector(".nowPlayingEpisode").innerText=r.Name}else e.querySelector(".nowPlayingPageTitle").innerHTML=l;l.length>0&&"Audio"!=r.Type&&"Episode"!=r.Type?e.querySelector(".nowPlayingPageTitle").classList.remove("hide"):e.querySelector(".nowPlayingPageTitle").classList.add("hide");var P=function(e,t){if("Episode"!==e.Type)return null;if((t=t||{}).type=t.type||"Primary","Primary"===t.type&&e.SeriesPrimaryImageTag)return t.tag=e.SeriesPrimaryImageTag,y.Z.getApiClient(e.ServerId).getScaledImageUrl(e.SeriesId,t);if("Thumb"===t.type){if(e.SeriesThumbImageTag)return t.tag=e.SeriesThumbImageTag,y.Z.getApiClient(e.ServerId).getScaledImageUrl(e.SeriesId,t);if(e.ParentThumbImageTag)return t.tag=e.ParentThumbImageTag,y.Z.getApiClient(e.ServerId).getScaledImageUrl(e.ParentThumbItemId,t)}return null}(r,{maxHeight:300})||function(e,t){var n;return(t=t||{}).type=t.type||"Primary",null!==(n=e.ImageTags)&&void 0!==n&&n[t.type]?(t.tag=e.ImageTags[t.type],y.Z.getApiClient(e.ServerId).getScaledImageUrl(e.PrimaryImageItemId||e.Id,t)):e.AlbumId&&e.AlbumPrimaryImageTag?(t.tag=e.AlbumPrimaryImageTag,y.Z.getApiClient(e.ServerId).getScaledImageUrl(e.AlbumId,t)):null}(r,{maxHeight:300}),k=e.querySelector(".btnToggleContextMenu"),w=document.activeElement===k,x=k.cloneNode(!0);k.parentNode.replaceChild(x,k),k=e.querySelector(".btnToggleContextMenu"),w&&k.focus();var q={play:!1,queue:!1,stopPlayback:!0,clearQueue:!0,openAlbum:!1,positionTo:k},A=y.Z.getApiClient(r.ServerId);A.getItem(A.getCurrentUserId(),r.Id).then((function(e){A.getCurrentUser().then((function(t){k.addEventListener("click",(function(){g.default.show(Object.assign({item:e,user:t},q)).catch((function(){}))}))}))})),function(e,t,n){var i=t.NowPlayingItem,a=e.querySelector(".nowPlayingPageImageContainer");n?(a.innerHTML='<img class="nowPlayingPageImage" src="'+n+'" />',e.querySelector(".nowPlayingPageImage").classList.toggle("nowPlayingPageImageAudio","Audio"===i.Type),e.querySelector(".nowPlayingPageImage").classList.toggle("nowPlayingPageImagePoster","Audio"!==i.Type)):a.innerHTML='<div class="nowPlayingPageImageContainerNoAlbum"><button data-action="link" class="cardImageContainer coveredImage '+(0,S.Rk)(i.Name)+' cardContent cardContent-shadow itemAction"><span class="cardImageIcon material-icons album" aria-hidden="true"></span></button></div>'}(e,t,P),(0,s.pZ)([r]),A.getItem(A.getCurrentUserId(),r.Id).then((function(t){var n=t.UserData||{},i=null==n.Likes?"":n.Likes;e.querySelector(".nowPlayingPageUserDataButtonsTitle").innerHTML='<button is="emby-ratingbutton" type="button" class="listItemButton paper-icon-button-light" data-id="'+t.Id+'" data-serverid="'+t.ServerId+'" data-itemtype="'+t.Type+'" data-likes="'+i+'" data-isfavorite="'+n.IsFavorite+'"><span class="material-icons favorite" aria-hidden="true"></span></button>',e.querySelector(".nowPlayingPageUserDataButtons").innerHTML='<button is="emby-ratingbutton" type="button" class="listItemButton paper-icon-button-light" data-id="'+t.Id+'" data-serverid="'+t.ServerId+'" data-itemtype="'+t.Type+'" data-likes="'+i+'" data-isfavorite="'+n.IsFavorite+'"><span class="material-icons favorite" aria-hidden="true"></span></button>'}))}else(0,s.rs)(),e.querySelector(".nowPlayingPageUserDataButtons").innerHTML=""}(n,r)}function t(e){var t=Q.querySelectorAll(".repeatToggleButton"),n='<span class="material-icons repeat" aria-hidden="true"></span>',i=!0;switch(e){case"RepeatAll":break;case"RepeatOne":n='<span class="material-icons repeat_one" aria-hidden="true"></span>';break;default:i=!1}var a,r=I(t);try{for(r.s();!(a=r.n()).done;){var s=a.value;s.classList.toggle("buttonActive",i),s.innerHTML=n}}catch(e){r.e(e)}finally{r.f()}}function i(e,t,n){var i=e,a=X;-1===a.indexOf("Mute")&&(L=!1),-1===a.indexOf("SetVolume")&&(P=!1),K.isLocalPlayer&&m.M.supports("physicalvolumecontrol")&&(L=!1,P=!1);var r=i.querySelector(".buttonMute"),s=r.querySelector(".material-icons");if(s.classList.remove("volume_off","volume_up"),t?(r.setAttribute("title",f.ZP.translate("Unmute")),s.classList.add("volume_off")):(r.setAttribute("title",f.ZP.translate("Mute")),s.classList.add("volume_up")),L||P){r.classList.toggle("hide",!L);var l=e.querySelector(".nowPlayingVolumeSlider"),o=e.querySelector(".nowPlayingVolumeSliderContainer");l&&(o.classList.toggle("hide",!P),l.dragging||(l.value=n||0))}else e.querySelector(".volumecontrol").classList.add("hide")}function T(e,t){var n=Q,i=n.querySelector(".btnPlayPause"),a=i.querySelector(".material-icons");a.classList.remove("play_circle_filled","pause_circle_filled"),a.classList.add(e?"play_circle_filled":"pause_circle_filled");var r=n.querySelector(".playlistIndexIndicatorImage");r&&r.classList.toggle("playlistIndexIndicatorPausedImage",e),k(i,t)}function w(e,t){var n=Q,i=n.querySelector(".nowPlayingPositionSlider");if(i&&!i.dragging)if(t){var a=e/t;a*=100,i.value=a}else i.value=0;n.querySelector(".positionTime").innerHTML=Number.isFinite(e)?r.ZP.getDisplayRunningTime(e):"--:--",n.querySelector(".runtime").innerHTML=Number.isFinite(t)?r.ZP.getDisplayRunningTime(t):"--:--"}function x(e){return d.O.getPlaylist(e)}function q(e,t){console.debug("remotecontrol event: "+e.type),N.call(this,e,t)}function A(){t(d.O.getRepeatMode())}function M(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=d.O.getQueueShuffleMode(this),i="buttonActive",a=I(Q.querySelectorAll(".btnShuffleQueue"));try{for(a.s();!(e=a.n()).done;){var r=e.value;"Shuffle"===n?r.classList.add(i):r.classList.remove(i)}}catch(e){a.e(e)}finally{a.f()}t&&C()}function C(){var e,t;e=Q,x(t=this).then((function(n){var i="",a=!0;h.Z.mobile&&(n.length>0?e.querySelector(".btnTogglePlaylist").classList.remove("hide"):e.querySelector(".btnTogglePlaylist").classList.add("hide"),a=!1),i+=l.Z.getListViewHtml({items:n,smallIcon:!0,action:"setplaylistindex",enableUserDataButtons:a,rightButtons:[{icon:"remove_circle_outline",title:f.ZP.translate("ButtonRemove"),id:"remove"}],dragHandle:!0});var r=e.querySelector(".playlist"),s=r.querySelector("button:focus");if(r.innerHTML=i,null!==s){s=s.getAttribute("data-playlistitemid");var u=r.querySelector('button[data-playlistitemid="'.concat(s,'"]'));null!==u&&u.focus()}var c=d.O.getCurrentPlaylistItemId(t);if(c){var m=r.querySelector('.listItem[data-playlistItemId="'.concat(c,'"] .listItemImage'));m&&(m.classList.remove("lazy"),m.classList.add("playlistIndexIndicatorImage"),m.classList.toggle("playlistIndexIndicatorPausedImage",d.O.paused()))}o.default.lazyChildren(r)}))}function E(e,t){var n=Q;if(void 0!==t)for(var i=t.playlistItemIds,a=0,r=i.length;a<r;a++){var s=n.querySelector('.listItem[data-playlistItemId="'+i[a]+'"]');s&&s.parentNode.removeChild(s)}else C()}function O(t,n){console.debug("remotecontrol event: "+t.type),n.NextMediaType||(e(this,Q,{}),b.appRouter.back())}function Z(){T(this.paused(),!0)}function N(t,n){e(this,Q,n),C()}function R(){var e=(new Date).getTime();e-W>=700&&(W=e,Y=d.O.duration(this),w(1e4*d.O.currentTime(this),Y))}function B(){i(Q,this.isMuted(),this.getVolume())}function D(){var e=K;e&&(c.Z.off(e,"playbackstart",q),c.Z.off(e,"statechange",N),c.Z.off(e,"repeatmodechange",A),c.Z.off(e,"shufflequeuemodechange",M),c.Z.off(e,"playlistitemremove",E),c.Z.off(e,"playlistitemmove",C),c.Z.off(e,"playlistitemadd",C),c.Z.off(e,"playbackstop",O),c.Z.off(e,"volumechange",B),c.Z.off(e,"pause",Z),c.Z.off(e,"unpause",Z),c.Z.off(e,"timeupdate",R),K=null)}function F(e,t){if(D(),K=t,t){var n=d.O.getPlayerState(t);N.call(t,{type:"init"},n),c.Z.on(t,"playbackstart",q),c.Z.on(t,"statechange",N),c.Z.on(t,"repeatmodechange",A),c.Z.on(t,"shufflequeuemodechange",M),c.Z.on(t,"playlistitemremove",E),c.Z.on(t,"playlistitemmove",C),c.Z.on(t,"playlistitemadd",C),c.Z.on(t,"playbackstop",O),c.Z.on(t,"volumechange",B),c.Z.on(t,"pause",Z),c.Z.on(t,"unpause",Z),c.Z.on(t,"timeupdate",R);var i=d.O.getPlayerInfo().supportedCommands;X=i,function(e,t){for(var n=e.querySelectorAll(".btnCommand"),i=0,a=n.length;i<a;i++){var r=-1!==t.indexOf(n[i].getAttribute("data-command"));n[i].disabled=!r}}(e,i)}}function H(){K&&(this.classList.contains("repeatToggleButton")?function(){switch(d.O.getRepeatMode()){case"RepeatAll":d.O.setRepeatMode("RepeatOne");break;case"RepeatOne":d.O.setRepeatMode("RepeatNone");break;case"RepeatNone":d.O.setRepeatMode("RepeatAll")}}():d.O.sendCommand({Name:this.getAttribute("data-command")},K))}function j(){n.e(10586).then(n.bind(n,43126)).then((function(e){var t=e.default;x(K).then((function(e){return e.filter((function(e){return e.Id&&e.ServerId}))})).then((function(e){var n=e.length?e[0].ServerId:ApiClient.serverId();new t({items:e.map((function(e){return e.Id})),serverId:n,enableAddToPlayQueue:!1,defaultValue:"new"})}))}))}function U(){F(Q,d.O.getCurrentPlayer())}function V(e){var t=e.target;return d.O.sendCommand({Name:"DisplayMessage",Arguments:{Header:t.querySelector("#txtMessageTitle").value,Text:t.querySelector("#txtMessageText",t).value}},K),t.querySelector("input").value="",(0,p.Z)(f.ZP.translate("MessageSent")),e.preventDefault(),e.stopPropagation(),!1}function _(e){var t=e.target;return d.O.sendCommand({Name:"SendString",Arguments:{String:t.querySelector("#txtTypeText",t).value}},K),t.querySelector("input").value="",(0,p.Z)(f.ZP.translate("TextSent")),e.preventDefault(),e.stopPropagation(),!1}var Q,K,z,X=[],W=0,Y=0,$=this;$.init=function(e,t){!function(e,t){var i='<div class="volumecontrol flex align-items-center flex-wrap-wrap justify-content-center">';i+='<button is="paper-icon-button-light" class="buttonMute autoSize" title='.concat(f.ZP.translate("Mute"),'><span class="xlargePaperIconButton material-icons volume_up" aria-hidden="true"></span></button>'),i+='<div class="sliderContainer nowPlayingVolumeSliderContainer"><input is="emby-slider" type="range" step="1" min="0" max="100" value="0" class="nowPlayingVolumeSlider"/></div>',i+="</div>";var a=t.querySelector(".playlistSectionButton");if(h.Z.mobile?(a.querySelector(".btnTogglePlaylist").insertAdjacentHTML("afterend",i),a.classList.add("playlistSectionButtonTransparent"),t.querySelector(".btnTogglePlaylist").classList.remove("hide"),t.querySelector(".playlistSectionButton").classList.remove("justify-content-center"),t.querySelector(".playlistSectionButton").classList.add("justify-content-space-between")):(t.querySelector(".nowPlayingSecondaryButtons").insertAdjacentHTML("beforeend",i),a.classList.remove("align-items-center","justify-content-center"),a.classList.add("align-items-right","justify-content-flex-end"),t.querySelector(".playlist").classList.remove("hide"),t.querySelector(".btnSavePlaylist").classList.remove("hide"),t.classList.add("padded-bottom")),function(e){for(var t=e.querySelectorAll(".btnCommand"),i=e.querySelector(".nowPlayingPositionSlider"),a=0,s=t.length;a<s;a++)t[a].addEventListener("click",H);e.querySelector(".btnToggleFullscreen").addEventListener("click",(function(){K&&d.O.toggleFullscreen(K)})),e.querySelector(".btnAudioTracks").addEventListener("click",(function(e){var t,i,a,r;K&&z&&z.NowPlayingItem&&(t=K,i=e.target,a=d.O.getAudioStreamIndex(t),r=d.O.audioTracks(t).map((function(e){var t={name:e.DisplayTitle,id:e.Index};return e.Index==a&&(t.selected=!0),t})),Promise.resolve().then(n.bind(n,12801)).then((function(e){e.show({items:r,positionTo:i,callback:function(e){d.O.setAudioStreamIndex(parseInt(e,10),t)}})})))})),e.querySelector(".btnSubtitles").addEventListener("click",(function(e){var t,i,a,r;K&&z&&z.NowPlayingItem&&(t=K,i=e.target,a=d.O.getSubtitleStreamIndex(t),(r=d.O.subtitleTracks(t).map((function(e){var t={name:e.DisplayTitle,id:e.Index};return e.Index==a&&(t.selected=!0),t}))).unshift({id:-1,name:f.ZP.translate("Off"),selected:null==a}),Promise.resolve().then(n.bind(n,12801)).then((function(e){e.show({items:r,positionTo:i,callback:function(e){d.O.setSubtitleStreamIndex(parseInt(e,10),t)}})})))})),e.querySelector(".btnStop").addEventListener("click",(function(){K&&d.O.stop(K)})),e.querySelector(".btnPlayPause").addEventListener("click",(function(){K&&d.O.playPause(K)})),e.querySelector(".btnNextTrack").addEventListener("click",(function(){K&&d.O.nextTrack(K)})),e.querySelector(".btnRewind").addEventListener("click",(function(){K&&d.O.rewind(K)})),e.querySelector(".btnFastForward").addEventListener("click",(function(){K&&d.O.fastForward(K)}));var l,o=I(e.querySelectorAll(".btnShuffleQueue"));try{for(o.s();!(l=o.n()).done;)l.value.addEventListener("click",(function(){K&&d.O.toggleQueueShuffleMode(K)}))}catch(e){o.e(e)}finally{o.f()}e.querySelector(".btnPreviousTrack").addEventListener("click",(function(e){if(K){if(d.O.isPlayingAudio(K)){if(e.detail>1)return;if(d.O.currentTime(K)>=5||d.O.getCurrentPlaylistIndex(K)<=1)return d.O.seekPercent(0,K),void(i.value=0)}d.O.previousTrack(K)}})),e.querySelector(".btnPreviousTrack").addEventListener("dblclick",(function(){K&&d.O.previousTrack(K)})),i.addEventListener("change",(function(){var e=this.value;if(K){var t=parseFloat(e);d.O.seekPercent(t,K)}})),i.getBubbleText=function(e){if(null==z||!z.NowPlayingItem||!Y)return"--:--";var t=Y;return t/=100,t*=e,r.ZP.getDisplayRunningTime(t)},e.querySelector(".nowPlayingVolumeSlider").addEventListener("input",(function(e){d.O.setVolume(e.target.value,K)})),e.querySelector(".buttonMute").addEventListener("click",(function(){d.O.toggleMute(K)}));var u=e.querySelector(".playlist");u.addEventListener("action-remove",(function(e){d.O.removeFromPlaylist([e.detail.playlistItemId],K)})),u.addEventListener("itemdrop",(function(e){var t=e.detail.newIndex,n=e.detail.playlistItemId;d.O.movePlaylistItem(n,t,K)})),e.querySelector(".btnSavePlaylist").addEventListener("click",j),e.querySelector(".btnTogglePlaylist").addEventListener("click",(function(){e.querySelector(".playlist").classList.contains("hide")?(e.querySelector(".playlist").classList.remove("hide"),e.querySelector(".btnSavePlaylist").classList.remove("hide"),e.querySelector(".volumecontrol").classList.add("hide"),h.Z.mobile&&e.querySelector(".playlistSectionButton").classList.remove("playlistSectionButtonTransparent")):(e.querySelector(".playlist").classList.add("hide"),e.querySelector(".btnSavePlaylist").classList.add("hide"),(L||P)&&e.querySelector(".volumecontrol").classList.remove("hide"),h.Z.mobile&&e.querySelector(".playlistSectionButton").classList.add("playlistSectionButtonTransparent"))}))}(t),t.querySelector(".sendMessageForm").addEventListener("submit",V),t.querySelector(".typeTextForm").addEventListener("submit",_),c.Z.on(d.O,"playerchange",U),h.Z.tv){var s=t.querySelector(".nowPlayingPositionSlider");s.classList.add("focusable"),s.enableKeyboardDragging()}}(0,Q=t)},$.onShow=function(){F(Q,d.O.getCurrentPlayer())},$.destroy=function(){D(),c.Z.off(d.O,"playerchange",U),z=null}}var x=n(71487);function q(e){var t,n=new w;function i(e){32===e.keyCode&&"BUTTON"!==e.target.tagName&&(d.O.playPause(t),e.preventDefault(),e.stopPropagation())}function a(){t&&(t=null)}n.init(e,e.querySelector(".remoteControlContent")),e.addEventListener("viewshow",(function(){var e;x.default.setTransparentMenu(!0),(e=d.O.getCurrentPlayer())!==t&&(a(),t=e),document.addEventListener("keydown",i),n&&n.onShow()})),e.addEventListener("viewbeforehide",(function(){x.default.setTransparentMenu(!1),document.removeEventListener("keydown",i),a(),n&&n.destroy()}))}n(85500),n(62033)},85500:function(e,t,n){n(67752),n(38228);var i=Object.create(HTMLDivElement.prototype);function a(){var e=this,t=e.parentNode.querySelector(".collapseContent");t.expanded?(t.expanded=!1,function(e,t){requestAnimationFrame((function(){t.style.height=t.offsetHeight+"px",t.offsetHeight,t.classList.remove("expanded"),t.style.height="0",setTimeout((function(){t.classList.contains("expanded")?t.classList.remove("hide"):t.classList.add("hide")}),300),e.querySelector(".material-icons").classList.remove("emby-collapse-expandIconExpanded")}))}(e,t)):(t.expanded=!0,function(e,t){requestAnimationFrame((function(){t.classList.remove("hide"),t.classList.add("expanded"),t.style.height="auto";var n=t.offsetHeight+"px";t.style.height="0",t.offsetHeight,t.style.height=n,setTimeout((function(){t.classList.contains("expanded")?t.classList.remove("hide"):t.classList.add("hide"),t.style.height="auto"}),300),e.querySelector(".material-icons").classList.add("emby-collapse-expandIconExpanded")}))}(e,t))}i.attachedCallback=function(){if(!this.classList.contains("emby-collapse")){this.classList.add("emby-collapse");var e=this.querySelector(".collapseContent");e&&e.classList.add("hide");var t=this.getAttribute("title"),n='<button is="emby-button" type="button" on-click="toggleExpand" id="expandButton" class="emby-collapsible-button iconRight"><h3 class="emby-collapsible-title" title="'+t+'">'+t+'</h3><span class="material-icons emby-collapse-expandIcon expand_more" aria-hidden="true"></span></button>';this.insertAdjacentHTML("afterbegin",n);var i=this.querySelector(".emby-collapsible-button");i.addEventListener("click",a),"true"===this.getAttribute("data-expanded")&&a.call(i)}},document.registerElement("emby-collapse",{prototype:i,extends:"div"})},82427:function(e,t,n){n(5769),n(63238),n(61418),n(17460),n(14078),n(27471),n(32081);var i=n(61008),a=n(58517),r=n(48957),s=n(81038),l=n(30325),o=n(57366),d=n(72365),u=n(28540),c=n(34643),m=n(44038),f=n(67561),h=(n(67752),n(18613)),v=n(28172),g=Object.create(HTMLDivElement.prototype);function y(e){var t=this,n=t.multiSelect;!1!==(null==n?void 0:n.onContainerClick.call(t,e))&&i.ZP.onClick.call(t,e)}function p(e){return e.preventDefault(),e.stopPropagation(),!1}function b(e){var t=e.target,n=d.ZP.parentWithAttribute(t,"data-id");if(null!=n&&n.getAttribute("data-serverid"))return a.default.handleCommand("menu",{sourceElement:n}),e.preventDefault(),e.stopPropagation(),!1}function S(e,t,i){var a=this;Promise.all([n.e(61570),n.e(83264)]).then(n.bind(n,61570)).then((function(e){e.onUserDataChanged(i,a)}));var r=I(a);-1===r.indexOf("markfavorite")&&-1===r.indexOf("markplayed")||a.notifyRefreshNeeded()}function I(e){var t=e.getAttribute("data-monitor");return t?t.split(","):[]}function T(e,t,i){var a=this;if(-1===I(a).indexOf("timers")){var r=i.ProgramId,s=i.Id;Promise.all([n.e(61570),n.e(83264)]).then(n.bind(n,61570)).then((function(e){e.onTimerCreated(r,s,a)}))}else a.notifyRefreshNeeded()}function L(){-1!==I(this).indexOf("seriestimers")&&this.notifyRefreshNeeded()}function P(e,t,i){var a=this;-1===I(a).indexOf("timers")?Promise.all([n.e(61570),n.e(83264)]).then(n.bind(n,61570)).then((function(e){e.onTimerCancelled(i.Id,a)})):a.notifyRefreshNeeded()}function k(e,t,i){var a=this;-1===I(a).indexOf("seriestimers")?Promise.all([n.e(61570),n.e(83264)]).then(n.bind(n,61570)).then((function(e){e.onSeriesTimerCancelled(i.Id,a)})):a.notifyRefreshNeeded()}function w(e,t,n){var i=this,a=I(i);if(-1===a.indexOf("seriestimers")&&-1===a.indexOf("timers")){var r=n.ItemsAdded||[],s=n.ItemsRemoved||[];if(r.length||s.length){var l=i.getAttribute("data-parentid");if(l){var o=n.FoldersAddedTo||[],d=n.FoldersRemovedFrom||[],u=n.CollectionFolders||[];if(-1===o.indexOf(l)&&-1===d.indexOf(l)&&-1===u.indexOf(l))return}i.notifyRefreshNeeded()}}}function x(e,t){var n,i=this,a=t.state,r=I(i);if(a.NowPlayingItem&&"Video"===a.NowPlayingItem.MediaType){if(-1!==r.indexOf("videoplayback"))return void i.notifyRefreshNeeded(!0)}else if("Audio"===(null===(n=a.NowPlayingItem)||void 0===n?void 0:n.MediaType)&&-1!==r.indexOf("audioplayback"))return void i.notifyRefreshNeeded(!0)}function q(e,t,n,i){var a=n.bind(e);i=i||m.default,f.Z.on(i,t,a),e["event_"+t]=a}function A(e,t,n){var i=e["event_"+t];i&&(n=n||m.default,f.Z.off(n,t,i),e["event_"+t]=null)}function M(e,t){e.refreshInterval&&(clearInterval(e.refreshInterval),e.refreshInterval=null,t||(e.refreshIntervalEndTime=null))}function C(e,t){M(e),t||(t=parseInt(e.getAttribute("data-refreshinterval")||"0",10)),t&&(e.refreshInterval=setInterval(e.notifyRefreshNeeded.bind(e),t),e.refreshIntervalEndTime=(new Date).getTime()+t)}function E(e){var t=e.Items||e,n=this.parentContainer;n&&(t.length?n.classList.remove("hide"):n.classList.add("hide"));var i,a,r=document.activeElement;this.contains(r)&&(a=!0,i=r.getAttribute("data-id")),this.innerHTML=this.getItemsHtml(t),s.default.lazyChildren(this),a&&function(e,t){if(t){var n=e.querySelector('[data-id="'+t+'"]');if(n)try{return void c.Z.focus(n)}catch(e){console.error(e)}}c.Z.autoFocus(e)}(this,i),C(this),this.afterRefresh&&this.afterRefresh(e)}g.enableMultiSelect=function(e){var t=this.multiSelect;if(e){if(!t){var i=this;Promise.all([n.e(52943),n.e(9245)]).then(n.bind(n,52943)).then((function(e){var t=e.default;i.multiSelect=new t({container:i,bindOnClick:!1})}))}}else t&&(t.destroy(),this.multiSelect=null)},g.enableDragReordering=function(e){var t=this.sortable;if(e){if(!t){var n=this;n.sortable=new v.ZP(n,{draggable:".listItem",handle:".listViewDragHandle",onEnd:function(e){return function(e,t){var n=e.item,i=e.newIndex,a=n.getAttribute("data-playlistitemid"),r=n.getAttribute("data-playlistid");if(r){var s=n.getAttribute("data-serverid"),l=h.Z.getApiClient(s);u.ZP.show(),l.ajax({url:l.getUrl("Playlists/"+r+"/Items/"+a+"/Move/"+i),type:"POST"}).then((function(){u.ZP.hide()}),(function(){u.ZP.hide(),t.refreshItems()}))}else{var o=e.oldIndex;n.dispatchEvent(new CustomEvent("itemdrop",{detail:{oldIndex:o,newIndex:i,playlistItemId:a},bubbles:!0,cancelable:!1}))}}(e,n)}})}}else t&&(t.destroy(),this.sortable=null)},g.createdCallback=function(){this.classList.add("itemsContainer")},g.attachedCallback=function(){this.addEventListener("click",y),o.Z.touch?this.addEventListener("contextmenu",p):"false"!==this.getAttribute("data-contextmenu")&&this.addEventListener("contextmenu",b),(l.Z.desktop||l.Z.mobile&&"false"!==this.getAttribute("data-multiselect"))&&this.enableMultiSelect(!0),l.Z.tv&&this.classList.add("itemsContainer-tv"),i.ZP.on(this,{click:!1}),q(this,"UserDataChanged",S),q(this,"TimerCreated",T),q(this,"SeriesTimerCreated",L),q(this,"TimerCancelled",P),q(this,"SeriesTimerCancelled",k),q(this,"LibraryChanged",w),q(this,"playbackstop",x,r.O),"true"===this.getAttribute("data-dragreorder")&&this.enableDragReordering(!0)},g.detachedCallback=function(){M(this),this.enableMultiSelect(!1),this.enableDragReordering(!1),this.removeEventListener("click",y),this.removeEventListener("contextmenu",b),this.removeEventListener("contextmenu",p),i.ZP.off(this,{click:!1}),A(this,"UserDataChanged"),A(this,"TimerCreated"),A(this,"SeriesTimerCreated"),A(this,"TimerCancelled"),A(this,"SeriesTimerCancelled"),A(this,"LibraryChanged"),A(this,"playbackstop",r.O),this.fetchData=null,this.getItemsHtml=null,this.parentContainer=null},g.pause=function(){M(this,!0),this.paused=!0},g.resume=function(e){this.paused=!1;var t=this.refreshIntervalEndTime;if(t){var n=t-(new Date).getTime();n>0&&!this.needsRefresh?C(this,n):(this.needsRefresh=!0,this.refreshIntervalEndTime=null)}return this.needsRefresh||null!=e&&e.refresh?this.refreshItems():Promise.resolve()},g.refreshItems=function(){return this.fetchData?this.paused?(this.needsRefresh=!0,Promise.resolve()):(this.needsRefresh=!1,this.fetchData().then(E.bind(this))):Promise.resolve()},g.notifyRefreshNeeded=function(e){if(this.paused)this.needsRefresh=!0;else{var t=this.refreshTimeout;t&&clearTimeout(t),!0===e?this.refreshItems():this.refreshTimeout=setTimeout(this.refreshItems.bind(this),1e4)}},document.registerElement("emby-itemscontainer",{prototype:g,extends:"div"})},42855:function(e,t,n){n(20252),n(99785),n(43512),n(76056),n(23938),n(52077),n(911),n(63238),n(55849),n(61013),n(72410),n(15610),n(17460),n(25901),n(92189),n(91047),n(5769),n(14078);var i=n(57366),a=n(72365),r=n(30325),s=n(84280),l=(n(67752),n(62033),n(94994)),o=n(34706);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var u=Object.create(HTMLInputElement.prototype),c=!1;if(Object.getOwnPropertyDescriptor&&Object.defineProperty){var m=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");null!=m&&m.configurable&&(c=!0)}function f(e,t){return t>0||(t=parseFloat(e.step))>0?t:1}function h(e,t){var n=e.sliderBubbleTrack.getBoundingClientRect(),i=(t-n.left)/n.width;l.ZP.getIsElementRTL(e)&&(i=(n.right-t)/n.width);var a=e.max-e.min;if("any"!==e.step&&0!==a){var r=f(e)/a;i=Math.round(i/r)*r}return Math.min(Math.max(i,0),1)}function v(e,t){var n=(e.max-e.min)*t,i=null;if("any"!==e.step){var a=f(e);i=(0,o.SN)(a),n=Math.round(n/a)*a}var r=parseFloat(e.min);return n+=r,null!=i&&(i=Math.max(i,(0,o.SN)(r)),n=parseFloat(n.toFixed(i))),Math.min(Math.max(n,e.min),e.max)}function g(e){if(!e||!this.keyboardDragging&&!this.touched){var t=this,n=t.value;cancelAnimationFrame(t.updateValuesFrame),t.updateValuesFrame=requestAnimationFrame((function(){var e=t.backgroundLower;if(e){var i=(n-t.min)/(t.max-t.min);i*=100,e.style.width=i+"%"}t.markerContainerElement&&(t.triedAddingMarkers||function(e){e.markerInfo=[],e.getMarkerInfo&&(e.markerInfo=e.getMarkerInfo()),e.markerInfo.forEach((function(t){var n,i;e.markerContainerElement.insertAdjacentHTML("beforeend",(i="","chapterMarker"===(n=t).className&&(i=n.className,"string"==typeof n.name&&n.name.length&&(i="".concat(n.className," marker-").concat(n.name.substring(0,100).toLowerCase().replace(" ","-")))),'<span class="material-icons sliderMarker '.concat(i,'" aria-hidden="true"></span>')))})),e.markerElements=e.markerContainerElement.querySelectorAll(".sliderMarker"),e.triedAddingMarkers=!0}(t),function(e,t){var n,i;if(null!==(n=e.markerInfo)&&void 0!==n&&n.length&&null!==(i=e.markerElements)&&void 0!==i&&i.length)for(var a=0,r=e.markerElements.length;a<r;a++)e.markerInfo.length>a&&p(e,v(e,e.markerInfo[a].progress),e.markerElements[a],t)}(t,n))}))}}function y(e,t,n,i){requestAnimationFrame((function(){var a,r=e.sliderBubbleTrack.getBoundingClientRect(),s=i.getBoundingClientRect(),o=r.width*t/100;l.ZP.getIsElementRTL(e)&&(o=r.width-o),o=Math.min(Math.max(o,s.width/2),r.width-s.width/2),i.style.left=o+"px",a=e.getBubbleHtml?e.getBubbleHtml(t,n):'<h1 class="sliderBubbleText">'+(a=e.getBubbleText?e.getBubbleText(t,n):n.toLocaleString())+"</h1>",i.innerHTML=a}))}function p(e,t,n,i){requestAnimationFrame((function(){var a=e.sliderBubbleTrack.getBoundingClientRect(),r=n.getBoundingClientRect();if(a.width&&r.width){var s=a.width*t/100-r.width/2;s=Math.min(Math.max(s,-r.width/2),a.width-r.width/2),n.style.left=s+"px",i>=t?(n.classList.remove("unwatched"),n.classList.add("watched")):(n.classList.add("unwatched"),n.classList.remove("watched"))}}))}u.attachedCallback=function(){if("true"!==this.getAttribute("data-embyslider")){this.setAttribute("data-embyslider","true"),this.classList.add("mdl-slider"),this.classList.add("mdl-js-slider"),i.Z.edge&&this.classList.add("slider-browser-edge"),r.Z.mobile||this.classList.add("mdl-slider-hoverthumb"),r.Z.tv&&this.classList.add("show-focus");var e=a.ZP.parentWithClass(this,"sliderContainer-settings");if(e&&this.getAttribute("label")){var t=this.ownerDocument.createElement("label");t.innerText=this.getAttribute("label"),t.classList.add("sliderLabel"),t.htmlFor=this.id,e.insertBefore(t,e.firstChild)}var n=this.parentNode;n.classList.add("mdl-slider-container"),n.insertAdjacentHTML("beforeend",'<div class="mdl-slider-background-flex-container"><div class="mdl-slider-background-flex"><div class="mdl-slider-background-flex-inner"><div class="mdl-slider-background-upper"></div><div class="mdl-slider-background-lower"></div></div></div></div><div class="sliderBubbleTrack"><div class="sliderBubble hide"></div></div>'),this.sliderBubbleTrack=n.querySelector(".sliderBubbleTrack"),this.backgroundLower=n.querySelector(".mdl-slider-background-lower"),this.backgroundUpper=n.querySelector(".mdl-slider-background-upper");var s=n.querySelector(".sliderBubble"),l=s.classList.contains("hide");this.markerContainerElement=n.querySelector(".sliderMarkerContainer"),a.ZP.addEventListener(this,"input",(function(){var e,t,n,i;this.dragging=!0,"true"!==this.dataset.sliderKeepProgress&&g.call(this),y(this,100*(e=this,t=this.value,i=0!==(n=e.max-e.min)?(t-e.min)/n:0,Math.min(Math.max(i,0),1)),parseFloat(this.value),s),l&&(s.classList.remove("hide"),l=!1)}),{passive:!0}),a.ZP.addEventListener(this,"change",(function(){this.dragging=!1,"true"===this.dataset.sliderKeepProgress&&g.call(this),s.classList.add("hide"),l=!0}),{passive:!0}),a.ZP.addEventListener(this,window.PointerEvent?"pointermove":"mousemove",(function(e){if(!this.dragging){var t=h(this,e.clientX);y(this,100*t,v(this,t),s),l&&(s.classList.remove("hide"),l=!1)}}),{passive:!0}),a.ZP.addEventListener(this,window.PointerEvent?"pointerleave":"mouseleave",(function(){s.classList.add("hide"),l=!0}),{passive:!0}),i.Z.iOS&&(a.ZP.addEventListener(this,"touchstart",(function(e){if(1===e.targetTouches.length){this.touched=!0;var t=h(this,e.targetTouches[0].clientX);this.value=v(this,t),this.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!1})),e.preventDefault()}}),{capture:!0}),a.ZP.addEventListener(this,"touchmove",(function(e){if(this.touched&&1===e.targetTouches.length){var t=h(this,e.targetTouches[0].clientX);this.value=v(this,t),this.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!1}))}}),{passive:!0}),a.ZP.addEventListener(this,"touchend",(function(){var e=this;setTimeout((function(){e.touched=!1,e.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!1}))}),0)}),{passive:!0})),c?this.addEventListener("valueset",g.bind(this,!0)):((d=(o=this).interval)&&clearInterval(d),o.interval=setInterval(g.bind(o,!0),100)),g.call(this)}var o,d};var b,S=1e3;function I(e){clearTimeout(b),b=void 0,e.keyboardDragging=!1;var t=new Event("change",{bubbles:!0,cancelable:!1});e.dispatchEvent(t)}function T(e,t){!function(e){e.keyboardDragging=!0,clearTimeout(b),b=setTimeout((function(){I(e)}),S)}(e),e.value=Math.max(e.min,Math.min(e.max,parseFloat(e.value)+t));var n=new Event("input",{bubbles:!0,cancelable:!1});e.dispatchEvent(n)}function L(e){switch(s.ZP.getKeyName(e)){case"ArrowLeft":case"Left":T(this,-f(this,this.keyboardStepDown)),e.preventDefault(),e.stopPropagation();break;case"ArrowRight":case"Right":T(this,f(this,this.keyboardStepUp)),e.preventDefault(),e.stopPropagation();break;case"Enter":this.keyboardDragging&&(I(this),e.preventDefault(),e.stopPropagation())}}function P(e,t,n){var i=e.style;l.ZP.getIsRTL()?i.right=Math.max(t,0)+"%":i.left=Math.max(t,0)+"%";var a=n-t;i.width=Math.max(Math.min(a,100),0)+"%"}u.enableKeyboardDragging=function(){this.keyboardDraggingEnabled||(this.addEventListener("keydown",L),this.keyboardDraggingEnabled=!0)},u.setKeyboardSteps=function(e,t){this.keyboardStepDown=e||t||1,this.keyboardStepUp=t||e||1},u.setBufferedRanges=function(e,t,n){var i=this.backgroundUpper;if(i){null!=t&&(e=function(e,t){return t?e.map((function(e){return{start:e.start/t*100,end:e.end/t*100}})):[]}(e,t),n=n/t*100);var a,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw r}}}}(e);try{for(r.s();!(a=r.n()).done;){var s=a.value;if(!(null!=n&&n>=s.end))return void P(i,s.start,s.end)}}catch(e){r.e(e)}finally{r.f()}P(i,0,0)}},u.setIsClear=function(e){var t=this.backgroundLower;t&&(e?t.classList.add("mdl-slider-background-lower-clear"):t.classList.remove("mdl-slider-background-lower-clear"))},u.detachedCallback=function(){var e=this.interval;e&&clearInterval(e),this.interval=null,this.backgroundUpper=null,this.backgroundLower=null},document.registerElement("emby-slider",{prototype:u,extends:"input"})}}]);