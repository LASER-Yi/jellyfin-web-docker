"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[46876],{8375:function(e,t,n){var r=n(62540),a=n(63703),o=n(62010),l=n(98756),i=n(37793),c=n(75720),s=n(9042),u=n(5898);n(63696),t.A=function(e){var t=e.open,n=e.title,d=e.text,f=e.onClose;return(0,r.jsxs)(o.A,{open:t,onClose:f,children:[n&&(0,r.jsx)(s.A,{children:n}),(0,r.jsx)(i.A,{children:(0,r.jsx)(c.A,{children:d})}),(0,r.jsx)(l.A,{children:(0,r.jsx)(a.A,{onClick:f,children:u.Ay.translate("ButtonGotIt")})})]})}},27351:function(e,t,n){n.d(t,{C:function(){return o}}),n(78557),n(90076);var r=n(34789);function a(e){var t,n=document.createElement("textarea");if(n.value=e,document.body.appendChild(n),n.focus(),r.A.iOS&&r.A.iOSVersion<13.4){var a=document.createRange();a.selectNodeContents(n);var o=window.getSelection();o.removeAllRanges(),o.addRange(a),n.setSelectionRange(0,999999)}else n.select();try{t=document.execCommand("copy")?Promise.resolve():Promise.reject()}catch(e){t=Promise.reject()}return document.body.removeChild(n),t}function o(e){return void 0===navigator.clipboard?a(e):navigator.clipboard.writeText(e).catch((function(){return a(e)}))}},38596:function(e,t,n){n.d(t,{n:function(){return h}}),n(29305),n(32733),n(84701),n(81678),n(14382),n(69892),n(44962),n(89336),n(4754),n(94),n(33087),n(36947),n(36457),n(88908),n(83810),n(78557),n(95021),n(73687),n(83994),n(23630),n(82367);var r=n(63696),a=n(427),o=n(52672),l=n(26073),i=n(9790);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return(t=function(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){var n,c,s=(0,i.jE)(t),d=(n=r.useState((function(){return new a._(s,e)})),c=1,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return i}}(n,c)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(n,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];r.useEffect((function(){d.setOptions(e)}),[d,e]);var h=r.useSyncExternalStore(r.useCallback((function(e){return d.subscribe(o.jG.batchCalls(e))}),[d]),(function(){return d.getCurrentResult()}),(function(){return d.getCurrentResult()})),p=r.useCallback((function(e,t){d.mutate(e,t).catch(l.lQ)}),[d]);if(h.error&&(0,l.GU)(d.options.throwOnError,[h.error]))throw h.error;return u(u({},h),{},{mutate:p,mutateAsync:h.mutate})}},87269:function(e,t,n){n.r(t),n.d(t,{Component:function(){return J}});var r=n(62540),a=n(92779),o=n(63703),l=n(70140),i=n(89348),c=n(30374),s=n(37853),u=n(80401),d=n(69410),f="Backups",h=function(){var e=(0,d.gf)().api;return(0,u.I)({queryKey:[f],queryFn:function(t){var n=t.signal;return function(e,t){return n=void 0,r=void 0,o=function(){var n,r;return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=i(0),l.throw=i(1),l.return=i(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,i[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(a){switch(a.label){case 0:return[4,new s.pi(e.configuration,void 0,e.axiosInstance).listBackups(t)];case 1:return n=a.sent(),(r=n.data).sort((function(e,t){return e.DateCreated&&t.DateCreated?new Date(t.DateCreated).getTime()-new Date(e.DateCreated).getTime():0})),[2,r]}}))},new((a=void 0)||(a=Promise))((function(e,t){function l(e){try{c(o.next(e))}catch(e){t(e)}}function i(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(l,i)}c((o=o.apply(n,r||[])).next())}));var n,r,a,o}(e,{signal:n})},enabled:!!e})},p=n(65242),y=n(5898),b=n(63696),A=n(84849),x=n(47891),j=n(28335),v=n(62010),m=n(9042),C=n(37793),g=n(98756),k=n(31720),S=n(96441),w=n(70564),O=n(85491),P=n(75720),D=function(e){var t=e.open,n=e.onClose,a=e.onCreate,i=(0,b.useCallback)((function(e){var t,n,r;e.preventDefault();var o=new FormData(e.currentTarget),l=Object.fromEntries(o.entries()),i={Metadata:"on"===(null===(t=l.Metadata)||void 0===t?void 0:t.toString()),Trickplay:"on"===(null===(n=l.Trickplay)||void 0===n?void 0:n.toString()),Subtitles:"on"===(null===(r=l.Subtitles)||void 0===r?void 0:r.toString())};a(i)}),[a]);return(0,r.jsxs)(v.A,{open:t,maxWidth:"xs",fullWidth:!0,onClose:n,slotProps:{paper:{component:"form",onSubmit:i}},children:[(0,r.jsx)(m.A,{children:y.Ay.translate("ButtonCreateBackup")}),(0,r.jsx)(C.A,{children:(0,r.jsxs)(l.A,{spacing:2,children:[(0,r.jsx)(P.A,{children:y.Ay.translate("MessageBackupDisclaimer")}),(0,r.jsxs)(O.A,{children:[(0,r.jsx)(k.A,{children:(0,r.jsx)(S.A,{control:(0,r.jsx)(w.A,{name:"Database",defaultChecked:!0,disabled:!0}),label:y.Ay.translate("LabelDatabase")})}),(0,r.jsx)(k.A,{children:(0,r.jsx)(S.A,{control:(0,r.jsx)(w.A,{name:"Metadata",defaultChecked:!1}),label:y.Ay.translate("LabelMetadata")})}),(0,r.jsx)(k.A,{children:(0,r.jsx)(S.A,{control:(0,r.jsx)(w.A,{name:"Subtitles",defaultChecked:!1}),label:y.Ay.translate("Subtitles")})}),(0,r.jsx)(k.A,{children:(0,r.jsx)(S.A,{control:(0,r.jsx)(w.A,{name:"Trickplay",defaultChecked:!1}),label:y.Ay.translate("Trickplay")})})]})]})}),(0,r.jsxs)(g.A,{children:[(0,r.jsx)(o.A,{onClick:n,variant:"text",children:y.Ay.translate("ButtonCancel")}),(0,r.jsx)(o.A,{type:"submit",children:y.Ay.translate("Create")})]})]})},I=n(38596),B=n(31297),E=n(10822),R=function(e){var t=e.open;return(0,r.jsxs)(v.A,{open:t,maxWidth:"xs",fullWidth:!0,children:[(0,r.jsx)(m.A,{children:y.Ay.translate("MessageBackupInProgress")}),(0,r.jsx)(C.A,{children:(0,r.jsx)(E.A,{})})]})},T=n(75487),M=n(35117),W=n(60731),L=n(79772),F=n(60434),q=n(72073),G=n(27529),N=n(27351),H=n(71866),U=function(e){var t,n,c,s=e.backup,u=e.open,d=e.onClose,f=(0,b.useCallback)((function(){return e=void 0,t=void 0,r=function(){return function(e,t){var n,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=i(0),l.throw=i(1),l.return=i(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,i[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(e){switch(e.label){case 0:return s.Path?[4,(0,N.C)(s.Path)]:[3,2];case 1:e.sent(),(0,H.A)({text:y.Ay.translate("Copied")}),e.label=2;case 2:return[2]}}))},new((n=void 0)||(n=Promise))((function(a,o){function l(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,i)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r}),[s.Path]);return(0,r.jsxs)(v.A,{onClose:d,open:u,maxWidth:"sm",fullWidth:!0,children:[(0,r.jsx)(m.A,{children:s.DateCreated}),(0,r.jsx)(C.A,{children:(0,r.jsxs)(l.A,{gap:2,children:[(0,r.jsxs)(a.A,{children:[(0,r.jsxs)(l.A,{direction:"row",gap:2,children:[(0,r.jsx)(i.A,{fontWeight:"bold",children:y.Ay.translate("LabelPath")}),(0,r.jsxs)(l.A,{direction:"row",children:[(0,r.jsx)(i.A,{color:"text.secondary",children:s.Path}),(0,r.jsx)(T.A,{size:"small",onClick:f,children:(0,r.jsx)(G.A,{fontSize:"small"})})]})]}),(0,r.jsxs)(l.A,{direction:"row",gap:2,children:[(0,r.jsx)(i.A,{fontWeight:"bold",children:y.Ay.translate("LabelVersion")}),(0,r.jsx)(i.A,{color:"text.secondary",children:s.ServerVersion})]})]}),(0,r.jsxs)(O.A,{children:[(0,r.jsx)(k.A,{children:(0,r.jsx)(S.A,{control:(0,r.jsx)(w.A,{name:"Database",defaultChecked:!0,disabled:!0}),label:y.Ay.translate("LabelDatabase")})}),(0,r.jsx)(k.A,{children:(0,r.jsx)(S.A,{control:(0,r.jsx)(w.A,{name:"Metadata",defaultChecked:null===(t=s.Options)||void 0===t?void 0:t.Metadata,disabled:!0}),label:y.Ay.translate("LabelMetadata")})}),(0,r.jsx)(k.A,{children:(0,r.jsx)(S.A,{control:(0,r.jsx)(w.A,{name:"Subtitles",defaultChecked:null===(n=s.Options)||void 0===n?void 0:n.Subtitles,disabled:!0}),label:y.Ay.translate("Subtitles")})}),(0,r.jsx)(k.A,{children:(0,r.jsx)(S.A,{control:(0,r.jsx)(w.A,{name:"Trickplay",defaultChecked:null===(c=s.Options)||void 0===c?void 0:c.Trickplay,disabled:!0}),label:y.Ay.translate("Trickplay")})})]})]})}),(0,r.jsx)(g.A,{children:(0,r.jsx)(o.A,{onClick:d,children:y.Ay.translate("ButtonOk")})})]})},V=function(e){var t=e.backup,n=e.onRestore,a=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)l.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return l}((0,b.useState)(!1),2),o=a[0],l=a[1],i=(0,b.useCallback)((function(){l(!1)}),[]),c=(0,b.useCallback)((function(){l(!0)}),[]),s=(0,b.useCallback)((function(){n(t)}),[t,n]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(U,{backup:t,onClose:i,open:o}),(0,r.jsx)(M.Ay,{disablePadding:!0,secondaryAction:(0,r.jsx)(q.A,{disableInteractive:!0,title:y.Ay.translate("LabelRestore"),children:(0,r.jsx)(T.A,{onClick:s,children:(0,r.jsx)(W.A,{})})}),children:(0,r.jsx)(L.A,{onClick:c,children:(0,r.jsx)(F.A,{primary:t.DateCreated,secondary:t.Path,slotProps:{primary:{variant:"h3"},secondary:{variant:"body1"}}})})})]})},z=n(8375),K=function(e){var t=e.open,n=e.onClose,a=e.onConfirm;return(0,r.jsxs)(v.A,{open:t,onClose:n,maxWidth:"xs",fullWidth:!0,children:[(0,r.jsx)(m.A,{children:y.Ay.translate("LabelRestore")}),(0,r.jsx)(C.A,{children:(0,r.jsx)(P.A,{children:y.Ay.translate("MessageRestoreDisclaimer")})}),(0,r.jsxs)(g.A,{children:[(0,r.jsx)(o.A,{onClick:n,color:"error",children:y.Ay.translate("ButtonCancel")}),(0,r.jsx)(o.A,{onClick:a,children:y.Ay.translate("LabelRestore")})]})]})},Q=function(e){var t=e.open;return(0,r.jsxs)(v.A,{open:t,maxWidth:"xs",fullWidth:!0,children:[(0,r.jsx)(m.A,{children:y.Ay.translate("MessageRestoreInProgress")}),(0,r.jsx)(C.A,{children:(0,r.jsxs)(l.A,{spacing:2,children:[(0,r.jsx)(P.A,{children:y.Ay.translate("MessageWaitingForServer")}),(0,r.jsx)(E.A,{})]})})]})},$=n(48272),_=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)l.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return l},J=function(){var e=(0,d.gf)().api,t=h(),n=t.data,u=t.isPending,v=t.isError,m=_((0,b.useState)(!1),2),C=m[0],g=m[1],k=_((0,b.useState)(!1),2),S=k[0],w=k[1],O=_((0,b.useState)(!1),2),P=O[0],E=O[1],T=_((0,b.useState)(!1),2),M=T[0],W=T[1],L=_((0,b.useState)(!1),2),F=L[0],q=L[1],G=_((0,b.useState)(!1),2),N=G[0],H=G[1],U=_((0,b.useState)(null),2),J=U[0],X=U[1],Y=function(){var e=(0,d.gf)().api,t=new s.pi(null==e?void 0:e.configuration,void 0,null==e?void 0:e.axiosInstance);return(0,I.n)({mutationFn:function(e){return t.createBackup({backupOptionsDto:e})},onSuccess:function(){B.q.invalidateQueries({queryKey:[f]})}})}(),Z=function(){var e=(0,d.gf)().api,t=new s.pi(null==e?void 0:e.configuration,void 0,null==e?void 0:e.axiosInstance);return(0,I.n)({mutationFn:function(e){return t.startRestoreBackup({backupRestoreRequestDto:{ArchiveFileName:e}})}})}(),ee=(0,b.useCallback)((function(){g(!0)}),[]),te=(0,b.useCallback)((function(){g(!1)}),[]),ne=(0,b.useCallback)((function(){H(!1)}),[]),re=(0,b.useCallback)((function(){q(!1)}),[]),ae=(0,b.useCallback)((function(){W(!1)}),[]),oe=(0,b.useCallback)((function(e){w(!0),g(!1),Y.mutate(e,{onError:function(){q(!0)},onSettled:function(){w(!1)}})}),[Y]),le=(0,b.useCallback)((function(e){H(!0),X(e)}),[]),ie=(0,b.useCallback)((function(){(null==J?void 0:J.Path)&&Z.mutate(null==J?void 0:J.Path,{onSuccess:function(){E(!0)},onError:function(){q(!0)},onSettled:function(){H(!1)}})}),[J,Z]);return(0,b.useEffect)((function(){if(P){var t=setInterval((function(){(0,$.c)(e).getPublicSystemInfo().then((function(){E(!1),W(!0),clearInterval(t)})).catch((function(){}))}),5e3);return function(){clearInterval(t)}}}),[e,P]),u?(0,r.jsx)(A.A,{}):(0,r.jsxs)(p.A,{id:"backupsPage",title:y.Ay.translate("HeaderBackups"),className:"mainAnimatedPage type-interior",children:[(0,r.jsx)(R,{open:S}),(0,r.jsx)(Q,{open:P}),(0,r.jsx)(D,{open:C,onClose:te,onCreate:oe}),(0,r.jsx)(z.A,{open:F,text:y.Ay.translate("UnknownError"),onClose:re}),(0,r.jsx)(z.A,{open:M,title:y.Ay.translate("Success"),text:y.Ay.translate("MessageRestoreSuccess"),onClose:ae}),(0,r.jsx)(K,{open:N,onClose:ne,onConfirm:ie}),(0,r.jsx)(a.A,{className:"content-primary",children:v?(0,r.jsx)(x.A,{severity:"error",children:y.Ay.translate("BackupsPageLoadError")}):(0,r.jsxs)(l.A,{spacing:3,children:[(0,r.jsx)(i.A,{variant:"h1",children:y.Ay.translate("HeaderBackups")}),(0,r.jsx)(i.A,{children:y.Ay.translate("HeaderBackupsHelp")}),(0,r.jsx)(o.A,{sx:{alignSelf:"flex-start"},startIcon:(0,r.jsx)(c.A,{}),onClick:ee,children:y.Ay.translate("ButtonCreateBackup")}),(0,r.jsx)(a.A,{className:"readOnlyContent",children:n.length>0&&(0,r.jsx)(j.A,{sx:{bgcolor:"background.paper"},children:n.map((function(e){return(0,r.jsx)(V,{backup:e,onRestore:le},e.Path)}))})})]})})]})}}}]);