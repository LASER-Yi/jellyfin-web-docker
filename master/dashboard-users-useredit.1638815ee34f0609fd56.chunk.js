"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[56810],{8985:function(e,n,t){t.r(n),t(27471),t(61013),t(32081),t(43512),t(98010),t(63238),t(72410),t(15610),t(17460),t(52077),t(25901),t(92189),t(91047),t(5769),t(14078),t(72326);var c=t(28540),o=t(71487),i=t(94994),l=t(60635),r=t(56663),a=t(85951);function s(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return d(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var c=0,o=function(){};return{s:o,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,r=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return l=e.done,e},e:function(e){r=!0,i=e},f:function(){try{l||null==t.return||t.return()}finally{if(r)throw i}}}}function d(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,c=new Array(n);t<n;t++)c[t]=e[t];return c}function h(){var e=$(this).parents(".page")[0];return c.ZP.show(),u().then((function(n){!function(e,n){e.Name=$("#txtUserName",n).val(),e.Policy.IsAdministrator=$("#chkIsAdmin",n).is(":checked"),e.Policy.IsHidden=$("#chkIsHidden",n).is(":checked"),e.Policy.IsDisabled=$("#chkDisabled",n).is(":checked"),e.Policy.EnableRemoteControlOfOtherUsers=$("#chkEnableRemoteControlOtherUsers",n).is(":checked"),e.Policy.EnableLiveTvManagement=$("#chkManageLiveTv",n).is(":checked"),e.Policy.EnableLiveTvAccess=$("#chkEnableLiveTvAccess",n).is(":checked"),e.Policy.EnableSharedDeviceControl=$("#chkRemoteControlSharedDevices",n).is(":checked"),e.Policy.EnableMediaPlayback=$("#chkEnableMediaPlayback",n).is(":checked"),e.Policy.EnableAudioPlaybackTranscoding=$("#chkEnableAudioPlaybackTranscoding",n).is(":checked"),e.Policy.EnableVideoPlaybackTranscoding=$("#chkEnableVideoPlaybackTranscoding",n).is(":checked"),e.Policy.EnablePlaybackRemuxing=$("#chkEnableVideoPlaybackRemuxing",n).is(":checked"),e.Policy.EnableCollectionManagement=$("#chkEnableCollectionManagement",n).is(":checked"),e.Policy.ForceRemoteSourceTranscoding=$("#chkForceRemoteSourceTranscoding",n).is(":checked"),e.Policy.EnableContentDownloading=$("#chkEnableDownloading",n).is(":checked"),e.Policy.EnableRemoteAccess=$("#chkRemoteAccess",n).is(":checked"),e.Policy.RemoteClientBitrateLimit=parseInt(1e6*parseFloat($("#txtRemoteClientBitrateLimit",n).val()||"0"),10),e.Policy.LoginAttemptsBeforeLockout=parseInt($("#txtLoginAttemptsBeforeLockout",n).val()||"0",10),e.Policy.MaxActiveSessions=parseInt($("#txtMaxActiveSessions",n).val()||"0",10),e.Policy.AuthenticationProviderId=n.querySelector(".selectLoginProvider").value,e.Policy.PasswordResetProviderId=n.querySelector(".selectPasswordResetProvider").value,e.Policy.EnableContentDeletion=$("#chkEnableDeleteAllFolders",n).is(":checked"),e.Policy.EnableContentDeletionFromFolders=e.Policy.EnableContentDeletion?[]:$(".chkFolder",n).get().filter((function(e){return e.checked})).map((function(e){return e.getAttribute("data-id")})),ApiClient.isMinServerVersion("10.6.0")&&(e.Policy.SyncPlayAccess=n.querySelector("#selectSyncPlayAccess").value),ApiClient.updateUser(e).then((function(){ApiClient.updateUserPolicy(e.Id,e.Policy).then((function(){l.default.navigate("userprofiles.html"),c.ZP.hide(),(0,r.Z)(i.ZP.translate("SettingsSaved"))}))}))}(n,e)})),!1}function u(){var e=(0,a.a)("userId");return ApiClient.getUser(e)}$(document).on("pageinit","#editUserPage",(function(){$(".editUserProfileForm").off("submit",h).on("submit",h);var e=this;$("#chkEnableDeleteAllFolders",this).on("change",(function(){this.checked?$(".deleteAccess",e).hide():$(".deleteAccess",e).show()})),ApiClient.getServerConfiguration().then((function(n){n.EnableRemoteAccess?e.querySelector(".fldRemoteAccess").classList.remove("hide"):e.querySelector(".fldRemoteAccess").classList.add("hide")}))})).on("pagebeforeshow","#editUserPage",(function(){var e;e=this,c.ZP.show(),u().then((function(n){!function(e,n){ApiClient.getJSON(ApiClient.getUrl("Auth/Providers")).then((function(t){!function(e,n,t){t.length>1?e.querySelector(".fldSelectLoginProvider").classList.remove("hide"):e.querySelector(".fldSelectLoginProvider").classList.add("hide");var c=n.Policy.AuthenticationProviderId;e.querySelector(".selectLoginProvider").innerHTML=t.map((function(e){var n=e.Id===c||t.length<2?" selected":"";return'<option value="'+e.Id+'"'+n+">"+e.Name+"</option>"}))}(e,n,t)})),ApiClient.getJSON(ApiClient.getUrl("Auth/PasswordResetProviders")).then((function(t){!function(e,n,t){t.length>1?e.querySelector(".fldSelectPasswordResetProvider").classList.remove("hide"):e.querySelector(".fldSelectPasswordResetProvider").classList.add("hide");var c=n.Policy.PasswordResetProviderId;e.querySelector(".selectPasswordResetProvider").innerHTML=t.map((function(e){var n=e.Id===c||t.length<2?" selected":"";return'<option value="'+e.Id+'"'+n+">"+e.Name+"</option>"}))}(e,n,t)})),ApiClient.getJSON(ApiClient.getUrl("Library/MediaFolders",{IsHidden:!1})).then((function(t){!function(e,n,t){ApiClient.getJSON(ApiClient.getUrl("Channels",{SupportsMediaDeletion:!0})).then((function(c){var o,i,l="",r=s(t);try{for(r.s();!(i=r.n()).done;){var a=i.value;o=n.Policy.EnableContentDeletion||-1!=n.Policy.EnableContentDeletionFromFolders.indexOf(a.Id)?' checked="checked"':"",l+='<label><input type="checkbox" is="emby-checkbox" class="chkFolder" data-id="'+a.Id+'" '+o+"><span>"+a.Name+"</span></label>"}}catch(e){r.e(e)}finally{r.f()}var d,h=s(c.Items);try{for(h.s();!(d=h.n()).done;){var u=d.value;o=n.Policy.EnableContentDeletion||-1!=n.Policy.EnableContentDeletionFromFolders.indexOf(u.Id)?' checked="checked"':"",l+='<label><input type="checkbox" is="emby-checkbox" class="chkFolder" data-id="'+u.Id+'" '+o+"><span>"+u.Name+"</span></label>"}}catch(e){h.e(e)}finally{h.f()}$(".deleteAccess",e).html(l).trigger("create"),$("#chkEnableDeleteAllFolders",e).prop("checked",n.Policy.EnableContentDeletion)}))}(e,n,t.Items)})),n.Policy.IsDisabled?$(".disabledUserBanner",e).show():$(".disabledUserBanner",e).hide(),$("#txtUserName",e).prop("disabled","").removeAttr("disabled"),$("#fldConnectInfo",e).show(),$(".lnkEditUserPreferences",e).attr("href","mypreferencesmenu.html?userId="+n.Id),o.Z.setTitle(n.Name),e.querySelector(".username").innerHTML=n.Name,$("#txtUserName",e).val(n.Name),$("#chkIsAdmin",e).prop("checked",n.Policy.IsAdministrator),$("#chkDisabled",e).prop("checked",n.Policy.IsDisabled),$("#chkIsHidden",e).prop("checked",n.Policy.IsHidden),$("#chkEnableCollectionManagement",e).prop("checked",n.Policy.chkEnableCollectionManagement),$("#chkRemoteControlSharedDevices",e).prop("checked",n.Policy.EnableSharedDeviceControl),$("#chkEnableRemoteControlOtherUsers",e).prop("checked",n.Policy.EnableRemoteControlOfOtherUsers),$("#chkEnableDownloading",e).prop("checked",n.Policy.EnableContentDownloading),$("#chkManageLiveTv",e).prop("checked",n.Policy.EnableLiveTvManagement),$("#chkEnableLiveTvAccess",e).prop("checked",n.Policy.EnableLiveTvAccess),$("#chkEnableMediaPlayback",e).prop("checked",n.Policy.EnableMediaPlayback),$("#chkEnableAudioPlaybackTranscoding",e).prop("checked",n.Policy.EnableAudioPlaybackTranscoding),$("#chkEnableVideoPlaybackTranscoding",e).prop("checked",n.Policy.EnableVideoPlaybackTranscoding),$("#chkEnableVideoPlaybackRemuxing",e).prop("checked",n.Policy.EnablePlaybackRemuxing),$("#chkForceRemoteSourceTranscoding",e).prop("checked",n.Policy.ForceRemoteSourceTranscoding),$("#chkRemoteAccess",e).prop("checked",null==n.Policy.EnableRemoteAccess||n.Policy.EnableRemoteAccess),$("#txtRemoteClientBitrateLimit",e).val(n.Policy.RemoteClientBitrateLimit/1e6||""),$("#txtLoginAttemptsBeforeLockout",e).val(n.Policy.LoginAttemptsBeforeLockout||"0"),$("#txtMaxActiveSessions",e).val(n.Policy.MaxActiveSessions||"0"),ApiClient.isMinServerVersion("10.6.0")&&$("#selectSyncPlayAccess").val(n.Policy.SyncPlayAccess),c.ZP.hide()}(e,n)}))}))}}]);