/*! For license information please see users.3df834772fa39d4996dc.chunk.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[22681],{13528:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return y}});var n=t(24246),a=t(27378),s=t(60635),c=t(94994),i=t(84597),o=t(72365),u=t(3137),l=t(20990),d=t(49365),f=t(56285),h=t(65009),v=t.n(h),p=t(26059),m=function(e){var r=e.user,t=e.renderImgUrl;return{__html:'<a\n        is="emby-linkbutton"\n        class="cardContent"\n        href="#/dashboard/users/profile?userId='.concat(r.Id,'"\n        >\n        ').concat(t,"\n    </a>")}},g=function(e){var r,t,a,s=e.user,i=void 0===s?{}:s,o="card squareCard scalableCard squareCard-scalable";(null===(r=i.Policy)||void 0===r?void 0:r.IsDisabled)&&(o+=" grayscale"),i.PrimaryImageTag&&i.Id&&(a=window.ApiClient.getUserImageUrl(i.Id,{width:300,tag:i.PrimaryImageTag,type:"Primary"}));var u="cardImage";(null===(t=i.Policy)||void 0===t?void 0:t.IsDisabled)&&(u+=" disabledUser");var h,g=(h=i.LastActivityDate)?c.ZP.translate("LastSeen",(0,l.Z)(Date.parse(h),(0,d.LP)())):"",b=a?"<div class='".concat(u,"' style='background-image:url(").concat(a,")'></div>"):"<div class='".concat(u," ").concat((0,p.Rk)(i.Name)," flex align-items-center justify-content-center'>\n            <span class='material-icons cardImageIcon person' aria-hidden='true'></span>\n        </div>");return(0,n.jsx)("div",{"data-userid":i.Id,className:o,children:(0,n.jsxs)("div",{className:"cardBox visualCardBox",children:[(0,n.jsxs)("div",{className:"cardScalable visualCardBox-cardScalable",children:[(0,n.jsx)("div",{className:"cardPadder cardPadder-square"}),(0,n.jsx)("div",{dangerouslySetInnerHTML:m({user:i,renderImgUrl:b})})]}),(0,n.jsxs)("div",{className:"cardFooter visualCardBox-cardFooter",children:[(0,n.jsx)("div",{style:{textAlign:"right",float:"right",paddingTop:"5px"},children:(0,n.jsx)(f.Z,{is:"paper-icon-button-light",className:"btnUserMenu flex-shrink-zero",icon:"more_vert"})}),(0,n.jsx)("div",{className:"cardText",children:(0,n.jsx)("span",{children:v()(i.Name)})}),(0,n.jsx)("div",{className:"cardText cardText-secondary",children:(0,n.jsx)("span",{children:""!=g?g:""})})]})]})})},b=t(87926),x=(t(38228),t(61414),t(87143)),y=function(){var e=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,a,s=t.call(e),c=[];try{for(;(void 0===r||r-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(t=s.return)&&t.call(s)}finally{if(a)throw a.error}}return c}((0,a.useState)([]),2),r=e[0],l=e[1],d=(0,a.useRef)(null),f=function(){i.ZP.show(),window.ApiClient.getUsers().then((function(e){l(e),i.ZP.hide()})).catch((function(e){console.error("[userprofiles] failed to fetch users",e)}))};return(0,a.useEffect)((function(){var e=d.current;if(e){f();e.addEventListener("click",(function(e){var r=o.ZP.parentWithClass(e.target,"btnUserMenu");r&&function(e){var r=o.ZP.parentWithClass(e,"card"),n=null==r?void 0:r.getAttribute("data-userid");if(n){var a=[];a.push({name:c.ZP.translate("ButtonEditUser"),id:"open",icon:"mode_edit"}),a.push({name:c.ZP.translate("ButtonLibraryAccess"),id:"access",icon:"lock"}),a.push({name:c.ZP.translate("ButtonParentalControl"),id:"parentalcontrol",icon:"person"}),a.push({name:c.ZP.translate("Delete"),id:"delete",icon:"delete"}),t.e(80454).then(t.bind(t,80454)).then((function(e){e.default.show({items:a,positionTo:r,callback:function(e){switch(e){case"open":s.default.navigate("/dashboard/users/profile?userId="+n).catch((function(e){console.error("[userprofiles] failed to navigate to user edit page",e)}));break;case"access":s.default.navigate("/dashboard/users/access?userId="+n).catch((function(e){console.error("[userprofiles] failed to navigate to user library page",e)}));break;case"parentalcontrol":s.default.navigate("/dashboard/users/parentalcontrol?userId="+n).catch((function(e){console.error("[userprofiles] failed to navigate to parental control page",e)}));break;case"delete":!function(e){var r=c.ZP.translate("DeleteUserConfirmation");(0,u.Z)({title:c.ZP.translate("DeleteUser"),text:r,confirmText:c.ZP.translate("Delete"),primary:"delete"}).then((function(){i.ZP.show(),window.ApiClient.deleteUser(e).then((function(){f()})).catch((function(e){console.error("[userprofiles] failed to delete user",e)}))})).catch((function(){}))}(n)}}}).catch((function(){}))})).catch((function(e){console.error("[userprofiles] failed to load action sheet",e)}))}else console.error("Unexpected null user id")}(r)})),e.querySelector("#btnAddUser").addEventListener("click",(function(){s.default.navigate("/dashboard/users/add").catch((function(e){console.error("[userprofiles] failed to navigate to new user page",e)}))}))}else console.error("Unexpected null reference")}),[]),(0,n.jsx)(x.Z,{id:"userProfilesPage",className:"mainAnimatedPage type-interior userProfilesPage fullWidthContent",children:(0,n.jsxs)("div",{ref:d,className:"content-primary",children:[(0,n.jsx)("div",{className:"verticalSection",children:(0,n.jsx)(b.Z,{title:c.ZP.translate("HeaderUsers"),isBtnVisible:!0,btnId:"btnAddUser",btnClassName:"fab submit sectionTitleButton",btnTitle:"ButtonAddUser",btnIcon:"add",url:"https://jellyfin.org/docs/general/server/users/adding-managing-users"})}),(0,n.jsx)("div",{className:"localUsers itemsContainer vertical-wrap",children:r.map((function(e){return(0,n.jsx)(g,{user:e},e.Id)}))})]})})}},87143:function(e,r,t){"use strict";var n=t(24246),a=t(27378),s=t(93110);r.Z=function(e){var r=e.children,t=e.id,c=e.className,i=void 0===c?"":c,o=e.title,u=e.isBackButtonEnabled,l=void 0===u||u,d=e.isMenuButtonEnabled,f=void 0!==d&&d,h=e.isNowPlayingBarEnabled,v=void 0===h||h,p=e.isThemeMediaSupported,m=void 0!==p&&p,g=e.backDropType,b=(0,a.useRef)(null);return(0,a.useEffect)((function(){s.Z.hideView()}),[]),(0,a.useEffect)((function(){var e,r,t,n,a={bubbles:!0,cancelable:!1,detail:{isRestored:!1,options:{enableMediaControl:v,supportsThemeMedia:m}}};null===(e=b.current)||void 0===e||e.dispatchEvent(new CustomEvent("viewbeforeshow",a)),null===(r=b.current)||void 0===r||r.dispatchEvent(new CustomEvent("pagebeforeshow",a)),null===(t=b.current)||void 0===t||t.dispatchEvent(new CustomEvent("viewshow",a)),null===(n=b.current)||void 0===n||n.dispatchEvent(new CustomEvent("pageshow",a))}),[b,v,m]),(0,n.jsx)("div",{ref:b,id:t,"data-role":"page",className:"page ".concat(i),"data-title":o,"data-backbutton":l,"data-menubutton":f,"data-backdroptype":g,children:r})}},26059:function(e,r,t){"use strict";t.d(r,{IH:function(){return f},Qi:function(){return d},Rk:function(){return h},XE:function(){return p},Yg:function(){return i},aI:function(){return m},aQ:function(){return c},gG:function(){return o},jL:function(){return l},nm:function(){return u}});var n=t(34706),a=t(90005),s=t.n(a),c=function(e){return"Program"===e||"Timer"===e||"Recording"===e},i=function(e){return"play"===e.defaultAction&&e.isFolder?"link":e.isPhoto?"play":e.defaultAction},o=function(e){var r=window.screen;return!!(r&&r.availWidth-e>20)},u=function(e){return null==e?"mixedSquare":e>=1.33?"mixedBackdrop":e>.71?"mixedSquare":"mixedPortrait"},l=function(e){var r;return s()(((r={card:!0})["".concat(e.shape,"Card")]=e.shape,r["".concat(e.cardCssClass)]=e.cardCssClass,r["".concat(e.cardClass)]=e.cardClass,r["card-hoverable"]=e.isDesktop,r["show-focus"]=e.isTV,r["show-animation"]=e.isTV&&e.enableFocusTransform,r.groupedCard=e.showChildCountIndicator&&e.childCount,r["card-withuserdata"]=!["MusicAlbum","MusicArtist","Audio"].includes(e.itemType),r.itemAction="button"===e.tagName,r))},d=function(e){var r;return s()(((r={cardImageContainer:!0,coveredImage:e.hasCoverImage,"coveredImage-contain":e.hasCoverImage&&"TvChannel"===e.itemType})[h(e.itemName)]=!e.imgUrl,r))},f=function(e){return s()({cardBox:!0,visualCardBox:e.cardLayout,"cardBox-bottompadded":e.hasOuterCardFooter&&!e.cardLayout})},h=function(e){return"defaultCardBackground defaultCardBackground".concat(v(e))},v=function(e){if(e){for(var r=Math.floor(e.length/2),t=String(e.slice(r,r+1).charCodeAt(0)),a=0,s=0;s<t.length;s++)a+=parseInt(t.charAt(s),10);return parseInt(String(a).slice(-1),10)%5+1}return(0,n.Iy)(1,5)},p=function(e){return e?-1!==(e=e.toLowerCase()).indexOf("portrait")?.6666666666666666:-1!==e.indexOf("backdrop")?1.7777777777777777:-1!==e.indexOf("square")?1:-1!==e.indexOf("banner")?5.405405405405405:null:null},m=function(e,r,t,n){switch(e){case"portrait":return g(r,n);case"square":return b(r,n);case"banner":return x(r);case"backdrop":return y(r,n);case"smallBackdrop":return w(r);case"overflowSmallBackdrop":return C(r,t,n);case"overflowPortrait":return I(r,t,n);case"overflowSquare":return P(r,t,n);case"overflowBackdrop":return k(r,t,n);default:return 4}},g=function(e,r){switch(!0){case r:return 5.9999999988;case e>=2200:return 10;case e>=1920:return 9.000000000009;case e>=1600:return 8;case e>=1400:return 7.0000000000021;case e>=1200:return 5.9999999988;case e>=800:return 5;case e>=700:return 4;default:return 3.0000000003}},b=function(e,r){switch(!0){case r:return 5.9999999988;case e>=2200:return 10;case e>=1920:return 9.000000000009;case e>=1600:return 8;case e>=1400:return 7.0000000000021;case e>=1200:return 5.9999999988;case e>=800:return 5;case e>=700:return 4;case e>=500:return 3.0000000003;default:return 2}},x=function(e){switch(!0){case e>=2200:return 4;case e>=1200:return 3.0000000003;case e>=800:return 2;default:return 1}},y=function(e,r){switch(!0){case r:return 4;case e>=2500:return 6;case e>=1600:return 5;case e>=1200:return 4;case e>=770:return 3;case e>=420:return 2;default:return 1}},w=function(e){switch(!0){case e>=1600:return 8;case e>=1400:return 7.000000000007001;case e>=1200:return 5.9999999988;case e>=1e3:return 5;case e>=800:return 4;case e>=500:return 3.0000000003;default:return 2}},C=function(e,r,t){switch(!0){case t:return 100/18.9;case r&&e>=800:return 100/15.5;case r:return 100/23.3;case e>=540:return 100/30;default:return 100/72}},I=function(e,r,t){switch(!0){case t:return 100/15.5;case r&&e>=1700:return 100/11.6;case r:return 100/15.5;case e>=1400:return 100/15;case e>=1200:return 100/18;case e>=760:return 100/23;case e>=400:return 100/31.5;default:return 100/42}},P=function(e,r,t){switch(!0){case t:return 100/15.5;case r&&e>=1700:return 100/11.6;case r:return 100/15.5;case e>=1400:return 100/15;case e>=1200:return 100/18;case e>=760:return 100/23;case e>=540:return 100/31.5;default:return 100/42}},k=function(e,r,t){switch(!0){case t:return 100/23.3;case r&&e>=1700:return 100/18.5;case r:return 100/23.3;case e>=1800:return 100/23.5;case e>=1400:return 100/30;case e>=760:return 2.5;case e>=640:return 100/56;default:return 100/72}}},56285:function(e,r,t){"use strict";var n=t(24246),a=(t(27378),t(94994)),s=function(e){var r=e.is,t=e.id,n=e.className,a=e.title,s=e.icon,c=e.dataIndex,i=e.dataTag,o=e.dataProfileid;return{__html:'<button\n        is="'.concat(r,'"\n        type="button"\n        ').concat(t,'\n        class="').concat(n,'"\n        ').concat(a,"\n        ").concat(c,"\n        ").concat(i,"\n        ").concat(o,'\n    >\n        <span class="material-icons ').concat(s,'" aria-hidden="true"></span>\n    </button>')}};r.Z=function(e){var r=e.is,t=e.id,c=e.className,i=e.title,o=e.icon,u=e.dataIndex,l=e.dataTag,d=e.dataProfileid;return(0,n.jsx)("div",{dangerouslySetInnerHTML:s({is:r,id:t?'id="'.concat(t,'"'):"",className:c,title:i?'title="'.concat(a.ZP.translate(i),'"'):"",icon:o,dataIndex:u?'data-index="'.concat(u,'"'):"",dataTag:l?'data-tag="'.concat(l,'"'):"",dataProfileid:d?'data-profileid="'.concat(d,'"'):""})})}},87926:function(e,r,t){"use strict";t.d(r,{Z:function(){return o}});var n=t(24246),a=(t(27378),t(56285)),s=t(94994),c=function(e){var r=e.className,t=e.title,n=e.href;return{__html:'<a\n        is="emby-linkbutton"\n        rel="noopener noreferrer"\n        class="'.concat(r,'"\n        target="_blank"\n        href="').concat(n,'"\n        >\n        ').concat(t,"\n    </a>")}},i=function(e){var r=e.className,t=e.title,a=e.url;return(0,n.jsx)("div",{dangerouslySetInnerHTML:c({className:r,title:s.ZP.translate(t),href:a})})},o=function(e){var r=e.SectionClassName,t=e.title,s=e.isBtnVisible,c=void 0!==s&&s,o=e.btnId,u=e.btnClassName,l=e.btnTitle,d=e.btnIcon,f=e.isLinkVisible,h=void 0===f||f,v=e.url;return(0,n.jsxs)("div",{className:"".concat(r," sectionTitleContainer flex align-items-center"),children:[(0,n.jsx)("h2",{className:"sectionTitle",children:t}),c&&(0,n.jsx)(a.Z,{is:"emby-button",id:o,className:u,title:l,icon:d}),h&&(0,n.jsx)(i,{className:"raised button-alt headerHelpButton",title:"Help",url:v})]})}},90005:function(e,r){var t;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e="",r=0;r<arguments.length;r++){var t=arguments[r];t&&(e=c(e,s(t)))}return e}function s(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var r="";for(var t in e)n.call(e,t)&&e[t]&&(r=c(r,t));return r}function c(e,r){return r?e?e+" "+r:e+r:e}e.exports?(a.default=a,e.exports=a):void 0===(t=function(){return a}.apply(r,[]))||(e.exports=t)}()}}]);