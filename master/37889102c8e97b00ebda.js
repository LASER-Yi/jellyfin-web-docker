function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var p=p,Be=function(e){return console.log(e)},xe=function(e){return console.error(e)};function ze(){}if(self.assert||(self.assert=function(e,t){if(!e)throw t}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return void 0===t&&(t=0),this.substring(t,e.length)===e}),String.prototype.includes||(String.prototype.includes=function(e,t){return-1!==this.indexOf(e,t)}),!ArrayBuffer.isView){var e=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];ArrayBuffer.isView=function(t){return t&&t.constructor&&-1!==e.indexOf(t.constructor)}}if(Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(e,t){return new Uint8Array(this.subarray(e,t))}),Date.now||(Date.now=function(){return(new Date).getTime()}),"performance"in self||(self.performance={now:function(){return Date.now()}}),("undefined"==typeof console?"undefined":_typeof(console))>"u"){var _e2=function(e,t){postMessage({target:"console",command:e,content:JSON.stringify(Array.prototype.slice.call(t))})};console={log:function(){_e2("log",arguments)},debug:function(){_e2("debug",arguments)},info:function(){_e2("info",arguments)},warn:function(){_e2("warn",arguments)},error:function(){_e2("error",arguments)}},console.log("Detected lack of console, overridden console")}var Te=function(e,t){var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType=t?"arraybuffer":"text",r.send(null),r.response},mr=function(e,t,r){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){if((200===n.status||0===n.status)&&n.response)return t(n.response);r()},n.onerror=r,n.send(null)};p={wasm:WebAssembly&&!WebAssembly.instantiateStreaming&&Te("jassub-worker.wasm",!0)},ze=function(){return postMessage({target:"ready"})},Be=function(e){"JASSUB: No usable fontconfig configuration file found, using fallback."===e?console.debug(e):console.log(e)},xe=function(e){"Fontconfig error: Cannot load default config file: No such file: (null)"===e?console.debug(e):console.error(e)};var Xe,x=0,br=1,j=null,Re=!1,Pe=Date.now(),re=24,Ge=!1,Je="js",te={},Le={},wr=0;self.width=0,self.height=0;var E=!1;self.addFont=function(e){var t=e.font;return $e(t)};var we=function(e){(e=e.trim().toLowerCase()).startsWith("@")&&(e=e.substring(1)),!Le[e]&&(Le[e]=!0,te[e]?$e(te[e]):Ge&&postMessage({target:"getLocalFont",font:e}))},$e=function(e){ArrayBuffer.isView(e)?Ie(e):mr(e,(function(e){Ie(new Uint8Array(e))}),console.error)},Ie=function(e){var t=ge(e.byteLength);m.set(e,t),self.jassubObj.addFont("font-"+wr++,t,e.byteLength),self.jassubObj.reloadFonts()},qe=function(e){if(te){for(var t=Pr(e),r=0;r<t.length;r++)for(var n=0;n<t[r].body.length;n++)"Style"===t[r].body[n].key&&we(t[r].body[n].value.Fontname);for(var o,a=/\\fn([^\\}]*?)[\\}]/g;null!==(o=a.exec(e));)we(o[1])}};self.setTrack=function(e){var t=e.content;qe(t),self.jassubObj.createTrackMem(t)},self.freeTrack=function(){self.jassubObj.removeTrack()},self.setTrackByUrl=function(e){var t=e.url;self.setTrack({content:Te(t)})};var _r=function(e,t){self.width=e,self.height=t,self.jassubObj.resizeCanvas(e,t)},Cr=function(){var e=(Date.now()-Pe)/1e3;return ne?x:(e>5&&(console.error("Didn't received currentTime > 5 seconds. Assuming video was paused."),Ye(!0)),x+e*br)},Tr=function(e){x=e,Pe=Date.now(),j||(Re?j=Fe(ie):(ie(),setTimeout((function(){Re=!1}),20)))},ne=!0,Ye=function(e){e!==ne&&(ne=e,e?j&&(clearTimeout(j),j=null):(Pe=Date.now(),j=Fe(ie)))},Ae=function(e,t){var r=performance.now(),n="wasm"===Je?self.jassubObj.renderBlend(e,t||0):self.jassubObj.renderImage(e,t||0),o={renderTime:performance.now()-r-self.jassubObj.time,decodeTime:self.jassubObj.time};if(0!==self.jassubObj.changed||t){var a=[],i=[],s=performance.now();if(!n)return me({images:a,buffers:i,times:o,decodeStartTime:s});if(E){for(var u=[],c=n,f=0;f<self.jassubObj.count;c=c.next,++f)a.push({w:c.w,h:c.h,x:c.x,y:c.y}),u.push(createImageBitmap(new ImageData(Se.slice(c.image,c.image+c.w*c.h*4),c.w,c.h)));Promise.all(u).then((function(e){for(var t=0;t<a.length;t++)a[t].image=e[t];me({images:a,buffers:i=e,times:o,decodeStartTime:s})}))}else{for(var l=n,p=0;p<self.jassubObj.count;l=l.next,++p){var d={w:l.w,h:l.h,x:l.x,y:l.y,image:l.image};if(!M){var h=X.slice(l.image,l.image+l.w*l.h*4);i.push(h),d.image=h}a.push(d)}me({images:a,buffers:i,times:o,decodeStartTime:s})}}else postMessage({target:"unbusy"})};self.demand=function(e){var t=e.time;x=t,Ae(t)};var I,M,ie=function e(t){j=0,Ae(Cr(),t),ne||(j=Fe(e))},me=function(e){var t=e.times,r=e.images,n=e.decodeStartTime,o=e.buffers;if(t.decodeTime=performance.now()-n,M){var a=performance.now();I.width=self.width,I.height!==self.height&&(I.height=self.height),M.clearRect(0,0,self.width,self.height);var i,s=_createForOfIteratorHelper(r);try{for(s.s();!(i=s.n()).done;){var u=i.value;u.image&&(E?(M.drawImage(u.image,u.x,u.y),u.image.close()):(self.bufferCanvas.width=u.w,self.bufferCanvas.height=u.h,self.bufferCtx.putImageData(new ImageData(Se.subarray(u.image,u.image+u.w*u.h*4),u.w,u.h),0,0),M.drawImage(self.bufferCanvas,u.x,u.y)))}}catch(e){s.e(e)}finally{s.f()}if(Xe){t.drawTime=performance.now()-a;var c=0;for(var f in t)c+=t[f];console.log("Bitmaps: "+r.length+" Total: "+Math.round(c)+"ms",t)}postMessage({target:"unbusy"})}else postMessage({target:"render",async:E,images:r,times:t,width:self.width,height:self.height},o)},Pr=function(e){var t,r,n,o,a,i,s,u,c,f,l=[],p=e.split(/[\r\n]+/g);for(u=0;u<p.length;u++)if(t=p[u].match(/^\[(.*)\]$/))r=null,l.push({name:t[1],body:[]});else{if(/^\s*$/.test(p[u])||0===l.length)continue;if(f=l[l.length-1].body,";"===p[u][0])f.push({type:"comment",value:p[u].substring(1)});else{if(a=(o=p[u].split(":"))[0],i=o.slice(1).join(":").trim(),(r||"Format"===a)&&(i=i.split(","),r&&i.length>r.length&&(n=i.slice(r.length-1).join(","),(i=i.slice(0,r.length-1)).push(n)),i=i.map((function(e){return e.trim()})),r)){for(s={},c=0;c<i.length;c++)s[r[c]]=i[c];i=s}"Format"===a&&(r=i),f.push({key:a,value:i})}}return l},Fe=function(){var e=0;return function(t){var r=Date.now();if(0===e)e=r+1e3/re;else for(;r+2>=e;)e+=1e3/re;var n=Math.max(e-r,0);return setTimeout(t,n)}}(),le=function(e,t){for(var r=0,n=Object.keys(e);r<n.length;r++){var o=n[r];t[o]=e[o]}};self.init=function(e){self.width=e.width,self.height=e.height,Je=e.blendMode,(E=e.asyncRender)&&("undefined"==typeof createImageBitmap?"undefined":_typeof(createImageBitmap))>"u"&&(E=!1,console.error("'createImageBitmap' needed for 'asyncRender' unsupported!")),te=e.availableFonts,Xe=e.debug,re=e.targetFps||re,Ge=e.useLocalFonts;var t=e.fallbackFont.toLowerCase();self.jassubObj=new p.JASSUB(self.width,self.height,t||null),t&&we(t);var r=e.subContent;r||(r=Te(e.subUrl)),qe(r);var n,o=_createForOfIteratorHelper(e.fonts||[]);try{for(o.s();!(n=o.n()).done;){var a=n.value;$e(a)}}catch(e){o.e(e)}finally{o.f()}self.jassubObj.createTrackMem(r),self.jassubObj.setDropAnimations(e.dropAllAnimations||0),(e.libassMemoryLimit>0||e.libassGlyphLimit>0)&&self.jassubObj.setMemoryLimits(e.libassGlyphLimit||0,e.libassMemoryLimit||0)},self.canvas=function(e){var t=e.width,r=e.height,n=e.force;if(null==t)throw new Error("Invalid canvas size specified");_r(t,r),n&&Ae(x)},self.video=function(e){var t=e.currentTime,r=e.isPaused,n=e.rate;null!=t&&Tr(t),null!=r&&Ye(r),n=n||n},self.offscreenCanvas=function(e){var t=e.transferable;I=t[0],M=I.getContext("2d",{desynchronized:!0}),E||(self.bufferCanvas=new OffscreenCanvas(self.height,self.width),self.bufferCtx=self.bufferCanvas.getContext("2d",{desynchronized:!0}))},self.destroy=function(){self.jassubObj.quitLibrary()},self.createEvent=function(e){var t=e.event;le(t,self.jassubObj.getEvent(self.jassubObj.allocEvent()))},self.getEvents=function(){for(var e=[],t=0;t<self.jassubObj.getEventCount();t++){var r=self.jassubObj.getEvent(t),n=r.Start,o=r.Duration,a=r.ReadOrder,i=r.Layer,s=r.Style,u=r.MarginL,c=r.MarginR,f=r.MarginV,l=r.Name,p=r.Text,d=r.Effect;e.push({Start:n,Duration:o,ReadOrder:a,Layer:i,Style:s,MarginL:u,MarginR:c,MarginV:f,Name:l,Text:p,Effect:d})}postMessage({target:"getEvents",events:e})},self.setEvent=function(e){var t=e.event,r=e.index;le(t,self.jassubObj.getEvent(r))},self.removeEvent=function(e){var t=e.index;self.jassubObj.removeEvent(t)},self.createStyle=function(e){var t=e.style;le(t,self.jassubObj.getStyle(self.jassubObj.allocStyle()))},self.getStyles=function(){for(var e=[],t=0;t<self.jassubObj.getStyleCount();t++){var r=self.jassubObj.getStyle(t),n=r.Name,o=r.FontName,a=r.FontSize,i=r.PrimaryColour,s=r.SecondaryColour,u=r.OutlineColour,c=r.BackColour,f=r.Bold,l=r.Italic,p=r.Underline,d=r.StrikeOut,h=r.ScaleX,g=r.ScaleY,y=r.Spacing,v=r.Angle,m=r.BorderStyle,b=r.Outline,w=r.Shadow,C=r.Alignment,T=r.MarginL,$=r.MarginR,P=r.MarginV,A=r.Encoding,j=r.treat_fontname_as_pattern,S=r.Blur,O=r.Justify;e.push({Name:n,FontName:o,FontSize:a,PrimaryColour:i,SecondaryColour:s,OutlineColour:u,BackColour:c,Bold:f,Italic:l,Underline:p,StrikeOut:d,ScaleX:h,ScaleY:g,Spacing:y,Angle:v,BorderStyle:m,Outline:b,Shadow:w,Alignment:C,MarginL:T,MarginR:$,MarginV:P,Encoding:A,treat_fontname_as_pattern:j,Blur:S,Justify:O})}postMessage({target:"getStyles",time:Date.now(),styles:e})},self.setStyle=function(e){var t=e.style,r=e.index;le(t,self.jassubObj.getStyle(r))},self.removeStyle=function(e){var t=e.index;self.jassubObj.removeStyle(t)},onmessage=function(e){var t=e.data;if(!self[t.target])throw new Error("Unknown event target "+t.target);self[t.target](t)};var Se=null;function Ke(e){throw e}ae=function(e){return function(t){e(t),Se=new Uint8ClampedArray(X)}}(ae);var je,z,U,m,ue,C,Ze,Ne,se,X,er,Qe=new TextDecoder("utf8");function $r(e,t,r){for(var n=t+r,o=t;e[o]&&!(o>=n);)++o;return Qe.decode(e.buffer?e.subarray(t,o):new Uint8Array(e.slice(t,o)))}function ee(e,t){if(!e)return"";for(var r=e+t,n=e;!(n>=r)&&m[n];)++n;return Qe.decode(m.subarray(e,n))}function Ar(e,t,r,n){if(!(n>0))return 0;for(var o=r,a=r+n-1,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),s<=127){if(r>=a)break;t[r++]=s}else if(s<=2047){if(r+1>=a)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(r+2>=a)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+3>=a)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-o}function Fr(e,t,r){return Ar(e,m,t,r)}function Sr(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3}return t}function ae(e){X=e,je=new Int8Array(e),z=new Int16Array(e),U=new Int32Array(e),m=new Uint8Array(e),ue=new Uint16Array(e),C=new Uint32Array(e),Ze=new Float32Array(e),Ne=new Float64Array(e)}function jr(e,t,r,n){Ke("Assertion failed: "+ee(e)+", at: "+[t?ee(t):"unknown filename",r,n?ee(n):"unknown function"])}function Or(e,t,r){return 0}function kr(e,t,r){}function Er(e,t,r){return 0}function Ur(e,t,r,n){}function Dr(e,t,r,n,o){}function Oe(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function Mr(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);rr=e}var rr=void 0;function w(e){for(var t="",r=e;m[r];)t+=rr[m[r++]];return t}var W={},R={},oe={},Wr=48,Rr=57;function ke(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=Wr&&t<=Rr?"_"+e:e}function Ee(e,t){return e=ke(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function Ue(e,t){var r=Ee(t,(function(e){this.name=t,this.message=e;var r=new Error(e).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var L=void 0;function g(e){throw new L(e)}var tr=void 0;function fe(e){throw new tr(e)}function D(e,t,r){function n(t){var n=r(t);n.length!==e.length&&fe("Mismatched type converter count");for(var o=0;o<e.length;++o)F(e[o],n[o])}e.forEach((function(e){oe[e]=t}));var o=new Array(t.length),a=[],i=0;t.forEach((function(e,t){R.hasOwnProperty(e)?o[t]=R[e]:(a.push(e),W.hasOwnProperty(e)||(W[e]=[]),W[e].push((function(){o[t]=R[e],++i===a.length&&n(o)})))})),0===a.length&&n(o)}function F(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=t.name;if(e||g('type "'+n+'" must have a positive integer typeid pointer'),R.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;g("Cannot register type '"+n+"' twice")}if(R[e]=t,delete oe[e],W.hasOwnProperty(e)){var o=W[e];delete W[e],o.forEach((function(e){return e()}))}}function Lr(e,t,r,n,o){var a=Oe(r);F(e,{name:t=w(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?n:o},argPackAdvance:8,readValueFromPointer:function(e){var n;if(1===r)n=je;else if(2===r)n=z;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+t);n=U}return this.fromWireType(n[e>>a])},destructorFunction:null})}function Ir(e){if(!(this instanceof S&&e instanceof S))return!1;for(var t=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=e.$$.ptrType.registeredClass,o=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)o=n.upcast(o),n=n.baseClass;return t===n&&r===o}function Hr(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function De(e){g(e.$$.ptrType.registeredClass.name+" instance already deleted")}var be=!1;function nr(e){}function Vr(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function ir(e){e.count.value-=1,0===e.count.value&&Vr(e)}function sr(e,t,r){if(t===r)return e;if(void 0===r.baseClass)return null;var n=sr(e,t,r.baseClass);return null===n?null:r.downcast(n)}var ar={};function Br(){return Object.keys(V).length}function xr(){var e=[];for(var t in V)V.hasOwnProperty(t)&&e.push(V[t]);return e}var G=[];function Me(){for(;G.length;){var e=G.pop();e.$$.deleteScheduled=!1,e.delete()}}var H=void 0;function zr(e){H=e,G.length&&H&&H(Me)}function Gr(){p.getInheritedInstanceCount=Br,p.getLiveInheritedInstances=xr,p.flushPendingDeletes=Me,p.setDelayFunction=zr}var V={};function Jr(e,t){for(void 0===t&&g("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}function Xr(e,t){return t=Jr(e,t),V[t]}function Z(e,t){return(!t.ptrType||!t.ptr)&&fe("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&fe("Both smartPtrType and smartPtr must be specified"),t.count={value:1},B(Object.create(e,{$$:{value:t}}))}function qr(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=Xr(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function o(){return this.isSmartPointer?Z(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Z(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var a,i=this.registeredClass.getActualType(t),s=ar[i];if(!s)return o.call(this);a=this.isConst?s.constPointerType:s.pointerType;var u=sr(t,this.registeredClass,a.registeredClass);return null===u?o.call(this):this.isSmartPointer?Z(a.registeredClass.instancePrototype,{ptrType:a,ptr:u,smartPtrType:this,smartPtr:e}):Z(a.registeredClass.instancePrototype,{ptrType:a,ptr:u})}function B(e){return("undefined"==typeof FinalizationRegistry?"undefined":_typeof(FinalizationRegistry))>"u"?(B=function(e){return e},e):(be=new FinalizationRegistry((function(e){ir(e.$$)})),nr=function(e){return be.unregister(e)},(B=function(e){var t=e.$$;if(t.smartPtr){var r={$$:t};be.register(e,r,e)}return e})(e))}function Yr(){if(this.$$.ptr||De(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=B(Object.create(Object.getPrototypeOf(this),{$$:{value:Hr(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function Kr(){this.$$.ptr||De(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&g("Object already scheduled for deletion"),nr(this),ir(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Qr(){return!this.$$.ptr}function Zr(){return this.$$.ptr||De(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&g("Object already scheduled for deletion"),G.push(this),1===G.length&&H&&H(Me),this.$$.deleteScheduled=!0,this}function Nr(){S.prototype.isAliasOf=Ir,S.prototype.clone=Yr,S.prototype.delete=Kr,S.prototype.isDeleted=Qr,S.prototype.deleteLater=Zr}function S(){}function or(e,t,r){if(void 0===e[t].overloadTable){var n=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||g("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}}function et(e,t,r){p.hasOwnProperty(e)?((void 0===r||void 0!==p[e].overloadTable&&void 0!==p[e].overloadTable[r])&&g("Cannot register public name '"+e+"' twice"),or(p,e,e),p.hasOwnProperty(r)&&g("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),p[e].overloadTable[r]=t):(p[e]=t,void 0!==r&&(p[e].numArguments=r))}function rt(e,t,r,n,o,a,i,s){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=o,this.getActualType=a,this.upcast=i,this.downcast=s,this.pureVirtualFunctions=[]}function ce(e,t,r){for(;t!==r;)t.upcast||g("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function tt(e,t){if(null===t)return this.isReference&&g("null is not a valid "+this.name),0;t.$$||g('Cannot pass "'+We(t)+'" as a '+this.name),t.$$.ptr||g("Cannot pass deleted object as a pointer of type "+this.name);var r=t.$$.ptrType.registeredClass;return ce(t.$$.ptr,r,this.registeredClass)}function nt(e,t){var r;if(null===t)return this.isReference&&g("null is not a valid "+this.name),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;t.$$||g('Cannot pass "'+We(t)+'" as a '+this.name),t.$$.ptr||g("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&g("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;if(r=ce(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&g("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:g("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var o=t.clone();r=this.rawShare(r,Ce.toHandle((function(){o.delete()}))),null!==e&&e.push(this.rawDestructor,r)}break;default:g("Unsupporting sharing policy")}return r}function it(e,t){if(null===t)return this.isReference&&g("null is not a valid "+this.name),0;t.$$||g('Cannot pass "'+We(t)+'" as a '+this.name),t.$$.ptr||g("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&g("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;return ce(t.$$.ptr,r,this.registeredClass)}function de(e){return this.fromWireType(U[e>>2])}function st(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function at(e){this.rawDestructor&&this.rawDestructor(e)}function ot(e){null!==e&&e.delete()}function ft(){$.prototype.getPointee=st,$.prototype.destructor=at,$.prototype.argPackAdvance=8,$.prototype.readValueFromPointer=de,$.prototype.deleteObject=ot,$.prototype.fromWireType=qr}function $(e,t,r,n,o,a,i,s,u,c,f){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=o,this.pointeeType=a,this.sharingPolicy=i,this.rawGetPointee=s,this.rawConstructor=u,this.rawShare=c,this.rawDestructor=f,o||void 0!==t.baseClass?this.toWireType=nt:n?(this.toWireType=tt,this.destructorFunction=null):(this.toWireType=it,this.destructorFunction=null)}function lt(e,t,r){p.hasOwnProperty(e)||fe("Replacing nonexistant public symbol"),void 0!==p[e].overloadTable&&void 0!==r?p[e].overloadTable[r]=t:(p[e]=t,p[e].argCount=r)}function ut(e,t,r){var n=dynCalls[e];return r&&r.length?n.apply(null,[t].concat(r)):n.call(null,t)}var N=[];function q(e){var t=N[e];return t||(e>=N.length&&(N.length=e+1),N[e]=t=er.get(e)),t}function ct(e,t,r){return e.includes("j")?ut(e,t,r):q(t).apply(null,r)}function dt(e,t){var r=[];return function(){return r.length=0,Object.assign(r,arguments),ct(e,t,r)}}function O(e,t){var r=(e=w(e)).includes("j")?dt(e,t):q(t);return"function"!=typeof r&&g("unknown function pointer with signature "+e+": "+t),r}var fr=void 0;function gt(e){var t=gr(e),r=w(t);return A(t),r}function J(e,t){var r=[],n={};throw t.forEach((function e(t){if(!n[t]&&!R[t]){if(oe[t])return void oe[t].forEach(e);r.push(t),n[t]=!0}})),new fr(e+": "+r.map(gt).join([", "]))}function pt(e,t,r,n,o,a,i,s,u,c,f,l,p){f=w(f),a=O(o,a),s&&(s=O(i,s)),c&&(c=O(u,c)),p=O(l,p);var d=ke(f);et(d,(function(){J("Cannot construct "+f+" due to unbound types",[n])})),D([e,t,r],n?[n]:[],(function(t){var r,o;t=t[0],o=n?(r=t.registeredClass).instancePrototype:S.prototype;var i=Ee(d,(function(){if(Object.getPrototypeOf(this)!==u)throw new L("Use 'new' to construct "+f);if(void 0===l.constructor_body)throw new L(f+" has no accessible constructor");var e=l.constructor_body[arguments.length];if(void 0===e)throw new L("Tried to invoke ctor of "+f+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(l.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),u=Object.create(o,{constructor:{value:i}});i.prototype=u;var l=new rt(f,i,u,p,r,a,s,c),h=new $(f,l,!0,!1,!1),g=new $(f+"*",l,!1,!1,!1),y=new $(f+" const*",l,!1,!0,!1);return ar[e]={pointerType:g,constPointerType:y},lt(d,i),[h,g,y]}))}function lr(e,t){for(var r=[],n=0;n<e;n++)r.push(C[t+4*n>>2]);return r}function ur(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function ht(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+_typeof(e)+" which is not a function");var r=Ee(e.name||"unknownFunctionName",(function(){}));r.prototype=e.prototype;var n=new r,o=e.apply(n,t);return o instanceof Object?o:n}function cr(e,t,r,n,o){var a=t.length;a<2&&g("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var i=null!==t[1]&&null!==r,s=!1,u=1;u<t.length;++u)if(null!==t[u]&&void 0===t[u].destructorFunction){s=!0;break}var c="void"!==t[0].name,f="",l="";for(u=0;u<a-2;++u)f+=(0!==u?", ":"")+"arg"+u,l+=(0!==u?", ":"")+"arg"+u+"Wired";var p="return function "+ke(e)+"("+f+") {\nif (arguments.length !== "+(a-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(a-2)+" args!');\n}\n";s&&(p+="var destructors = [];\n");var d=s?"destructors":"null",h=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],y=[g,n,o,ur,t[0],t[1]];for(i&&(p+="var thisWired = classParam.toWireType("+d+", this);\n"),u=0;u<a-2;++u)p+="var arg"+u+"Wired = argType"+u+".toWireType("+d+", arg"+u+"); // "+t[u+2].name+"\n",h.push("argType"+u),y.push(t[u+2]);if(i&&(l="thisWired"+(l.length>0?", ":"")+l),p+=(c?"var rv = ":"")+"invoker(fn"+(l.length>0?", ":"")+l+");\n",s)p+="runDestructors(destructors);\n";else for(u=i?1:2;u<t.length;++u){var v=1===u?"thisWired":"arg"+(u-2)+"Wired";null!==t[u].destructorFunction&&(p+=v+"_dtor("+v+"); // "+t[u].name+"\n",h.push(v+"_dtor"),y.push(t[u].destructorFunction))}return c&&(p+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),p+="}\n",h.push(p),ht(Function,h).apply(null,y)}function vt(e,t,r,n,o,a){assert(t>0);var i=lr(t,r);o=O(n,o),D([],[e],(function(e){var r="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new L("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){J("Cannot construct "+e.name+" due to unbound types",i)},D([],i,(function(n){return n.splice(1,0,null),e.registeredClass.constructor_body[t-1]=cr(r,n,null,o,a),[]})),[]}))}function yt(e,t,r,n,o,a,i,s){var u=lr(r,n);t=w(t),a=O(o,a),D([],[e],(function(e){var n=(e=e[0]).name+"."+t;function o(){J("Cannot call "+n+" due to unbound types",u)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),s&&e.registeredClass.pureVirtualFunctions.push(t);var c=e.registeredClass.instancePrototype,f=c[t];return void 0===f||void 0===f.overloadTable&&f.className!==e.name&&f.argCount===r-2?(o.argCount=r-2,o.className=e.name,c[t]=o):(or(c,t,n),c[t].overloadTable[r-2]=o),D([],u,(function(o){var s=cr(n,o,e,a,i);return void 0===c[t].overloadTable?(s.argCount=r-2,c[t]=s):c[t].overloadTable[r-2]=s,[]})),[]}))}function He(e,t,r){return e instanceof Object||g(r+' with invalid "this": '+e),e instanceof t.registeredClass.constructor||g(r+' incompatible with "this" of type '+e.constructor.name),e.$$.ptr||g("cannot call emscripten binding method "+r+" on deleted object"),ce(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)}function mt(e,t,r,n,o,a,i,s,u,c){t=w(t),o=O(n,o),D([],[e],(function(e){var n=(e=e[0]).name+"."+t,f={get:function(){J("Cannot access "+n+" due to unbound types",[r,i])},enumerable:!0,configurable:!0};return f.set=u?function(){J("Cannot access "+n+" due to unbound types",[r,i])}:function(e){g(n+" is a read-only property")},Object.defineProperty(e.registeredClass.instancePrototype,t,f),D([],u?[r,i]:[r],(function(r){var i=r[0],f={get:function(){var t=He(this,e,n+" getter");return i.fromWireType(o(a,t))},enumerable:!0};if(u){u=O(s,u);var l=r[1];f.set=function(t){var r=He(this,e,n+" setter"),o=[];u(c,r,l.toWireType(o,t)),ur(o)}}return Object.defineProperty(e.registeredClass.instancePrototype,t,f),[]})),[]}))}var _e=[],P=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function bt(e){e>4&&0==--P[e].refcount&&(P[e]=void 0,_e.push(e))}function wt(){for(var e=0,t=5;t<P.length;++t)void 0!==P[t]&&++e;return e}function _t(){for(var e=5;e<P.length;++e)if(void 0!==P[e])return P[e];return null}function Ct(){p.count_emval_handles=wt,p.get_first_emval=_t}var Ce={toValue:function(e){return e||g("Cannot use deleted val. handle = "+e),P[e].value},toHandle:function(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=_e.length?_e.pop():P.length;return P[t]={refcount:1,value:e},t}}};function Tt(e,t){F(e,{name:t=w(t),fromWireType:function(e){var t=Ce.toValue(e);return bt(e),t},toWireType:function(e,t){return Ce.toHandle(t)},argPackAdvance:8,readValueFromPointer:de,destructorFunction:null})}function We(e){if(null===e)return"null";var t=_typeof(e);return"object"===t||"array"===t||"function"===t?e.toString():""+e}function Pt(e,t){switch(t){case 2:return function(e){return this.fromWireType(Ze[e>>2])};case 3:return function(e){return this.fromWireType(Ne[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function $t(e,t,r){var n=Oe(r);F(e,{name:t=w(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:Pt(t,n),destructorFunction:null})}function At(e,t,r){switch(t){case 0:return r?function(e){return je[e]}:function(e){return m[e]};case 1:return r?function(e){return z[e>>1]}:function(e){return ue[e>>1]};case 2:return r?function(e){return U[e>>2]}:function(e){return C[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function Ft(e,t,r,n,o){t=w(t);var a=Oe(r),i=function(e){return e};if(0===n){var s=32-8*r;i=function(e){return e<<s>>>s}}var u=t.includes("unsigned");F(e,{name:t,fromWireType:i,toWireType:u?function(e,t){return this.name,t>>>0}:function(e,t){return this.name,t},argPackAdvance:8,readValueFromPointer:At(t,a,0!==n),destructorFunction:null})}function St(e,t,r){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function o(e){var t=C,r=t[e>>=2],o=t[e+1];return new n(X,o,r)}F(e,{name:r=w(r),fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})}function jt(e,t){var r="std::string"===(t=w(t));F(e,{name:t,fromWireType:function(e){var t,n=C[e>>2],o=e+4;if(r)for(var a=o,i=0;i<=n;++i){var s=o+i;if(i==n||0==m[s]){var u=ee(a,s-a);void 0===t?t=u:(t+=String.fromCharCode(0),t+=u),a=s+1}}else{var c=new Array(n);for(i=0;i<n;++i)c[i]=String.fromCharCode(m[o+i]);t=c.join("")}return A(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var n,o="string"==typeof t;o||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||g("Cannot pass non-string to std::string"),n=r&&o?Sr(t):t.length;var a=ge(4+n+1),i=a+4;if(C[a>>2]=n,r&&o)Fr(t,i,n+1);else if(o)for(var s=0;s<n;++s){var u=t.charCodeAt(s);u>255&&(A(i),g("String has UTF-16 code units that do not fit in 8 bits")),m[i+s]=u}else for(s=0;s<n;++s)m[i+s]=t[s];return null!==e&&e.push(A,a),a},argPackAdvance:8,readValueFromPointer:de,destructorFunction:function(e){A(e)}})}var dr,Ot=new TextDecoder("utf-16le");function kt(e,t){for(var r=e,n=r>>1,o=n+t/2;!(n>=o)&&ue[n];)++n;return r=n<<1,Ot.decode(m.subarray(e,r))}function Et(e,t,r){if(void 0===r&&(r=2147483647),r<2)return 0;for(var n=t,o=(r-=2)<2*e.length?r/2:e.length,a=0;a<o;++a){var i=e.charCodeAt(a);z[t>>1]=i,t+=2}return z[t>>1]=0,t-n}function Ut(e){return 2*e.length}function Dt(e,t){for(var r=0,n="";!(r>=t/4);){var o=U[e+4*r>>2];if(0==o)break;if(++r,o>=65536){var a=o-65536;n+=String.fromCharCode(55296|a>>10,56320|1023&a)}else n+=String.fromCharCode(o)}return n}function Mt(e,t,r){if(void 0===r&&(r=2147483647),r<4)return 0;for(var n=t,o=n+r-4,a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++a)),U[t>>2]=i,(t+=4)+4>o)break}return U[t>>2]=0,t-n}function Wt(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&++r,t+=4}return t}function Rt(e,t,r){var n,o,a,i,s;r=w(r),2===t?(n=kt,o=Et,i=Ut,a=function(){return ue},s=1):4===t&&(n=Dt,o=Mt,i=Wt,a=function(){return C},s=2),F(e,{name:r,fromWireType:function(e){for(var r,o=C[e>>2],i=a(),u=e+4,c=0;c<=o;++c){var f=e+4+c*t;if(c==o||0==i[f>>s]){var l=n(u,f-u);void 0===r?r=l:(r+=String.fromCharCode(0),r+=l),u=f+t}}return A(e),r},toWireType:function(e,n){"string"!=typeof n&&g("Cannot pass non-string to C++ string type "+r);var a=i(n),u=ge(4+a+t);return C[u>>2]=a>>s,o(n,u+4,a+t),null!==e&&e.push(A,u),u},argPackAdvance:8,readValueFromPointer:de,destructorFunction:function(e){A(e)}})}function Lt(e,t){F(e,{isVoid:!0,name:t=w(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})}function It(){throw 1/0}function Ht(){Ke("")}function Vt(e,t,r){m.copyWithin(e,t,t+r)}function Bt(){return 2147483648}function xt(e){try{return se.grow(e-X.byteLength+65535>>>16),ae(se.buffer),1}catch(e){}}function zt(e){var t=m.length;e>>>=0;var r=Bt();if(e>r)return!1;for(var n,o=1;o<=4;o*=2){var a=t*(1+.2/o);if(a=Math.min(a,e+100663296),xt(Math.min(r,(n=Math.max(e,a))+(65536-n%65536)%65536)))return!0}return!1}function Gt(e){throw"exit("+e+")"}dr=function(){return performance.now()};var Jt=Gt;function Xt(e){return 52}function qt(e,t,r,n){return 52}function Yt(e,t,r,n,o){return 70}var Kt=[null,[],[]];function Qt(e,t){var r=Kt[e];0===t||10===t?((1===e?Be:xe)($r(r,0)),r.length=0):r.push(t)}function Zt(e,t,r,n){for(var o=0,a=0;a<r;a++){var i=C[t>>2],s=C[t+4>>2];t+=8;for(var u=0;u<s;u++)Qt(e,m[i+u]);o+=s}return C[n>>2]=o,0}Mr(),L=p.BindingError=Ue(Error,"BindingError"),tr=p.InternalError=Ue(Error,"InternalError"),Nr(),Gr(),ft(),fr=p.UnboundTypeError=Ue(Error,"UnboundTypeError"),Ct();var Nt={a:jr,m:Or,z:kr,D:Er,l:Ur,t:Dr,p:Lr,j:pt,s:vt,c:yt,b:mt,E:Tt,n:$t,f:Ft,d:St,o:jt,k:Rt,q:Lt,x:It,e:Ht,g:dr,A:Vt,y:zt,h:Jt,i:Xt,C:qt,r:Yt,B:Zt,w:en,u:tn,v:rn};function en(e,t,r){var n=he();try{return q(e)(t,r)}catch(e){if(ve(n),e!==e+0)throw e;pe(1,0)}}function rn(e,t,r,n,o){var a=he();try{return q(e)(t,r,n,o)}catch(e){if(ve(a),e!==e+0)throw e;pe(1,0)}}function tn(e,t,r,n){var o=he();try{return q(e)(t,r,n)}catch(e){if(ve(o),e!==e+0)throw e;pe(1,0)}}function nn(e){e.G()}var ge,A,gr,pe,he,ve,Ve={a:Nt};(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(fetch("jassub-worker.wasm"),Ve):WebAssembly.instantiate(p.wasm,Ve)).then((function(e){asm=(e.instance||e).exports,ge=asm.H,A=asm.I,gr=asm.J,asm.K,pe=asm.M,asm.N,he=asm.O,ve=asm.P,asm.Q,asm.R,asm.S,asm.T,er=asm.L,ae((se=asm.F).buffer),nn(asm),ze()}));