"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[46634,69729],{46634:function(e,t,n){n.r(t),n.d(t,{deleteItem:function(){return d},deleteLyrics:function(){return u}}),n(78557),n(90076);var r=n(11444),i=n(41177),a=n(47602),s=n(70267),l=n(5898),o=n(67430);function c(e){return(0,i.A)(e)}function d(e){var t=e.item,n=t.SeasonId||t.SeriesId||t.ParentId,i=o.tF.getApiClient(t.ServerId);return(0,a.A)(function(e){if(e.Type===r.D.Series){var t=e.RecursiveItemCount;return{title:l.Ay.translate("HeaderDeleteSeries"),text:l.Ay.translate("ConfirmDeleteSeries",t),confirmText:l.Ay.translate("DeleteEntireSeries",t),primary:"delete"}}return e.Type===r.D.BoxSet?{title:l.Ay.translate("HeaderDeleteCollection"),text:l.Ay.translate("ConfirmDeleteCollection"),confirmText:l.Ay.translate("Delete"),primary:"delete"}:e.Type===r.D.Playlist?{title:l.Ay.translate("HeaderDeletePlaylist"),text:l.Ay.translate("ConfirmDeletePlaylist"),confirmText:l.Ay.translate("Delete"),primary:"delete"}:{title:l.Ay.translate("HeaderDeleteItem"),text:l.Ay.translate("ConfirmDeleteItem"),confirmText:l.Ay.translate("Delete"),primary:"delete"}}(t)).then((function(){return i.deleteItem(t.Id).then((function(){e.navigate&&(n?s.appRouter.showItem(n,t.ServerId):s.appRouter.goHome())}),(function(e){var t=function(){return Promise.reject(e)};return c(l.Ay.translate("ErrorDeletingItem")).then(t,t)}))}))}function u(e){return(0,a.A)({title:l.Ay.translate("HeaderDeleteLyrics"),text:l.Ay.translate("ConfirmDeleteLyrics"),confirmText:l.Ay.translate("Delete"),primary:"delete"}).then((function(){var t=o.tF.getApiClient(e.ServerId);return t.ajax({url:t.getUrl("Audio/"+e.Id+"/Lyrics"),type:"DELETE"}).catch((function(e){var t=function(){return Promise.reject(e)};return c(l.Ay.translate("ErrorDeletingLyrics")).then(t,t)}))}))}t.default={deleteItem:d,deleteLyrics:u}},63001:function(e,t,n){var r=n(46782),i=n(34789),a=n(62882),s=(n(69177),Object.create(HTMLSelectElement.prototype));function l(){return!(i.A.edgeUwp||i.A.xboxOne||i.A.tizen||i.A.orsay||i.A.web0s||!i.A.tv&&r.A.tv)}function o(e){var t=c(e),n=t?t.textContent||t.innerText:null;a.default.show({items:e.options,positionTo:e,title:n}).then((function(t){!function(e,t){e.value=t}(e,t),function(e){var t=new Event("change",{bubbles:!1,cancelable:!0});e.dispatchEvent(t)}(e)}))}function c(e){for(var t=e.previousSibling;t&&"LABEL"!==t.tagName;)t=t.previousSibling;return t}function d(){var e=c(this);e&&e.classList.add("selectLabelFocused")}function u(){var e=c(this);e&&e.classList.remove("selectLabelFocused")}function y(e){e.button||l()||(e.preventDefault(),o(this))}function h(e){13!==e.keyCode&&195!==e.keyCode||l()||(e.preventDefault(),o(this))}var v=0;s.createdCallback=function(){this.id||(this.id="embyselect"+v,v++),this.classList.add("emby-select-withcolor"),r.A.tv&&this.classList.add("emby-select-focusscale"),this.addEventListener("mousedown",y),this.addEventListener("keydown",h),this.addEventListener("focus",d),this.addEventListener("blur",u)},s.attachedCallback=function(){var e;if(!this.classList.contains("emby-select")){this.classList.add("emby-select");var t,n=this.ownerDocument.createElement("label");n.innerText=this.getAttribute("label")||"",n.classList.add("selectLabel"),n.htmlFor=this.id,null===(e=this.parentNode)||void 0===e||e.insertBefore(n,this),this.classList.contains("emby-select-withcolor")&&(null===(t=this.parentNode)||void 0===t||t.insertAdjacentHTML("beforeend",'<div class="selectArrowContainer"><div style="visibility:hidden;display:none;">0</div><span class="selectArrow material-icons keyboard_arrow_down" aria-hidden="true"></span></div>'))}},s.setLabel=function(e){var t;(null===(t=this.parentNode)||void 0===t?void 0:t.querySelector("label")).innerText=e},document.registerElement("emby-select",{prototype:s,extends:"select"})},69729:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}}),n(44962),n(17731),n(20518),n(78557),n(90076),n(83994),n(79682),n(82367);var r,i,a=n(22696),s=n.n(a),l=n(45182),o=n(75384),c=n(79754),d=n(46782),u=n(5898),y=n(67430),h=n(8566),v=n(9164),f=n(36300),m=(n(63001),n(15453),n(10353),n(71866)),p=n(46634);function b(e,t){var n=(0,o.C)(y.tF.getApiClient(r.ServerId));(0,l.t)(n).downloadRemoteLyrics({itemId:r.Id,lyricId:t}).then((function(){i=!0,(0,m.A)(u.Ay.translate("MessageDownloadQueued")),v.A.autoFocus(e)}))}function L(e){return e.reduce((function(e,t){if(t.Start||0===t.Start){var n=Math.floor(t.Start/6e8),r=Math.floor(t.Start%6e8/1e7),i=Math.floor(t.Start%1e7/1e5);e+="["+String(n).padStart(2,"0")+":"+String(r).padStart(2,"0")+"."+String(i).padStart(2,"0")+"] "}return e+(s()(t.Text)+"<br/>")}),"")}function g(e,t,n){function i(n){r=n,function(e,t,n){var r=(0,o.C)(t);(0,l.t)(r).getLyrics({itemId:n.Id}).then((function(t){if(t.data.Lyrics){var n="";n+="<h2>"+u.Ay.translate("Lyrics")+"</h2>",n+="<div>",n+=L(t.data.Lyrics),n+="</div>",e.querySelector(".currentLyrics").innerHTML=n}else e.querySelector(".currentLyrics").innerHTML=""})).catch((function(){e.querySelector(".currentLyrics").innerHTML=""}))}(e,t,n);var i=n.Path||"",a=Math.max(i.lastIndexOf("/"),i.lastIndexOf("\\"));a>-1&&(i=i.substring(a+1)),i?(e.querySelector(".pathValue").innerText=i,e.querySelector(".originalFile").classList.remove("hide")):(e.querySelector(".pathValue").innerHTML="",e.querySelector(".originalFile").classList.add("hide")),h.Ay.hide()}e.querySelector(".noSearchResults").classList.add("hide"),"string"==typeof n?t.getItem(t.getCurrentUserId(),n).then(i):i(n)}function S(e){return function(e){h.Ay.show();var t=(0,o.C)(y.tF.getApiClient(r.ServerId));(0,l.t)(t).searchRemoteLyrics({itemId:r.Id}).then((function(t){!function(e,t){var n="",r="";if(!t.length)return e.querySelector(".noSearchResults").classList.remove("hide"),e.querySelector(".lyricsResults").innerHTML="",void h.Ay.hide();e.querySelector(".noSearchResults").classList.add("hide");for(var i=0,a=t.length;i<a;i++){var l=t[i],o=l.ProviderName,c=l.Lyrics.Metadata,y=L(l.Lyrics.Lyrics);o!==n&&(i>0&&(r+="</div>"),r+="<h2>"+o+"</h2>",r+="<div>",n=o);var v=d.A.tv?"button":"div",f=d.A.tv?"listItem listItem-border btnOptions":"listItem listItem-border";d.A.tv&&(f+=" listItem-focusscale listItem-button"),r+="<"+v+' class="'+f+'" data-lyricsid="'+l.Id+'">',r+='<span class="listItemIcon material-icons lyrics" aria-hidden="true"></span>',r+='<div class="listItemBody three-line">',r+="<div>"+s()(c.Artist+" - "+c.Album+" - "+c.Title)+"</div>";var m=Math.floor(c.Length/6e8),p=Math.floor(c.Length%6e8/1e7);r+='<div class="secondary listItemBodyText" style="white-space:pre-line;">'+u.Ay.translate("LabelDuration")+": "+m+":"+String(p).padStart(2,"0")+"</div>",r+='<div class="secondary listItemBodyText" style="white-space:pre-line;">'+u.Ay.translate("LabelIsSynced")+": "+s()(c.IsSynced?"True":"False")+"</div>",r+="</div>",d.A.tv||(r+='<button type="button" is="paper-icon-button-light" data-lyricsid="'+l.Id+'" class="btnPreview listItemButton"><span class="material-icons preview" aria-hidden="true"></span></button>',r+='<button type="button" is="paper-icon-button-light" data-lyricsid="'+l.Id+'" class="btnDownload listItemButton"><span class="material-icons file_download" aria-hidden="true"></span></button>'),r+='<div class="hide hiddenLyrics">',r+="<h2>"+u.Ay.translate("Lyrics")+"</h2>",r+="<div>"+y+"</div>",r+="</div>",r+="</"+v+">"}t.length&&(r+="</div>"),e.querySelector(".lyricsResults").innerHTML=r,h.Ay.hide()}(e,t.data)}))}(f.Ay.parentWithClass(this,"formDialogContent")),e.preventDefault(),!1}function A(e){var t,r,i=f.Ay.parentWithClass(e.target,"btnOptions");i&&(t=i.getAttribute("data-lyricsid"),r=i.querySelector(".hiddenLyrics"),function(e,t,r,i){var a=[];a.push({name:u.Ay.translate("PreviewLyrics"),id:"preview"},{name:u.Ay.translate("Download"),id:"download"}),Promise.resolve().then(n.bind(n,62882)).then((function(n){n.show({items:a,positionTo:e}).then((function(e){"download"===e&&b(t,r),"preview"===e&&I(i)}))}))}(i,f.Ay.parentWithClass(i,"lyricsEditorDialog"),t,r.innerHTML));var a=f.Ay.parentWithClass(e.target,"btnPreview");a&&I((r=a.parentNode.querySelector(".hiddenLyrics")).innerHTML);var s=f.Ay.parentWithClass(e.target,"btnDownload");s&&(t=s.getAttribute("data-lyricsid"),b(f.Ay.parentWithClass(s,"lyricsEditorDialog"),t))}function I(e){var t={removeOnClose:!0,scrollY:!1};d.A.tv?t.size="fullscreen":t.size="small";var n=c.default.createDialog(t);n.classList.add("formDialog"),n.classList.add("lyricsEditorDialog"),n.innerHTML=u.Ay.translateHtml('<div class="formDialogHeader"> <button is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1" title="${ButtonBack}"><span class="material-icons arrow_back" aria-hidden="true"></span></button> <h3 class="formDialogHeaderTitle">${HeaderPreviewLyrics}</h3> </div> <div class="formDialogContent smoothScrollY"> <div class="dialogContentInner dialog-content-centered"> <div class="lyricsPreview" style="margin-bottom:2em"></div> </div> </div> ',"core"),n.querySelector(".lyricsPreview").innerHTML=e,n.querySelector(".btnCancel").addEventListener("click",(function(){c.default.close(n)})),c.default.open(n)}function D(e,t,r){Promise.resolve().then(n.bind(n,10838)).then((function(n){var i=n.default,a=r?"on":"off";i.centerFocus[a](e,t)}))}function C(e){var t=f.Ay.parentWithClass(e.target,"lyricsEditorDialog"),a=y.tF.getApiClient(r.ServerId);n.e(26914).then(n.bind(n,26914)).then((function(e){e.default.show({itemId:r.Id,serverId:r.ServerId}).then((function(e){e&&(i=!0,g(t,a,r.Id))}))}))}function w(e){(0,p.deleteLyrics)(r).then((function(){i=!0,g(f.Ay.parentWithClass(e.target,"formDialogContent"),y.tF.getApiClient(r.ServerId),r.Id)})).catch((function(){}))}var T={show:function(e,t){return h.Ay.show(),function(e,t){i=!1;var n=y.tF.getApiClient(t);return n.getItem(n.getCurrentUserId(),e).then((function(e){var t={removeOnClose:!0,scrollY:!1};d.A.tv?t.size="fullscreen":t.size="small";var r=c.default.createDialog(t);r.classList.add("formDialog"),r.classList.add("lyricsEditorDialog"),r.innerHTML=u.Ay.translateHtml('<div class="formDialogHeader"> <button is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1" title="${ButtonBack}"><span class="material-icons arrow_back" aria-hidden="true"></span></button> <h3 class="formDialogHeaderTitle">${Lyrics}</h3> </div> <div class="formDialogContent smoothScrollY"> <div class="dialogContentInner dialog-content-centered"> <div class="currentLyrics" style="margin-bottom:2em"></div> <h2>${SearchForLyrics}</h2> <p style="margin:1.5em 0" class="originalFile"><span class="originalLyricsFileLabel secondaryText"></span><span class="pathValue"></span></p> <form class="lyricsSearchForm" style="max-width:none"> <div class="flex align-items-center"> <button type="submit" is="paper-icon-button-light" title="${Search}" class="btnSearchLyrics flex-shrink-zero emby-select-iconbutton"><span class="material-icons search" aria-hidden="true"></span></button> <button type="button" is="paper-icon-button-light" title="${Upload}" class="btnOpenUploadMenu flex-shrink-zero emby-select-iconbutton"><span class="material-icons add" aria-hidden="true"></span></button> <button type="button" is="paper-icon-button-light" title="${Delete}" class="btnDeleteLyrics flex-shrink-zero emby-select-iconbutton"><span class="material-icons delete" aria-hidden="true"></span></button> </div> <button is="emby-button" type="submit" class="raised btnSubmit block button-submit">${Search}</button> </form> <br/> <div class="lyricsResults"></div> <div class="noSearchResults hide"> ${NoLyricsSearchResultsFound} </div> </div> </div> ',"core"),r.querySelector(".originalLyricsFileLabel").innerHTML=u.Ay.translate("File"),r.querySelector(".lyricsSearchForm").addEventListener("submit",S),r.querySelector(".btnOpenUploadMenu").addEventListener("click",C),r.querySelector(".btnDeleteLyrics").addEventListener("click",w);var a=r.querySelector(".btnSubmit");d.A.tv?(D(r.querySelector(".formDialogContent"),!1,!0),r.querySelector(".btnSearchLyrics").classList.add("hide")):a.classList.add("hide");var s=r.querySelector(".formDialogContent");return r.querySelector(".lyricsResults").addEventListener("click",A),r.querySelector(".btnCancel").addEventListener("click",(function(){c.default.close(r)})),new Promise((function(t,a){r.addEventListener("close",(function(){d.A.tv&&D(r.querySelector(".formDialogContent"),!1,!1),i?t():a()})),c.default.open(r),g(s,n,e)}))}))}(e,t)}}}}]);