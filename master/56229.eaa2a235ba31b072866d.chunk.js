"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[56229,27636],{56229:function(e,t,a){a.r(t),a(63238),a(55849),a(43512),a(27471),a(48410);var n=a(61693),i=a(81643),r=a(57366),s=a(98301),o=a(30325),l=a(48957),u=a(69011),d=a(84881),c=a(72365),m=a(9337),p=(a(61414),a(27636),a(18613));function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function f(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==g(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t);if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key,"string"),"symbol"===g(i)?i:String(i)),n)}var i}a(19068),a(87211),a(25901),a(92189),a(95163),a(99785),a(91047),a(5769),a(17460),a(14078);var v,y,h,b,P,I,S,T,w,k,L,B,A,Z,C,M=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t,a=this;a.element=((t=document.createElement("div")).classList.add("appfooter"),document.body.appendChild(t),t),a.add=function(e){a.element.appendChild(e)},a.insert=function(e){"string"==typeof e?a.element.insertAdjacentHTML("afterbegin",e):a.element.insertBefore(e,a.element.firstChild)}}var t,a;return t=e,(a=[{key:"destroy",value:function(){this.element=null}}])&&f(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()),O=a(61008),x=(a(42855),a(52050)),E=[],N=0,q={},R=0,U=!0;function _(){this.classList.add("hide")}function F(){l.O.playPause(v)}function j(){if(C)return C;var e,t,a=M.element;return(C=a.querySelector(".nowPlayingBar"))||(a.insertAdjacentHTML("afterbegin",(e="",e+='<div class="nowPlayingBar hide nowPlayingBar-hidden">',e+='<div class="nowPlayingBarTop">',e+='<div class="nowPlayingBarPositionContainer sliderContainer" dir="ltr">',e+='<input type="range" is="emby-slider" pin step=".01" min="0" max="100" value="0" class="slider-medium-thumb nowPlayingBarPositionSlider" data-slider-keep-progress="true"/>',e+="</div>",e+='<div class="nowPlayingBarInfoContainer">',e+='<div class="nowPlayingImage"></div>',e+='<div class="nowPlayingBarText"></div>',e+="</div>",e+='<div class="nowPlayingBarCenter" dir="ltr">',e+='<button is="paper-icon-button-light" class="previousTrackButton mediaButton"><span class="material-icons skip_previous" aria-hidden="true"></span></button>',e+='<button is="paper-icon-button-light" class="playPauseButton mediaButton"><span class="material-icons pause" aria-hidden="true"></span></button>',e+='<button is="paper-icon-button-light" class="stopButton mediaButton"><span class="material-icons stop" aria-hidden="true"></span></button>',o.Z.mobile||(e+='<button is="paper-icon-button-light" class="nextTrackButton mediaButton"><span class="material-icons skip_next" aria-hidden="true"></span></button>'),e+='<div class="nowPlayingBarCurrentTime"></div>',e+="</div>",e+='<div class="nowPlayingBarRight">',e+='<button is="paper-icon-button-light" class="muteButton mediaButton"><span class="material-icons volume_up" aria-hidden="true"></span></button>',e+='<div class="sliderContainer nowPlayingBarVolumeSliderContainer hide" style="width:9em;vertical-align:middle;display:inline-flex;">',e+='<input type="range" is="emby-slider" pin step="1" min="0" max="100" value="0" class="slider-medium-thumb nowPlayingBarVolumeSlider"/>',e+="</div>",e+='<button is="paper-icon-button-light" class="toggleRepeatButton mediaButton"><span class="material-icons repeat" aria-hidden="true"></span></button>',e+='<button is="paper-icon-button-light" class="btnShuffleQueue mediaButton"><span class="material-icons shuffle" aria-hidden="true"></span></button>',e+='<div class="nowPlayingBarUserDataButtons">',e+="</div>",e+='<button is="paper-icon-button-light" class="playPauseButton mediaButton"><span class="material-icons pause" aria-hidden="true"></span></button>',o.Z.mobile?e+='<button is="paper-icon-button-light" class="nextTrackButton mediaButton"><span class="material-icons skip_next" aria-hidden="true"></span></button>':e+='<button is="paper-icon-button-light" class="btnToggleContextMenu mediaButton"><span class="material-icons more_vert" aria-hidden="true"></span></button>',e+="</div>",(e+="</div>")+"</div>")),window.CustomElements.upgradeSubtree(a),C=a.querySelector(".nowPlayingBar"),o.Z.mobile&&(D(C.querySelector(".btnShuffleQueue")),D(C.querySelector(".nowPlayingBarCenter"))),r.Z.safari&&r.Z.slow&&C.classList.add("noMediaProgress"),O.ZP.on(C),y=(t=C).querySelector(".nowPlayingBarCurrentTime"),h=t.querySelector(".nowPlayingImage"),P=t.querySelector(".nowPlayingBarText"),I=t.querySelector(".nowPlayingBarUserDataButtons"),L=t.querySelector(".nowPlayingBarPositionSlider"),S=t.querySelector(".muteButton"),k=t.querySelectorAll(".playPauseButton"),B=t.querySelector(".toggleRepeatButton"),T=t.querySelector(".nowPlayingBarVolumeSlider"),w=t.querySelector(".nowPlayingBarVolumeSliderContainer"),S.addEventListener("click",(function(){v&&l.O.toggleMute(v)})),t.querySelector(".stopButton").addEventListener("click",(function(){v&&l.O.stop(v)})),k.forEach((function(e){e.addEventListener("click",F)})),t.querySelector(".nextTrackButton").addEventListener("click",(function(){v&&l.O.nextTrack(v)})),t.querySelector(".previousTrackButton").addEventListener("click",(function(e){if(v)if("Audio"===q.NowPlayingItem.MediaType&&(v._currentTime>=5||!l.O.previousTrack(v))){if(e.detail>1&&l.O.previousTrack(v))return;l.O.seekPercent(0,v),L.value=0}else l.O.previousTrack(v)})),t.querySelector(".previousTrackButton").addEventListener("dblclick",(function(){v&&l.O.previousTrack(v)})),t.querySelector(".btnShuffleQueue").addEventListener("click",(function(){v&&l.O.toggleQueueShuffleMode()})),(B=t.querySelector(".toggleRepeatButton")).addEventListener("click",(function(){switch(l.O.getRepeatMode()){case"RepeatAll":l.O.setRepeatMode("RepeatOne");break;case"RepeatOne":l.O.setRepeatMode("RepeatNone");break;case"RepeatNone":l.O.setRepeatMode("RepeatAll")}})),A=B.querySelector(".material-icons"),w.classList.toggle("hide",d.M.supports("physicalvolumecontrol")),T.addEventListener("input",(function(e){v&&v.setVolume(e.target.value)})),L.addEventListener("change",(function(){if(v){var e=parseFloat(this.value);l.O.seekPercent(e,v)}})),L.getBubbleText=function(e){if(!q||!q.NowPlayingItem||!R)return"--:--";var t=R;return t/=100,t*=e,n.ZP.getDisplayRunningTime(t)},t.addEventListener("click",(function(e){c.ZP.parentWithTag(e.target,["BUTTON","INPUT"])||x.appRouter.showNowPlaying()}))),C}function D(e){e.classList.add("hide")}function V(e){k&&k.forEach((function(t){var a=t.querySelector(".material-icons");a.classList.remove("play_arrow","pause"),a.classList.add(e?"play_arrow":"pause")}))}function H(e){A.classList.remove("repeat","repeat_one");var t="buttonActive";switch(e){case"RepeatAll":A.classList.add("repeat"),B.classList.add(t);break;case"RepeatOne":A.classList.add("repeat_one"),B.classList.add(t);break;default:A.classList.add("repeat"),B.classList.remove(t)}}function Q(e,t,a){if(L&&!L.dragging)if(t){var i=e/t;i*=100,L.value=i}else L.value=0;if(L&&L.setBufferedRanges(a,t,e),y){var r=null==e?"--:--":n.ZP.getDisplayRunningTime(e);t&&(r+=" / "+n.ZP.getDisplayRunningTime(t)),y.innerHTML=r}}function W(e,t){var a=E,n=!0,i=!0;-1===a.indexOf("ToggleMute")&&(n=!1);var r=S.querySelector(".material-icons");r.classList.remove("volume_off","volume_up"),r.classList.add(e?"volume_off":"volume_up"),-1===a.indexOf("SetVolume")&&(i=!1),v.isLocalPlayer&&d.M.supports("physicalvolumecontrol")&&(n=!1,i=!1),n?S.classList.remove("hide"):D(S),T&&(w.classList.toggle("hide",!i),T.dragging||(T.value=t||0))}function Y(e,t){console.debug("nowplaying event: "+e.type),$.call(this,e,t)}function z(){Z&&H(l.O.getRepeatMode())}function G(){if(Z){var e=l.O.getQueueShuffleMode(),t="buttonActive",a=C.querySelector(".btnShuffleQueue");"Shuffle"===e?a.classList.add(t):a.classList.remove(t)}}function J(){Z=!1;var e=document.getElementsByClassName("nowPlayingBar")[0];e&&function(e){e.offsetWidth,e.classList.add("nowPlayingBar-hidden"),c.ZP.addEventListener(e,c.ZP.whichTransitionEvent(),_,{once:!0})}(e)}function K(e,t){console.debug("nowplaying event: "+e.type),this.isLocalPlayer?"Audio"!==t.NextMediaType&&J():t.NextMediaType||J()}function X(){Z&&V(this.paused())}function $(e,t){if("init"!==e.type){console.debug("nowplaying event: "+e.type);t.NowPlayingItem&&!o.Z.tv&&!1!==t.IsFullscreen?this.isLocalPlayer&&t.NowPlayingItem&&"Video"===t.NowPlayingItem.MediaType?J():(Z=!0,C||j(),function(e,t,a){var n;U?(n=j(),c.ZP.removeEventListener(n,c.ZP.whichTransitionEvent(),_,{once:!0}),n.classList.remove("hide"),n.offsetWidth,n.classList.remove("nowPlayingBar-hidden")):J(),q=t;var i=l.O.getPlayerInfo(),r=t.PlayState||{};V(r.IsPaused);var d=i.supportedCommands;if(E=d,-1===d.indexOf("SetRepeatMode")?B.classList.add("hide"):B.classList.remove("hide"),H(l.O.getRepeatMode()),G(),W(r.IsMuted,r.VolumeLevel),L&&!L.dragging){L.disabled=!r.CanSeek;var g=t.MediaSource&&null==t.MediaSource.RunTimeTicks;L.setIsClear(g)}var f=t.NowPlayingItem||{};Q(r.PositionTicks,f.RunTimeTicks,l.O.getBufferedRanges(a)),function(e){var t=e.NowPlayingItem,a=t?u.Z.getNowPlayingNames(t):[];if(P.innerHTML="",a){var n=document.createElement("div"),i=document.createElement("div");if(i.classList.add("nowPlayingBarSecondaryText"),a.length>1&&(a[1].secondary=!0,a[1].text)){var r=document.createElement("a");r.innerHTML=a[1].text,i.appendChild(r)}if(a[0].text){var l=document.createElement("a");l.innerHTML=a[0].text,n.appendChild(l)}P.appendChild(n),P.appendChild(i)}var d=t?function(e,t){if(!e)throw new Error("item cannot be null!");if("Episode"!==e.Type)return null;if((t=t||{}).type=t.type||"Primary","Primary"===t.type&&e.SeriesPrimaryImageTag)return t.tag=e.SeriesPrimaryImageTag,p.Z.getApiClient(e.ServerId).getScaledImageUrl(e.SeriesId,t);if("Thumb"===t.type){if(e.SeriesThumbImageTag)return t.tag=e.SeriesThumbImageTag,p.Z.getApiClient(e.ServerId).getScaledImageUrl(e.SeriesId,t);if(e.ParentThumbImageTag)return t.tag=e.ParentThumbImageTag,p.Z.getApiClient(e.ServerId).getScaledImageUrl(e.ParentThumbItemId,t)}return null}(t,{height:70})||function(e,t){if(!e)throw new Error("item cannot be null!");return(t=t||{}).type=t.type||"Primary",e.ImageTags&&e.ImageTags[t.type]?(t.tag=e.ImageTags[t.type],p.Z.getApiClient(e.ServerId).getScaledImageUrl(e.PrimaryImageItemId||e.Id,t)):e.AlbumId&&e.AlbumPrimaryImageTag?(t.tag=e.AlbumPrimaryImageTag,p.Z.getApiClient(e.ServerId).getScaledImageUrl(e.AlbumId,t)):null}(t,{height:70}):null;if(d!==b&&(d?(b=d,s.default.lazyImage(h,b),h.style.display=null,P.style.marginLeft=null):(b=null,h.style.backgroundImage="",h.style.display="none",P.style.marginLeft="1em")),t.Id){var c=p.Z.getApiClient(t.ServerId);c.getItem(c.getCurrentUserId(),t.Id).then((function(e){var t=e.UserData||{},a=null==t.Likes?"":t.Likes;if(!o.Z.mobile){var n=C.querySelector(".btnToggleContextMenu"),i=n.cloneNode(!0);n.parentNode.replaceChild(i,n);var r={play:!1,queue:!1,stopPlayback:!0,clearQueue:!0,positionTo:n=C.querySelector(".btnToggleContextMenu")};c.getCurrentUser().then((function(t){n.addEventListener("click",(function(){m.default.show(Object.assign({item:e,user:t},r))}))}))}I.innerHTML='<button is="emby-ratingbutton" type="button" class="listItemButton mediaButton paper-icon-button-light" data-id="'+e.Id+'" data-serverid="'+e.ServerId+'" data-itemtype="'+e.Type+'" data-likes="'+a+'" data-isfavorite="'+t.IsFavorite+'"><span class="material-icons favorite" aria-hidden="true"></span></button>'}))}else I.innerHTML=""}(t)}(0,t,this)):J()}}function ee(){if(Z){var e=(new Date).getTime();if(!(e-N<700)){N=e;var t=this;R=l.O.duration(t),Q(1e4*l.O.currentTime(t),R,l.O.getBufferedRanges(t))}}}function te(){Z&&W(this.isMuted(),this.getVolume())}function ae(e,t){var a=l.O.getPlayerState(e);$.call(e,{type:t},a)}function ne(e){e!==v&&(function(){var e=v;e&&(i.Z.off(e,"playbackstart",Y),i.Z.off(e,"statechange",Y),i.Z.off(e,"repeatmodechange",z),i.Z.off(e,"shufflequeuemodechange",G),i.Z.off(e,"playbackstop",K),i.Z.off(e,"volumechange",te),i.Z.off(e,"pause",X),i.Z.off(e,"unpause",X),i.Z.off(e,"timeupdate",ee),v=null,J())}(),v=e,e&&(ae(e,"init"),i.Z.on(e,"playbackstart",Y),i.Z.on(e,"statechange",Y),i.Z.on(e,"repeatmodechange",z),i.Z.on(e,"shufflequeuemodechange",G),i.Z.on(e,"playbackstop",K),i.Z.on(e,"volumechange",te),i.Z.on(e,"pause",X),i.Z.on(e,"unpause",X),i.Z.on(e,"timeupdate",ee)))}i.Z.on(l.O,"playerchange",(function(){ne(l.O.getCurrentPlayer())})),ne(l.O.getCurrentPlayer()),document.addEventListener("viewbeforeshow",(function(e){e.detail.options.enableMediaControl?U||(U=!0,v?ae(v,"refresh"):J()):U&&(U=!1,J())}))},69011:function(e,t,a){a(61013);var n=a(65009),i=a.n(n);t.Z={getNowPlayingNames:function(e,t){var a=e,n=null,r=e.Name;e.AlbumId&&"Audio"===e.MediaType&&(a={Id:e.AlbumId,Name:e.Album,Type:"MusicAlbum",IsFolder:!0}),"Video"===e.MediaType&&(null!=e.IndexNumber&&(r=e.IndexNumber+" - "+r),null!=e.ParentIndexNumber&&(r=e.ParentIndexNumber+"."+r));var s="";e.ArtistItems&&e.ArtistItems.length?(n={Id:e.ArtistItems[0].Id,Name:e.ArtistItems[0].Name,Type:"MusicArtist",IsFolder:!0},s=e.ArtistItems.map((function(e){return e.Name})).join(", ")):e.Artists&&e.Artists.length?s=e.Artists.join(", "):e.SeriesName||e.Album?(s=r,r=e.SeriesName||e.Album,n=a,a=e.SeriesId?{Id:e.SeriesId,Name:e.SeriesName,Type:"Series",IsFolder:!0}:null):e.ProductionYear&&!1!==t&&(s=e.ProductionYear);var o=[];return o.push({text:i()(r),item:a}),s&&o.push({text:i()(s),item:n}),o}}},27636:function(e,t,a){a.r(t);var n=a(44038),i=a(94994),r=a(81643),s=a(38228),o=a(18613);function l(){var e=this,t=e.getAttribute("data-id"),a=e.getAttribute("data-serverid"),n=o.Z.getApiClient(a),i=this.getAttribute("data-likes");i="true"===i||"false"!==i&&null,function(e,t,a,n,i){return t.updateFavoriteStatus(t.getCurrentUserId(),a,!i)}(0,n,t,0,"true"===this.getAttribute("data-isfavorite")).then((function(t){d(e,t.Likes,t.IsFavorite)}))}function u(e,t,a){a.ItemId===this.getAttribute("data-id")&&d(this,a.Likes,a.IsFavorite)}function d(e,t,a,n){var i=e.querySelector(".material-icons");a?(i&&(i.classList.add("favorite"),i.classList.add("ratingbutton-icon-withrating")),e.classList.add("ratingbutton-withrating")):(i&&(i.classList.add("favorite"),i.classList.remove("ratingbutton-icon-withrating")),e.classList.remove("ratingbutton-withrating")),!1!==n&&(e.setAttribute("data-isfavorite",a),e.setAttribute("data-likes",null===t?"":t)),c(e,a)}function c(e,t){e.title=t?i.ZP.translate("Favorite"):i.ZP.translate("AddToFavorites");var a=e.querySelector(".button-text");a&&(a.innerText=e.title)}function m(e){var t,a,i;e.removeEventListener("click",l),(i=(t=e)[a="UserDataChanged"])&&(r.Z.off(n.default,a,i),t[a]=null)}function p(e){var t,a,i;m(e),e.addEventListener("click",l),t=e,a="UserDataChanged",i=u.bind(t),r.Z.on(n.default,a,i),t[a]=i}var g=Object.create(s.Z);g.createdCallback=function(){s.Z.createdCallback&&s.Z.createdCallback.call(this)},g.attachedCallback=function(){s.Z.attachedCallback&&s.Z.attachedCallback.call(this);var e=this.getAttribute("data-id"),t=this.getAttribute("data-serverid");if(e&&t){var a=this.getAttribute("data-likes");d(this,a="true"===a||"false"!==a&&null,"true"===this.getAttribute("data-isfavorite"),!1),p(this)}else c(this)},g.detachedCallback=function(){s.Z.detachedCallback&&s.Z.detachedCallback.call(this),m(this)},g.setItem=function(e){if(e){this.setAttribute("data-id",e.Id),this.setAttribute("data-serverid",e.ServerId);var t=e.UserData||{};d(this,t.Likes,t.IsFavorite),p(this)}else this.removeAttribute("data-id"),this.removeAttribute("data-serverid"),this.removeAttribute("data-likes"),this.removeAttribute("data-isfavorite"),m(this)},document.registerElement("emby-ratingbutton",{prototype:g,extends:"button"})}}]);