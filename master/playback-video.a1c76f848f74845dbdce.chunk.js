"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[92016],{78042:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}}),n(5769),n(63238),n(61418),n(17460),n(14078),n(20266),n(52077),n(911),n(23938),n(27471),n(61370),n(61013),n(32081),n(43512),n(55849);var a,i,r,s,o,c=n(65009),l=n.n(c),u=n(48957),d=n(17031),f=n(57366),v=n(72365),p=n(58517),h=n(21844),m=n(61693),y=n(21776),b=n(70350),g=n(34643),S=n(81643),P=n(94994),L=n(84881),k=n(30325),T=n(60934),w=n(84280),O=(n(42855),n(61414),n(18613)),Z=n(92581);function E(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function q(e){var t=document.createElement("div");document.body.appendChild(t),t.innerHTML='<div class="subtitleSync"> <div class="subtitleSyncContainer"> <button type="button" is="paper-icon-button-light" class="subtitleSync-closeButton"><span class="material-icons close" aria-hidden="true"></span></button> <div class="subtitleSyncTextField" contenteditable="true" spellcheck="false">0s</div> <div class="sliderContainer subtitleSyncSliderContainer"> <input is="emby-slider" type="range" step=".1" min="0" max="100" value="50" class="subtitleSyncSlider" data-slider-keep-progress="true"/> </div> </div> </div> ',i=t.querySelector(".subtitleSyncSlider"),r=t.querySelector(".subtitleSyncTextField"),s=t.querySelector(".subtitleSync-closeButton"),o=t.querySelector(".subtitleSyncContainer"),k.Z.tv&&(i.classList.add("focusable"),setTimeout((function(){i.enableKeyboardDragging()}),0)),o.classList.add("hide"),r.updateOffset=function(e){this.textContent=e+"s"},r.addEventListener("click",(function(){this.hasFocus=!0})),r.addEventListener("keydown",(function(e){if("Enter"===e.key){var t=/[-+]?\d+\.?\d*/g.exec(this.textContent);t?(t=t[0],t=parseFloat(t),t=Math.min(30,Math.max(-30,t)),this.textContent=t+"s",u.O.setSubtitleOffset(t,a),i.updateOffset((n=t/30,n*=50,n+=50,Math.min(100,Math.max(0,n.toFixed(1)))))):this.textContent=(u.O.getPlayerSubtitleOffset(a)||0)+"s",this.hasFocus=!1,e.preventDefault()}else this.hasFocus=!0,null===e.key.match(/[+-\d.s]/)&&e.preventDefault();var n;e.stopPropagation()})),r.blur=function(){!this.hasFocus&&this.prototype&&this.prototype.blur()},i.updateOffset=function(e){this.value=void 0===e?50:e},i.addEventListener("change",(function(){u.O.setSubtitleOffset(x(this.value),a),r.updateOffset(x(this.value))})),i.getBubbleHtml=function(e){var t=x(e);return'<h1 class="sliderBubbleText">'+(t>0?"+":"")+parseFloat(t)+"s</h1>"},s.addEventListener("click",(function(){u.O.disableShowingSubtitleOffset(a),C.prototype.toggle("forceToHide")})),e.element=t}function x(e){var t=(e-50)/50;return(t*=30).toFixed(1)}n(1203),n(76056),n(95623),n(99785);var C=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a=t,q(this)}var t,n;return t=e,(n=[{key:"destroy",value:function(){e.prototype.toggle("forceToHide"),a&&(u.O.disableShowingSubtitleOffset(a),u.O.setSubtitleOffset(0,a));var t=this.element;t&&(t.parentNode.removeChild(t),this.element=null)}},{key:"toggle",value:function(e){if(!e||["hide","forceToHide"].includes(e)){if(a&&u.O.supportSubtitleOffset(a)){if(e){if("hide"===e&&r.hasFocus)return}else if(u.O.isShowingSubtitleOffsetEnabled(a)&&u.O.canHandleOffsetOnCurrentSubtitle(a))return u.O.getPlayerSubtitleOffset(a)||r.hasFocus||(i.value="50",r.textContent="0s",u.O.setSubtitleOffset(0,a)),void o.classList.remove("hide");o.classList.add("hide")}}else console.warn("SubtitleSync.toggle called with invalid action",e)}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),I=C,D=n(52050),F=n(71487),M=n(57084);function R(){return document.querySelector(".dialogContainer .dialog.opened")}function H(e){function t(t){if(!t||"Program"!==t.Type)return H&&(H.destroy(),H=null),void e.querySelector(".btnRecord").classList.add("hide");O.Z.getApiClient(t.ServerId).getCurrentUser().then((function(a){a.Policy.EnableLiveTvManagement&&n.e(3679).then(n.bind(n,3679)).then((function(n){var a=n.default;H?H.refreshItem(t):(H=new a({item:t,button:e.querySelector(".btnRecord")}),e.querySelector(".btnRecord").classList.remove("hide"))}))}))}function a(n){var a=n.originalItem;C=a;var i=n.displayItem||a;t(i);var s=i.SeriesName||i.Album;(i.EpisodeTitle||i.IsSeries)&&(s=i.Name),function(e,t){var n=y.ZP.getDisplayName(e,{includeParentInfo:"Program"!==e.Type,includeIndexNumber:"Program"!==e.Type});n&&t&&(n="".concat(t," - ").concat(n)),n||(n=t||"");var a=n;if(e.PremiereDate)try{var i=m.ZP.toLocaleString(m.ZP.parseISO8601Date(e.PremiereDate).getFullYear(),{useGrouping:!1});a+=" (".concat(i,")")}catch(e){console.error(e)}F.Z.setTitle(a);var r=t||(e?e.Name:null);r&&(document.title=r)}(i,s);var o=e.querySelector(".osdSecondaryMediaInfo"),c=b.ZP.getSecondaryMediaInfoHtml(i,{startDate:!1,programTime:!1});o.innerHTML=c,c?o.classList.remove("hide"):o.classList.add("hide"),N?(r(Ve,i.StartDate),r(Ue,i.EndDate),Ve.classList.remove("hide"),Ue.classList.remove("hide"),Me=i.StartDate?m.ZP.parseISO8601Date(i.StartDate).getTime():0,Re=i.EndDate?m.ZP.parseISO8601Date(i.EndDate).getTime():0):(Ve.classList.add("hide"),Ue.classList.add("hide"),Ve.innerHTML="",Ue.innerHTML="",Me=0,Re=0)}function i(e,t){return t?m.ZP.toLocaleTimeString(e,{hour:"numeric",minute:"2-digit",second:"2-digit"}).toLowerCase().replace("am","").replace("pm","").trim():m.ZP.getDisplayTime(e).toLowerCase().replace("am","").replace("pm","").trim()}function r(e,t){var n;t&&(n=i(t=m.ZP.parseISO8601Date(t))),e.innerHTML=n||""}var s,o,c,E,q,x,C,H,N,A,B,_,K,V=!1;function U(){Xe.classList.remove("osdHeader-hidden"),function(){if(!A){var e=ze;A="osd",j(e),e.classList.remove("hide"),e.classList.remove("videoOsdBottom-hidden"),k.Z.mobile||setTimeout((function(){g.Z.focus(e.querySelector(".btnPause"))}),50),Pe()}}(),X()}function G(){Xe.classList.add("osdHeader-hidden"),function(){if("osd"===A){var e=ze;j(e),e.classList.add("videoOsdBottom-hidden"),v.ZP.addEventListener(e,Ye,Y,{once:!0}),A=null,Pe("hide"),document.activeElement&&document.activeElement.blur()}}(),h.ZP.hideCursor()}function W(){_&&(clearTimeout(_),_=null)}function j(e){v.ZP.removeEventListener(e,Ye,Y,{once:!0})}function Y(e){var t=e.target;t==ze&&(t.classList.add("hide"),v.ZP.removeEventListener(t,Ye,Y,{once:!0}))}function X(){!A||V||R()?W():(W(),_=setTimeout(G,3e3))}function z(e){if("mouse"===(e.pointerType||(k.Z.mobile?"touch":"mouse"))){var t=e.screenX||e.clientX||0,n=e.screenY||e.clientY||0,a=K;if(!a)return void(K={x:t,y:n});if(Math.abs(t-a.x)<10&&Math.abs(n-a.y)<10)return;a.x=t,a.y=n,U()}}function J(t){var n,a=c;switch(t.detail.command){case"left":"osd"===A?U():A||(t.preventDefault(),u.O.rewind(a));break;case"right":"osd"===A?U():A||(t.preventDefault(),u.O.fastForward(a));break;case"pageup":u.O.nextChapter(a);break;case"pagedown":u.O.previousChapter(a);break;case"up":case"down":case"select":case"menu":case"info":case"play":case"playpause":case"pause":case"fastforward":case"rewind":case"next":case"previous":U();break;case"record":(n=e.querySelector(".btnRecord")).classList.contains("hide")||n.click(),U();break;case"togglestats":ge();break;case"back":"osd"!==A||R()||(G(),t.preventDefault())}}function Q(){var t,n;!c.forcedFullscreen||u.O.isFullscreen(c)?((n=(t=e.querySelector(".btnFullscreen")).querySelector(".material-icons")).classList.remove("fullscreen_exit","fullscreen"),u.O.isFullscreen(c)?(t.setAttribute("title",P.ZP.translate("ExitFullscreen")+" (f)"),n.classList.add("fullscreen_exit")):(t.setAttribute("title",P.ZP.translate("Fullscreen")+" (f)"),n.classList.add("fullscreen"))):D.appRouter.back()}function $(){le(u.O.getCurrentPlayer())}function ee(n,i){var r,s;i.NowPlayingItem&&(x=!0,function(n,i,r){var s=r.PlayState||{};ve(s.IsPaused);var o=u.O.getSupportedCommands(i);Ie=o,me(i,s.IsMuted,s.VolumeLevel),Be&&!Be.dragging&&(Be.disabled=!s.CanSeek),je.disabled=!s.CanSeek,We.disabled=!s.CanSeek;var c=r.NowPlayingItem||{};He=s.PlaybackStartTimeTicks,he(s.PositionTicks,c.RunTimeTicks,s.PlaybackStartTimeTicks,s.PlaybackRate,s.BufferedRanges||[]),function(n,i){var r,s=i.NowPlayingItem;if(C=s,!s)return t(null),F.Z.setTitle(""),Ne.disabled=!0,Be.disabled=!0,je.disabled=!0,We.disabled=!0,e.querySelector(".btnSubtitles").classList.add("hide"),e.querySelector(".btnAudio").classList.add("hide"),e.querySelector(".osdTitle").innerHTML="",void(e.querySelector(".osdMediaInfo").innerHTML="");N=function(e){return!("TvChannel"!==e.Type||!e.CurrentProgram)}(s),function(e){if("TvChannel"===e.Type){var t=O.Z.getApiClient(e.ServerId);return t.getItem(t.getCurrentUserId(),e.Id).then((function(e){return{originalItem:e,displayItem:e.CurrentProgram}}))}return Promise.resolve({originalItem:e})}(s).then(a),Ne.disabled=!1,Be.disabled=!1,je.disabled=!1,We.disabled=!1,u.O.subtitleTracks(n).length?(e.querySelector(".btnSubtitles").classList.remove("hide"),Pe()):(e.querySelector(".btnSubtitles").classList.add("hide"),Pe("forceToHide")),u.O.audioTracks(n).length>1?e.querySelector(".btnAudio").classList.remove("hide"):e.querySelector(".btnAudio").classList.add("hide"),(null===(r=C.Chapters)||void 0===r?void 0:r.length)>1?(e.querySelector(".btnPreviousChapter").classList.remove("hide"),e.querySelector(".btnNextChapter").classList.remove("hide")):(e.querySelector(".btnPreviousChapter").classList.add("hide"),e.querySelector(".btnNextChapter").classList.add("hide"))}(i,r);var l=r.MediaSource&&null==r.MediaSource.RunTimeTicks;Be.setIsClear(l),c.RunTimeTicks&&Be.setKeyboardSteps(1e6*T.skipBackLength()/c.RunTimeTicks,1e6*T.skipForwardLength()/c.RunTimeTicks),-1===o.indexOf("ToggleFullscreen")||i.isLocalPlayer&&k.Z.tv&&u.O.isFullscreen(i)?e.querySelector(".btnFullscreen").classList.add("hide"):e.querySelector(".btnFullscreen").classList.remove("hide"),-1===o.indexOf("PictureInPicture")?e.querySelector(".btnPip").classList.add("hide"):e.querySelector(".btnPip").classList.remove("hide"),-1===o.indexOf("AirPlay")?e.querySelector(".btnAirPlay").classList.add("hide"):e.querySelector(".btnAirPlay").classList.remove("hide"),Q()}(0,this,i),r=e.querySelector(".btnPreviousTrack"),s=e.querySelector(".btnNextTrack"),r.classList.remove("hide"),s.classList.remove("hide"),s.disabled=!1,r.disabled=!1,!0,e.removeEventListener("viewbeforehide",qe),u.O.isPlayingVideo(c)&&e.addEventListener("viewbeforehide",qe),function(e){var t=sessionStorage.getItem("playbackRateSpeed");null!==t&&e.setPlaybackRate(t)}(this))}function te(){x&&ve(this.paused())}function ne(){if(x){var e=this;me(e,e.isMuted(),e.getVolume())}}function ae(e,t){console.debug("nowplaying event: "+e.type),ee.call(this,e,t),ie()}function ie(){E=!1,q&&(q.destroy(),q=null)}function re(t,n){De=null,ie(),console.debug("nowplaying event: "+t.type),"Video"!==n.NextMediaType&&(e.removeEventListener("viewbeforehide",qe),D.appRouter.back())}function se(){var e=u.O.getPlayerState(this);ee.call(this,{type:"init"},e)}function oe(){document.querySelector(".osdMediaStatus").classList.remove("hide")}function ce(){document.querySelector(".osdMediaStatus").classList.add("hide")}function le(e){if(e===c||(ue(),c=e,e)){var t=u.O.getPlayerState(e);ee.call(e,{type:"init"},t),S.Z.on(e,"playbackstart",ae),S.Z.on(e,"playbackstop",re),S.Z.on(e,"volumechange",ne),S.Z.on(e,"pause",te),S.Z.on(e,"unpause",te),S.Z.on(e,"timeupdate",de),S.Z.on(e,"fullscreenchange",Q),S.Z.on(e,"mediastreamschange",se),S.Z.on(e,"beginFetch",oe),S.Z.on(e,"endFetch",ce),ie(),e.isFetching&&oe()}}function ue(){Se(),Le(),ie();var e=c;e&&(S.Z.off(e,"playbackstart",ae),S.Z.off(e,"playbackstop",re),S.Z.off(e,"volumechange",ne),S.Z.off(e,"pause",te),S.Z.off(e,"unpause",te),S.Z.off(e,"timeupdate",de),S.Z.off(e,"fullscreenchange",Q),S.Z.off(e,"mediastreamschange",se),c=null)}function de(){if(x&&C){var t=(new Date).getTime();if(!(t-Fe<700)){Fe=t;var a=this;De=u.O.duration(a);var i=1e4*u.O.currentTime(a);he(i,De,u.O.playbackStartTime(a),u.O.getPlaybackRate(a),u.O.getBufferedRanges(a));var r=C;!function(e,t){if("TvChannel"===t.Type){var n=t.CurrentProgram;if(n&&n.EndDate)try{var a=m.ZP.parseISO8601Date(n.EndDate);if((new Date).getTime()>=a.getTime()){console.debug("program info needs to be refreshed");var i=u.O.getPlayerState(e);ee.call(e,{type:"init"},i)}}catch(e){console.error("error parsing date: "+n.EndDate)}}}(a,r),function(t,a,i,r){if(r&&i&&!E&&!A&&"Episode"===a.Type&&T.enableNextVideoInfoOverlay()){var s=30;r>=3e10?s=40:r>=24e9&&(s=35),i>=r-1e7*s&&r>=6e9&&r-i>=2e8&&function(t){n.e(36542).then(n.bind(n,36542)).then((function(n){var a=n.default;A||q||(A="upnext",E=!0,u.O.nextItem(t).then((function(n){q=new a({parent:e.querySelector(".upNextContainer"),player:t,nextItem:n}),S.Z.on(q,"hide",fe)}),fe))}))}(t)}}(a,r,i,De)}}}function fe(){"upnext"===A&&(A=null)}function ve(t){var n,a,i=e.querySelector(".btnPause"),r=i.querySelector(".material-icons");r.classList.remove("play_arrow","pause"),t?(n="play_arrow",a=P.ZP.translate("Play")):(n="pause",a=P.ZP.translate("ButtonPause")),r.classList.add(n),v.ZP.setElementTitle(i,a+" (k)",a)}function pe(e,t,n){return(n-e)/t*100}function he(e,t,n,a,i){if(N){if(Be&&!Be.dragging)if(Me&&Re){var r=(n+(e||0))/1e4,s=Re-Me;if(Be.value=pe(Me,s,r),i.length){var o=pe(Me,s,(n+(i[0].start||0))/1e4),c=pe(Me,s,(n+(i[0].end||0))/1e4);Be.setBufferedRanges([{start:o,end:c}])}else Be.setBufferedRanges([])}else Be.value=0,Be.setBufferedRanges([]);_e.innerHTML="",Ke.innerHTML=""}else{if(Be&&!Be.dragging){if(t){var l=e/t;l*=100,Be.value=l}else Be.value=0;t&&null!=e&&De&&!N&&C.RunTimeTicks&&"Recording"!==C.Type&&null!==a?Ge.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;"+b.ZP.getEndsAtFromPosition(t,e,a,!0):Ge.innerHTML=""}Be&&Be.setBufferedRanges(i,t,e),e>=0?(ye(_e,e),_e.classList.remove("hide")):_e.classList.add("hide");var u=t-e;u>=0?(ye(Ke,u),Ke.classList.remove("hide")):_e.classList.add("hide")}}function me(t,n,a){var i=Ie,r=!0,s=!0;-1===i.indexOf("Mute")&&(r=!1),-1===i.indexOf("SetVolume")&&(s=!1),t.isLocalPlayer&&L.M.supports("physicalvolumecontrol")&&(r=!1,s=!1);var o=e.querySelector(".buttonMute"),c=o.querySelector(".material-icons");c.classList.remove("volume_off","volume_up"),n?(o.setAttribute("title",P.ZP.translate("Unmute")+" (m)"),c.classList.add("volume_off")):(o.setAttribute("title",P.ZP.translate("Mute")+" (m)"),c.classList.add("volume_up")),r?o.classList.remove("hide"):o.classList.add("hide"),Ne&&(s?Ae.classList.remove("hide"):Ae.classList.add("hide"),Ne.dragging||(Ne.value=a||0))}function ye(e,t,n){if(null!=t){var a=m.ZP.getDisplayRunningTime(t);n&&(a="&nbsp;/&nbsp;"+a),e.innerHTML=a}else e.innerHTML=""}function be(e){if("stats"===e)ge();else if("suboffset"===e){var t=c;t&&(u.O.enableShowingSubtitleOffset(t),Pe())}}function ge(){n.e(68074).then(n.bind(n,68074)).then((function(e){var t=e.default,n=c;n&&(B?B.toggle():B=new t({player:n}))}))}function Se(){B&&(B.destroy(),B=null)}function Pe(e){var t=c;xe?xe.toggle(e):t&&(xe=new I(t))}function Le(){xe&&(xe.destroy(),xe=null)}function ke(e){if(!e.target.contains(s))return e.preventDefault(),e.stopPropagation(),!1}function Te(e){s=e.target;var t=w.ZP.getKeyName(e),n=e.ctrlKey||e.altKey||e.metaKey;if(32===e.keyCode)return"BUTTON"===e.target.tagName&&k.Z.tv||(u.O.playPause(c),e.preventDefault(),e.stopPropagation(),s=null),void U();if(k.Z.tv&&w.ZP.isNavigationKey(t))U();else switch(t){case"Enter":U();break;case"Escape":case"Back":"osd"!==A||R()||(G(),e.stopPropagation());break;case"k":u.O.playPause(c),U();break;case"ArrowUp":case"Up":u.O.volumeUp(c);break;case"ArrowDown":case"Down":u.O.volumeDown(c);break;case"l":case"ArrowRight":case"Right":u.O.fastForward(c),U();break;case"j":case"ArrowLeft":case"Left":u.O.rewind(c),U();break;case"f":e.ctrlKey||e.metaKey||(u.O.toggleFullscreen(c),U());break;case"m":u.O.toggleMute(c),U();break;case"p":case"P":e.shiftKey&&u.O.previousTrack(c);break;case"n":case"N":e.shiftKey&&u.O.nextTrack(c);break;case"NavigationLeft":case"GamepadDPadLeft":case"GamepadLeftThumbstickLeft":document.hasFocus()&&(u.O.rewind(c),U());break;case"NavigationRight":case"GamepadDPadRight":case"GamepadLeftThumbstickRight":document.hasFocus()&&(u.O.fastForward(c),U());break;case"Home":u.O.seekPercent(0,c);break;case"End":u.O.seekPercent(100,c);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(!n){var a=10*parseInt(t,10);u.O.seekPercent(a,c)}break;case">":u.O.increasePlaybackRate(c);break;case"<":u.O.decreasePlaybackRate(c);break;case"PageUp":u.O.nextChapter(c);break;case"PageDown":u.O.previousChapter(c)}}function we(){X()}function Oe(e){s=e.target,V=!0,X()}function Ze(){V=!1,X()}function Ee(){V=!1,X()}function qe(){if(u.O.isPlayingVideo()){Z.Z.disableFullscreen(),clearTimeout(o);var t=c;e.removeEventListener("viewbeforehide",qe),ue(),u.O.stop(t)}}Z.Z.enableFullscreen();var xe,Ce=this,Ie=[],De=0,Fe=0,Me=0,Re=0,He=0,Ne=e.querySelector(".osdVolumeSlider"),Ae=e.querySelector(".osdVolumeSliderContainer"),Be=e.querySelector(".osdPositionSlider"),_e=e.querySelector(".osdPositionText"),Ke=e.querySelector(".osdDurationText"),Ve=e.querySelector(".startTimeText"),Ue=e.querySelector(".endTimeText"),Ge=e.querySelector(".endsAtText"),We=e.querySelector(".btnRewind"),je=e.querySelector(".btnFastForward"),Ye=v.ZP.whichTransitionEvent(),Xe=document.querySelector(".skinHeader"),ze=document.querySelector(".videoOsdBottom-maincontrols");Be.enableKeyboardDragging(),Ne.enableKeyboardDragging(),k.Z.tv&&Be.classList.add("focusable"),e.addEventListener("viewbeforeshow",(function(){Xe.classList.add("osdHeader"),(0,M.G2)(M.q3.Full)})),e.addEventListener("viewshow",(function(){try{S.Z.on(u.O,"playerchange",$),le(u.O.getCurrentPlayer()),v.ZP.addEventListener(document,window.PointerEvent?"pointermove":"mousemove",z,{passive:!0}),U(),p.default.on(window,J),document.addEventListener("keydown",Te),v.ZP.addEventListener(document,"keydown",we,{capture:!0,passive:!0}),v.ZP.addEventListener(window,window.PointerEvent?"pointerdown":"mousedown",Oe,{capture:!0,passive:!0}),v.ZP.addEventListener(window,window.PointerEvent?"pointerup":"mouseup",Ze,{capture:!0,passive:!0}),v.ZP.addEventListener(window,"touchstart",Oe,{capture:!0,passive:!0}),["touchend","touchcancel"].forEach((function(e){v.ZP.addEventListener(window,e,Ze,{capture:!0,passive:!0})})),v.ZP.addEventListener(window,"dragend",Ee,{capture:!0,passive:!0}),(f.Z.firefox||f.Z.edge)&&v.ZP.addEventListener(document,"click",ke,{capture:!0})}catch(e){D.appRouter.goHome()}})),e.addEventListener("viewbeforehide",(function(){B&&B.enabled(!1),document.removeEventListener("keydown",Te),v.ZP.removeEventListener(document,"keydown",we,{capture:!0,passive:!0}),v.ZP.removeEventListener(window,window.PointerEvent?"pointerdown":"mousedown",Oe,{capture:!0,passive:!0}),v.ZP.removeEventListener(window,window.PointerEvent?"pointerup":"mouseup",Ze,{capture:!0,passive:!0}),v.ZP.removeEventListener(window,"touchstart",Oe,{capture:!0,passive:!0}),["touchend","touchcancel"].forEach((function(e){v.ZP.removeEventListener(window,e,Ze,{capture:!0,passive:!0})})),v.ZP.removeEventListener(window,"dragend",Ee,{capture:!0,passive:!0}),(f.Z.firefox||f.Z.edge)&&v.ZP.removeEventListener(document,"click",ke,{capture:!0}),W(),Xe.classList.remove("osdHeader"),Xe.classList.remove("osdHeader-hidden"),v.ZP.removeEventListener(document,window.PointerEvent?"pointermove":"mousemove",z,{passive:!0}),p.default.off(window,J),S.Z.off(u.O,"playerchange",$),ue()})),e.querySelector(".btnFullscreen").addEventListener("click",(function(){u.O.toggleFullscreen(c)})),e.querySelector(".btnPip").addEventListener("click",(function(){u.O.togglePictureInPicture(c)})),e.querySelector(".btnAirPlay").addEventListener("click",(function(){u.O.toggleAirPlay(c)})),e.querySelector(".btnVideoOsdSettings").addEventListener("click",(function(){var e=this;n.e(29078).then(n.bind(n,29078)).then((function(t){var n=c;if(n){var a,i=u.O.getPlayerState(n),r=u.O.supportSubtitleOffset(n)&&u.O.canHandleOffsetOnCurrentSubtitle(n);t.show({mediaType:"Video",player:n,positionTo:e,quality:null===(a=i.MediaSource)||void 0===a?void 0:a.SupportsTranscoding,stats:!0,suboffset:r,onOption:be}).finally((function(){X()})),setTimeout(X,0)}}))})),e.addEventListener("viewhide",(function(){Xe.classList.remove("hide")})),e.addEventListener("viewdestroy",(function(){Ce.touchHelper&&(Ce.touchHelper.destroy(),Ce.touchHelper=null),H&&(H.destroy(),H=null),Se(),Le()}));var Je=0;v.ZP.addEventListener(e,window.PointerEvent?"pointerdown":"click",(function(e){if(v.ZP.parentWithClass(e.target,["videoOsdBottom","upNextContainer"]))U();else{var t=e.pointerType||(k.Z.mobile?"touch":"mouse"),n=(new Date).getTime();switch(t){case"touch":n-Je>300&&(Je=n,"osd"===A?G():A||U());break;case"mouse":e.button||(o?(clearTimeout(o),o=0):o=setTimeout((function(){u.O.playPause(c),U(),o=0}),300));break;default:u.O.playPause(c),U()}}}),{passive:!0}),v.ZP.addEventListener(e,"dblclick",(function(t){t.target===e&&u.O.toggleFullscreen(c)})),e.querySelector(".buttonMute").addEventListener("click",(function(){u.O.toggleMute(c)})),Ne.addEventListener("input",(function(e){u.O.setVolume(e.target.value,c)})),Be.addEventListener("change",(function(){var e=c;if(e){var t=parseFloat(this.value);if(N){var n=t/100*(Re-Me)*1e4;n+=1e4*Me,n-=He,u.O.seek(n,e)}else u.O.seekPercent(t,e)}})),Be.getBubbleHtml=function(e){if(U(),N){if(Me&&Re){var t=Re-Me;return t/=100,t*=e,t+=Me,'<h1 class="sliderBubbleText">'+i(new Date(parseInt(t)),!0)+"</h1>"}return"--:--"}if(!De)return"--:--";var n=De;n/=100,n*=e;var a=C;if(a&&a.Chapters&&a.Chapters.length&&a.Chapters[0].ImageTag){var r=function(e,t,n,a){for(var i,r=-1,s=0,o=n.length;s<o;s++){var c=n[s];a>=c.StartPositionTicks&&(i=c,r=s)}if(!i)return null;var u=function(e,t,n,a,i){return t.ImageTag?i.getScaledImageUrl(e.Id,{maxWidth:400,tag:t.ImageTag,type:"Chapter",index:n}):null}(t,i,r,0,e);if(u){var d='<div class="chapterThumbContainer">';return d+='<img class="chapterThumb" src="'+u+'" />',d+='<div class="chapterThumbTextContainer">',d+='<div class="chapterThumbText chapterThumbText-dim">',d+=l()(i.Name),d+="</div>",d+='<h2 class="chapterThumbText">',d+=m.ZP.getDisplayRunningTime(a),d+="</h2>",(d+="</div>")+"</div>"}return null}(O.Z.getApiClient(a.ServerId),a,a.Chapters,n);if(r)return r}return'<h1 class="sliderBubbleText">'+m.ZP.getDisplayRunningTime(n)+"</h1>"},Be.getMarkerInfo=function(){var e,t=[],n=C;return null!=n&&null!==(e=n.Chapters)&&void 0!==e&&e.length&&n.Chapters.forEach((function(e){t.push({className:"chapterMarker",name:e.Name,progress:e.StartPositionTicks/n.RunTimeTicks})})),t},e.querySelector(".btnPreviousTrack").addEventListener("click",(function(){u.O.previousTrack(c)})),e.querySelector(".btnPreviousChapter").addEventListener("click",(function(){u.O.previousChapter(c)})),e.querySelector(".btnPause").addEventListener("click",(function(){u.O.playPause(c)})),e.querySelector(".btnNextChapter").addEventListener("click",(function(){u.O.nextChapter(c)})),e.querySelector(".btnNextTrack").addEventListener("click",(function(){u.O.nextTrack(c)})),We.addEventListener("click",(function(){u.O.rewind(c)})),je.addEventListener("click",(function(){u.O.fastForward(c)})),e.querySelector(".btnAudio").addEventListener("click",(function(){var e=c,t=u.O.audioTracks(e),a=u.O.getAudioStreamIndex(e),i=t.map((function(e){var t={name:e.DisplayTitle,id:e.Index};return e.Index===a&&(t.selected=!0),t})),r=this;Promise.resolve().then(n.bind(n,12801)).then((function(t){t.default.show({items:i,title:P.ZP.translate("Audio"),positionTo:r}).then((function(t){var n=parseInt(t);n!==a&&u.O.setAudioStreamIndex(n,e)})).finally((function(){X()})),setTimeout(X,0)}))})),e.querySelector(".btnSubtitles").addEventListener("click",(function(){var e=c,t=u.O.subtitleTracks(e),a=u.O.getSubtitleStreamIndex(e);null==a&&(a=-1),t.unshift({Index:-1,DisplayTitle:P.ZP.translate("Off")});var i=t.map((function(e){var t={name:e.DisplayTitle,id:e.Index};return e.Index===a&&(t.selected=!0),t})),r=this;Promise.resolve().then(n.bind(n,12801)).then((function(t){t.default.show({title:P.ZP.translate("Subtitles"),items:i,positionTo:r}).then((function(t){var n=parseInt(t);n!==a&&u.O.setSubtitleStreamIndex(n,e),Pe()})).finally((function(){X()})),setTimeout(X,0)}))}));var Qe=function(t){var n="",a="",i="oneShotPulse",r=1500,s=e.querySelector("#syncPlayIcon");switch(t){case"schedule-play":n="sync spin",a="play_arrow centered",i="infinitePulse",r=-1,G();break;case"unpause":n="play_circle_outline";break;case"pause":n="pause_circle_outline",U();break;case"seek":n="update",i="infinitePulse",r=-1;break;case"buffering":n="schedule",i="infinitePulse",r=-1;break;case"wait-pause":n="schedule",a="pause shifted",i="infinitePulse",r=-1;break;case"wait-unpause":n="schedule",a="play_arrow shifted",i="infinitePulse",r=-1;break;default:return void(s.style.visibility="hidden")}s.setAttribute("class","syncPlayIconCircle "+i),s.querySelector(".primary-icon").setAttribute("class","primary-icon material-icons "+n),s.querySelector(".secondary-icon").setAttribute("class","secondary-icon material-icons "+a);var o=s.cloneNode(!0);o.style.visibility="visible",s.parentNode.replaceChild(o,s),r<0||setTimeout((function(){o.style.visibility="hidden"}),r)};S.Z.on(d.default.Manager,"enabled",(function(t,n){n||(e.querySelector("#syncPlayIcon").style.visibility="hidden")})),S.Z.on(d.default.Manager,"notify-osd",(function(e,t){Qe(t)})),S.Z.on(d.default.Manager,"group-state-update",(function(e,t,n){"Playing"===t&&"Unpause"===n||"Playing"===t&&"Ready"===n?Qe("schedule-play"):"Paused"===t&&"Pause"===n?Qe("pause"):"Paused"===t&&"Ready"===n?Qe("clear"):"Waiting"===t&&"Seek"===n?Qe("seek"):"Waiting"===t&&"Buffer"===n?Qe("buffering"):"Waiting"===t&&"Pause"===n?Qe("wait-pause"):"Waiting"===t&&"Unpause"===n&&Qe("wait-unpause")}))}}}]);