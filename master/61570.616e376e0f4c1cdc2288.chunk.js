(self.webpackChunk=self.webpackChunk||[]).push([[61570],{61570:function(e,a,r){"use strict";r.r(a),r.d(a,{buildCards:function(){return U},getCardsHtml:function(){return O},getDefaultBackgroundClass:function(){return N},getDefaultText:function(){return V},onSeriesTimerCancelled:function(){return z},onTimerCancelled:function(){return Y},onTimerCreated:function(){return j},onUserDataChanged:function(){return H}}),r(15610),r(52077),r(25901),r(92189),r(91047),r(19068),r(87211),r(95163),r(99785),r(92571),r(98010),r(20252),r(55849),r(14009),r(12699),r(5769),r(95623),r(63238),r(14078),r(27471),r(72410),r(32081),r(61418),r(17460),r(23938),r(40895);var t=r(65009),n=r.n(t),i=r(61693),o=r(81038),s=r(21776),l=r(34643),c=r(24102),d=r(94994),u=r(30325),m=r(72365),p=r(57366),h=r(48957),g=r(61008),v=r(51869),y=r(34706),f=(r(61414),r(18613)),I=r(66560);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function b(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,t)}return r}function P(e,a,r){return(a=function(e){var a=function(e,a){if("object"!==T(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!==T(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===T(a)?a:String(a)}(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function C(e,a){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,n,i,o,s=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===a){if(Object(r)!==r)return;l=!1}else for(;!(l=(t=i.call(r)).done)&&(s.push(t.value),s.length!==a);l=!0);}catch(e){c=!0,n=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw n}}return s}}(e,a)||w(e,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,a){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=w(e))||a&&e&&"number"==typeof e.length){r&&(e=r);var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function w(e,a){if(e){if("string"==typeof e)return A(e,a);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,a):void 0}}function A(e,a){(null==a||a>e.length)&&(a=e.length);for(var r=0,t=new Array(a);r<a;r++)t[r]=e[r];return t}var Z,B=!p.Z.slow&&!p.Z.edge;function O(e,a){return 1===arguments.length&&(e=(a=arguments[0]).items),D(e,a)}function k(e,a){a.shape=a.shape||"auto";var r,t,n=o.default.getPrimaryImageAspectRatio(e);if(["auto","autohome","autooverflow","autoVertical"].includes(a.shape)){var i=a.shape;a.shape=null,n&&(n>=3?(a.shape="banner",a.coverImage=!0):a.shape=n>=1.33?"autooverflow"===i?"overflowBackdrop":"backdrop":n>.71?"autooverflow"===i?"overflowSquare":"square":"autooverflow"===i?"overflowPortrait":"portrait"),a.shape||(a.shape=a.defaultShape||("autooverflow"===i?"overflowSquare":"square"))}if("auto"===a.preferThumb&&(a.preferThumb="backdrop"===a.shape||"overflowBackdrop"===a.shape),a.uiAspect=M(a.shape),a.primaryImageAspectRatio=n,!a.width&&a.widths&&(a.width=a.widths[a.shape]),a.rows&&"number"!=typeof a.rows&&(a.rows=a.rows[a.shape]),!a.width){var s=m.ZP.getWindowSize().innerWidth,l=m.ZP.getWindowSize().innerHeight;r=s,(t=window.screen)&&t.availWidth-r>20&&(s=100*Math.floor(s/100)),a.width=function(e,a,r){var t=function(e,a,r){switch(e){case"portrait":return u.Z.tv?5.9999999988:a>=2200?10:a>=1920?9.000000000009:a>=1600?8:a>=1400?7.0000000000021:a>=1200?5.9999999988:a>=800?5:a>=700?4:3.0000000003;case"square":return u.Z.tv?5.9999999988:a>=2200?10:a>=1920?9.000000000009:a>=1600?8:a>=1400?7.0000000000021:a>=1200?5.9999999988:a>=800?5:a>=700?4:a>=500?3.0000000003:2;case"banner":return a>=2200?4:a>=1200?3.0000000003:a>=800?2:1;case"backdrop":return u.Z.tv?4:a>=2500?6:a>=1600?5:a>=1200?4:a>=770?3:a>=420?2:1;case"smallBackdrop":return a>=1600?8:a>=1400?7.000000000007001:a>=1200?5.9999999988:a>=1e3?5:a>=800?4:a>=500?3.0000000003:2;case"overflowSmallBackdrop":return u.Z.tv?100/18.9:r?a>=800?100/15.5:100/23.3:a>=540?100/30:100/72;case"overflowPortrait":return u.Z.tv?100/15.5:r?a>=1700?100/11.6:100/15.5:a>=1400?100/15:a>=1200?100/18:a>=760?100/23:a>=400?100/31.5:100/42;case"overflowSquare":return u.Z.tv?100/15.5:r?a>=1700?100/11.6:100/15.5:a>=1400?100/15:a>=1200?100/18:a>=760?100/23:a>=540?100/31.5:100/42;case"overflowBackdrop":return u.Z.tv?100/23.3:r?a>=1700?100/18.5:100/23.3:a>=1800?100/23.5:a>=1400?100/30:a>=760?2.5:a>=640?100/56:100/72;default:return 4}}(e,a,r);return Math.round(a/t)}(a.shape,s,s>1.3*l)}}function D(e,a){var r=!1;"autoVertical"===a.shape&&(r=!0),k(e,a);var t,n,o,s,l,c,d="",u=0,m=a.sectionTitleTagName||"div",p=S(e.entries());try{for(p.s();!(c=p.n()).done;){var h=C(c.value,2),g=h[0],v=h[1],y=v.ServerId||a.serverId;if(y!==l&&(l=y,s=f.Z.getApiClient(l)),a.indexBy){var I="";if("PremiereDate"===a.indexBy){if(v.PremiereDate)try{I=i.ZP.toLocaleDateString(i.ZP.parseISO8601Date(v.PremiereDate),{weekday:"long",month:"long",day:"numeric"})}catch(e){console.error("error parsing timestamp for premiere date",e)}}else if("ProductionYear"===a.indexBy)I=v.ProductionYear;else if("CommunityRating"===a.indexBy){var T=v.CommunityRating%1>=.5?.5:0;I=v.CommunityRating?Math.floor(v.CommunityRating)+T+"+":null}I!==t&&(n&&(d+="</div>",n=!1,u=0),o&&(d+="</div>",r&&(d+="</div>"),o=!1),d+=r?'<div class="verticalSection">':'<div class="horizontalSection">',d+="<"+m+' class="sectionTitle">'+I+"</"+m+">",r&&(d+='<div class="itemsContainer vertical-wrap">'),t=I,o=!0)}a.rows&&0===u&&(n&&(d+="</div>",n=!1),d+='<div class="cardColumn">',n=!0),d+=R(g,v,s,a),u++,a.rows&&u>=a.rows&&(d+="</div>",n=!1,u=0)}}catch(e){p.e(e)}finally{p.f()}return n&&(d+="</div>"),o&&(d+="</div>",r&&(d+="</div>")),d}function M(e){if(e){if(-1!==(e=e.toLowerCase()).indexOf("portrait"))return 2/3;if(-1!==e.indexOf("backdrop"))return 16/9;if(-1!==e.indexOf("square"))return 1;if(-1!==e.indexOf("banner"))return 1e3/185}return null}function x(e){return"Program"===e.Type||"Timer"===e.Type||"Recording"===e.Type}function L(e,a,r){var t="";if(e.StartDate)try{var n=i.ZP.parseISO8601Date(e.StartDate);a&&(t+=i.ZP.toLocaleDateString(n,{weekday:"short",month:"short",day:"numeric"})+" "),t+=i.ZP.getDisplayTime(n),e.EndDate&&r&&(n=i.ZP.parseISO8601Date(e.EndDate),t+=" - "+i.ZP.getDisplayTime(n))}catch(a){console.error("error parsing date: "+e.StartDate)}return t}function F(e,a,r,t,o,l,c){e=e.ProgramInfo||e;var m="";c.logoUrl&&(m+='<div class="lazy cardFooterLogo" data-src="'+c.logoUrl+'"></div>');var p="auto"===r.showTitle||r.showTitle||"PhotoAlbum"===e.Type||"Folder"===e.Type,h=l.isOuterFooter?!l.overlayText:l.overlayText;l.isOuterFooter&&r.cardLayout&&u.Z.mobile&&"none"!==r.cardFooterAside&&(m+='<button is="paper-icon-button-light" class="itemAction btnCardOptions cardText-secondary" data-action="menu" title="'.concat(d.ZP.translate("ButtonMore"),'"><span class="material-icons more_vert" aria-hidden="true"></span></button>'));var g,v=r.centerText?"cardText cardTextCentered":"cardText",y=e.ServerId||r.serverId,f=[],I="MusicAlbum"===e.Type||"Audio"===e.Type||"MusicVideo"===e.Type;if(h&&(r.showParentTitle||r.showParentTitleOrTitle)&&!I)if(l.isOuterFooter&&"Episode"===e.Type&&e.SeriesName)e.SeriesId?f.push(E({Id:e.SeriesId,ServerId:y,Name:e.SeriesName,Type:"Series",IsFolder:!0})):f.push(n()(e.SeriesName));else if(x(e))f.push(n()(e.Name)),e.EpisodeTitle||e.IndexNumber||(g=!0);else{var T=e.SeriesName||e.Series||e.Album||e.AlbumArtist||"";(T||p)&&f.push(n()(T))}var b=p&&!g||r.showParentTitleOrTitle&&!f.length;if(b||g||!p&&!l.forceName||(b=!0),b){var P="auto"!==r.showTitle||e.IsFolder||"Photo"!==e.MediaType?s.ZP.getDisplayName(e,{includeParentInfo:r.includeParentInfoInTitle}):"";f.push(E({Id:e.Id,ServerId:y,Name:P,Type:e.Type,CollectionType:e.CollectionType,IsFolder:e.IsFolder}))}if(h){if(r.showParentTitle&&I&&(l.isOuterFooter&&e.AlbumArtists&&e.AlbumArtists.length?(e.AlbumArtists[0].Type="MusicArtist",e.AlbumArtists[0].IsFolder=!0,f.push(E(e.AlbumArtists[0],null,y))):f.push(n()(x(e)?e.Name:e.SeriesName||e.Series||e.Album||e.AlbumArtist||""))),e.ExtraType&&"Unknown"!==e.ExtraType&&f.push(d.ZP.translate(e.ExtraType)),r.showItemCounts&&f.push(function(e,a){var r,t=[];if("Playlist"===a.Type){if(r="",a.RunTimeTicks){var n=a.RunTimeTicks/6e8;n=n||1,r+=d.ZP.translate("ValueMinutes",Math.round(n))}else r+=d.ZP.translate("ValueMinutes",0);t.push(r)}else"Genre"===a.Type||"Studio"===a.Type?(a.MovieCount&&(r=1===a.MovieCount?d.ZP.translate("ValueOneMovie"):d.ZP.translate("ValueMovieCount",a.MovieCount),t.push(r)),a.SeriesCount&&(r=1===a.SeriesCount?d.ZP.translate("ValueOneSeries"):d.ZP.translate("ValueSeriesCount",a.SeriesCount),t.push(r)),a.EpisodeCount&&(r=1===a.EpisodeCount?d.ZP.translate("ValueOneEpisode"):d.ZP.translate("ValueEpisodeCount",a.EpisodeCount),t.push(r))):"MusicGenre"===a.Type||"MusicArtist"===e.context?(a.AlbumCount&&(r=1===a.AlbumCount?d.ZP.translate("ValueOneAlbum"):d.ZP.translate("ValueAlbumCount",a.AlbumCount),t.push(r)),a.SongCount&&(r=1===a.SongCount?d.ZP.translate("ValueOneSong"):d.ZP.translate("ValueSongCount",a.SongCount),t.push(r)),a.MusicVideoCount&&(r=1===a.MusicVideoCount?d.ZP.translate("ValueOneMusicVideo"):d.ZP.translate("ValueMusicVideoCount",a.MusicVideoCount),t.push(r))):"Series"===a.Type&&(r=1===a.RecursiveItemCount?d.ZP.translate("ValueOneEpisode"):d.ZP.translate("ValueEpisodeCount",a.RecursiveItemCount),t.push(r));return t.join(", ")}(r,e)),r.textLines){var C,w=S(r.textLines(e));try{for(w.s();!(C=w.n()).done;){var A=C.value;f.push(A)}}catch(e){w.e(e)}finally{w.f()}}if(r.showSongCount){var Z="";e.SongCount&&(Z=1===e.SongCount?d.ZP.translate("ValueOneSong"):d.ZP.translate("ValueSongCount",e.SongCount)),f.push(Z)}if(r.showPremiereDate)if(e.PremiereDate)try{f.push(i.ZP.toLocaleDateString(i.ZP.parseISO8601Date(e.PremiereDate),{weekday:"long",month:"long",day:"numeric"}))}catch(e){f.push("")}else f.push("");if(r.showYear||r.showSeriesYear){var B=e.ProductionYear&&i.ZP.toLocaleString(e.ProductionYear,{useGrouping:!1});if("Series"===e.Type)if("Continuing"===e.Status)f.push(d.ZP.translate("SeriesYearToPresent",B||""));else if(e.EndDate&&e.ProductionYear){var O=i.ZP.toLocaleString(i.ZP.parseISO8601Date(e.EndDate).getFullYear(),{useGrouping:!1});f.push(B+(O===e.ProductionYear?"":" - "+O))}else f.push(B||"");else f.push(B||"")}r.showRuntime&&(e.RunTimeTicks?f.push(i.ZP.getDisplayRunningTime(e.RunTimeTicks)):f.push("")),r.showAirTime&&f.push(L(e,r.showAirDateTime,r.showAirEndTime)||""),r.showChannelName&&(e.ChannelId?f.push(E({Id:e.ChannelId,ServerId:y,Name:e.ChannelName,Type:"TvChannel",MediaType:e.MediaType,IsFolder:!1},e.ChannelName)):f.push(n()(e.ChannelName||"")||"&nbsp;")),r.showCurrentProgram&&"TvChannel"===e.Type&&(e.CurrentProgram?f.push(n()(e.CurrentProgram.Name)):f.push("")),r.showCurrentProgramTime&&"TvChannel"===e.Type&&(e.CurrentProgram?f.push(L(e.CurrentProgram,!1,!0)||""):f.push("")),r.showSeriesTimerTime&&(e.RecordAnyTime?f.push(d.ZP.translate("Anytime")):f.push(i.ZP.getDisplayTime(e.StartDate))),r.showSeriesTimerChannel&&(e.RecordAnyChannel?f.push(d.ZP.translate("AllChannels")):f.push(n()(e.ChannelName||"")||d.ZP.translate("OneChannel"))),r.showPersonRoleOrType&&e.Role&&f.push(d.ZP.translate("PersonRole",n()(e.Role)))}(p||!c.imgUrl)&&l.forceName&&l.overlayText&&1===f.length&&(f=[]),l.overlayText&&p&&(f=[n()(e.Name)]);var k=l.isOuterFooter&&r.cardLayout&&!r.centerText&&"none"!==r.cardFooterAside&&u.Z.mobile;return m+=function(e,a,r,t,n,i,o){var s,l="",c=0,d=S(e);try{for(d.s();!(s=d.n()).done;){var u=s.value,m=a;if(c>0&&t?m+=" cardText-secondary":0===c&&t&&(m+=" cardText-first"),i&&(m+=" cardText-rightmargin"),u&&(l+="<div class='"+m+"'>",l+="<bdi>"+u+"</bdi>",l+="</div>",c++,o&&c>=o))break}}catch(e){d.e(e)}finally{d.f()}if(r)for(var p=o||Math.min(e.length,o||e.length);c<p;)l+="<div class='"+a+"'>&nbsp;</div>",c++;return l}(f,v,!r.overlayText,l.isOuterFooter,r.cardLayout,k,r.lines),o&&(m+=o),m&&(!l.isOuterFooter||c.logoUrl||r.cardLayout)&&(m='<div class="'+t+'">'+m,m+="</div>"),m}function E(e,a,r){if(a||(a=s.ZP.getDisplayName(e)),a=n()(a),u.Z.tv)return a;var t='<a href="'+I.appRouter.getRouteUrl(e)+'" '+g.ZP.getShortcutAttributesHtml(e,r)+' class="itemAction textActionButton" title="'+a+'" data-action="link">';return(t+=a)+"</a>"}function N(e){return"defaultCardBackground defaultCardBackground"+function(e){if(e){for(var a=Math.floor(e.length/2),r=String(e.slice(a,a+1).charCodeAt()),t=0,n=0;n<r.length;n++)t+=parseInt(r.charAt(n),10);return String(t).slice(-1)%5+1}return(0,y.I)(1,5)}(e)}function R(e,a,t,i){var o,l=i.action||"link";"play"===l&&a.IsFolder?l="link":"Photo"===a.MediaType&&(l="play");var m=i.shape;if("mixed"===m){m=null;var p=a.PrimaryImageAspectRatio;p&&(m=p>=1.33?"mixedBackdrop":p>.71?"mixedSquare":"mixedPortrait"),m=m||"mixedSquare"}var g="card";m&&(g+=" "+m+"Card"),i.cardCssClass&&(g+=" "+i.cardCssClass),i.cardClass&&(g+=" "+i.cardClass),u.Z.desktop&&(g+=" card-hoverable"),u.Z.tv&&(g+=" show-focus",B&&(g+=" show-animation"));var v=function(e,a,r,t){var n,i,o,s,l;e=e.ProgramInfo||e;var c=r.width,d=null,u=e.PrimaryImageAspectRatio,m=!1,p=null,h=null,g=!1,v=M(t),y=null,f=null;return r.preferThumb&&e.ImageTags&&e.ImageTags.Thumb?(y="Thumb",h=e.ImageTags.Thumb):(r.preferBanner||"banner"===t)&&e.ImageTags&&e.ImageTags.Banner?(y="Banner",h=e.ImageTags.Banner):r.preferDisc&&e.ImageTags&&e.ImageTags.Disc?(y="Disc",h=e.ImageTags.Disc):r.preferLogo&&e.ImageTags&&e.ImageTags.Logo?(y="Logo",h=e.ImageTags.Logo):r.preferLogo&&e.ParentLogoImageTag&&e.ParentLogoItemId?(y="Logo",h=e.ParentLogoImageTag,f=e.ParentLogoItemId):r.preferThumb&&e.SeriesThumbImageTag&&!1!==r.inheritThumb?(y="Thumb",h=e.SeriesThumbImageTag,f=e.SeriesId):r.preferThumb&&e.ParentThumbItemId&&!1!==r.inheritThumb&&"Photo"!==e.MediaType?(y="Thumb",h=e.ParentThumbImageTag,f=e.ParentThumbItemId):r.preferThumb&&e.BackdropImageTags&&e.BackdropImageTags.length?(y="Backdrop",h=e.BackdropImageTags[0],m=!0):r.preferThumb&&e.ParentBackdropImageTags&&e.ParentBackdropImageTags.length&&!1!==r.inheritThumb&&"Episode"===e.Type?(y="Backdrop",h=e.ParentBackdropImageTags[0],f=e.ParentBackdropItemId):null===(n=e.ImageTags)||void 0===n||!n.Primary||"Episode"===e.Type&&0===e.ChildCount?e.SeriesPrimaryImageTag?(y="Primary",h=e.SeriesPrimaryImageTag,f=e.SeriesId):e.PrimaryImageTag?(y="Primary",h=e.PrimaryImageTag,f=e.PrimaryImageItemId,d=c&&u?Math.round(c/u):null,r.preferThumb&&!1!==r.showTitle&&(m=!0),u&&v&&(g=Math.abs(u-v)/v<=.2)):e.ParentPrimaryImageTag?(y="Primary",h=e.ParentPrimaryImageTag,f=e.ParentPrimaryImageItemId):e.AlbumId&&e.AlbumPrimaryImageTag?(y="Primary",h=e.AlbumPrimaryImageTag,f=e.AlbumId,d=c&&u?Math.round(c/u):null,u&&v&&(g=Math.abs(u-v)/v<=.2)):"Season"===e.Type&&e.ImageTags&&e.ImageTags.Thumb?(y="Thumb",h=e.ImageTags.Thumb):null!==(i=e.BackdropImageTags)&&void 0!==i&&i.length?(y="Backdrop",h=e.BackdropImageTags[0]):null!==(o=e.ImageTags)&&void 0!==o&&o.Thumb?(y="Thumb",h=e.ImageTags.Thumb):e.SeriesThumbImageTag&&!1!==r.inheritThumb?(y="Thumb",h=e.SeriesThumbImageTag,f=e.SeriesId):e.ParentThumbItemId&&!1!==r.inheritThumb?(y="Thumb",h=e.ParentThumbImageTag,f=e.ParentThumbItemId):null!==(s=e.ParentBackdropImageTags)&&void 0!==s&&s.length&&!1!==r.inheritThumb&&(y="Backdrop",h=e.ParentBackdropImageTags[0],f=e.ParentBackdropItemId):(y="Primary",h=e.ImageTags.Primary,d=c&&u?Math.round(c/u):null,r.preferThumb&&!1!==r.showTitle&&(m=!0),u&&v&&(g=Math.abs(u-v)/v<=.2)),f||(f=e.Id),h&&y&&(!d&&c&&v&&(d=c/v),p=a.getScaledImageUrl(f,{type:y,fillHeight:d,fillWidth:c,quality:96,tag:h})),{imgUrl:p,blurhash:null===(l=(r.imageBlurhashes||e.ImageBlurHashes||{})[y])||void 0===l?void 0:l[h],forceName:m,coverImage:g}}(a,t,i,m),y=v.imgUrl,f=v.blurhash,T=v.forceName,C=i.overlayText,S="cardImageContainer";(i.coverImage||v.coverImage)&&(S+=" coveredImage","TvChannel"===a.Type&&(S+=" coveredImage-contain")),y||(S+=" "+N(a.Name));var w,A,O=i.cardLayout?"cardBox visualCardBox":"cardBox",k=c.ZP.getProgressBarHtml(a),D="",x=!1;i.showChannelLogo&&a.ChannelPrimaryImageTag?A=t.getScaledImageUrl(a.ChannelId,{type:"Primary",height:40,tag:a.ChannelPrimaryImageTag}):i.showLogo&&a.ParentLogoImageTag&&(A=t.getScaledImageUrl(a.ParentLogoItemId,{type:"Logo",height:40,tag:a.ParentLogoImageTag})),C?(D+=F(a,0,i,w=k?"innerCardFooter fullInnerCardFooter":"innerCardFooter",k,{forceName:T,overlayText:C,isOuterFooter:!1},{imgUrl:y,logoUrl:A=null}),x=!0):k&&(D+='<div class="innerCardFooter fullInnerCardFooter innerCardFooterClear">',D+=k,D+="</div>",k="");var L=a.MediaSourceCount||1;L>1&&!0!==i.disableIndicators&&(D+='<div class="mediaSourceIndicator">'+L+"</div>");var E="";C||x||(w=i.cardLayout?"cardFooter":"cardFooter cardFooter-transparent",A&&(w+=" cardFooter-withlogo"),i.cardLayout||(A=null),E=F(a,0,i,w,k,{forceName:T,overlayText:C,isOuterFooter:!0},{imgUrl:y,logoUrl:A})),E&&!i.cardLayout&&(O+=" cardBox-bottompadded");var R,U="";if(u.Z.mobile){var _=i.overlayPlayButton;null!=_||i.overlayMoreButton||i.overlayInfoButton||i.cardLayout||(_="Video"===a.MediaType);var q="cardOverlayButton cardOverlayButton-br itemAction";i.centerPlayButton&&(U+='<button is="paper-icon-button-light" class="'.concat(q,' cardOverlayButton-centered" data-action="play" title="').concat(d.ZP.translate("Play"),'"><span class="material-icons cardOverlayButtonIcon play_arrow" aria-hidden="true"></span></button>')),!_||a.IsPlaceHolder||"Virtual"===a.LocationType&&a.MediaType&&"Program"!==a.Type||"Person"===a.Type||(U+='<button is="paper-icon-button-light" class="'.concat(q,'" data-action="play" title="').concat(d.ZP.translate("Play"),'"><span class="material-icons cardOverlayButtonIcon play_arrow" aria-hidden="true"></span></button>')),i.overlayMoreButton&&(U+='<button is="paper-icon-button-light" class="'.concat(q,'" data-action="menu" title="').concat(d.ZP.translate("ButtonMore"),'"><span class="material-icons cardOverlayButtonIcon more_vert" aria-hidden="true"></span></button>'))}i.showChildCountIndicator&&a.ChildCount&&(g+=" groupedCard");var H="",j="cardContent",Y="";if(f&&f.length>0&&(Y='data-blurhash="'+f+'"'),u.Z.tv)R=y?'<div class="'+S+" "+j+' lazy" data-src="'+y+'" '+Y+">":'<div class="'+S+" "+j+'">',H="</div>";else{var z=' aria-label="'.concat(n()(a.Name),'"'),J=I.appRouter.getRouteUrl(a);R=y?'<a href="'+J+'" data-action="'+l+'" class="'+S+" "+j+' itemAction lazy" data-src="'+y+'" '+Y+z+">":'<a href="'+J+'" data-action="'+l+'" class="'+S+" "+j+' itemAction"'+z+">",H="</a>"}var W="";if(y&&"TvChannel"!==a.Type&&(W=V(a,function(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?b(Object(r),!0).forEach((function(a){P(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}({defaultCardImageIcon:"folder"},i))),R='<div class="'.concat(O,'"><div class="').concat("cardScalable",'"><div class="cardPadder cardPadder-').concat(m,'">').concat(W,"</div>").concat(R),!0!==i.disableIndicators){var G="";!1!==i.missingIndicator&&(G+=c.ZP.getMissingIndicator(a)),G+=c.ZP.getSyncIndicator(a),G+=c.ZP.getTimerIndicator(a),G+=c.ZP.getTypeIndicator(a),i.showGroupCount?G+=c.ZP.getChildCountIndicatorHtml(a,{minCount:1}):G+=c.ZP.getPlayedIndicatorHtml(a),("CollectionFolder"===a.Type||a.CollectionType)&&(G+='<div is="emby-itemrefreshindicator"'+(a.RefreshProgress?"":' class="hide"')+' data-progress="'+(a.RefreshProgress||0)+'" data-status="'+a.RefreshStatus+'"></div>',Z||(Z=!0,r.e(23366).then(r.bind(r,23366)))),G&&(R+='<div class="cardIndicators">'+G+"</div>")}y||(R+=V(a,i));var K=u.Z.tv&&!U?"button":"div",X=a.SortName||a.Name||"",$=X.substring(0,Math.min(3,X.length));$&&($=$.toUpperCase());var Q,ee="";a.TimerId&&(ee+=' data-timerid="'+a.TimerId+'"'),a.SeriesTimerId&&(ee+=' data-seriestimerid="'+a.SeriesTimerId+'"');var ae="";"button"===K?(g+=" itemAction",Q=' data-action="'+l+'"',ae=' aria-label="'.concat(n()(a.Name),'"')):Q="","MusicAlbum"!==a.Type&&"MusicArtist"!==a.Type&&"Audio"!==a.Type&&(g+=" card-withuserdata");var re=null!==(o=a.UserData)&&void 0!==o&&o.PlaybackPositionTicks?' data-positionticks="'+a.UserData.PlaybackPositionTicks+'"':"",te=i.collectionId?' data-collectionid="'+i.collectionId+'"':"",ne=i.playlistId?' data-playlistid="'+i.playlistId+'"':"",ie=a.MediaType?' data-mediatype="'+a.MediaType+'"':"",oe=a.CollectionType?' data-collectiontype="'+a.CollectionType+'"':"",se=a.ChannelId?' data-channelid="'+a.ChannelId+'"':"",le=a.Path?' data-path="'+n()(a.Path)+'"':"",ce=i.context?' data-context="'+i.context+'"':"",de=i.parentId?' data-parentid="'+i.parentId+'"':"",ue=a.StartDate?' data-startdate="'+a.StartDate.toString()+'"':"",me=a.EndDate?' data-enddate="'+a.EndDate.toString()+'"':"",pe="";return u.Z.desktop&&!i.disableHoverMenu&&(pe+=function(e,a){var t="";t+='<div class="cardOverlayContainer itemAction" data-action="'+a+'">',t+='<a href="'+I.appRouter.getRouteUrl(e)+'" class="cardImageContainer"></a>';var n="cardOverlayButton cardOverlayButton-hover itemAction paper-icon-button-light";h.O.canPlay(e)&&(t+='<button is="paper-icon-button-light" class="'+n+' cardOverlayFab-primary" data-action="resume"><span class="material-icons cardOverlayButtonIcon cardOverlayButtonIcon-hover play_arrow" aria-hidden="true"></span></button>'),t+='<div class="cardOverlayButton-br flex">';var i=e.UserData||{};if(s.ZP.canMarkPlayed(e)&&(r.e(36662).then(r.bind(r,36662)),t+='<button is="emby-playstatebutton" type="button" data-action="none" class="'+n+'" data-id="'+e.Id+'" data-serverid="'+e.ServerId+'" data-itemtype="'+e.Type+'" data-played="'+i.Played+'"><span class="material-icons cardOverlayButtonIcon cardOverlayButtonIcon-hover check" aria-hidden="true"></span></button>'),s.ZP.canRate(e)){var o=null==i.Likes?"":i.Likes;r.e(27636).then(r.bind(r,27636)),t+='<button is="emby-ratingbutton" type="button" data-action="none" class="'+n+'" data-id="'+e.Id+'" data-serverid="'+e.ServerId+'" data-itemtype="'+e.Type+'" data-likes="'+o+'" data-isfavorite="'+i.IsFavorite+'"><span class="material-icons cardOverlayButtonIcon cardOverlayButtonIcon-hover favorite" aria-hidden="true"></span></button>'}return t+='<button is="paper-icon-button-light" class="'.concat(n,'" data-action="menu" title="').concat(d.ZP.translate("ButtonMore"),'"><span class="material-icons cardOverlayButtonIcon cardOverlayButtonIcon-hover more_vert" aria-hidden="true"></span></button>'),(t+="</div>")+"</div>"}(a,l)),"<"+K+' data-index="'+e+'"'+ee+Q+' data-isfolder="'+(a.IsFolder||!1)+'" data-serverid="'+(a.ServerId||i.serverId)+'" data-id="'+(a.Id||a.ItemId)+'" data-type="'+a.Type+'"'+ie+oe+se+le+re+te+ne+ce+de+ue+me+' data-prefix="'+n()($)+'" class="'+g+'"'+ae+">"+R+D+H+U+pe+"</div>"+E+"</div></"+K+">"}function V(e,a){if(e.CollectionType)return'<span class="cardImageIcon material-icons '+v.ZP.getLibraryIcon(e.CollectionType)+'" aria-hidden="true"></span>';switch(e.Type){case"MusicAlbum":return'<span class="cardImageIcon material-icons album" aria-hidden="true"></span>';case"MusicArtist":case"Person":return'<span class="cardImageIcon material-icons person" aria-hidden="true"></span>';case"Audio":return'<span class="cardImageIcon material-icons audiotrack" aria-hidden="true"></span>';case"Movie":return'<span class="cardImageIcon material-icons movie" aria-hidden="true"></span>';case"Episode":case"Series":return'<span class="cardImageIcon material-icons tv" aria-hidden="true"></span>';case"Program":return'<span class="cardImageIcon material-icons live_tv" aria-hidden="true"></span>';case"Book":return'<span class="cardImageIcon material-icons book" aria-hidden="true"></span>';case"Folder":return'<span class="cardImageIcon material-icons folder" aria-hidden="true"></span>';case"BoxSet":return'<span class="cardImageIcon material-icons collections" aria-hidden="true"></span>';case"Playlist":return'<span class="cardImageIcon material-icons view_list" aria-hidden="true"></span>';case"Photo":return'<span class="cardImageIcon material-icons photo" aria-hidden="true"></span>';case"PhotoAlbum":return'<span class="cardImageIcon material-icons photo_album" aria-hidden="true"></span>'}if(null!=a&&a.defaultCardImageIcon)return'<span class="cardImageIcon material-icons '+a.defaultCardImageIcon+'" aria-hidden="true"></span>';var r=x(e)?e.Name:s.ZP.getDisplayName(e);return'<div class="cardText cardDefaultText">'+n()(r)+"</div>"}function U(e,a){if(document.body.contains(a.itemsContainer)){if(a.parentContainer){if(!e.length)return void a.parentContainer.classList.add("hide");a.parentContainer.classList.remove("hide")}var r=D(e,a);r?(a.itemsContainer.cardBuilderHtml!==r&&(a.itemsContainer.innerHTML=r,e.length<50?a.itemsContainer.cardBuilderHtml=r:a.itemsContainer.cardBuilderHtml=null),o.default.lazyChildren(a.itemsContainer)):(a.itemsContainer.innerHTML=r,a.itemsContainer.cardBuilderHtml=null),a.autoFocus&&l.Z.autoFocus(a.itemsContainer,!0)}}function _(e,a){if(a)return a;if(!(a=e.querySelector(".cardIndicators"))){var r=e.querySelector(".cardImageContainer");(a=document.createElement("div")).classList.add("cardIndicators"),r.appendChild(a)}return a}function q(e,a){var r=e.getAttribute("data-type"),t="Series"===r||"BoxSet"===r||"Season"===r,n=null,i=null,o=null,s=null;a.Played?((i=e.querySelector(".playedIndicator"))||((i=document.createElement("div")).classList.add("playedIndicator"),i.classList.add("indicator"),(n=_(e,n)).appendChild(i)),i.innerHTML='<span class="material-icons indicatorIcon check" aria-hidden="true"></span>'):(i=e.querySelector(".playedIndicator"))&&i.parentNode.removeChild(i),a.UnplayedItemCount?((o=e.querySelector(".countIndicator"))||((o=document.createElement("div")).classList.add("countIndicator"),(n=_(e,n)).appendChild(o)),o.innerHTML=a.UnplayedItemCount):t&&(o=e.querySelector(".countIndicator"))&&o.parentNode.removeChild(o);var l=c.ZP.getProgressBarHtml({Type:r,UserData:a,MediaType:"Video"});if(l){if(!(s=e.querySelector(".itemProgressBar"))){(s=document.createElement("div")).classList.add("itemProgressBar");var d=e.querySelector(".innerCardFooter");d||((d=document.createElement("div")).classList.add("innerCardFooter"),e.querySelector(".cardImageContainer").appendChild(d)),d.appendChild(s)}s.innerHTML=l}else(s=e.querySelector(".itemProgressBar"))&&s.parentNode.removeChild(s)}function H(e,a){for(var r=(a||document.body).querySelectorAll('.card-withuserdata[data-id="'+e.ItemId+'"]'),t=0,n=r.length;t<n;t++)q(r[t],e)}function j(e,a,r){for(var t=r.querySelectorAll('.card[data-id="'+e+'"]'),n=0,i=t.length;n<i;n++){var o=t[n];o.querySelector(".timerIndicator")||_(o).insertAdjacentHTML("beforeend",'<span class="material-icons timerIndicator indicatorIcon fiber_manual_record" aria-hidden="true"></span>'),o.setAttribute("data-timerid",a)}}function Y(e,a){var r,t=S(a.querySelectorAll('.card[data-timerid="'+e+'"]'));try{for(t.s();!(r=t.n()).done;){var n=r.value,i=n.querySelector(".timerIndicator");i&&i.parentNode.removeChild(i),n.removeAttribute("data-timerid")}}catch(e){t.e(e)}finally{t.f()}}function z(e,a){var r,t=S(a.querySelectorAll('.card[data-seriestimerid="'+e+'"]'));try{for(t.s();!(r=t.n()).done;){var n=r.value,i=n.querySelector(".timerIndicator");i&&i.parentNode.removeChild(i),n.removeAttribute("data-seriestimerid")}}catch(e){t.e(e)}finally{t.f()}}a.default={getCardsHtml:O,getDefaultBackgroundClass:N,getDefaultText:V,buildCards:U,onUserDataChanged:H,onTimerCreated:j,onTimerCancelled:Y,onSeriesTimerCancelled:z}},24102:function(e,a,r){"use strict";var t=r(61693),n=r(21776);function i(e){return"Video"===e.MediaType&&"TvChannel"!==e.Type||"AudioBook"===e.Type||"AudioPodcast"===e.Type}function o(e,a){var r="itemProgressBar";return null!=a&&a.containerClass&&(r+=" "+a.containerClass),'<div class="'+r+'"><div class="itemProgressBarForeground" style="width:'+e+'%;"></div></div>'}function s(e){return n.ZP.canMarkPlayed(e)}r(55005),a.ZP={getProgressHtml:o,getProgressBarHtml:function(e,a){var r;if(i(e)&&"Recording"!==e.Type){var n=null!=a&&a.userData?a.userData:e.UserData;if(n&&(r=n.PlayedPercentage)&&r<100)return o(r,a)}if(("Program"===e.Type||"Timer"===e.Type||"Recording"===e.Type)&&e.StartDate&&e.EndDate){var s=0,l=1;try{s=t.ZP.parseISO8601Date(e.StartDate).getTime(),l=t.ZP.parseISO8601Date(e.EndDate).getTime()}catch(e){console.error(e)}if((r=((new Date).getTime()-s)/(l-s)*100)>0&&r<100)return function(e,a,r,t,n){var i="itemProgressBar";null!=a&&a.containerClass&&(i+=" "+a.containerClass);var o="itemProgressBarForeground";return r&&(o+=" itemProgressBarForeground-recording"),'<div is="emby-progressbar" data-automode="time" data-starttime="'+t+'" data-endtime="'+n+'" class="'+i+'"><div class="'+o+'" style="width:'+e+'%;"></div></div>'}(r,a,"Timer"===e.Type||"Recording"===e.Type||e.TimerId,s,l)}return""},getPlayedIndicatorHtml:function(e){if(s(e)){var a=e.UserData||{};if(a.UnplayedItemCount)return'<div class="countIndicator indicator">'+t.ZP.toLocaleString(a.UnplayedItemCount)+"</div>";if(a.PlayedPercentage&&a.PlayedPercentage>=100||a.Played)return'<div class="playedIndicator indicator"><span class="material-icons indicatorIcon check" aria-hidden="true"></span></div>'}return""},getChildCountIndicatorHtml:function(e,a){var r=null!=a&&a.minCount?a.minCount:0;return e.ChildCount&&e.ChildCount>r?'<div class="countIndicator indicator">'+t.ZP.toLocaleString(e.ChildCount)+"</div>":""},enableProgressIndicator:i,getTimerIndicator:function(e){var a;if("SeriesTimer"===e.Type)return'<span class="material-icons timerIndicator indicatorIcon fiber_smart_record" aria-hidden="true"></span>';if(e.TimerId||e.SeriesTimerId)a=e.Status||"Cancelled";else{if("Timer"!==e.Type)return"";a=e.Status}return e.SeriesTimerId?"Cancelled"!==a?'<span class="material-icons timerIndicator indicatorIcon fiber_smart_record" aria-hidden="true"></span>':'<span class="material-icons timerIndicator timerIndicator-inactive indicatorIcon fiber_smart_record" aria-hidden="true"></span>':'<span class="material-icons timerIndicator indicatorIcon fiber_manual_record" aria-hidden="true"></span>'},enablePlayedIndicator:s,getSyncIndicator:function(e){return 100===e.SyncPercent?'<div class="syncIndicator indicator fullSyncIndicator"><span class="material-icons indicatorIcon file_download" aria-hidden="true"></span></div>':null!=e.SyncPercent?'<div class="syncIndicator indicator emptySyncIndicator"><span class="material-icons indicatorIcon file_download" aria-hidden="true"></span></div>':""},getTypeIndicator:function(e){var a={Video:"videocam",Folder:"folder",PhotoAlbum:"photo_album",Photo:"photo"}[e.Type];return a?'<div class="indicator videoIndicator"><span class="material-icons indicatorIcon '+a+'" aria-hidden="true"></span></div>':""},getMissingIndicator:function(e){if("Episode"===e.Type&&"Virtual"===e.LocationType){if(e.PremiereDate)try{if(t.ZP.parseISO8601Date(e.PremiereDate).getTime()>(new Date).getTime())return'<div class="unairedIndicator">Unaired</div>'}catch(e){console.error(e)}return'<div class="missingIndicator">Missing</div>'}return""}}},55005:function(e,a,r){r(32081);var t=Object.create(HTMLDivElement.prototype);function n(){var e=parseInt(this.getAttribute("data-starttime"),10),a=parseInt(this.getAttribute("data-endtime"),10),r=((new Date).getTime()-e)/(a-e)*100;r=Math.min(100,r),r=Math.max(0,r),this.querySelector(".itemProgressBarForeground").style.width=r+"%"}t.attachedCallback=function(){this.timeInterval&&clearInterval(this.timeInterval),"time"===this.getAttribute("data-automode")&&(this.timeInterval=setInterval(n.bind(this),6e4))},t.detachedCallback=function(){this.timeInterval&&(clearInterval(this.timeInterval),this.timeInterval=null)},document.registerElement("emby-progressbar",{prototype:t,extends:"div"})},51869:function(e,a,r){"use strict";var t="assets/img/devices/";a.ZP={getDeviceIcon:function(e){switch(e.AppName||e.Client){case"Samsung Smart TV":return t+"samsung.svg";case"Xbox One":return t+"xbox.svg";case"Sony PS4":return t+"playstation.svg";case"Kodi":case"Kodi JellyCon":return t+"kodi.svg";case"Jellyfin Android":case"AndroidTV":case"Android TV":return t+"android.svg";case"Jellyfin Mobile (iOS)":case"Jellyfin Mobile (iPadOS)":case"Jellyfin iOS":case"Infuse":return t+"apple.svg";case"Home Assistant":return t+"home-assistant.svg";case"Jellyfin Roku":return t+"roku.svg";case"Finamp":return t+"finamp.svg";case"Jellyfin Web":return function(e){switch(e){case"Opera":case"Opera TV":case"Opera Android":return t+"opera.svg";case"Chrome":case"Chrome Android":return t+"chrome.svg";case"Firefox":case"Firefox Android":return t+"firefox.svg";case"Safari":case"Safari iPad":case"Safari iPhone":return t+"safari.svg";case"Edge Chromium":case"Edge Chromium Android":case"Edge Chromium iPad":case"Edge Chromium iPhone":return t+"edgechromium.svg";case"Edge":return t+"edge.svg";case"Internet Explorer":return t+"msie.svg";default:return t+"html5.svg"}}(e.Name||e.DeviceName);default:return t+"other.svg"}},getLibraryIcon:function(e){switch(e){case"movies":return"video_library";case"music":return"library_music";case"photos":case"homevideos":return"photo_library";case"livetv":return"live_tv";case"tvshows":return"tv";case"trailers":return"local_movies";case"musicvideos":return"music_video";case"books":return"library_books";case"channels":return"videocam";case"playlists":return"view_list";default:return"folder"}}}}}]);