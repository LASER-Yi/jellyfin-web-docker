"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[23717,66884,75844,96084],{1177:function(e,t,r){r(84734),r(44962),r(78557),r(96054),r(90076),r(83994),r(82367),r(69177);var i=r(65210),n=r(22832),a=r(38490),s=r(39738),l=r(76542),o=r(46782),c=r(34789),d=r(36300),u=r(8566),m=r(9164),h=r(67430),f=r(10736),y=r(44797),v=Object.create(HTMLDivElement.prototype);function p(e){var t=this,r=t.multiSelect;!1!==(null==r?void 0:r.onContainerClick.call(t,e))&&n.Ay.onClick.call(t,e)}function S(e){return e.preventDefault(),e.stopPropagation(),!1}function g(e){var t=e.target,r=d.Ay.parentWithAttribute(t,"data-id");if(null!=r&&r.getAttribute("data-serverid"))return a.default.handleCommand("menu",{sourceElement:r}),e.preventDefault(),e.stopPropagation(),!1}function b(e,t,i){var n=this;Promise.all([r.e(45642),r.e(24468),r.e(66884)]).then(r.bind(r,24468)).then((function(e){e.onUserDataChanged(i,n)}));var a=T(n);-1===a.indexOf("markfavorite")&&-1===a.indexOf("markplayed")||n.notifyRefreshNeeded()}function T(e){var t=e.getAttribute("data-monitor");return t?t.split(","):[]}function I(e,t,i){var n=this;if(-1===T(n).indexOf("timers")){var a=i.ProgramId,s=i.Id;Promise.all([r.e(45642),r.e(24468),r.e(66884)]).then(r.bind(r,24468)).then((function(e){e.onTimerCreated(a,s,n)}))}else n.notifyRefreshNeeded()}function A(){-1!==T(this).indexOf("seriestimers")&&this.notifyRefreshNeeded()}function L(e,t,i){var n=this;-1===T(n).indexOf("timers")?Promise.all([r.e(45642),r.e(24468),r.e(66884)]).then(r.bind(r,24468)).then((function(e){e.onTimerCancelled(i.Id,n)})):n.notifyRefreshNeeded()}function C(e,t,i){var n=this;-1===T(n).indexOf("seriestimers")?Promise.all([r.e(45642),r.e(24468),r.e(66884)]).then(r.bind(r,24468)).then((function(e){e.onSeriesTimerCancelled(i.Id,n)})):n.notifyRefreshNeeded()}function P(e,t,r){var i=this,n=T(i);if(-1===n.indexOf("seriestimers")&&-1===n.indexOf("timers")){var a=r.ItemsAdded||[],s=r.ItemsRemoved||[];if(a.length||s.length){var l=i.getAttribute("data-parentid");if(l){var o=r.FoldersAddedTo||[],c=r.FoldersRemovedFrom||[],d=r.CollectionFolders||[];if(-1===o.indexOf(l)&&-1===c.indexOf(l)&&-1===d.indexOf(l))return}i.notifyRefreshNeeded()}}}function M(e,t){var r,i=this,n=t.state,a=T(i);if(n.NowPlayingItem&&"Video"===n.NowPlayingItem.MediaType){if(-1!==a.indexOf("videoplayback"))return void i.notifyRefreshNeeded(!0)}else if("Audio"===(null===(r=n.NowPlayingItem)||void 0===r?void 0:r.MediaType)&&-1!==a.indexOf("audioplayback"))return void i.notifyRefreshNeeded(!0)}function w(e,t,r,i){var n=r.bind(e);i=i||f.default,y.A.on(i,t,n),e["event_"+t]=n}function q(e,t,r){var i=e["event_"+t];i&&(r=r||f.default,y.A.off(r,t,i),e["event_"+t]=null)}function x(e,t){e.refreshInterval&&(clearInterval(e.refreshInterval),e.refreshInterval=null,t||(e.refreshIntervalEndTime=null))}function D(e,t){x(e),t||(t=parseInt(e.getAttribute("data-refreshinterval")||"0",10)),t&&(e.refreshInterval=setInterval(e.notifyRefreshNeeded.bind(e),t),e.refreshIntervalEndTime=(new Date).getTime()+t)}function k(e){var t=e.Items||e,r=this.parentContainer;r&&(t.length?r.classList.remove("hide"):r.classList.add("hide"));var i,n,a=document.activeElement;this.contains(a)&&(n=!0,i=a.getAttribute("data-id")),this.innerHTML=this.getItemsHtml(t),l.default.lazyChildren(this),n&&function(e,t){if(t){var r=e.querySelector('[data-id="'+t+'"]');if(r)try{return void m.A.focus(r)}catch(e){console.error(e)}}m.A.autoFocus(e)}(this,i),D(this),this.afterRefresh&&this.afterRefresh(e)}v.enableMultiSelect=function(e){var t=this.multiSelect;if(e){if(!t){var i=this;r.e(35308).then(r.bind(r,35308)).then((function(e){var t=e.default;i.multiSelect=new t({container:i,bindOnClick:!1})}))}}else t&&(t.destroy(),this.multiSelect=null)},v.enableDragReordering=function(e){var t=this.sortable;if(e){if(!t){var r=this;r.sortable=new i.Ay(r,{draggable:".listItem",handle:".listViewDragHandle",onEnd:function(e){return function(e,t){var r=e.item,i=e.newIndex,n=r.getAttribute("data-playlistitemid"),a=r.getAttribute("data-playlistid");if(a){var s=r.getAttribute("data-serverid"),l=h.tF.getApiClient(s);u.Ay.show(),l.ajax({url:l.getUrl("Playlists/"+a+"/Items/"+n+"/Move/"+i),type:"POST"}).then((function(){u.Ay.hide()}),(function(){u.Ay.hide(),t.refreshItems()}))}else{var o=e.oldIndex;r.dispatchEvent(new CustomEvent("itemdrop",{detail:{oldIndex:o,newIndex:i,playlistItemId:n},bubbles:!0,cancelable:!1}))}}(e,r)}})}}else t&&(t.destroy(),this.sortable=null)},v.createdCallback=function(){this.classList.add("itemsContainer")},v.attachedCallback=function(){this.addEventListener("click",p),c.A.touch?this.addEventListener("contextmenu",S):"false"!==this.getAttribute("data-contextmenu")&&this.addEventListener("contextmenu",g),(o.A.desktop||o.A.mobile&&"false"!==this.getAttribute("data-multiselect"))&&this.enableMultiSelect(!0),o.A.tv&&this.classList.add("itemsContainer-tv"),n.Ay.on(this,{click:!1}),w(this,"UserDataChanged",b),w(this,"TimerCreated",I),w(this,"SeriesTimerCreated",A),w(this,"TimerCancelled",L),w(this,"SeriesTimerCancelled",C),w(this,"LibraryChanged",P),w(this,"playbackstop",M,s.f),"true"===this.getAttribute("data-dragreorder")&&this.enableDragReordering(!0)},v.detachedCallback=function(){x(this),this.enableMultiSelect(!1),this.enableDragReordering(!1),this.removeEventListener("click",p),this.removeEventListener("contextmenu",g),this.removeEventListener("contextmenu",S),n.Ay.off(this,{click:!1}),q(this,"UserDataChanged"),q(this,"TimerCreated"),q(this,"SeriesTimerCreated"),q(this,"TimerCancelled"),q(this,"SeriesTimerCancelled"),q(this,"LibraryChanged"),q(this,"playbackstop",s.f),this.fetchData=null,this.getItemsHtml=null,this.parentContainer=null},v.pause=function(){x(this,!0),this.paused=!0},v.resume=function(e){this.paused=!1;var t=this.refreshIntervalEndTime;if(t){var r=t-(new Date).getTime();r>0&&!this.needsRefresh?D(this,r):(this.needsRefresh=!0,this.refreshIntervalEndTime=null)}return this.needsRefresh||null!=e&&e.refresh?this.refreshItems():Promise.resolve()},v.refreshItems=function(){return this.fetchData?this.paused?(this.needsRefresh=!0,Promise.resolve()):(this.needsRefresh=!1,this.fetchData().then(k.bind(this))):Promise.resolve()},v.notifyRefreshNeeded=function(e){if(this.paused)this.needsRefresh=!0;else{var t=this.refreshTimeout;t&&clearTimeout(t),!0===e?this.refreshItems():this.refreshTimeout=setTimeout(this.refreshItems.bind(this),1e4)}},document.registerElement("emby-itemscontainer",{prototype:v,extends:"div"})},23717:function(e,t,r){r.r(t),r.d(t,{download:function(){return l}}),r(86584),r(78557),r(23630);var i=r(34789);function n(e){var t=document.createElement("a");t.download="",t.href=e,t.click()}function a(e){if(!e)throw new Error("`urls` required");if(void 0===document.createElement("a").download||i.A.iOS)return function(e){var t=0;!function r(){var i=document.createElement("iframe");i.style.display="none",i.src=e[t++],document.documentElement.appendChild(i);var n=setInterval((function(){"complete"!==i.contentWindow.document.readyState&&"interactive"!==i.contentWindow.document.readyState||(clearInterval(n),setTimeout((function(){i.parentNode.removeChild(i)}),1e3),t<e.length&&r())}),100)}()}(e);var t=0;e.forEach((function(e){setTimeout(n.bind(null,e),100*++t)}))}var s=r(13615);function l(e){s.A.downloadFiles(e)||a(e.map((function(e){return e.url})))}},40694:function(e,t,r){function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}r.d(t,{A:function(){return i}})},41765:function(e,t,r){r(44962),r(78557),r(90076),r(83994),r(82367);var i=r(4113),n=r(36300),a=r(46782),s=r(38490),l=r(9164),o=r(34789),c=(r(69177),Object.create(HTMLDivElement.prototype));function d(e){var t=e.detail.command;"end"===t?(l.A.focusLast(this,"."+this.getAttribute("data-navcommands")),e.preventDefault(),e.stopPropagation()):"pageup"===t?(l.A.moveFocus(e.target,this,"."+this.getAttribute("data-navcommands"),-12),e.preventDefault(),e.stopPropagation()):"pagedown"===t&&(l.A.moveFocus(e.target,this,"."+this.getAttribute("data-navcommands"),12),e.preventDefault(),e.stopPropagation())}c.createdCallback=function(){this.classList.add("emby-scroller")},c.scrollToBeginning=function(){this.scroller&&this.scroller.slideTo(0,!0)},c.toStart=function(e,t){this.scroller&&this.scroller.toStart(e,t)},c.toCenter=function(e,t){this.scroller&&this.scroller.toCenter(e,t)},c.scrollToPosition=function(e,t){this.scroller&&this.scroller.slideTo(e,t)},c.getScrollPosition=function(){if(this.scroller)return this.scroller.getScrollPosition()},c.getScrollSize=function(){if(this.scroller)return this.scroller.getScrollSize()},c.getScrollEventName=function(){if(this.scroller)return this.scroller.getScrollEventName()},c.getScrollSlider=function(){if(this.scroller)return this.scroller.getScrollSlider()},c.addScrollEventListener=function(e,t){this.scroller&&n.Ay.addEventListener(this.scroller.getScrollFrame(),this.scroller.getScrollEventName(),e,t)},c.removeScrollEventListener=function(e,t){this.scroller&&n.Ay.removeEventListener(this.scroller.getScrollFrame(),this.scroller.getScrollEventName(),e,t)},c.attachedCallback=function(){this.getAttribute("data-navcommands")&&s.default.on(this,d);var e="false"!==this.getAttribute("data-horizontal"),t=this.querySelector(".scrollSlider");e&&(t.style["white-space"]="nowrap");var c,u,m=a.A.desktop&&e&&"false"!==this.getAttribute("data-scrollbuttons"),h={horizontal:e,mouseDragging:1,mouseWheel:"false"!==this.getAttribute("data-mousewheel"),touchDragging:1,slidee:t,scrollBy:200,speed:e?270:240,elasticBounds:1,dragHandle:1,autoImmediate:!0,skipSlideToWhenVisible:"true"===this.getAttribute("data-skipfocuswhenvisible"),dispatchScrollEvent:m||"true"===this.getAttribute("data-scrollevent"),hideScrollbar:m||"true"===this.getAttribute("data-hidescrollbar"),allowNativeSmoothScroll:"true"===this.getAttribute("data-allownativesmoothscroll")&&!m,allowNativeScroll:!m,forceHideScrollbars:m,requireAnimation:m&&o.A.edge};this.scroller=new i.A(this,h),this.scroller.init(),this.scroller.reload(),a.A.tv&&this.getAttribute("data-centerfocus")&&(c=this.scroller,n.Ay.addEventListener(this,"focus",(function(e){var t=l.A.focusableParent(e.target);t&&c.toCenter(t)}),{capture:!0,passive:!0})),m&&(u=this,r.e(49275).then(r.bind(r,49275)).then((function(){u.insertAdjacentHTML("beforebegin",'<div is="emby-scrollbuttons" class="emby-scrollbuttons padded-right"></div>')})))},c.pause=function(){var e=this.headroom;e&&e.pause()},c.resume=function(){var e=this.headroom;e&&e.resume()},c.detachedCallback=function(){this.getAttribute("data-navcommands")&&s.default.off(this,d);var e=this.headroom;e&&(e.destroy(),this.headroom=null);var t=this.scroller;t&&(t.destroy(),this.scroller=null)},document.registerElement("emby-scroller",{prototype:c,extends:"div"})},68866:function(e,t,r){r.r(t),r.d(t,{default:function(){return Ce}}),r(29305),r(32733),r(84701),r(81678),r(24776),r(14382),r(69892),r(76281),r(84734),r(44962),r(86584),r(20518),r(89336),r(26448),r(4754),r(94),r(33087),r(36947),r(36457),r(88908),r(83810),r(78557),r(90076),r(95021),r(73687),r(92745),r(99425),r(83994),r(93062),r(23630),r(82367);var i=r(11444),n=r(79096),a=r(71857),s=r(72226),l=r(31234),o=r.n(l),c=r(22696),d=r.n(c),u=r(47593),m=r(98526),h=r(22622),f=r(89166),y=r(24468),v=r(76942),p=function(){return p=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},p.apply(this,arguments)},S=r(47602),g=r(76542),b=r(55802),T=r(23648),I=r(82180),A=r(46782),L=r(6940),C=r(8566),P=r(39738),M=r(70267),w=r(22832),q=r(97339),x=r(33077),D=r(5898),k=r(67430),E=r(34789),H=r(98320),N=r(36300),R=r(23717),B=r(73233),O=r(82885),U=r(89100),F=r(44797),j=r(97067),V=r(75384);function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return(t=function(e){var t=function(e){if("object"!=z(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==z(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a,s,l=[],o=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;o=!1}else for(;!(o=(i=a.call(r)).done)&&(l.push(i.value),l.length!==t);o=!0);}catch(e){c=!0,n=e}finally{try{if(!o&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw n}}return l}}(e,t)||K(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=K(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function K(e,t){if(e){if("string"==typeof e)return J(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}r(1177),r(77157),r(10353),r(38965),r(15605),r(41765),r(63001);var Q=[i.D.MusicAlbum,i.D.Playlist,i.D.Season,i.D.Series];function $(e){Promise.resolve().then(r.bind(r,84069)).then((function(t){t.default.autoFocus(e)}))}function Z(e,t){var r=t.id;if(r)return e.getItem(e.getCurrentUserId(),r);if(t.seriesTimerId)return e.getLiveTvSeriesTimer(t.seriesTimerId);if(t.genre)return e.getGenre(t.genre,e.getCurrentUserId());if(t.musicgenre)return e.getMusicGenre(t.musicgenre,e.getCurrentUserId());if(t.musicartist)return e.getArtist(t.musicartist,e.getCurrentUserId());throw new Error("Invalid request")}function ee(e,t,r){var i,n=X(e.querySelectorAll("."+t));try{for(n.s();!(i=n.n()).done;){var a=i.value;r?a.classList.remove("hide"):a.classList.add("hide")}}catch(e){n.e(e)}finally{n.f()}}function te(e,t,r){return{item:e,open:!1,play:!1,playAllFromHere:!1,queueAllFromHere:!1,positionTo:r,cancelTimer:!1,record:!1,deleteItem:!0===e.CanDelete,shuffle:!1,instantMix:!1,user:t,share:!0}}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";return L.A.getListViewHtml({items:e,enableUserDataButtons:!1,image:!0,imageSource:"channel",showProgramDateTime:!0,showChannel:!1,mediaInfo:!0,runtime:!1,action:t,moreButton:!1,recordButton:!1})}function ie(e,t){var r=e.querySelector(".selectSource").value;return t.filter((function(e){return e.Id===r}))[0]}function ne(e,t,r,i){var n=e.querySelector(".selectSource");if(!r.MediaSources||!T.Ay.supportsMediaSourceSelection(r)||-1===P.f.getSupportedCommands().indexOf("PlayMediaSource")||!P.f.canPlay(r))return e.querySelector(".trackSelections").classList.add("hide"),n.innerHTML="",e.querySelector(".selectVideo").innerHTML="",e.querySelector(".selectAudio").innerHTML="",void(e.querySelector(".selectSubtitles").innerHTML="");var a=r.MediaSources;t._currentPlaybackMediaSources=a,e.querySelector(".trackSelections").classList.remove("hide"),n.setLabel(D.Ay.translate("LabelVersion"));var s=n.value,l=a[0].Id;n.innerHTML=a.map((function(e){var t=e.Id===l?" selected":"";return'<option value="'+e.Id+'"'+t+">"+d()(e.Name)+"</option>"})).join(""),a.length>1?e.querySelector(".selectSourceContainer").classList.remove("hide"):e.querySelector(".selectSourceContainer").classList.add("hide"),(n.value!==s||i)&&(ae(e,a),se(e,a),le(e,a))}function ae(e,t){var r=ie(e,t).MediaStreams.filter((function(e){return"Video"===e.Type})),i=e.querySelector(".selectVideo");i.setLabel(D.Ay.translate("Video"));var n=r.length?r[0].Index:-1;i.innerHTML=r.map((function(e){var t=e.Index===n?" selected":"",r=[],i=I.Ay.getResolutionText(e);return i&&r.push(i),e.Codec&&r.push(e.Codec.toUpperCase()),'<option value="'+e.Index+'" '+t+">"+(e.DisplayTitle||r.join(" "))+"</option>"})).join(""),i.setAttribute("disabled","disabled"),r.length?e.querySelector(".selectVideoContainer").classList.remove("hide"):e.querySelector(".selectVideoContainer").classList.add("hide")}function se(e,t){var r=ie(e,t),i=r.MediaStreams.filter((function(e){return"Audio"===e.Type}));i.sort(T.Ay.sortTracks);var n=e.querySelector(".selectAudio");n.setLabel(D.Ay.translate("Audio"));var a=r.DefaultAudioStreamIndex;n.innerHTML=i.map((function(e){var t=e.Index===a?" selected":"";return'<option value="'+e.Index+'" '+t+">"+e.DisplayTitle+"</option>"})).join(""),i.length>1?n.removeAttribute("disabled"):n.setAttribute("disabled","disabled"),i.length?e.querySelector(".selectAudioContainer").classList.remove("hide"):e.querySelector(".selectAudioContainer").classList.add("hide")}function le(e,t){var r=ie(e,t),i=r.MediaStreams.filter((function(e){return"Subtitle"===e.Type}));i.sort(T.Ay.sortTracks);var n=e.querySelector(".selectSubtitles");n.setLabel(D.Ay.translate("Subtitles"));var a=null==r.DefaultSubtitleStreamIndex?-1:r.DefaultSubtitleStreamIndex,s=-1===a?" selected":"";n.innerHTML='<option value="-1">'+D.Ay.translate("Off")+"</option>"+i.map((function(e){return s=e.Index===a?" selected":"",'<option value="'+e.Index+'" '+s+">"+e.DisplayTitle+"</option>"})).join(""),i.length>0?n.removeAttribute("disabled"):n.setAttribute("disabled","disabled"),i.length?e.querySelector(".selectSubtitlesContainer").classList.remove("hide"):e.querySelector(".selectSubtitlesContainer").classList.add("hide")}function oe(e,t){var r=!1;if("Program"==t.Type){var i=new Date;i>=H.Ay.parseISO8601Date(t.StartDate,!0)&&i<H.Ay.parseISO8601Date(t.EndDate,!0)?(ee(e,"btnPlay",!0),r=!0):ee(e,"btnPlay"),ee(e,"btnReplay"),ee(e,"btnInstantMix"),ee(e,"btnShuffle")}else if(P.f.canPlay(t)){ee(e,"btnPlay",!0),ee(e,"btnInstantMix",-1!==["Audio","MusicAlbum","MusicGenre","MusicArtist"].indexOf(t.Type)),ee(e,"btnShuffle",t.IsFolder||-1!==["MusicAlbum","MusicGenre","MusicArtist"].indexOf(t.Type)),r=!0;var n=t.UserData&&t.UserData.PlaybackPositionTicks>0;ee(e,"btnReplay",n);var a,s=X(e.querySelectorAll(".btnPlay"));try{for(s.s();!(a=s.n()).done;){a.value.title=n?D.Ay.translate("ButtonResume"):D.Ay.translate("Play")}}catch(e){s.e(e)}finally{s.f()}}else ee(e,"btnPlay"),ee(e,"btnReplay"),ee(e,"btnInstantMix"),ee(e,"btnShuffle");return r}function ce(e,t,r){for(var i=[],n=e.length,a=0;a<Math.min(n,10);a++){var s=e[a],l=M.appRouter.getRouteUrl(s,{context:r,itemType:"MusicArtist",serverId:t});i.push('<a style="color:inherit;" class="button-link" is="emby-linkbutton" href="'+l+'">'+d()(s.Name)+"</a>")}var o=i.join(" / ");return n>10&&(o=D.Ay.translate("AndOtherArtists",o,n-10)),o}function de(e,t){var r;(t.LocalTrailerCount||null!==(r=t.RemoteTrailers)&&void 0!==r&&r.length)&&-1!==P.f.getSupportedCommands().indexOf("PlayTrailers")?ee(e,"btnPlayTrailer",!0):ee(e,"btnPlayTrailer")}function ue(e,t){if(!A.A.mobile&&N.Ay.getWindowSize().innerWidth>=1e3){var r=!A.A.tv&&O.detailsBanner();e.classList.toggle("noBackdropTransparency",r&&!O.enableBackdrops()),(0,f.C9)([t],null,r)}else(0,f.gJ)()}function me(e,t,n,a,l){var o=k.tF.getApiClient(a.ServerId);B.default.setTitle(""),function(e,t,r){e.querySelectorAll(".detailImageContainer").forEach((function(e){!function(e,t,r,n){var a=function(e,t,r){var n=v.G8.Square;t.PrimaryImageAspectRatio&&(n=t.PrimaryImageAspectRatio>=3?v.G8.Banner:t.PrimaryImageAspectRatio>=1.33?v.G8.Backdrop:t.PrimaryImageAspectRatio>.8?v.G8.Square:v.G8.Portrait);var a=(0,y.getCardImageUrl)(t,e,r,n);if(!a)return"";var s=a.blurhash,l=a.imgUrl,o="";l&&t.Type!==i.D.TvChannel&&(o=(0,y.getDefaultText)(t,p({defaultCardImageIcon:"folder"},r)));var c="";return s&&s.length>0&&(c='data-blurhash="'.concat(s,'"')),'<div class="card '.concat(n,'Card">\n    <div class="cardBox">\n        <div class="cardScalable">\n            <div class="cardPadder cardPadder-').concat(n,'">\n                ').concat(o,'\n            </div>\n            <div\n                class="cardImageContainer coveredImage cardContent lazy"\n                style="cursor: default;"\n                data-src="').concat(l,'"\n                ').concat(c,"\n            ></div>\n        </div>\n    </div>\n</div>")}(e,r,{width:.25*N.Ay.getWindowSize().innerWidth});t.innerHTML=a,n.lazyChildren(t)}(r,e,t,g.default)}))}(t,a,o),function(e,t,r){var i=e.querySelector(".detailLogo"),n=function(e,t,r){var i;return(r=r||{}).type="Logo",null!==(i=e.ImageTags)&&void 0!==i&&i.Logo?(r.tag=e.ImageTags.Logo,t.getScaledImageUrl(e.Id,r)):e.ParentLogoImageTag?(r.tag=e.ParentLogoImageTag,t.getScaledImageUrl(e.ParentLogoItemId,r)):null}(t,r,{});n?(i.classList.remove("hide"),g.default.setLazyImage(i,n)):i.classList.add("hide")}(t,a,o),A.A.mobile&&function(e,t,r){if(!O.detailsBanner())return!1;if("Person"===t.Type||"Book"===t.Type)return!1;var i=e.querySelector("#itemBackdrop"),n=(0,j.I)(r,t,{maxWidth:N.Ay.getScreenWidth()},!1);n?g.default.lazyImage(i,n):i.style.backgroundImage=""}(t,a,o),ue(t,a),function(e,t,r){var i,n=[],a=!1;e.AlbumArtists?(n.push(ce(e.AlbumArtists,e.ServerId,r)),a=!0):null!==(i=e.ArtistItems)&&void 0!==i&&i.length&&"MusicVideo"===e.Type?(n.push(ce(e.ArtistItems,e.ServerId,r)),a=!0):e.SeriesName&&"Episode"===e.Type?n.push('<a style="color:inherit;" class="button-link itemAction" is="emby-linkbutton" href="#" data-action="'.concat(x.s.Link,'" data-id="').concat(e.SeriesId,'" data-serverid="').concat(e.ServerId,'" data-type="Series" data-isfolder="true">').concat(d()(e.SeriesName),"</a>")):(e.IsSeries||e.EpisodeTitle)&&n.push(d()(e.Name)),e.SeriesName&&"Season"===e.Type?n.push('<a style="color:inherit;" class="button-link itemAction" is="emby-linkbutton" href="#" data-action="'.concat(x.s.Link,'" data-id="').concat(e.SeriesId,'" data-serverid="').concat(e.ServerId,'" data-type="Series" data-isfolder="true">').concat(d()(e.SeriesName),"</a>")):null!=e.ParentIndexNumber&&"Episode"===e.Type?n.push('<a style="color:inherit;" class="button-link itemAction" is="emby-linkbutton" href="#" data-action="'.concat(x.s.Link,'" data-id="').concat(e.SeasonId,'" data-serverid="').concat(e.ServerId,'" data-type="Season" data-isfolder="true">').concat(d()(e.SeasonName),"</a>")):null!=e.ParentIndexNumber&&e.IsSeries?n.push(d()(e.SeasonName||"S"+e.ParentIndexNumber)):e.Album&&e.AlbumId&&("MusicVideo"===e.Type||"Audio"===e.Type)?n.push('<a style="color:inherit;" class="button-link itemAction" is="emby-linkbutton" href="#" data-action="'.concat(x.s.Link,'" data-id="').concat(e.AlbumId,'" data-serverid="').concat(e.ServerId,'" data-type="MusicAlbum" data-isfolder="true">').concat(d()(e.Album),"</a>")):e.Album&&n.push(d()(e.Album));var s="",l=n[0],o=n[1];n.length&&(s=a?A.A.mobile?'<h3 class="parentName musicParentName">'+n.join("</br>")+"</h3>":'<h3 class="parentName musicParentName focuscontainer-x">'+n.join(" - ")+"</h3>":'<h1 class="parentName focuscontainer-x"><bdi>'+l+"</bdi></h1>");var c=d()(T.Ay.getDisplayName(e,{includeParentInfo:!1}));s&&!a?s+=o?'<h3 class="itemName infoText subtitle focuscontainer-x"><bdi>'+o+" - "+c+"</bdi></h3>":'<h3 class="itemName infoText subtitle"><bdi>'+c+"</bdi></h3>":s=e.OriginalTitle&&e.OriginalTitle!=e.Name?'<h1 class="itemName infoText parentNameLast withOriginalTitle"><bdi>'+c+"</bdi></h1>"+s:'<h1 class="itemName infoText parentNameLast"><bdi>'+c+"</bdi></h1>"+s,e.OriginalTitle&&e.OriginalTitle!=e.Name&&(s+='<h4 class="itemName infoText originalTitle">'+d()(e.OriginalTitle)+"</h4>"),t.innerHTML=s,s.length?t.classList.remove("hide"):t.classList.add("hide")}(a,t.querySelector(".nameContainer"),n.context),ve(t,a,o,n.context),ne(t,e,a),function(e,t,i,n){if("SeriesTimer"===t.Type){if(n.Policy.EnableLiveTvManagement)return r.e(17443).then(r.bind(r,72681)).then((function(r){r.default.embed(t,i.serverId(),{context:e.querySelector(".seriesRecordingEditor")})})),e.querySelector("#seriesTimerScheduleSection").classList.remove("hide"),ee(e,"btnCancelSeriesTimer",!0),void function(e,t,r){t.getLiveTvTimers({UserId:t.getCurrentUserId(),ImageTypeLimit:1,SortBy:"StartDate",EnableTotalRecordCount:!1,EnableUserData:!1,SeriesTimerId:r,Fields:"ChannelInfo,ChannelImage"}).then((function(t){t.Items.length&&t.Items[0].SeriesTimerId!=r&&(t.Items=[]);var i=re(t.Items),n=e.querySelector("#seriesTimerSchedule");n.innerHTML=i,g.default.lazyChildren(n)}))}(e,i,t.Id);e.querySelector("#seriesTimerScheduleSection").classList.add("hide"),ee(e,"btnCancelSeriesTimer")}else ee(e,"btnCancelSeriesTimer")}(t,a,o,l),function(e,t,r,i){"Recording"===t.Type&&i.Policy.EnableLiveTvManagement&&t.TimerId&&"InProgress"===t.Status?ee(e,"btnCancelTimer",!0):ee(e,"btnCancelTimer")}(t,a,0,l),he(t,a,0,n.context,l);var c=oe(t,a);de(t,a),"Program"!==a.Type||c?ee(t,"mainDetailButtons",!0):ee(t,"mainDetailButtons"),function(e,t,i,n){if(!e.currentRecordingFields){var a=t.querySelector(".recordingFields");"Program"==i.Type&&n.Policy.EnableLiveTvManagement?r.e(5996).then(r.bind(r,5996)).then((function(t){var r=t.default;e.currentRecordingFields=new r({parent:a,programId:i.Id,serverId:i.ServerId}),a.classList.remove("hide")})):(a.classList.add("hide"),a.innerHTML="")}}(e,t,a,l);var u=(a.MediaSources||[]).filter((function(e){return"Grouping"==e.Type}));l.Policy.IsAdministrator&&u.length?t.querySelector(".btnSplitVersions").classList.remove("hide"):t.querySelector(".btnSplitVersions").classList.add("hide"),b.default.getCommands(te(a,l)).then((function(e){e.length?ee(t,"btnMoreCommands",!0):ee(t,"btnMoreCommands")}));var m=t.querySelector("#itemBirthday");if("Person"==a.Type&&a.PremiereDate)try{var f=H.Ay.parseISO8601Date(a.PremiereDate,!0),S=(0,s.A)({start:f,end:Date.now()});m.classList.remove("hide"),a.EndDate?m.innerHTML=D.Ay.translate("BirthDateValue",f.toLocaleDateString()):m.innerHTML="".concat(D.Ay.translate("BirthDateValue",f.toLocaleDateString())," ").concat(D.Ay.translate("AgeValue",S.years))}catch(e){console.error(e),m.classList.add("hide")}else m.classList.add("hide");var I=t.querySelector("#itemDeathDate");if("Person"==a.Type&&a.EndDate)try{var L=H.Ay.parseISO8601Date(a.EndDate,!0);if(I.classList.remove("hide"),a.PremiereDate){var P=H.Ay.parseISO8601Date(a.PremiereDate,!0),M=(0,s.A)({start:P,end:L});I.innerHTML="".concat(D.Ay.translate("DeathDateValue",L.toLocaleDateString())," ").concat(D.Ay.translate("AgeValue",M.years))}else I.innerHTML=D.Ay.translate("DeathDateValue",L.toLocaleDateString())}catch(e){console.error(e),I.classList.add("hide")}else I.classList.add("hide");var w=t.querySelector("#itemBirthLocation");if("Person"==a.Type&&a.ProductionLocations&&a.ProductionLocations.length){var E=a.ProductionLocations[0];E=!A.A.tv&&h.g.supports(q.Y.ExternalLinks)?'<a is="emby-linkbutton" class="button-link textlink" target="_blank" href="https://www.openstreetmap.org/search?query='.concat(encodeURIComponent(E),'">').concat(d()(E),"</a>"):d()(E),w.classList.remove("hide"),w.innerHTML=D.Ay.translate("BirthPlaceValue",E)}else w.classList.add("hide");!function(e,t){"Audio"==t.MediaType||"MusicAlbum"==t.Type||"Book"==t.MediaType||"Photo"==t.MediaType?e.querySelector("#peopleHeader").innerHTML=D.Ay.translate("People"):e.querySelector("#peopleHeader").innerHTML=D.Ay.translate("HeaderCastAndCrew")}(t,a),C.Ay.hide(),"Book"===a.Type&&a.CanDownload&&h.g.supports(q.Y.FileDownload)&&ee(t,"btnDownload",!0),$(t)}function he(e,t,a,s,l){e.querySelector(".collectionItems").innerHTML="","Playlist"==t.Type?(e.querySelector("#listChildrenCollapsible").classList.remove("hide"),e.querySelector("#childrenCollapsible").classList.add("hide"),function(e,t){r.e(39469).then(r.bind(r,39469)).then((function(r){r.default.render(e,t)}))}(e,t)):"Studio"==t.Type||"Person"==t.Type||"Genre"==t.Type||"MusicGenre"==t.Type||"MusicArtist"==t.Type?(e.querySelector("#listChildrenCollapsible").classList.remove("hide"),e.querySelector("#childrenCollapsible").classList.add("hide"),function(e,t){r.e(74959).then(r.bind(r,74959)).then((function(r){r.default.renderItems(e,t)}))}(e,t)):t.IsFolder?("BoxSet"==t.Type&&(e.querySelector("#listChildrenCollapsible").classList.add("hide"),e.querySelector("#childrenCollapsible").classList.add("hide")),pe(e,t)):(e.querySelector("#listChildrenCollapsible").classList.add("hide"),e.querySelector("#childrenCollapsible").classList.add("hide")),"Series"==t.Type?(function(e,t){var r=k.tF.getApiClient(t.ServerId);r.getLiveTvPrograms({UserId:r.getCurrentUserId(),ImageTypeLimit:1,HasAired:!1,SortBy:"StartDate",EnableTotalRecordCount:!1,Limit:50,EnableUserData:!1,Fields:"ChannelInfo,ChannelImage",LibrarySeriesId:t.Id}).then((function(t){t.Items.length?e.querySelector("#seriesScheduleSection").classList.remove("hide"):e.querySelector("#seriesScheduleSection").classList.add("hide");var r=re(t.Items,"programdialog"),i=e.querySelector("#seriesScheduleList");i.innerHTML=r,g.default.lazyChildren(i),C.Ay.hide()}))}(e,t),function(e,t,r){var i=e.querySelector(".nextUpSection");"Series"==t.Type?k.tF.getApiClient(t.ServerId).getNextUpEpisodes({SeriesId:t.Id,UserId:r.Id,Fields:"MediaSourceCount"}).then((function(e){e.Items.length?i.classList.remove("hide"):i.classList.add("hide");var r=y.default.getCardsHtml({items:e.Items,shape:"overflowBackdrop",showTitle:!0,displayAsSpecial:"Season"==t.Type&&t.IndexNumber,overlayText:!1,centerText:!0,overlayPlayButton:!0}),n=i.querySelector(".nextUpItems");n.innerHTML=r,g.default.lazyChildren(n)})):i.classList.add("hide")}(e,t,l)):e.querySelector(".nextUpSection").classList.add("hide"),function(e,t){var i=t.Chapters||[];if(i.length&&!i[0].ImageTag&&(i=[]),i.length){e.querySelector("#scenesCollapsible").classList.remove("hide");var n=e.querySelector("#scenesContent");r.e(12519).then(r.bind(r,12519)).then((function(e){e.default.buildChapterCards(t,i,{itemsContainer:n,backdropShape:"overflowBackdrop",squareShape:"overflowSquare",imageBlurhashes:t.ImageBlurHashes})}))}else e.querySelector("#scenesCollapsible").classList.add("hide")}(e,t),t.SpecialFeatureCount>0?(e.querySelector("#specialsCollapsible").classList.remove("hide"),function(e,t,r){k.tF.getApiClient(t.ServerId).getSpecialFeatures(r.Id,t.Id).then((function(t){var r=e.querySelector("#specialsContent");r.innerHTML=be(t),g.default.lazyChildren(r)}))}(e,t,l)):e.querySelector("#specialsCollapsible").classList.add("hide");var o=[],c=[];(t.People||[]).forEach((function(e){e.Type===n.S.GuestStar?c.push(e):o.push(e)})),Te(e,t,o),Ie(e,t,c),t.PartCount&&t.PartCount>1?(e.querySelector("#additionalPartsCollapsible").classList.remove("hide"),function(e,t,r){k.tF.getApiClient(t.ServerId).getAdditionalVideoParts(r.Id,t.Id).then((function(t){if(t.Items.length){e.querySelector("#additionalPartsCollapsible").classList.remove("hide");var r=e.querySelector("#additionalPartsContent");r.innerHTML=be(t.Items),g.default.lazyChildren(r)}else e.querySelector("#additionalPartsCollapsible").classList.add("hide")}))}(e,t,l)):e.querySelector("#additionalPartsCollapsible").classList.add("hide"),t.Type==i.D.MusicAlbum?function(e,t,r){var i={SortBy:"SortName",SortOrder:"Ascending",IncludeItemTypes:"MusicVideo",Recursive:!0,Fields:"PrimaryImageAspectRatio,CanDelete,MediaSourceCount",AlbumIds:t.Id};k.tF.getApiClient(t.ServerId).getItems(r.Id,i).then((function(t){if(t.Items.length){e.querySelector("#musicVideosCollapsible").classList.remove("hide");var r=e.querySelector("#musicVideosContent");r.innerHTML=be(t.Items),g.default.lazyChildren(r)}else e.querySelector("#musicVideosCollapsible").classList.add("hide")}))}(e,t,l):e.querySelector("#musicVideosCollapsible").classList.add("hide")}function fe(e,t){var r=t.target,i="detail-clamp-text";e.classList.contains(i)?(e.classList.remove(i),r.innerHTML=D.Ay.translate("ShowLess")):(e.classList.add(i),r.innerHTML=D.Ay.translate("ShowMore"))}function ye(e,t){var r,i=X(e.querySelectorAll(".itemMiscInfo-primary"));try{for(i.s();!(r=i.n()).done;){var n=r.value;I.Ay.fillPrimaryMediaInfo(n,t,{interactive:!0,episodeTitle:!1,subtitles:!1}),n.innerHTML&&"SeriesTimer"!==t.Type?n.classList.remove("hide"):n.classList.add("hide")}}catch(e){i.e(e)}finally{i.f()}var a,s=X(e.querySelectorAll(".itemMiscInfo-secondary"));try{for(s.s();!(a=s.n()).done;){var l=a.value;I.Ay.fillSecondaryMediaInfo(l,t,{interactive:!0}),l.innerHTML&&"SeriesTimer"!==t.Type?l.classList.remove("hide"):l.classList.add("hide")}}catch(e){s.e(e)}finally{s.f()}}function ve(e,t,r,n){!function(e,t,r){var i=e.querySelector("#similarCollapsible");if(i){if("Movie"!=t.Type&&"Trailer"!=t.Type&&"Series"!=t.Type&&"Program"!=t.Type&&"Recording"!=t.Type&&"MusicAlbum"!=t.Type&&"MusicArtist"!=t.Type&&"Playlist"!=t.Type&&"Audio"!=t.Type)return void i.classList.add("hide");i.classList.remove("hide");var n=k.tF.getApiClient(t.ServerId),a={userId:n.getCurrentUserId(),limit:12,fields:"PrimaryImageAspectRatio,CanDelete"};"MusicAlbum"==t.Type&&t.AlbumArtists&&t.AlbumArtists.length&&(a.ExcludeArtistIds=t.AlbumArtists[0].Id),n.getSimilarItems(t.Id,a).then((function(e){if(e.Items.length){i.classList.remove("hide");var n="";n+=y.default.getCardsHtml({items:e.Items,shape:"autooverflow",showParentTitle:"MusicAlbum"==t.Type,centerText:!0,showTitle:!0,context:r,lazy:!0,showDetailsMenu:!0,coverImage:"MusicAlbum"==t.Type||"MusicArtist"==t.Type,overlayPlayButton:!0,overlayText:!1,showYear:"Movie"===t.Type||"Trailer"===t.Type||"Series"===t.Type});var a=i.querySelector(".similarContent");a.innerHTML=n,g.default.lazyChildren(a)}else i.classList.add("hide")}))}}(e,t,n),function(e,t,r){var i=e.querySelector(".moreFromSeasonSection");if(i){if("Episode"!==t.Type||!t.SeasonId||!t.SeriesId)return void i.classList.add("hide");var n=r.getCurrentUserId();r.getEpisodes(t.SeriesId,{SeasonId:t.SeasonId,UserId:n,Fields:"ItemCounts,PrimaryImageAspectRatio,CanDelete,MediaSourceCount"}).then((function(e){if(e.Items.length<2)i.classList.add("hide");else{i.classList.remove("hide"),i.querySelector("h2").innerText=D.Ay.translate("MoreFromValue",t.SeasonName);var r=i.querySelector(".itemsContainer");y.default.buildCards(e.Items,{parentContainer:i,itemsContainer:r,shape:"autooverflow",sectionTitleTagName:"h2",scalable:!0,showTitle:!0,overlayText:!1,centerText:!0,includeParentInfoInTitle:!1,allowBottomPadding:!1});var n=r.querySelector('.card[data-id="'+t.Id+'"]');n&&setTimeout((function(){i.querySelector(".emby-scroller").toStart(n.previousSibling||n,!0)}),100)}}))}}(e,t,r),function(e,t,r){var i=e.querySelector(".moreFromArtistSection");if(i){if(!("MusicArtist"===t.Type||"Audio"===t.Type||"MusicAlbum"===t.Type&&t.AlbumArtists&&t.AlbumArtists.length))return void i.classList.add("hide");var n={IncludeItemTypes:"MusicAlbum",Recursive:!0,ExcludeItemIds:t.Id,SortBy:"PremiereDate,ProductionYear,SortName",SortOrder:"Descending"};"MusicArtist"===t.Type?n.ContributingArtistIds=t.Id:n.AlbumArtistIds=t.AlbumArtists.map((function(e){return e.Id})).join(","),r.getItems(r.getCurrentUserId(),n).then((function(e){e.Items.length?(i.classList.remove("hide"),"MusicArtist"===t.Type?i.querySelector("h2").innerText=D.Ay.translate("HeaderAppearsOn"):i.querySelector("h2").innerText=D.Ay.translate("MoreFromValue",t.AlbumArtists[0].Name),y.default.buildCards(e.Items,{parentContainer:i,itemsContainer:i.querySelector(".itemsContainer"),shape:"autooverflow",sectionTitleTagName:"h2",scalable:!0,coverImage:"MusicArtist"===t.Type||"MusicAlbum"===t.Type,showTitle:!0,showParentTitle:!1,centerText:!0,overlayText:!1,overlayPlayButton:!0,showYear:!0})):i.classList.add("hide")}))}}(e,t,r),function(e,t,r){var i=(t.People||[]).filter((function(e){return"Director"===e.Type})),n=i.map((function(e){return'<a style="color:inherit;" class="button-link" is="emby-linkbutton" href="'+M.appRouter.getRouteUrl({Name:e.Name,Type:"Person",ServerId:t.ServerId,Id:e.Id},{context:r})+'">'+d()(e.Name)+"</a>"})).join(", ");e.querySelector(".directorsLabel").innerHTML=D.Ay.translate(i.length>1?"Directors":"Director"),e.querySelector(".directors").innerHTML=n;var a=e.querySelector(".directorsGroup");i.length?a.classList.remove("hide"):a.classList.add("hide")}(e,t,n),function(e,t,r){if(![i.D.BoxSet,i.D.Playlist].includes(t.Type)){var n=t.Studios||[],a=n.map((function(e){return'<a style="color:inherit;" class="button-link" is="emby-linkbutton" href="'+M.appRouter.getRouteUrl({Name:e.Name,Type:"Studio",ServerId:t.ServerId,Id:e.Id},{context:r})+'">'+d()(e.Name)+"</a>"})).join(", ");e.querySelector(".studiosLabel").innerText=D.Ay.translate(n.length>1?"Studios":"Studio"),e.querySelector(".studios").innerHTML=a,e.querySelector(".studiosGroup").classList.toggle("hide",!n.length)}}(e,t,n),function(e,t,r){var i=(t.People||[]).filter((function(e){return"Writer"===e.Type})),n=i.map((function(e){return'<a style="color:inherit;" class="button-link" is="emby-linkbutton" href="'+M.appRouter.getRouteUrl({Name:e.Name,Type:"Person",ServerId:t.ServerId,Id:e.Id},{context:r})+'">'+d()(e.Name)+"</a>"})).join(", ");e.querySelector(".writersLabel").innerHTML=D.Ay.translate(i.length>1?"Writers":"Writer"),e.querySelector(".writers").innerHTML=n;var a=e.querySelector(".writersGroup");i.length?a.classList.remove("hide"):a.classList.add("hide")}(e,t,n),function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return"Movie"===e.Type||"BoxSet"===e.Type?"movies":"Series"===e.Type||"Season"===e.Type||"Episode"===e.Type?"tvshows":"MusicArtist"===e.Type||"MusicAlbum"===e.Type||"Audio"===e.Type||"AudioBook"===e.Type?"music":"Program"===e.Type?"livetv":null}(t),i=t.GenreItems||[],n="music"===r?"MusicGenre":"Genre",a=i.map((function(e){return'<a style="color:inherit;" class="button-link" is="emby-linkbutton" href="'+M.appRouter.getRouteUrl({Name:e.Name,Type:n,ServerId:t.ServerId,Id:e.Id},{context:r})+'">'+d()(e.Name)+"</a>"})).join(", ");e.querySelector(".genresLabel").innerHTML=D.Ay.translate(i.length>1?"Genres":"Genre"),e.querySelector(".genres").innerHTML=a;var s=e.querySelector(".genresGroup");i.length?s.classList.remove("hide"):s.classList.add("hide")}(e,t,n),function(e,t,r){"TvChannel"===r.Type&&(e.querySelector(".programGuideSection").classList.remove("hide"),t.getLiveTvPrograms({ChannelIds:r.Id,UserId:t.getCurrentUserId(),HasAired:!1,SortBy:"StartDate",EnableTotalRecordCount:!1,EnableImages:!1,ImageTypeLimit:0,EnableUserData:!1}).then((function(t){!function(e,t){for(var r="",i=[],n=null,a=0,s=t.Items.length;a<s;a++){var l=t.Items[a],o=H.Ay.parseISO8601Date(l.StartDate);n&&n.toDateString()===o.toDateString()||(i.length&&(r+='<div class="verticalSection verticalDetailSection">',r+='<h2 class="sectionTitle padded-left">'+H.Ay.toLocaleDateString(n,{weekday:"long",month:"long",day:"numeric"})+"</h2>",r+='<div is="emby-itemscontainer" class="vertical-list padded-left padded-right">'+L.A.getListViewHtml({items:i,enableUserDataButtons:!1,showParentTitle:!0,image:!1,showProgramTime:!0,mediaInfo:!1,parentTitleWithTitle:!0})+"</div></div>"),n=o,i=[]),i.push(l)}i.length&&(r+='<div class="verticalSection verticalDetailSection">',r+='<h2 class="sectionTitle padded-left">'+H.Ay.toLocaleDateString(n,{weekday:"long",month:"long",day:"numeric"})+"</h2>",r+='<div is="emby-itemscontainer" class="vertical-list padded-left padded-right">'+L.A.getListViewHtml({items:i,enableUserDataButtons:!1,showParentTitle:!0,image:!1,showProgramTime:!0,mediaInfo:!1,parentTitleWithTitle:!0})+"</div></div>"),e.querySelector(".programGuide").innerHTML=r}(e,t)})))}(e,r,t),function(e,t){var r,i=e.querySelector(".tagline");null!==(r=t.Taglines)&&void 0!==r&&r.length?(i.classList.remove("hide"),i.innerHTML="<bdi>"+d()(t.Taglines[0])+"</bdi>"):i.classList.add("hide")}(e,t),function(e,t){var r=e.querySelectorAll(".overview");if(r.length>0){var i=o().sanitize((0,u.A)({html:!0}).render(t.Overview||""));if(i){var n,a=X(r);try{for(a.s();!(n=a.n()).done;){var s=n.value;s.innerHTML="<bdi>"+i+"</bdi>",s.classList.remove("hide"),s.classList.add("detail-clamp-text");var l=s.parentElement.querySelector(".overview-expand");Math.abs(s.scrollHeight-s.offsetHeight)>2?l.classList.remove("hide"):l.classList.add("hide"),l.addEventListener("click",fe.bind(null,s));var c,d=X(s.querySelectorAll("a"));try{for(d.s();!(c=d.n()).done;)c.value.setAttribute("target","_blank")}catch(e){d.e(e)}finally{d.f()}}}catch(e){a.e(e)}finally{a.f()}}else{var m,h=X(r);try{for(h.s();!(m=h.n()).done;){var f=m.value;f.innerHTML="",f.classList.add("hide")}}catch(e){h.e(e)}finally{h.f()}}}}(e,t),ye(e,t),function(e,t){var r,i,n=e.querySelectorAll(".btnPlaystate");for(r=0,i=n.length;r<i;r++){var a=n[r];T.Ay.canMarkPlayed(t)?(a.classList.remove("hide"),a.setItem(t)):(a.classList.add("hide"),a.setItem(null))}var s=e.querySelectorAll(".btnUserRating");for(r=0,i=s.length;r<i;r++){var l=s[r];T.Ay.canRate(t)?(l.classList.remove("hide"),l.setItem(t)):(l.classList.add("hide"),l.setItem(null))}}(e,t),function(e,t,r){var i=e.querySelector(".lyricsContainer");if(i&&t.HasLyrics){if("Audio"!==t.Type)return void i.classList.add("hide");r.ajax({url:r.getUrl("Audio/"+t.Id+"/Lyrics"),type:"GET",dataType:"json"}).then((function(e){if(e.Lyrics){i.classList.remove("hide");var t=i.querySelector(".itemsContainer");if(t){var r=e.Lyrics.reduce((function(e,t){return e+(d()(t.Text)+"<br/>")}),"");t.innerHTML=r}}else i.classList.add("hide")})).catch((function(){i.classList.add("hide")}))}}(e,t,r),!A.A.tv&&h.g.supports(q.Y.ExternalLinks)&&function(e,t){var r=e.querySelector(".itemExternalLinks"),i=[];if(!A.A.tv&&t.HomePageUrl&&i.push('<a is="emby-linkbutton" class="button-link" href="'.concat(t.HomePageUrl,'" target="_blank">').concat(D.Ay.translate("ButtonWebsite"),"</a>")),t.ExternalUrls){var n,a=X(t.ExternalUrls);try{for(a.s();!(n=a.n()).done;){var s=n.value;i.push('<a is="emby-linkbutton" class="button-link" href="'.concat(s.Url,'" target="_blank">').concat(d()(s.Name),"</a>"))}}catch(e){a.e(e)}finally{a.f()}}var l=[];i.length&&l.push(i.join(", ")),r.innerHTML=l.join(", "),l.length?r.classList.remove("hide"):r.classList.add("hide")}(e,t),function(e,t){var r=e.querySelector(".itemTags"),i=[],n=t.Tags||[];"Program"===t.Type&&(n=[]),n.forEach((function(e){var r=M.appRouter.getRouteUrl("tag",{tag:e,serverId:t.ServerId});i.push('<a href="'.concat(r,'" class="button-link" is="emby-linkbutton">')+d()(e)+"</a>")})),i.length?(r.innerHTML=D.Ay.translate("TagsValue",i.join(", ")),r.classList.remove("hide")):(r.innerHTML="",r.classList.add("hide"))}(e,t),function(e,t){var r,i=e.querySelector("#seriesAirTime");if("Series"==t.Type){var n="";null!==(r=t.AirDays)&&void 0!==r&&r.length&&(7==t.AirDays.length?n+="daily":n+=t.AirDays.map((function(e){return e+"s"})).join(",")),t.AirTime&&(n+=" at "+t.AirTime),n?(n=("Ended"==t.Status?"Aired ":"Airs ")+n,i.innerHTML=n,i.classList.remove("hide")):i.classList.add("hide")}else i.classList.add("hide")}(e,t)}function pe(e,t){var r,i=e.querySelector(Q.includes(t.Type)?"#listChildrenCollapsible":"#childrenCollapsible"),n=i.querySelector(".itemsContainer"),a="ItemCounts,PrimaryImageAspectRatio,CanDelete,MediaSourceCount",s={ParentId:t.Id,Fields:a};"MusicAlbum"==t.Type?s.SortBy="ParentIndexNumber,IndexNumber,SortName":"BoxSet"!==t.Type&&(s.SortBy="SortName");var l=k.tF.getApiClient(t.ServerId),o=l.getCurrentUserId();"Series"==t.Type?r=l.getSeasons(t.Id,{userId:o,Fields:a}):"Season"==t.Type?(a+=",Overview",r=l.getEpisodes(t.SeriesId,{seasonId:t.Id,userId:o,Fields:a})):"MusicArtist"==t.Type&&(s.SortBy="PremiereDate,ProductionYear,SortName"),(r=r||l.getItems(l.getCurrentUserId(),s)).then((function(r){var a="",s=!1,l=!1;if("MusicAlbum"==t.Type){var o,c=!1,d=X(r.Items);try{for(d.s();!(o=d.n()).done;){var u=o.value;if(!(0,m.A)(u.ArtistItems.map((function(e){return e.Id})).sort(),u.AlbumArtists.map((function(e){return e.Id})).sort())){c=!0;break}}}catch(e){d.e(e)}finally{d.f()}var h=r.Items.map((function(e){return e.ParentIndexNumber}));a=L.A.getListViewHtml({items:r.Items,smallIcon:!0,showIndex:new Set(h).size>1||h.length>=1&&h[0]>1,index:"disc",showIndexNumberLeft:!0,playFromHere:!0,action:"playallfromhere",image:!1,artist:c,containerAlbumArtists:t.AlbumArtists}),l=!0}else if("Series"==t.Type)s=E.A.mobile&&window.screen.availWidth<=1e3,a=y.default.getCardsHtml({items:r.Items,shape:"overflowPortrait",showTitle:!0,centerText:!0,lazy:!0,overlayPlayButton:!0,allowBottomPadding:!s});else if("Season"==t.Type||"Episode"==t.Type){if("Episode"!==t.Type&&(l=!0),s="Episode"==t.Type,r.Items.length<2&&"Episode"===t.Type)return;"Episode"===t.Type?a=y.default.getCardsHtml({items:r.Items,shape:"overflowBackdrop",showTitle:!0,displayAsSpecial:"Season"==t.Type&&t.IndexNumber,playFromHere:!0,overlayText:!0,lazy:!0,showDetailsMenu:!0,overlayPlayButton:!0,allowBottomPadding:!s,includeParentInfoInTitle:!1}):"Season"===t.Type&&(a=L.A.getListViewHtml({items:r.Items,showIndexNumber:!1,enableOverview:!0,enablePlayedButton:!A.A.mobile,infoButton:!A.A.mobile,imageSize:"large",enableSideMediaInfo:!1,highlight:!1,action:A.A.desktop?"none":"link",imagePlayButton:!0,includeParentInfoInTitle:!1}))}if("BoxSet"!==t.Type&&i.classList.remove("hide"),s?(n.classList.add("scrollX"),n.classList.add("hiddenScrollX"),n.classList.remove("vertical-wrap"),n.classList.remove("vertical-list")):(n.classList.remove("scrollX"),n.classList.remove("hiddenScrollX"),n.classList.remove("smoothScrollX"),l?(n.classList.add("vertical-list"),n.classList.remove("vertical-wrap")):(n.classList.add("vertical-wrap"),n.classList.remove("vertical-list"))),A.A.mobile&&n.classList.remove("padded-right"),n.innerHTML=a,g.default.lazyChildren(n),"BoxSet"==t.Type){var f=[{name:D.Ay.translate("Movies"),type:"Movie"},{name:D.Ay.translate("Series"),type:"Series"},{name:D.Ay.translate("Episodes"),type:"Episode"},{name:D.Ay.translate("HeaderVideos"),mediaType:"Video"},{name:D.Ay.translate("Albums"),type:"MusicAlbum"},{name:D.Ay.translate("Books"),type:"Book"},{name:D.Ay.translate("Collections"),type:"BoxSet"}];!function(e,t,r,i){if(e.querySelector(".collectionItems").classList.remove("hide"),e.querySelector(".collectionItems").innerHTML="",i.length){var n,a=[],s=i,l=X(r);try{for(l.s();!(n=l.n()).done;){var o=n.value,c=Y(Se(s,o),2);a=c[0],s=c[1],a.length&&ge(e,t,o,a)}}catch(e){l.e(e)}finally{l.f()}if(s.length){var d={name:D.Ay.translate("HeaderOtherItems")};ge(e,t,d,s)}}else ge(e,t,{name:D.Ay.translate("Items")},i);var u,m=function(){pe(e,t)},h=X(e.querySelectorAll(".collectionItemsContainer"));try{for(h.s();!(u=h.n()).done;)u.value.notifyRefreshNeeded=m}catch(e){h.e(e)}finally{h.f()}(function(e){for(var t=0,r=e.length;t<r;t++)if(P.f.canPlay(e[t]))return!0;return!1})(i)||(ee(e,"btnPlay",!1),ee(e,"btnShuffle",!1)),$(e)}(e,t,f,r.Items)}}));var c=D.Ay.translate("Items");"Season"==t.Type?c=D.Ay.translate("Episodes"):"Series"==t.Type?c=D.Ay.translate("HeaderSeasons"):"MusicAlbum"==t.Type&&(c=D.Ay.translate("HeaderTracks")),i.querySelectorAll(".sectionTitle > span").forEach((function(e){e.innerText=c})),"MusicAlbum"==t.Type||"Season"==t.Type?(i.querySelector(".sectionTitle").classList.add("hide"),i.classList.add("verticalSection-extrabottompadding")):i.querySelector(".sectionTitle").classList.remove("hide")}function Se(e,t){var r=[],i=[];return e.forEach((function(e){t.mediaType&&e.MediaType==t.mediaType||e.Type==t.type?r.push(e):i.push(e)})),[r,i]}function ge(e,t,r,i){var n="";n+='<div class="verticalSection">',n+='<div class="sectionTitleContainer sectionTitleContainer-cards padded-left">',n+='<h2 class="sectionTitle sectionTitle-cards">',n+="<span>"+r.name+"</span>",n+="</h2>",n+="</div>",n+='<div is="emby-itemscontainer" class="itemsContainer collectionItemsContainer vertical-wrap padded-left padded-right">';var a="MusicAlbum"==r.type?(0,v.zP)(!1):(0,v.xK)(!1);n+=y.default.getCardsHtml({items:i,shape:a,showTitle:!0,showYear:"Video"===r.mediaType||"Series"===r.type||"Movie"===r.type,centerText:!0,lazy:!0,showDetailsMenu:!0,overlayMoreButton:!0,showAddToCollection:!1,showRemoveFromCollection:!0,collectionId:t.Id}),n+="</div>",n+="</div>";var s=e.querySelector(".collectionItems");s.insertAdjacentHTML("beforeend",n),g.default.lazyChildren(s.lastChild)}function be(e){return y.default.getCardsHtml({items:e,shape:"autooverflow",showTitle:!0,action:"play",overlayText:!1,centerText:!0,showRuntime:!0})}function Te(e,t,i){if(i.length){e.querySelector("#castCollapsible").classList.remove("hide");var n=e.querySelector("#castContent");r.e(82509).then(r.bind(r,82509)).then((function(e){e.default.buildPeopleCards(i,{itemsContainer:n,coverImage:!0,serverId:t.ServerId,shape:"overflowPortrait",imageBlurhashes:t.ImageBlurHashes})}))}else e.querySelector("#castCollapsible").classList.add("hide")}function Ie(e,t,i){if(i.length){e.querySelector("#guestCastCollapsible").classList.remove("hide");var n=e.querySelector("#guestCastContent");r.e(82509).then(r.bind(r,82509)).then((function(e){e.default.buildPeopleCards(i,{itemsContainer:n,coverImage:!0,serverId:t.ServerId,shape:"overflowPortrait",imageBlurhashes:t.ImageBlurHashes})}))}else e.querySelector("#guestCastCollapsible").classList.add("hide")}function Ae(e,t,r,i){var n,a=X(e.querySelectorAll(t));try{for(a.s();!(n=a.n()).done;)n.value.addEventListener(r,i)}catch(e){a.e(e)}finally{a.f()}}function Le(e){return e.preventDefault(),!1}function Ce(e,t){function i(){return t.serverId?k.tF.getApiClient(t.serverId):ApiClient}function n(e,t,r){C.Ay.show();var n=i();Promise.all([Z(n,r),n.getCurrentUser()]).then((function(i){var n=Y(i,2),a=n[0],s=n[1];c=a,me(e,t,r,a,s)})).catch((function(e){console.error("failed to get item or current user: ",e)}))}function s(){var t=this,r=t.getAttribute("data-action");r||(r=(t=t.querySelector("[data-action]")||t).getAttribute("data-action")),function(t,r){var i=c;if("Program"!==i.Type)!function(t,r){var i=function(t){var r=e.querySelector(".selectAudio").value||null;return{startPositionTicks:t,mediaSourceId:e.querySelector(".selectSource").value,audioStreamIndex:r,subtitleStreamIndex:e.querySelector(".selectSubtitles").value}}(r);i.items=[t],P.f.play(i)}(i,i.UserData&&r===x.s.Resume?i.UserData.PlaybackPositionTicks:0);else{var n=k.tF.getApiClient(i.ServerId);n.getLiveTvChannel(i.ChannelId,n.getCurrentUserId()).then((function(e){P.f.play({items:[e]})}))}}(0,r)}function l(){ne(e,u,c),de(e,c)}function o(t,r){var n=r,a=i();if("UserDataChanged"===n.MessageType&&c&&n.Data.UserId==a.getCurrentUserId()){var s=c.UserData.Key,l=n.Data.UserDataList.filter((function(e){return e.Key==s}))[0];l&&(c.UserData=l,oe(e,c),$(e))}}var c,d,u=this;d=i(),Ae(e,".btnPlay","click",s),Ae(e,".btnReplay","click",s),Ae(e,".btnInstantMix","click",(function(){P.f.instantMix(c)})),Ae(e,".btnShuffle","click",(function(){P.f.shuffle(c)})),Ae(e,".btnPlayTrailer","click",(function(){P.f.playTrailers(c)})),Ae(e,".btnCancelSeriesTimer","click",(function(){Promise.resolve().then(r.bind(r,78938)).then((function(e){e.default.cancelSeriesTimerWithConfirmation(c.Id,c.ServerId).then((function(){U.default.navigate("livetv")}))}))})),Ae(e,".btnCancelTimer","click",(function(){Promise.resolve().then(r.bind(r,78938)).then((function(r){r.default.cancelTimer(k.tF.getApiClient(c.ServerId),c.TimerId).then((function(){n(u,e,t)}))}))})),Ae(e,".btnDownload","click",(function(){var e=(0,V.C)(i()),t=(0,a.Q)(e).getDownloadUrl({itemId:c.Id});(0,R.download)([{url:t,item:c,itemId:c.Id,serverId:c.ServerId,title:c.Name,filename:c.Path.replace(/^.*[\\/]/,"")}])})),e.querySelector(".trackSelections").addEventListener("submit",Le),e.querySelector(".btnSplitVersions").addEventListener("click",(function(){!function(e,t,r,i){(0,S.A)("Are you sure you wish to split the media sources into separate items?","Split Media Apart").then((function(){C.Ay.show(),r.ajax({type:"DELETE",url:r.getUrl("Videos/"+i.id+"/AlternateSources")}).then((function(){C.Ay.hide(),n(e,t,i)}))}))}(u,e,d,t)})),Ae(e,".btnMoreCommands","click",(function(){var r=this,a=e.querySelector(".selectSource").value||c.Id,s=i();s.getItem(s.getCurrentUserId(),a).then((function(i){a=i,s.getCurrentUser().then((function(s){b.default.show(te(a,s,r)).then((function(r){if(r.deleted){var s=a.SeasonId||a.SeriesId||a.ParentId;s?M.appRouter.showItem(s,i.ServerId):M.appRouter.goHome()}else r.updated&&n(u,e,t)})).catch((function(){}))}))}))})),e.querySelector(".selectSource").addEventListener("change",(function(){var t;ae(e,u._currentPlaybackMediaSources),se(e,u._currentPlaybackMediaSources),le(e,u._currentPlaybackMediaSources),t=ie(e,u._currentPlaybackMediaSources),ye(e,W(W({},c),t))})),e.addEventListener("viewshow",(function(r){var i=this;B.default.setTransparentMenu(!A.A.mobile),r.detail.isRestored?c&&(B.default.setTitle(""),ne(i,u,c,!0),ue(i,c)):n(u,i,t),F.A.on(d,"message",o),F.A.on(P.f,"playerchange",l),w.Ay.on(e.querySelector(".nameContainer"))})),e.addEventListener("viewbeforehide",(function(){w.Ay.off(e.querySelector(".nameContainer")),F.A.off(d,"message",o),F.A.off(P.f,"playerchange",l),B.default.setTransparentMenu(!1)})),e.addEventListener("viewdestroy",(function(){c=null,u._currentPlaybackMediaSources=null,u.currentRecordingFields=null}))}window.ItemDetailPage=new function(){var e=this;e.setInitialCollapsibleState=he,e.renderDetails=ve,e.renderCast=Te,e.renderGuestCast=Ie}}}]);