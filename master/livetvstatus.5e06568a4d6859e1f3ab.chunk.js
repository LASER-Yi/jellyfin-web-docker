"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[20745,7293],{7204:function(e,t,i){i.r(t),i(5769),i(61013),i(63238),i(61418),i(17460),i(14078),i(72326);var n=i(94994),r=i(5607),a=i(72365),s=i(61570),d=i(30325),l=i(28540),o=i(57366),c=(i(82427),i(38228),i(60635)),u=i(3137),h=!o.Z.slow&&!o.Z.edge;function f(e){var t="card scalableCard backdropCard backdropCard-scalable",i="";return d.Z.tv&&(t+=" show-focus",h&&(t+=" show-animation")),i+='<div type="button" class="'+t+'" data-id="'+e.Id+'">',i+='<div class="cardBox visualCardBox">',i+='<div class="cardScalable visualCardBox-cardScalable">',i+='<div class="cardPadder-backdrop"></div>',i+='<div class="cardContent searchImage">',i+='<div class="cardImageContainer coveredImage '.concat(s.default.getDefaultBackgroundClass(),'"><span class="cardImageIcon material-icons dvr" aria-hidden="true"></span></div>'),i+="</div>",i+="</div>",i+='<div class="cardFooter visualCardBox-cardFooter">',i+='<button is="paper-icon-button-light" class="itemAction btnCardOptions autoSize" data-action="menu"><span class="material-icons more_vert" aria-hidden="true"></span></button>',i+='<div class="cardText">'+(e.FriendlyName||function(e){switch(e.toLowerCase()){case"m3u":return"M3U";case"hdhomerun":return"HDHomeRun";case"hauppauge":return"Hauppauge";case"satip":return"DVB";default:return"Unknown"}}(e.Type))+"</div>",i+='<div class="cardText cardText-secondary">',i+=e.Url||"&nbsp;",i+="</div>",i+="</div>",(i+="</div>")+"</div>"}function v(e){l.ZP.show(),ApiClient.getNamedConfiguration("livetv").then((function(t){!function(e,t){e.querySelector(".devicesList").innerHTML=t.map(f).join("")}(e,t.TunerHosts),function(e,t){var r="";if(t.length){r+='<div class="paperList">';for(var a=0,s=t.length;a<s;a++){var d=t[a];r+='<div class="listItem">',r+='<span class="listItemIcon material-icons dvr" aria-hidden="true"></span>',r+='<div class="listItemBody two-line">',r+='<a is="emby-linkbutton" style="display:block;padding:0;margin:0;text-align:left;" class="clearLink" href="'+p(d.Type)+"&id="+d.Id+'">',r+='<h3 class="listItemBodyText">',r+=m(d.Type),r+="</h3>",r+='<div class="listItemBodyText secondary">',r+=d.Path||d.ListingsId||"",r+="</div>",r+="</a>",r+="</div>",r+='<button type="button" is="paper-icon-button-light" class="btnOptions" data-id="'+d.Id+'"><span class="material-icons listItemAside more_vert" aria-hidden="true"></span></button>',r+="</div>"}r+="</div>"}var o=$(".providerList",e).html(r);$(".btnOptions",o).on("click",(function(){var t=this.getAttribute("data-id");!function(e,t,r){var a=[];a.push({name:n.ZP.translate("Delete"),id:"delete"}),a.push({name:n.ZP.translate("MapChannels"),id:"map"}),Promise.resolve().then(i.bind(i,12801)).then((function(s){s.default.show({items:a,positionTo:r}).then((function(r){switch(r){case"delete":!function(e,t){var i=n.ZP.translate("MessageConfirmDeleteGuideProvider");(0,u.Z)(i,n.ZP.translate("HeaderDeleteProvider")).then((function(){l.ZP.show(),ApiClient.ajax({type:"DELETE",url:ApiClient.getUrl("LiveTv/ListingProviders",{Id:t})}).then((function(){v(e)}),(function(){v(e)}))}))}(e,t);break;case"map":!function(e,t){i.e(89394).then(i.bind(i,89394)).then((function(e){new(0,e.default)({serverId:ApiClient.serverInfo().Id,providerId:t}).show()}))}(0,t)}}))}))}(e,t,this)}))}(e,t.ListingProviders)})),l.ZP.hide()}function m(e){switch(e.toLowerCase()){case"schedulesdirect":return"Schedules Direct";case"xmltv":return"XMLTV";default:return"Unknown"}}function p(e){switch(e.toLowerCase()){case"xmltv":return"#/livetvguideprovider.html?type=xmltv";case"schedulesdirect":return"#/livetvguideprovider.html?type=schedulesdirect"}}function g(e){var t,r,s,d=a.ZP.parentWithClass(e.target,"card");if(d){var o=d.getAttribute("data-id"),h=a.ZP.parentWithClass(e.target,"btnCardOptions");h?(t=h,r=o,(s=[]).push({name:n.ZP.translate("Delete"),id:"delete"}),s.push({name:n.ZP.translate("Edit"),id:"edit"}),Promise.resolve().then(i.bind(i,12801)).then((function(e){e.default.show({items:s,positionTo:t}).then((function(e){switch(e){case"delete":!function(e,t){var i=n.ZP.translate("MessageConfirmDeleteTunerDevice");(0,u.Z)(i,n.ZP.translate("HeaderDeleteDevice")).then((function(){l.ZP.show(),ApiClient.ajax({type:"DELETE",url:ApiClient.getUrl("LiveTv/TunerHosts",{Id:t})}).then((function(){v(e)}))}))}(a.ZP.parentWithClass(t,"page"),r);break;case"edit":c.default.navigate("livetvtuner.html?id="+r)}}))}))):c.default.navigate("livetvtuner.html?id="+o)}}$(document).on("pageinit","#liveTvStatusPage",(function(){var e=this;$(".btnAddDevice",e).on("click",(function(){c.default.navigate("livetvtuner.html")})),$(".formAddDevice",e).on("submit",(function(){return function(e){e.querySelector(".dlgAddDevice").close(),l.ZP.show(),ApiClient.ajax({type:"POST",url:ApiClient.getUrl("LiveTv/TunerHosts"),data:JSON.stringify({Type:$("#selectTunerDeviceType",e).val(),Url:$("#txtDevicePath",e).val()}),contentType:"application/json"}).then((function(){v(e)}),(function(){c.default.alert({message:n.ZP.translate("ErrorAddingTunerDevice")})}))}(e),!1})),$(".btnAddProvider",e).on("click",(function(){var e,t;e=this,(t=[]).push({name:"Schedules Direct",id:"SchedulesDirect"}),t.push({name:"XMLTV",id:"xmltv"}),Promise.resolve().then(i.bind(i,12801)).then((function(i){i.default.show({items:t,positionTo:e,callback:function(e){c.default.navigate(p(e))}})}))})),e.querySelector(".devicesList").addEventListener("click",g)})).on("pageshow","#liveTvStatusPage",(function(){var e=this;v(e),(0,r.Z)({mode:"on",progressElem:e.querySelector(".refreshGuideProgress"),taskKey:"RefreshGuide",button:e.querySelector(".btnRefresh")})})).on("pagehide","#liveTvStatusPage",(function(){(0,r.Z)({mode:"off",progressElem:this.querySelector(".refreshGuideProgress"),taskKey:"RefreshGuide",button:this.querySelector(".btnRefresh")})}))},82427:function(e,t,i){i(5769),i(63238),i(61418),i(17460),i(14078),i(27471),i(32081);var n=i(61008),r=i(58517),a=i(48957),s=i(98301),d=i(30325),l=i(57366),o=i(72365),c=i(28540),u=i(34643),h=i(44038),f=i(81643),v=(i(67752),i(18613)),m=i(28172),p=Object.create(HTMLDivElement.prototype);function g(e){var t=this,i=t.multiSelect;!1!==(null==i?void 0:i.onContainerClick.call(t,e))&&n.ZP.onClick.call(t,e)}function b(e){return e.preventDefault(),e.stopPropagation(),!1}function y(e){var t=e.target,i=o.ZP.parentWithAttribute(t,"data-id");if(i&&i.getAttribute("data-serverid"))return r.default.handleCommand("menu",{sourceElement:i}),e.preventDefault(),e.stopPropagation(),!1}function C(e,t,n){var r=this;Promise.all([i.e(61570),i.e(7293)]).then(i.bind(i,61570)).then((function(e){e.onUserDataChanged(n,r)}));var a=T(r);-1===a.indexOf("markfavorite")&&-1===a.indexOf("markplayed")||r.notifyRefreshNeeded()}function T(e){var t=e.getAttribute("data-monitor");return t?t.split(","):[]}function I(e,t,n){var r=this;if(-1===T(r).indexOf("timers")){var a=n.ProgramId,s=n.Id;Promise.all([i.e(61570),i.e(7293)]).then(i.bind(i,61570)).then((function(e){e.onTimerCreated(a,s,r)}))}else r.notifyRefreshNeeded()}function P(){-1!==T(this).indexOf("seriestimers")&&this.notifyRefreshNeeded()}function x(e,t,n){var r=this;-1===T(r).indexOf("timers")?Promise.all([i.e(61570),i.e(7293)]).then(i.bind(i,61570)).then((function(e){e.onTimerCancelled(n.Id,r)})):r.notifyRefreshNeeded()}function Z(e,t,n){var r=this;-1===T(r).indexOf("seriestimers")?Promise.all([i.e(61570),i.e(7293)]).then(i.bind(i,61570)).then((function(e){e.onSeriesTimerCancelled(n.Id,r)})):r.notifyRefreshNeeded()}function k(e,t,i){var n=this,r=T(n);if(-1===r.indexOf("seriestimers")&&-1===r.indexOf("timers")){var a=i.ItemsAdded||[],s=i.ItemsRemoved||[];if(a.length||s.length){var d=n.getAttribute("data-parentid");if(d){var l=i.FoldersAddedTo||[],o=i.FoldersRemovedFrom||[],c=i.CollectionFolders||[];if(-1===l.indexOf(d)&&-1===o.indexOf(d)&&-1===c.indexOf(d))return}n.notifyRefreshNeeded()}}}function w(e,t){var i,n=this,r=t.state,a=T(n);if(r.NowPlayingItem&&"Video"===r.NowPlayingItem.MediaType){if(-1!==a.indexOf("videoplayback"))return void n.notifyRefreshNeeded(!0)}else if("Audio"===(null===(i=r.NowPlayingItem)||void 0===i?void 0:i.MediaType)&&-1!==a.indexOf("audioplayback"))return void n.notifyRefreshNeeded(!0)}function D(e,t,i,n){var r=i.bind(e);n=n||h.default,f.Z.on(n,t,r),e["event_"+t]=r}function L(e,t,i){var n=e["event_"+t];n&&(i=i||h.default,f.Z.off(i,t,n),e["event_"+t]=null)}function A(e,t){e.refreshInterval&&(clearInterval(e.refreshInterval),e.refreshInterval=null,t||(e.refreshIntervalEndTime=null))}function S(e,t){A(e),t||(t=parseInt(e.getAttribute("data-refreshinterval")||"0",10)),t&&(e.refreshInterval=setInterval(e.notifyRefreshNeeded.bind(e),t),e.refreshIntervalEndTime=(new Date).getTime()+t)}function E(e){var t=e.Items||e,i=this.parentContainer;i&&(t.length?i.classList.remove("hide"):i.classList.add("hide"));var n,r,a=document.activeElement;this.contains(a)&&(r=!0,n=a.getAttribute("data-id")),this.innerHTML=this.getItemsHtml(t),s.default.lazyChildren(this),r&&function(e,t){if(t){var i=e.querySelector('[data-id="'+t+'"]');if(i)try{return void u.Z.focus(i)}catch(e){console.error(e)}}u.Z.autoFocus(e)}(this,n),S(this),this.afterRefresh&&this.afterRefresh(e)}p.enableMultiSelect=function(e){var t=this.multiSelect;if(e){if(!t){var n=this;i.e(52943).then(i.bind(i,52943)).then((function(e){var t=e.default;n.multiSelect=new t({container:n,bindOnClick:!1})}))}}else t&&(t.destroy(),this.multiSelect=null)},p.enableDragReordering=function(e){var t=this.sortable;if(e){if(!t){var i=this;i.sortable=new m.ZP(i,{draggable:".listItem",handle:".listViewDragHandle",onEnd:function(e){return function(e,t){var i=e.item,n=e.newIndex,r=i.getAttribute("data-playlistitemid"),a=i.getAttribute("data-playlistid");if(a){var s=i.getAttribute("data-serverid"),d=v.Z.getApiClient(s);c.ZP.show(),d.ajax({url:d.getUrl("Playlists/"+a+"/Items/"+r+"/Move/"+n),type:"POST"}).then((function(){c.ZP.hide()}),(function(){c.ZP.hide(),t.refreshItems()}))}else{var l=e.oldIndex;i.dispatchEvent(new CustomEvent("itemdrop",{detail:{oldIndex:l,newIndex:n,playlistItemId:r},bubbles:!0,cancelable:!1}))}}(e,i)}})}}else t&&(t.destroy(),this.sortable=null)},p.createdCallback=function(){this.classList.add("itemsContainer")},p.attachedCallback=function(){this.addEventListener("click",g),l.Z.touch?this.addEventListener("contextmenu",b):"false"!==this.getAttribute("data-contextmenu")&&this.addEventListener("contextmenu",y),(d.Z.desktop||d.Z.mobile&&"false"!==this.getAttribute("data-multiselect"))&&this.enableMultiSelect(!0),d.Z.tv&&this.classList.add("itemsContainer-tv"),n.ZP.on(this,{click:!1}),D(this,"UserDataChanged",C),D(this,"TimerCreated",I),D(this,"SeriesTimerCreated",P),D(this,"TimerCancelled",x),D(this,"SeriesTimerCancelled",Z),D(this,"LibraryChanged",k),D(this,"playbackstop",w,a.O),"true"===this.getAttribute("data-dragreorder")&&this.enableDragReordering(!0)},p.detachedCallback=function(){A(this),this.enableMultiSelect(!1),this.enableDragReordering(!1),this.removeEventListener("click",g),this.removeEventListener("contextmenu",y),this.removeEventListener("contextmenu",b),n.ZP.off(this,{click:!1}),L(this,"UserDataChanged"),L(this,"TimerCreated"),L(this,"SeriesTimerCreated"),L(this,"TimerCancelled"),L(this,"SeriesTimerCancelled"),L(this,"LibraryChanged"),L(this,"playbackstop",a.O),this.fetchData=null,this.getItemsHtml=null,this.parentContainer=null},p.pause=function(){A(this,!0),this.paused=!0},p.resume=function(e){this.paused=!1;var t=this.refreshIntervalEndTime;if(t){var i=t-(new Date).getTime();i>0&&!this.needsRefresh?S(this,i):(this.needsRefresh=!0,this.refreshIntervalEndTime=null)}return this.needsRefresh||e&&e.refresh?this.refreshItems():Promise.resolve()},p.refreshItems=function(){return this.fetchData?this.paused?(this.needsRefresh=!0,Promise.resolve()):(this.needsRefresh=!1,this.fetchData().then(E.bind(this))):Promise.resolve()},p.notifyRefreshNeeded=function(e){if(this.paused)this.needsRefresh=!0;else{var t=this.refreshTimeout;t&&clearTimeout(t),!0===e?this.refreshItems():this.refreshTimeout=setTimeout(this.refreshItems.bind(this),1e4)}},document.registerElement("emby-itemscontainer",{prototype:p,extends:"div"})}}]);