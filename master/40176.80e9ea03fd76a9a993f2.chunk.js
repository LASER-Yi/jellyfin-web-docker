"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[40176],{23635:function(e,t,a){a.r(t),a.d(t,{default:function(){return w},show:function(){return A}}),a(5769),a(98010),a(63238),a(69217),a(61418),a(17460),a(14078),a(32081);var n,i=a(93355),r=a(28540),s=a(72365),d=a(30325),o=a(34643),l=a(94994),c=a(54517),u=a(98301),m=a(57366),g=a(84881),p=(a(38228),a(61414),a(18613)),b=a(37099),h=a(3137),v='<div class="formDialogHeader"> <button is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1" title="${ButtonBack}"><span class="material-icons arrow_back" aria-hidden="true"></span></button> <h3 class="formDialogHeaderTitle"> ${HeaderEditImages} </h3> </div> <div class="formDialogContent smoothScrollY"> <div class="dialogContentInner"> <div id="imagesContainer"> <div class="imageEditor-buttons first-imageEditor-buttons"> <h2 style="margin:0">${Images}</h2> <button type="button" is="emby-button" class="btnBrowseAllImages fab mini autoSize"> <span class="material-icons search" aria-hidden="true"></span> </button> <button type="button" is="emby-button" class="btnOpenUploadMenu fab mini hide"> <span class="material-icons add" aria-hidden="true"></span> </button> </div> <div id="images" class="itemsContainer vertical-wrap"> </div> <br/> </div> <div id="backdropsContainer" class="hide"> <div class="imageEditor-buttons"> <h2 style="margin:0">${Backdrops}</h2> <button type="button" is="emby-button" class="btnBrowseAllImages fab mini autoSize" data-imagetype="Backdrop"> <span class="material-icons search" aria-hidden="true"></span> </button> <button type="button" is="emby-button" class="btnOpenUploadMenu fab mini hide" data-imagetype="Backdrop"> <span class="material-icons add" aria-hidden="true"></span> </button> </div> <div id="backdrops" class="itemsContainer vertical-wrap"> </div> <br/> </div> </div> </div> ',I=!m.Z.slow&&!m.Z.edge,f=!1;function y(e,t,a){var i;r.ZP.show(),t?(i=p.Z.getApiClient(t.ServerId),Z(e,t,i,a)):(i=p.Z.getApiClient(n.ServerId)).getItem(i.getCurrentUserId(),n.Id).then((function(t){Z(e,t,i,a)}))}function C(e,t,a,n){e.addEventListener(a,(function(e){var a=s.ZP.parentWithClass(e.target,t);a&&n.call(a,e)}))}function Z(e,t,a,i){n=t,a.getRemoteImageProviders({itemId:n.Id}).then((function(t){for(var s=e.querySelectorAll(".btnBrowseAllImages"),l=0,c=s.length;l<c;l++)t.length?s[l].classList.remove("hide"):s[l].classList.add("hide");a.getItemImageInfos(n.Id).then((function(n){!function(e,t,a,n,i){var r=n.filter((function(e){return"Backdrop"!==e.ImageType&&"Chapter"!==e.ImageType}));S(0,0,t,r,i,e.querySelector("#images"))}(e,a,0,n,t),function(e,t,a,n,i){var r=n.filter((function(e){return"Backdrop"===e.ImageType})).sort((function(e,t){return e.ImageIndex-t.ImageIndex}));r.length?(e.querySelector("#backdropsContainer",e).classList.remove("hide"),S(0,0,t,r,i,e.querySelector("#backdrops"))):e.querySelector("#backdropsContainer",e).classList.add("hide")}(e,a,0,n,t),r.ZP.hide(),d.Z.tv&&o.Z.autoFocus(i||e)}))}))}function x(e,t,a){var i="",r="card scalableCard imageEditorCard";r+=" backdropCard backdropCard-scalable","button"===a.tagName?(r+=" btnImageCard",d.Z.tv&&(r+=" show-focus",I&&(r+=" show-animation")),i+='<button type="button" class="'+r+'"'):i+='<div class="'+r+'"',i+=' data-id="'+n.Id+'" data-serverid="'+t.serverId()+'" data-index="'+a.index+'" data-numimages="'+a.numImages+'" data-imagetype="'+e.ImageType+'" data-providers="'+a.imageProviders.length+'"',i+=">",i+='<div class="cardBox visualCardBox">',i+='<div class="cardScalable visualCardBox-cardScalable" style="background-color:transparent;">',i+='<div class="cardPadder-backdrop"></div>',i+='<div class="cardContent">';var s=function(e,t,a,n,i){return(i=i||{}).type=a,i.index=n,i.tag="Backdrop"===a?e.BackdropImageTags[n]:"Primary"===a&&e.PrimaryImageTag||e.ImageTags[a],t.getScaledImageUrl(e.Id||e.ItemId,i)}(n,t,e.ImageType,e.ImageIndex,{maxWidth:a.imageSize});return i+='<div class="cardImageContainer" style="background-image:url(\''+s+"');background-position:center center;background-size:contain;\"></div>",i+="</div>",i+="</div>",i+='<div class="cardFooter visualCardBox-cardFooter">',i+='<h3 class="cardText cardTextCentered" style="margin:0;">'+l.ZP.translate(""+e.ImageType)+"</h3>",i+='<div class="cardText cardText-secondary cardTextCentered">',e.Width&&e.Height?i+=e.Width+" X "+e.Height:i+="&nbsp;",i+="</div>",a.enableFooterButtons&&(i+='<div class="cardText cardTextCentered">',"Backdrop"===e.ImageType?(a.index>0?i+='<button type="button" is="paper-icon-button-light" class="btnMoveImage autoSize" data-imagetype="'+e.ImageType+'" data-index="'+e.ImageIndex+'" data-newindex="'+(e.ImageIndex-1)+'" title="'+l.ZP.translate("MoveLeft")+'"><span class="material-icons chevron_left"></span></button>':i+='<button type="button" is="paper-icon-button-light" class="autoSize" disabled title="'+l.ZP.translate("MoveLeft")+'"><span class="material-icons chevron_left" aria-hidden="true"></span></button>',a.index<a.numImages-1?i+='<button type="button" is="paper-icon-button-light" class="btnMoveImage autoSize" data-imagetype="'+e.ImageType+'" data-index="'+e.ImageIndex+'" data-newindex="'+(e.ImageIndex+1)+'" title="'+l.ZP.translate("MoveRight")+'"><span class="material-icons chevron_right" aria-hidden="true"></span></button>':i+='<button type="button" is="paper-icon-button-light" class="autoSize" disabled title="'+l.ZP.translate("MoveRight")+'"><span class="material-icons chevron_right" aria-hidden="true"></span></button>'):a.imageProviders.length&&(i+='<button type="button" is="paper-icon-button-light" data-imagetype="'+e.ImageType+'" class="btnSearchImages autoSize" title="'+l.ZP.translate("Search")+'"><span class="material-icons search" aria-hidden="true"></span></button>'),i+='<button type="button" is="paper-icon-button-light" data-imagetype="'+e.ImageType+'" data-index="'+(null!=e.ImageIndex?e.ImageIndex:"null")+'" class="btnDeleteImage autoSize" title="'+l.ZP.translate("Delete")+'"><span class="material-icons delete" aria-hidden="true"></span></button>',i+="</div>"),i+="</div>",(i+="</div>")+"</"+a.tagName+">"}function k(e,t,a,n,i,r){var s=function(){i.deleteItemImage(t,a,n).then((function(){f=!0,y(e)}))};r?(0,h.Z)({text:l.ZP.translate("ConfirmDeleteImage"),confirmText:l.ZP.translate("Delete"),primary:"delete"}).then(s):s()}function P(e,t,a,n,i,r,s){t.updateItemImageIndex(a,n,i,r).then((function(){f=!0,y(e,null,s)}),(function(){(0,b.Z)(l.ZP.translate("ErrorDefault"))}))}function S(e,t,a,n,i,r){var o="",l=300,c=s.ZP.getWindowSize();c.innerWidth>=1280&&(l=Math.round(c.innerWidth/4));for(var m=d.Z.tv?"button":"div",g=!d.Z.tv,p=0,b=n.length;p<b;p++)o+=x(n[p],a,{index:p,numImages:b,imageProviders:i,imageSize:l,tagName:m,enableFooterButtons:g});r.innerHTML=o,u.default.lazyChildren(r)}function T(e,t){a.e(44112).then(a.bind(a,44112)).then((function(a){a.show(n.Id,n.ServerId,n.Type,t,"Season"==n.Type?n.ParentId:null).then((function(){f=!0,y(e)}))}))}function A(e){return new Promise((function(t,o){f=!1,function(e,t,o){var u=e.itemId,m=e.serverId;r.ZP.show();var b=p.Z.getApiClient(m);b.getItem(b.getCurrentUserId(),u).then((function(u){var m={removeOnClose:!0};d.Z.tv?m.size="fullscreen":m.size="small";var b=i.default.createDialog(m);b.classList.add("formDialog"),b.innerHTML=l.ZP.translateHtml(v,"core"),d.Z.tv&&c.default.centerFocus.on(b,!1),function(e,t){for(var i=e.querySelectorAll(".btnOpenUploadMenu"),r=g.M.supports("fileinput"),d=0,o=i.length;d<o;d++)r?i[d].classList.remove("hide"):i[d].classList.add("hide");C(e,"btnOpenUploadMenu","click",(function(){var i=this.getAttribute("data-imagetype");a.e(42470).then(a.bind(a,42470)).then((function(a){a.default.show({theme:t.theme,imageType:i,itemId:n.Id,serverId:n.ServerId}).then((function(t){t&&(f=!0,y(e))}))}))})),C(e,"btnSearchImages","click",(function(){T(e,this.getAttribute("data-imagetype"))})),C(e,"btnBrowseAllImages","click",(function(){T(e,this.getAttribute("data-imagetype")||"Primary")})),C(e,"btnImageCard","click",(function(){!function(e,t){var n=t.getAttribute("data-id"),i=t.getAttribute("data-serverid"),r=p.Z.getApiClient(i),d=t.getAttribute("data-imagetype"),o=parseInt(t.getAttribute("data-index"),10),c=parseInt(t.getAttribute("data-providers"),10),u=parseInt(t.getAttribute("data-numimages"),10);Promise.resolve().then(a.bind(a,12801)).then((function(a){var i=a.default,m=[];m.push({name:l.ZP.translate("Delete"),id:"delete"}),"Backdrop"===d&&(o>0&&m.push({name:l.ZP.translate("MoveLeft"),id:"moveleft"}),o<u-1&&m.push({name:l.ZP.translate("MoveRight"),id:"moveright"})),c&&m.push({name:l.ZP.translate("Search"),id:"search"}),i.show({items:m,positionTo:t}).then((function(a){switch(a){case"delete":k(e,n,d,o,r,!1);break;case"search":T(e,d);break;case"moveleft":P(e,r,n,d,o,o-1,s.ZP.parentWithClass(t,"itemsContainer"));break;case"moveright":P(e,r,n,d,o,o+1,s.ZP.parentWithClass(t,"itemsContainer"))}}))}))}(e,this)})),C(e,"btnDeleteImage","click",(function(){var t=this.getAttribute("data-imagetype"),a=this.getAttribute("data-index");a="null"===a?null:parseInt(a,10);var i=p.Z.getApiClient(n.ServerId);k(e,n.Id,t,a,i,!0)})),C(e,"btnMoveImage","click",(function(){var t=this.getAttribute("data-imagetype"),a=this.getAttribute("data-index"),i=this.getAttribute("data-newindex"),r=p.Z.getApiClient(n.ServerId);P(e,r,n.Id,t,a,i,s.ZP.parentWithClass(this,"itemsContainer"))}))}(b,e),b.addEventListener("close",(function(){d.Z.tv&&c.default.centerFocus.off(b,!1),r.ZP.hide(),f?t():o()})),i.default.open(b),y(b,u),b.querySelector(".btnCancel").addEventListener("click",(function(){i.default.close(b)}))}))}(e,t,o)}))}var w={show:A}}}]);