/*! For license information please see 55802.afd3a7634947e6794dc5.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[55802],{27351:function(e,t,n){n.d(t,{C:function(){return i}}),n(78557),n(90076);var a=n(34789);function r(e){var t,n=document.createElement("textarea");if(n.value=e,document.body.appendChild(n),n.focus(),a.A.iOS&&a.A.iOSVersion<13.4){var r=document.createRange();r.selectNodeContents(n);var i=window.getSelection();i.removeAllRanges(),i.addRange(r),n.setSelectionRange(0,999999)}else n.select();try{t=document.execCommand("copy")?Promise.resolve():Promise.reject()}catch(e){t=Promise.reject()}return document.body.removeChild(n),t}function i(e){return void 0===navigator.clipboard?r(e):navigator.clipboard.writeText(e).catch((function(){return r(e)}))}},55802:function(e,t,n){n.r(t),n.d(t,{getCommands:function(){return w},show:function(){return C}}),n(29305),n(32733),n(84701),n(2623),n(24776),n(64771),n(44962),n(86584),n(25352),n(10849),n(70389),n(36947),n(26437),n(52697),n(78557),n(90076),n(95021),n(83994),n(93062),n(82367);var a=n(34789),r=n(27351),i=n(36300),o=n(5898),s=n(67430),l=n(62882),c=n(22622),d=n(70267),u=n(23648),m=n(39738),y=n(71866),p=n(82885),h=n(11444),f=n(97339);function b(){var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function i(n,a,r,i){var l=a&&a.prototype instanceof s?a:s,c=Object.create(l.prototype);return v(c,"_invoke",function(n,a,r){var i,s,l,c=0,d=r||[],u=!1,m={p:0,n:0,v:e,a:y,f:y.bind(e,4),d:function(t,n){return i=t,s=0,l=e,m.n=n,o}};function y(n,a){for(s=n,l=a,t=0;!u&&c&&!r&&t<d.length;t++){var r,i=d[t],y=m.p,p=i[2];n>3?(r=p===a)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=y&&((r=n<2&&y<i[1])?(s=0,m.v=a,m.n=i[1]):y<p&&(r=n<3||i[0]>a||a>p)&&(i[4]=n,i[5]=a,m.n=p,s=0))}if(r||n>1)return o;throw u=!0,a}return function(r,d,p){if(c>1)throw TypeError("Generator is already running");for(u&&1===d&&y(d,p),s=d,l=p;(t=s<2?e:l)||!u;){i||(s?s<3?(s>1&&(m.n=-1),y(s,l)):m.n=l:m.v=l);try{if(c=2,i){if(s||(r="next"),t=i[r]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),s=1);i=e}else if((t=(u=m.n<0)?l:n.call(a,m))!==o)break}catch(t){i=e,s=1,l=t}finally{c=1}}return{value:t,done:u}}}(n,r,i),!0),c}var o={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var d=[][a]?t(t([][a]())):(v(t={},a,(function(){return this})),t),u=c.prototype=s.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,v(e,r,"GeneratorFunction")),e.prototype=Object.create(u),e}return l.prototype=c,v(u,"constructor",c),v(c,"constructor",l),l.displayName="GeneratorFunction",v(c,r,"GeneratorFunction"),v(u),v(u,r,"Generator"),v(u,a,(function(){return this})),v(u,"toString",(function(){return"[object Generator]"})),(b=function(){return{w:i,m:m}})()}function v(e,t,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}v=function(e,t,n,a){if(t)r?r(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n;else{var i=function(t,n){v(e,t,(function(e){return this._invoke(t,n,e)}))};i("next",0),i("throw",1),i("return",2)}},v(e,t,n,a)}function I(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){I(i,a,r,o,s,"next",e)}function s(e){I(i,a,r,o,s,"throw",e)}o(void 0)}))}}function T(e){switch(e){case h.D.Series:return o.Ay.translate("DeleteSeries");case h.D.Episode:return o.Ay.translate("DeleteEpisode");case h.D.Playlist:case h.D.BoxSet:return o.Ay.translate("Delete");default:return o.Ay.translate("DeleteMedia")}}function w(e){return P.apply(this,arguments)}function P(){return(P=A(b().m((function e(t){var n,r,s,l,d,y;return b().w((function(e){for(;;)switch(e.n){case 0:if(r=t.item,s=t.user,l=m.f.canPlay(r),d=[],l&&"Photo"!==r.MediaType&&(!1!==t.play&&d.push({name:o.Ay.translate("Play"),id:"resume",icon:"play_arrow"}),t.playAllFromHere&&"Program"!==r.Type&&"TvChannel"!==r.Type&&d.push({name:o.Ay.translate("PlayAllFromHere"),id:"playallfromhere",icon:"play_arrow"})),null!==m.f.getCurrentPlayer()&&(t.stopPlayback&&d.push({name:o.Ay.translate("StopPlayback"),id:"stopPlayback",icon:"stop"}),t.clearQueue&&d.push({name:o.Ay.translate("ClearQueue"),id:"clearQueue",icon:"clear_all"})),m.f.canQueue(r)&&(!1!==t.queue&&d.push({name:o.Ay.translate("AddToPlayQueue"),id:"queue",icon:"playlist_add"}),!1!==t.queue&&d.push({name:o.Ay.translate("PlayNext"),id:"queuenext",icon:"playlist_add"})),!r.IsFolder&&"MusicArtist"!==r.Type&&"MusicGenre"!==r.Type||"livetv"===r.CollectionType||!1===t.shuffle||d.push({name:o.Ay.translate("Shuffle"),id:"shuffle",icon:"shuffle"}),"Audio"!==r.MediaType&&"MusicAlbum"!==r.Type&&"MusicArtist"!==r.Type&&"MusicGenre"!==r.Type||!1===t.instantMix||u.Ay.isLocalItem(r)||d.push({name:o.Ay.translate("InstantMix"),id:"instantmix",icon:"explore"}),d.length&&d.push({divider:!0}),a.A.tv||(t.positionTo&&null!==i.Ay.parentWithClass(t.positionTo,"card")&&d.push({name:o.Ay.translate("Select"),id:"multiSelect",icon:"library_add_check"}),u.Ay.supportsAddingToCollection(r)&&(s.Policy.IsAdministrator||s.Policy.EnableCollectionManagement)&&d.push({name:o.Ay.translate("AddToCollection"),id:"addtocollection",icon:"playlist_add"}),u.Ay.supportsAddingToPlaylist(r)&&!1!==t.playlist&&d.push({name:o.Ay.translate("AddToPlaylist"),id:"addtoplaylist",icon:"playlist_add"})),"Timer"===r.Type&&s.Policy.EnableLiveTvManagement&&!1!==t.cancelTimer&&d.push({name:o.Ay.translate("CancelRecording"),id:"canceltimer",icon:"cancel"}),"Recording"===r.Type&&"InProgress"===r.Status&&s.Policy.EnableLiveTvManagement&&!1!==t.cancelTimer&&d.push({name:o.Ay.translate("CancelRecording"),id:"canceltimer",icon:"cancel"}),"SeriesTimer"===r.Type&&s.Policy.EnableLiveTvManagement&&!1!==t.cancelTimer&&d.push({name:o.Ay.translate("CancelSeries"),id:"cancelseriestimer",icon:"cancel"}),c.g.supports(f.Y.FileDownload)&&(!s.Policy.EnableContentDownloading||"Season"!==r.Type&&"Series"!=r.Type||d.push({name:o.Ay.translate("DownloadAll"),id:"downloadall",icon:"file_download"}),r.CanDownload&&"Book"!==r.Type&&(d.push({name:o.Ay.translate("Download"),id:"download",icon:"file_download"}),d.push({name:o.Ay.translate("CopyStreamURL"),id:"copy-stream",icon:"content_copy"}))),r.CanDelete&&!1!==t.deleteItem&&d.push({name:T(r.Type),id:"delete",icon:"delete"}),d.length&&d.push({divider:!0}),r.Type!==h.D.Playlist){e.n=2;break}return e.n=1,(0,u.Hc)(s,r);case 1:e.v&&d.push({name:o.Ay.translate("Edit"),id:"editplaylist",icon:"edit"});case 2:return u.Ay.canEdit(s,r)&&!1!==t.edit&&"SeriesTimer"!==r.Type&&(y="Timer"===r.Type||"SeriesTimer"===r.Type?o.Ay.translate("Edit"):o.Ay.translate("EditMetadata"),d.push({name:y,id:"edit",icon:"edit"})),u.Ay.canEditImages(s,r)&&!1!==t.editImages&&d.push({name:o.Ay.translate("EditImages"),id:"editimages",icon:"image"}),u.Ay.canEditSubtitles(s,r)&&!1!==t.editSubtitles&&d.push({name:o.Ay.translate("EditSubtitles"),id:"editsubtitles",icon:"closed_caption"}),u.Ay.canEditLyrics(s,r)&&d.push({name:o.Ay.translate("EditLyrics"),id:"editlyrics",icon:"lyrics"}),!1!==t.identify&&u.Ay.canIdentify(s,r)&&d.push({name:o.Ay.translate("Identify"),id:"identify",icon:"edit"}),r.MediaSources&&!1!==t.moremediainfo&&d.push({name:o.Ay.translate("MoreMediaInfo"),id:"moremediainfo",icon:"info"}),"Program"===r.Type&&!1!==t.record&&(r.TimerId?d.push({name:o.Ay.translate("ManageRecording"),id:"record",icon:"fiber_manual_record"}):d.push({name:o.Ay.translate("Record"),id:"record",icon:"fiber_manual_record"})),u.Ay.canRefreshMetadata(r,s)&&d.push({name:o.Ay.translate("RefreshMetadata"),id:"refresh",icon:"refresh"}),r.PlaylistItemId&&t.playlistId&&t.canEditPlaylist&&d.push({name:o.Ay.translate("RemoveFromPlaylist"),id:"removefromplaylist",icon:"playlist_remove"}),r.PlaylistItemId&&t.playlistId&&r.PlaylistIndex>0&&d.push({name:o.Ay.translate("MoveToTop"),id:"movetotop",icon:"vertical_align_top"}),r.PlaylistItemId&&t.playlistId&&r.PlaylistIndex<r.PlaylistItemCount-1&&d.push({name:o.Ay.translate("MoveToBottom"),id:"movetobottom",icon:"vertical_align_bottom"}),t.collectionId&&d.push({name:o.Ay.translate("RemoveFromCollection"),id:"removefromcollection",icon:"playlist_remove"}),!a.A.tv&&!0===t.share&&u.Ay.canShare(r,s)&&d.push({name:o.Ay.translate("Share"),id:"share",icon:"share"}),!1!==t.openAlbum&&r.AlbumId&&"Photo"!==r.MediaType&&d.push({name:o.Ay.translate("ViewAlbum"),id:"album",icon:"album"}),!1!==t.openArtist&&null!==(n=r.AlbumArtists)&&void 0!==n&&n.length&&d.push({name:o.Ay.translate("ViewAlbumArtist"),id:"artist",icon:"person"}),r.HasLyrics&&d.push({name:o.Ay.translate("ViewLyrics"),id:"lyrics",icon:"lyrics"}),e.a(2,d)}}),e)})))).apply(this,arguments)}function g(e,t,n,a,r){return function(){e({command:t,updated:n,deleted:a,itemId:r})}}function k(e,t,a){var l=e.Id,c=e.ServerId,u=s.tF.getApiClient(c);return new Promise((function(s,p){switch(t){case"addtocollection":n.e(80999).then(n.bind(n,3380)).then((function(e){(new(0,e.default)).show({items:[l],serverId:c}).then(g(s,t,!0),g(s,t))}));break;case"addtoplaylist":Promise.all([n.e(45642),n.e(26711)]).then(n.bind(n,4330)).then((function(e){(new(0,e.default)).show({items:[l],serverId:c}).then(g(s,t,!0),g(s,t))}));break;case"download":n.e(23717).then(n.bind(n,23717)).then((function(n){var a=u.getItemDownloadUrl(l);n.download([{url:a,item:e,itemId:l,serverId:c,title:e.Name,filename:e.Path.replace(/^.*[\\/]/,"")}]),g(g(s,t),t)()}));break;case"downloadall":var h=function(e){Promise.all(e.map((function(e){return u.getEpisodes(e.SeriesId,{seasonId:e.Id,userId:a.user.Id,Fields:"CanDownload,Path"})}))).then((function(e){var t;t=e.map((function(e){return e.Items})).flat(),n.e(23717).then(n.bind(n,23717)).then((function(e){var n=t.map((function(e){return{url:u.getItemDownloadUrl(e.Id),item:e,itemId:e.Id,serverId:c,title:e.Name,filename:e.Path.replace(/^.*[\\/]/,"")}}));e.download(n)}))}))};"Season"===e.Type?h([e]):"Series"===e.Type&&u.getSeasons(e.Id,{userId:a.user.Id,Fields:"ItemCounts"}).then((function(e){return h(e.Items)})),g(g(s,t),t)();break;case"copy-stream":var f=u.getItemDownloadUrl(l);(0,r.C)(f).then((function(){(0,y.A)(o.Ay.translate("CopyStreamURLSuccess"))})).catch((function(){prompt(o.Ay.translate("CopyStreamURL"),f)})),g(s,t)();break;case"editsubtitles":n.e(39345).then(n.bind(n,39345)).then((function(e){e.default.show(l,c).then(g(s,t,!0),g(s,t))}));break;case"editlyrics":Promise.all([n.e(45642),n.e(69729)]).then(n.bind(n,69729)).then((function(e){e.default.show(l,c).then(g(s,t,!0),g(s,t))}));break;case"edit":(function(e,t){return new Promise((function(a,r){var i=e.serverInfo().Id;"Timer"===t.Type?n.e(59801).then(n.bind(n,59801)).then((function(e){e.default.show(t.Id,i).then(a,r)})):"SeriesTimer"===t.Type?n.e(95062).then(n.bind(n,72681)).then((function(e){e.default.show(t.Id,i).then(a,r)})):Promise.all([n.e(45642),n.e(26855),n.e(86376)]).then(n.bind(n,26855)).then((function(e){e.default.show(t.Id,i).then(a,r)}))}))})(u,e).then(g(s,t,!0),g(s,t));break;case"editplaylist":Promise.all([n.e(45642),n.e(26711)]).then(n.bind(n,4330)).then((function(e){(new(0,e.default)).show({id:l,serverId:c}).then(g(s,t,!0),g(s,t))}));break;case"editimages":n.e(4350).then(n.bind(n,4350)).then((function(e){e.show({itemId:l,serverId:c}).then(g(s,t,!0),g(s,t))}));break;case"identify":Promise.resolve().then(n.bind(n,92305)).then((function(e){e.show(l,c).then(g(s,t,!0),g(s,t))}));break;case"moremediainfo":n.e(20963).then(n.bind(n,20963)).then((function(e){e.show(l,c).then(g(s,t),g(s,t))}));break;case"multiSelect":n.e(35308).then(n.bind(n,35308)).then((function(e){(0,e.startMultiSelect)(i.Ay.parentWithClass(a.positionTo,"card"))}));break;case"refresh":!function(e,t){n.e(54623).then(n.bind(n,77004)).then((function(n){new(0,n.default)({itemIds:[t.Id],serverId:e.serverInfo().Id,mode:"CollectionFolder"===t.Type?"scan":null}).show()}))}(u,e),g(s,t)();break;case"open":d.appRouter.showItem(e),g(s,t)();break;case"play":S(e,!1),g(s,t)();break;case"resume":S(e,!0),g(s,t)();break;case"queue":S(e,!1,!0),g(s,t)();break;case"queuenext":S(e,!1,!0,!0),g(s,t)();break;case"stopPlayback":m.f.stop();break;case"clearQueue":m.f.clearQueue();break;case"record":Promise.all([n.e(10739),n.e(72044)]).then(n.bind(n,63834)).then((function(e){e.default.show(l,c).then(g(s,t,!0),g(s,t))}));break;case"shuffle":m.f.shuffle(e),g(s,t)();break;case"instantmix":m.f.instantMix(e),g(s,t)();break;case"delete":(function(e,t){return new Promise((function(e,a){n.e(46634).then(n.bind(n,46634)).then((function(n){n.deleteItem({item:t,navigate:!1}).then((function(){e(!0)}),a)}))}))})(0,e).then(g(s,t,!0,!0,l),g(s,t));break;case"share":navigator.share({title:e.Name,text:e.Overview,url:"".concat(u.serverAddress(),"/web/").concat(d.appRouter.getRouteUrl(e))});break;case"album":d.appRouter.showItem(e.AlbumId,e.ServerId),g(s,t)();break;case"artist":d.appRouter.showItem(e.AlbumArtists[0].Id,e.ServerId),g(s,t)();break;case"lyrics":a.isMobile?d.appRouter.show("lyrics"):d.appRouter.showItem(e.Id,e.ServerId),g(s,t)();break;case"playallfromhere":case"queueallfromhere":g(s,t)();break;case"removefromplaylist":u.ajax({url:u.getUrl("Playlists/"+a.playlistId+"/Items",{EntryIds:[e.PlaylistItemId].join(",")}),type:"DELETE"}).then((function(){g(s,t,!0)()}));break;case"movetotop":u.ajax({url:u.getUrl("Playlists/"+a.playlistId+"/Items/"+e.PlaylistItemId+"/Move/0"),type:"POST"}).then((function(){g(s,t,!0)()}));break;case"movetobottom":u.ajax({url:u.getUrl("Playlists/"+a.playlistId+"/Items/"+e.PlaylistItemId+"/Move/"+(e.PlaylistItemCount-1)),type:"POST"}).then((function(){g(s,t,!0)()}));break;case"removefromcollection":u.ajax({type:"DELETE",url:u.getUrl("Collections/"+a.collectionId+"/Items",{Ids:[e.Id].join(",")})}).then((function(){g(s,t,!0)()}));break;case"canceltimer":!function(e,t,a,r){n.e(78938).then(n.bind(n,78938)).then((function(e){var n=e.default,i=t.TimerId||t.Id;n.cancelTimerWithConfirmation(i,t.ServerId).then((function(){g(a,r,!0)()}))}))}(0,e,s,t);break;case"cancelseriestimer":!function(e,t,a,r){n.e(78938).then(n.bind(n,78938)).then((function(e){e.default.cancelSeriesTimerWithConfirmation(t.Id,t.ServerId).then((function(){g(a,r,!0)()}))}))}(0,e,s,t);break;default:p()}}))}function S(e,t,n,a){var r,i="play";n&&(i=a?"queueNext":"queue");var o=0;if(t&&null!==(r=e.UserData)&&void 0!==r&&r.PlaybackPositionTicks&&(o=e.UserData.PlaybackPositionTicks),"Program"===e.Type)m.f[i]({ids:[e.ChannelId],startPositionTicks:o,serverId:e.ServerId});else{var s="items-"+(e.IsFolder?e.Id:e.ParentId)+"-Folder",l=p.getSortValuesLegacy(s);m.f[i]({items:[e],startPositionTicks:o,queryOptions:{SortBy:l.sortBy,SortOrder:l.sortOrder}})}}function C(e){return E.apply(this,arguments)}function E(){return(E=A(b().m((function e(t){var n,a;return b().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,w(t);case 1:if((n=e.v).length){e.n=2;break}throw new Error("No item commands present");case 2:return e.n=3,l.default.show({items:n,positionTo:t.positionTo,resolveOnClick:["share"]});case 3:return a=e.v,e.a(2,k(t.item,a,t))}}),e)})))).apply(this,arguments)}t.default={getCommands:w,show:C}}}]);