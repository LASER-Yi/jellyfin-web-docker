"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1831,28312,30657,40248,91068,96084],{57415:function(e,t,n){n.r(t),n.d(t,{Component:function(){return G}});var r=n(62540),a=n(63696),i=n(65242),o=n(5898),l=n(92779),s=n(63703),c=n(70140),u=n(80401),d=n(69410),f=n(98183),y=function(){var e=(0,d.gf)().api;return(0,u.I)({queryKey:["VirtualFolders"],queryFn:function(t){var n=t.signal;return function(e,t){return n=void 0,r=void 0,i=function(){return function(e,t){var n,r,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(s){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}}(this,(function(n){switch(n.label){case 0:return[4,(0,f.X)(e).getVirtualFolders(t)];case 1:return[2,n.sent().data]}}))},new((a=void 0)||(a=Promise))((function(e,t){function o(e){try{s(i.next(e))}catch(e){t(e)}}function l(e){try{s(i.throw(e))}catch(e){t(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a((function(e){e(n)}))).then(o,l)}s((i=i.apply(n,r||[])).next())}));var n,r,a,i}(e,{signal:n})},enabled:!!e})},m=n(54861),h=n(22204),p=n(13478),v=n(50909),b=n(57962),A=n(69880),g=function(){return[{name:"",value:""},{name:o.Ay.translate("Movies"),value:"movies"},{name:o.Ay.translate("TabMusic"),value:"music"},{name:o.Ay.translate("Shows"),value:"tvshows"},{name:o.Ay.translate("Books"),value:"books"},{name:o.Ay.translate("HomeVideosPhotos"),value:"homevideos"},{name:o.Ay.translate("MusicVideos"),value:"musicvideos"},{name:o.Ay.translate("MixedMoviesShows"),value:"mixed"}]},x=n(44185),C=n(32203),S=n(73696),k=n(31297),w=n(48402),I=n(85637),L=n(44790),j=n(82225),P=n(45464),M=n(17997),q=n(67702),T=n(31858),R=n(60434),F=n(4350),D=n(67430),E=n(22147),O=n(38596),B=n(77004),N=n(57807),H=n(64788),V=n(64680),W=n(36300),$=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},z=function(e){var t,n,i=e.virtualFolder,l=(0,d.gf)().api,s=(0,a.useRef)(null),c=$((0,a.useState)(null),2),u=c[0],y=c[1],m=$((0,a.useState)(!1),2),h=m[0],p=m[1],v=$((0,a.useState)(!1),2),b=v[0],z=v[1],Q=$((0,a.useState)(!1),2),Y=Q[0],K=Q[1],G=function(){var e=(0,d.gf)().api;return(0,O.n)({mutationFn:function(t){return(0,f.X)(e).renameVirtualFolder(t)},onSuccess:function(){k.q.invalidateQueries({queryKey:["VirtualFolders"]})}})}(),_=function(){var e=(0,d.gf)().api;return(0,O.n)({mutationFn:function(t){return(0,f.X)(e).removeVirtualFolder(t)},onSuccess:function(){k.q.invalidateQueries({queryKey:["VirtualFolders"]})}})}(),X=(0,a.useMemo)((function(){if(i.PrimaryImageItemId&&i.ItemId&&l)return(0,H.C)(l).getItemImageUrlById(i.ItemId,V.y.Primary,{maxWidth:Math.round(.4*W.Ay.getScreenWidth())})}),[l,i]),U=(null===(t=g().filter((function(e){return e.value==i.CollectionType}))[0])||void 0===t?void 0:t.name)||o.Ay.translate("Other"),J=(0,a.useCallback)((function(){y(null),p(!1),z(!0)}),[]),Z=(0,a.useCallback)((function(){z(!1)}),[]),ee=(0,a.useCallback)((function(){y(null),p(!1)}),[]),te=(0,a.useCallback)((function(){y(s.current),p(!0)}),[]),ne=(0,a.useCallback)((function(e){i.Name&&G.mutate({refreshLibrary:!0,newName:e,name:i.Name},{onSettled:function(){Z()}})}),[G,i,Z]),re=(0,a.useCallback)((function(){var e;y(null),p(!1),new B.default({itemIds:[i.ItemId],serverId:null===(e=D.tF.currentApiClient())||void 0===e?void 0:e.serverId(),mode:"scan"}).show()}),[i]),ae=(0,a.useCallback)((function(){y(null),p(!1),new S.default({library:i}).then((function(e){e&&k.q.invalidateQueries({queryKey:["VirtualFolders"]})}))}),[i]),ie=(0,a.useCallback)((function(){var e;y(null),p(!1),F.default.show({itemId:i.ItemId,serverId:null===(e=D.tF.currentApiClient())||void 0===e?void 0:e.serverId()}).then((function(){k.q.invalidateQueries({queryKey:["VirtualFolders"]})})).catch((function(){}))}),[i]),oe=(0,a.useCallback)((function(){y(null),p(!1),K(!0)}),[]),le=(0,a.useCallback)((function(){K(!1)}),[]),se=(0,a.useCallback)((function(){i.Name&&_.mutate({name:i.Name,refreshLibrary:!0},{onSettled:function(){K(!1)}})}),[i,_]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E.A,{title:o.Ay.translate("ButtonRename"),open:b,onClose:Z,label:o.Ay.translate("LabelNewName"),helperText:o.Ay.translate("MessageRenameMediaFolder"),initialText:i.Name||"",confirmButtonText:o.Ay.translate("ButtonRename"),onConfirm:ne}),(0,r.jsx)(N.A,{open:Y,title:o.Ay.translate("HeaderRemoveMediaFolder"),text:o.Ay.translate("MessageAreYouSureYouWishToRemoveMediaFolder")+"\n\n"+o.Ay.translate("MessageTheFollowingLocationWillBeRemovedFromLibrary")+"\n\n"+(null===(n=i.Locations)||void 0===n?void 0:n.join("\n")),confirmButtonText:o.Ay.translate("Delete"),confirmButtonColor:"error",onConfirm:se,onCancel:le}),(0,r.jsx)(A.A,{title:i.Name||"",text:U,image:X,icon:(0,r.jsx)(x.A,{sx:{fontSize:70},children:(0,C.Jd)(i.CollectionType)}),action:!0,actionRef:s,onActionClick:te,onClick:ae,height:260}),(0,r.jsxs)(w.A,{anchorEl:u,open:h,onClose:ee,children:[(0,r.jsxs)(I.A,{onClick:ie,children:[(0,r.jsx)(L.A,{children:(0,r.jsx)(P.A,{})}),(0,r.jsx)(R.A,{children:o.Ay.translate("EditImages")})]}),(0,r.jsxs)(I.A,{onClick:ae,children:[(0,r.jsx)(L.A,{children:(0,r.jsx)(j.A,{})}),(0,r.jsx)(R.A,{children:o.Ay.translate("ManageLibrary")})]}),(0,r.jsxs)(I.A,{onClick:J,children:[(0,r.jsx)(L.A,{children:(0,r.jsx)(M.A,{})}),(0,r.jsx)(R.A,{children:o.Ay.translate("ButtonRename")})]}),(0,r.jsxs)(I.A,{onClick:re,children:[(0,r.jsx)(L.A,{children:(0,r.jsx)(q.A,{})}),(0,r.jsx)(R.A,{children:o.Ay.translate("ScanLibrary")})]}),(0,r.jsxs)(I.A,{onClick:oe,children:[(0,r.jsx)(L.A,{children:(0,r.jsx)(T.A,{})}),(0,r.jsx)(R.A,{children:o.Ay.translate("ButtonRemove")})]})]})]})},Q=n(84849),Y=n(84826),K=n(30374),G=function(){var e=y(),t=e.data,n=e.isPending,u=(0,h.V)(),d=(0,m.A)({isHidden:!1}),f=d.data,A=d.isPending,x=(0,a.useMemo)((function(){return null==f?void 0:f.find((function(e){return"RefreshLibrary"===e.Key}))}),[f]),C=(0,a.useCallback)((function(){new Y.default({collectionTypeOptions:g()}).then((function(e){e&&k.q.invalidateQueries({queryKey:["VirtualFolders"]})}))}),[]),S=(0,a.useCallback)((function(){(null==x?void 0:x.Id)&&u.mutate({taskId:x.Id})}),[u,x]);return n||A?(0,r.jsx)(Q.A,{}):(0,r.jsx)(i.A,{id:"mediaLibraryPage",title:o.Ay.translate("HeaderLibraries"),className:"mainAnimatedPage type-interior",children:(0,r.jsx)(l.A,{className:"content-primary",children:(0,r.jsxs)(c.A,{spacing:3,mt:2,children:[(0,r.jsxs)(c.A,{direction:"row",alignItems:"center",spacing:1.5,children:[(0,r.jsx)(s.A,{startIcon:(0,r.jsx)(K.A,{}),onClick:C,children:o.Ay.translate("ButtonAddMediaLibrary")}),(0,r.jsx)(s.A,{onClick:S,startIcon:(0,r.jsx)(q.A,{}),loading:x&&x.State===v.D.Running,loadingPosition:"start",variant:"outlined",children:o.Ay.translate("ButtonScanAllLibraries")}),x&&x.State==v.D.Running&&(0,r.jsx)(p.A,{task:x})]}),(0,r.jsx)(l.A,{children:(0,r.jsx)(b.Ay,{container:!0,spacing:2,children:null==t?void 0:t.map((function(e){return(0,r.jsx)(b.Ay,{item:!0,xs:12,sm:6,md:3,lg:2.4,children:(0,r.jsx)(z,{virtualFolder:e})},null==e?void 0:e.ItemId)}))})})]})})})};G.displayName="LibrariesPage"},69880:function(e,t,n){var r=n(62540),a=(n(63696),n(92779)),i=n(13786),o=n(91520),l=n(47587),s=n(75487),c=n(89348),u=n(15723),d=n(36645),f=n(42087),y=n(70140),m=n(9055),h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},h.apply(this,arguments)};t.A=function(e){var t=e.title,n=e.text,p=e.image,v=e.icon,b=e.to,A=e.onClick,g=e.action,x=e.actionRef,C=e.onActionClick,S=e.height,k=e.width;return(0,r.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",height:S||240,width:k},children:[(0,r.jsx)(f.A,h({},b&&{component:m.N_,to:b},{onClick:A,sx:{display:"flex",flexGrow:1,alignItems:"stretch"},children:p?(0,r.jsx)(l.A,{sx:{flexGrow:1},image:p,title:t}):(0,r.jsx)(a.A,{className:(0,d.Qp)(t),sx:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center"},children:v})})),(0,r.jsx)(o.A,{sx:{minHeight:50,"&:last-child":{paddingBottom:2,paddingRight:1}},children:(0,r.jsxs)(y.A,{flexGrow:1,direction:"row",children:[(0,r.jsxs)(y.A,{flexGrow:1,children:[(0,r.jsx)(c.A,{gutterBottom:!0,sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:t}),n&&(0,r.jsx)(c.A,{variant:"body2",color:"text.secondary",children:n})]}),(0,r.jsx)(a.A,{children:g?(0,r.jsx)(s.A,{ref:x,onClick:C,children:(0,r.jsx)(u.A,{})}):null})]})})]})}},73696:function(e,t,n){n.r(t),n.d(t,{MediaLibraryEditor:function(){return L},default:function(){return M}}),n(29305),n(32733),n(84701),n(81678),n(14382),n(44962),n(86584),n(4754),n(94),n(77575),n(36947),n(78557),n(96054),n(90076),n(83994),n(82367);var r=n(22696),a=n.n(r),i=(n(63855),n(8566)),o=n(79754),l=n(36300),s=n(9938),c=n(5898),u=(n(10353),n(15453),n(6882),n(41177)),d=n(71866),f=n(47602);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function h(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e){var t=function(e){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}function v(){if(P)return!1;P=!0,i.Ay.show();var e=l.Ay.parentWithClass(this,"dlg-libraryeditor");if(!I.library.ItemId)return i.Ay.hide(),o.default.close(e),(0,u.A)({text:c.Ay.translate("LibraryInvalidItemIdError")}),!1;var t=s.Ay.getLibraryOptions(e.querySelector(".libraryOptions"));return t=Object.assign(I.library.LibraryOptions||{},t),ApiClient.updateVirtualFolderOptions(I.library.ItemId,t).then((function(){j=!0,P=!1,i.Ay.hide(),o.default.close(e)}),(function(){P=!1,i.Ay.hide()})),!1}function b(e){var t=l.Ay.parentWithClass(e.target,"listItem");if(t){var n,r=parseInt(t.getAttribute("data-index"),10),a=(null===(n=I.library.LibraryOptions)||void 0===n?void 0:n.PathInfos)||[],i=null==r?{}:a[r]||{},o=i.Path||(null==r?null:I.library.Locations[r]),s=l.Ay.parentWithClass(e.target,"btnRemovePath");if(s)return void function(e,t){var n=e,r=I.library;(0,f.A)({title:c.Ay.translate("HeaderRemoveMediaLocation"),text:c.Ay.translate("MessageConfirmRemoveMediaLocation"),confirmText:c.Ay.translate("Delete"),primary:"delete"}).then((function(){var e=I.refresh;ApiClient.removeMediaPath(r.Name,t,e).then((function(){j=!0,g(l.Ay.parentWithClass(n,"dlg-libraryeditor"))}),(function(){(0,d.A)(c.Ay.translate("ErrorDefault"))}))}))}(s,o);S(l.Ay.parentWithClass(t,"dlg-libraryeditor"),o,i.NetworkPath)}}function A(e,t){var n="";return n+='<div class="listItem listItem-border lnkPath" data-index="'.concat(t,'">'),n+='<div class="'.concat(e.NetworkPath?"listItemBody two-line":"listItemBody",'">'),n+='<h3 class="listItemBodyText">',n+=a()(e.Path),n+="</h3>",e.NetworkPath&&(n+='<div class="listItemBodyText secondary">'.concat(a()(e.NetworkPath),"</div>")),n+="</div>",(n+='<button type="button" is="paper-icon-button-light" class="listItemButton btnRemovePath" data-index="'.concat(t,'"><span class="material-icons remove_circle" aria-hidden="true"></span></button>'))+"</div>"}function g(e){ApiClient.getVirtualFolders().then((function(t){var n=t.filter((function(e){return e.Name===I.library.Name}))[0];n&&(I.library=n,x(e,I))}))}function x(e,t){var n,r=(null===(n=t.library.LibraryOptions)||void 0===n?void 0:n.PathInfos)||[];r.length||(r=t.library.Locations.map((function(e){return{Path:e}}))),"boxsets"===t.library.CollectionType?e.querySelector(".folders").classList.add("hide"):e.querySelector(".folders").classList.remove("hide"),e.querySelector(".folderList").innerHTML=r.map(A).join("")}function C(){S(l.Ay.parentWithClass(this,"dlg-libraryeditor"))}function S(e,t,r){Promise.resolve().then(n.bind(n,21840)).then((function(n){var a=new(0,n.default);a.show({pathReadOnly:null!=t,path:t,networkSharePath:r,callback:function(n,r){n&&(t?function(e,t,n){var r=I.library;ApiClient.updateMediaPath(r.Name,{Path:t,NetworkPath:n}).then((function(){j=!0,g(e)}),(function(){(0,d.A)(c.Ay.translate("ErrorAddingMediaPathToVirtualFolder"))}))}(e,t,r):function(e,t,n){var r=I.library,a=I.refresh;ApiClient.addMediaPath(r.Name,t,n,a).then((function(){j=!0,g(e)}),(function(){(0,d.A)(c.Ay.translate("ErrorAddingMediaPathToVirtualFolder"))}))}(e,n,r)),a.close()}})}))}function k(){w.resolveWith(null,[j])}var w,I,L=h((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=jQuery.Deferred();I=t,w=n,j=!1;var r=o.default.createDialog({size:"small",modal:!1,removeOnClose:!0,scrollY:!1});return r.classList.add("dlg-libraryeditor"),r.classList.add("ui-body-a"),r.classList.add("background-theme-a"),r.classList.add("formDialog"),r.innerHTML=c.Ay.translateHtml('<div class="formDialogHeader"> <button type="button" is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1" title="${ButtonBack}"><span class="material-icons arrow_back" aria-hidden="true"></span></button> <h3 class="formDialogHeaderTitle"></h3> </div> <div class="formDialogContent scrollY" style="padding-top:2em"> <div class="dialogContentInner dialog-content-centered"> <div class="infoBanner" style="margin-bottom:1.8em"> ${ChangingMetadataImageSettingsNewContent} </div> <div class="folders hide"> <div style="display:flex;align-items:center"> <h1 style="margin:.5em 0">${Folders}</h1> <button is="emby-button" type="button" class="fab btnAddFolder submit" title="${Add}"> <span class="material-icons add" aria-hidden="true"></span> </button> </div> <div class="paperList folderList" style="margin-bottom:2em"></div> </div> <div class="libraryOptions"></div> </div> </div> <div class="formDialogFooter"> <button is="emby-button" type="button" class="raised btnSubmit button-submit block formDialogFooterItem"> <span>${ButtonOk}</span> </button> </div> '),r.querySelector(".formDialogHeaderTitle").innerText=t.library.Name,function(e,t){x(e,t),e.querySelector(".btnAddFolder").addEventListener("click",C),e.querySelector(".folderList").addEventListener("click",b),e.querySelector(".btnSubmit").addEventListener("click",v),s.Ay.embed(e.querySelector(".libraryOptions"),t.library.CollectionType,t.library.LibraryOptions)}(r,t),r.addEventListener("close",k),o.default.open(r),r.querySelector(".btnCancel").addEventListener("click",(function(){o.default.close(r)})),g(r),n.promise()})),j=!1,P=!1,M=L},77004:function(e,t,n){n.r(t),n(29305),n(32733),n(84701),n(81678),n(44962),n(4754),n(94),n(36947),n(78557),n(90076),n(83994),n(23630),n(82367);var r=n(36300),a=n(79754),i=n(8566),o=n(46782),l=n(5898),s=n(67430),c=(n(98959),n(10353),n(15453),n(77157),n(63001),n(71866));function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}function y(e,t,r){Promise.resolve().then(n.bind(n,10838)).then((function(n){var a=r?"on":"off";n.centerFocus[a](e,t)}))}function m(e){i.Ay.show();var t=r.Ay.parentWithClass(e.target,"dialog"),n=this.options,o=s.tF.getApiClient(n.serverId),u="all"===t.querySelector("#selectMetadataRefreshMode").value,d="scan"===t.querySelector("#selectMetadataRefreshMode").value?"Default":"FullRefresh",f="FullRefresh"===d&&t.querySelector(".chkReplaceImages").checked,y="FullRefresh"===d&&t.querySelector(".chkReplaceTrickplayImages").checked;return n.itemIds.forEach((function(e){o.refreshItem(e,{Recursive:!0,ImageRefreshMode:d,MetadataRefreshMode:d,ReplaceAllImages:f,RegenerateTrickplay:y,ReplaceAllMetadata:u})})),a.default.close(t),(0,c.A)(l.Ay.translate("RefreshQueued")),i.Ay.hide(),e.preventDefault(),!1}var h=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t},(t=[{key:"show",value:function(){var e={removeOnClose:!0,scrollY:!1};o.A.tv?e.size="fullscreen":e.size="small";var t=a.default.createDialog(e);t.classList.add("formDialog");var n="",r=l.Ay.translate("RefreshMetadata");return n+='<div class="formDialogHeader">',n+='<button is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1" title="'.concat(l.Ay.translate("ButtonBack"),'"><span class="material-icons arrow_back" aria-hidden="true"></span></button>'),n+='<h3 class="formDialogHeaderTitle">',n+=r,n+="</h3>",n+="</div>",n+=function(){var e="";return e+='<div class="formDialogContent smoothScrollY" style="padding-top:2em;">',e+='<div class="dialogContentInner dialog-content-centered">',e+='<form style="margin:auto;">',e+='<div class="fldSelectPlaylist selectContainer">',e+='<select is="emby-select" id="selectMetadataRefreshMode" label="'+l.Ay.translate("LabelRefreshMode")+'">',e+='<option value="scan" selected>'+l.Ay.translate("ScanForNewAndUpdatedFiles")+"</option>",e+='<option value="missing">'+l.Ay.translate("SearchForMissingMetadata")+"</option>",e+='<option value="all">'+l.Ay.translate("ReplaceAllMetadata")+"</option>",e+="</select>",e+="</div>",e+='<label class="checkboxContainer hide fldReplaceExistingImages">',e+='<input type="checkbox" is="emby-checkbox" class="chkReplaceImages" />',e+="<span>"+l.Ay.translate("ReplaceExistingImages")+"</span>",e+="</label>",e+='<label class="checkboxContainer hide fldReplaceTrickplayImages">',e+='<input type="checkbox" is="emby-checkbox" class="chkReplaceTrickplayImages" />',e+="<span>"+l.Ay.translate("ReplaceTrickplayImages")+"</span>",e+="</label>",e+='<div class="fieldDescription">',e+=l.Ay.translate("RefreshDialogHelp"),e+="</div>",e+='<input type="hidden" class="fldSelectedItemIds" />',e+="<br />",e+='<div class="formDialogFooter">',e+='<button is="emby-button" type="submit" class="raised btnSubmit block formDialogFooterItem button-submit">'+l.Ay.translate("Refresh")+"</button>",e+="</div>",e+="</form>",(e+="</div>")+"</div>"}(),t.innerHTML=n,t.querySelector("form").addEventListener("submit",m.bind(this)),t.querySelector("#selectMetadataRefreshMode").addEventListener("change",(function(){"scan"===this.value?(t.querySelector(".fldReplaceExistingImages").classList.add("hide"),t.querySelector(".fldReplaceTrickplayImages").classList.add("hide")):(t.querySelector(".fldReplaceExistingImages").classList.remove("hide"),t.querySelector(".fldReplaceTrickplayImages").classList.remove("hide"))})),this.options.mode&&(t.querySelector("#selectMetadataRefreshMode").value=this.options.mode),t.querySelector("#selectMetadataRefreshMode").dispatchEvent(new CustomEvent("change")),t.querySelector(".btnCancel").addEventListener("click",(function(){a.default.close(t)})),o.A.tv&&y(t.querySelector(".formDialogContent"),!1,!0),new Promise((function(e){o.A.tv&&y(t.querySelector(".formDialogContent"),!1,!1),t.addEventListener("close",e),a.default.open(t)}))}}])&&d(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();t.default=h},84826:function(e,t,n){n.r(t),n.d(t,{MediaLibraryCreator:function(){return k},default:function(){return j}}),n(29305),n(32733),n(84701),n(81678),n(24776),n(14382),n(69703),n(44962),n(86584),n(4754),n(94),n(36947),n(78557),n(96054),n(90076),n(95021),n(83994),n(93062),n(46968),n(97747),n(82367);var r=n(22696),a=n.n(r),i=n(8566),o=n(79754),l=n(36300),s=n(9938),c=n(5898),u=(n(10353),n(15453),n(98959),n(63001),n(6882),n(71866)),d=n(41177);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function m(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}function p(e){if(e.preventDefault(),L)return!1;if(0==w.length)return(0,d.A)({text:c.Ay.translate("PleaseAddAtLeastOneFolder"),type:"error"}),!1;L=!0,i.Ay.show();var t=l.Ay.parentWithClass(this,"dlg-librarycreator"),n=t.querySelector("#txtValue").value.trim(),r=t.querySelector("#selectCollectionType").value;if(0===n.length)return(0,d.A)({text:c.Ay.translate("LibraryNameInvalid"),type:"error"}),L=!1,i.Ay.hide(),!1;"mixed"==r&&(r=null);var a=s.Ay.getLibraryOptions(t.querySelector(".libraryOptions"));a.PathInfos=w,ApiClient.addVirtualFolder(n,r,S.refresh,a).then((function(){I=!0,L=!1,i.Ay.hide(),o.default.close(t)}),(function(){(0,u.A)(c.Ay.translate("ErrorAddingMediaPathToVirtualFolder")),L=!1,i.Ay.hide()}))}function v(){var e=l.Ay.parentWithClass(this,"dlg-librarycreator");Promise.resolve().then(n.bind(n,21840)).then((function(t){var n=new(0,t.default);n.show({callback:function(t,r){t&&function(e,t,n){var r=t.toLowerCase();if(!w.filter((function(e){return e.Path.toLowerCase()==r})).length){var a={Path:t};n&&(a.NetworkPath=n),w.push(a),A(e)}}(e,t,r),n.close()}})}))}function b(e,t){var n="";return n+='<div class="listItem listItem-border lnkPath">',n+='<div class="'.concat(e.NetworkPath?"listItemBody two-line":"listItemBody",'">'),n+='<div class="listItemBodyText" dir="ltr">'.concat(a()(e.Path),"</div>"),e.NetworkPath&&(n+='<div class="listItemBodyText secondary" dir="ltr">'.concat(a()(e.NetworkPath),"</div>")),n+="</div>",(n+='<button type="button" is="paper-icon-button-light"" class="listItemButton btnRemovePath" data-index="'.concat(t,'"><span class="material-icons remove_circle" aria-hidden="true"></span></button>'))+"</div>"}function A(e){var t=w.map(b).join(""),n=e.querySelector(".folderList");n.innerHTML=t,t?n.classList.remove("hide"):n.classList.add("hide")}function g(e){var t=l.Ay.parentWithClass(e.target,"btnRemovePath"),n=parseInt(t.getAttribute("data-index"),10),r=w[n].Path.toLowerCase();w=w.filter((function(e){return e.Path.toLowerCase()!=r})),A(l.Ay.parentWithClass(t,"dlg-librarycreator"))}function x(){C(I)}var C,S,k=m((function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),new Promise((function(e){S=t,C=e,I=!1;var n,r,a,i=o.default.createDialog({size:"small",modal:!1,removeOnClose:!0,scrollY:!1});i.classList.add("ui-body-a"),i.classList.add("background-theme-a"),i.classList.add("dlg-librarycreator"),i.classList.add("formDialog"),i.innerHTML=c.Ay.translateHtml('<div class="formDialogHeader"> <button type="button" is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1" title="${ButtonBack}"><span class="material-icons arrow_back" aria-hidden="true"></span></button> <h3 class="formDialogHeaderTitle">${ButtonAddMediaLibrary}</h3> </div> <div class="formDialogContent scrollY" style="padding-top:2em"> <div class="dialogContentInner dialog-content-centered"> <form class="addLibraryForm" style="max-width:100%"> <div id="fldCollectionType" class="selectContainer"> <select is="emby-select" id="selectCollectionType" data-mini="true" required="required" label="${LabelContentType}"></select> <div class="collectionTypeFieldDescription fieldDescription"> </div> </div> <div class="inputContainer"> <input is="emby-input" type="text" id="txtValue" required="required" label="${LabelDisplayName}"/> </div> <div class="folders"> <div style="display:flex;align-items:center"> <h1 style="margin:.5em 0">${Folders}</h1> <button is="emby-button" type="button" class="fab btnAddFolder submit" title="${Add}"> <span class="material-icons add" aria-hidden="true"></span> </button> </div> <div class="paperList folderList hide" style="margin-bottom:2em"></div> </div> <div class="libraryOptions"></div> <div class="formDialogFooter"> <button is="emby-button" type="submit" class="raised btnSubmit button-submit block formDialogFooterItem"> <span>${ButtonOk}</span> </button> </div> </form> </div> </div> '),n=i,r=t.collectionTypeOptions,(a=n.querySelector("#selectCollectionType")).innerHTML=function(e){return e.map((function(e){return'<option value="'.concat(e.value,'">').concat(e.name,"</option>")})).join("")}(r),a.value="",a.addEventListener("change",(function(){var e=this.value,t=l.Ay.parentWithClass(this,"dialog");if(s.Ay.setContentType(t.querySelector(".libraryOptions"),e),e?t.querySelector(".libraryOptions").classList.remove("hide"):t.querySelector(".libraryOptions").classList.add("hide"),"mixed"!=e){var n=this.selectedIndex;if(-1!=n){var a=this.options[n].innerHTML.replaceAll("*","").replaceAll("&amp;","&");t.querySelector("#txtValue").value=a}}var i=r.find((function(t){return t.value===e}));t.querySelector(".collectionTypeFieldDescription").innerHTML=(null==i?void 0:i.message)||""})),n.querySelector(".btnAddFolder").addEventListener("click",v),n.querySelector(".addLibraryForm").addEventListener("submit",p),n.querySelector(".folderList").addEventListener("click",g),i.addEventListener("close",x),o.default.open(i),i.querySelector(".btnCancel").addEventListener("click",(function(){o.default.close(i)})),w=[],A(i),function(e){s.Ay.embed(e.querySelector(".libraryOptions")).then((function(){e.querySelector("#selectCollectionType").dispatchEvent(new Event("change"))}))}(i)}))})),w=[],I=!1,L=!1,j=k}}]);