"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5319],{27037:function(e,a,t){t.r(a),t.d(a,{default:function(){return S}}),t(61013),t(98010),t(63238);var n=t(65009),r=t.n(n),s=t(56705),i=t(6383),d=t(78695),c=t(3319),l=t(67469),o=t(27515),u=t(33942),v=t(78407),h=t(83094),f=t(47518),g=(t(85427),t(15359),t(69523),t(32420),t(46650),t(78066),t(93586)),Z=t(53913),m=t(61642),p=t(61097),P=!f.Z.slow&&!f.Z.edge;function b(e){(0,m.Z)(e)}function S(e,a){function t(e){var a=[];a.push({name:u.ZP.translate("Connect"),id:"connect"}),a.push({name:u.ZP.translate("Delete"),id:"delete"}),v.default.show({items:a,title:e.Name}).then((function(a){switch(a){case"connect":!function(e){s.ZP.show(),Z.Z.connectToServer(e,{enableAutoLogin:l.Z.enableAutoLogin()}).then((function(e){s.ZP.hide();var a=e.ApiClient;switch(e.State){case"SignedIn":g.ZP.onServerChanged(a.getCurrentUserId(),a.accessToken(),a),g.ZP.navigate("home.html");break;case"ServerSignIn":g.ZP.onServerChanged(null,null,a),g.ZP.navigate("login.html?serverid="+e.Servers[0].Id);break;case"ServerUpdateNeeded":b({text:u.ZP.translate("core#ServerUpdateNeeded","https://github.com/jellyfin/jellyfin"),html:u.ZP.translate("core#ServerUpdateNeeded",'<a href="https://github.com/jellyfin/jellyfin">https://github.com/jellyfin/jellyfin</a>')});break;default:b({text:u.ZP.translate("MessageUnableToConnectToServer")})}}))}(e);break;case"delete":!function(e){s.ZP.show(),Z.Z.deleteServer(e.Id).then((function(){s.ZP.hide(),f()}))}(e)}}))}function n(a){m=a,function(e,a){var t=a.map((function(e){return{name:e.Name,showIcon:!0,icon:"cast",cardType:"",id:e.Id,server:e}})),n=t.map((function(e){var a;a=e.showIcon?'<span class="cardImageIcon material-icons '+e.icon+'" aria-hidden="true"></span>':'<div class="cardImage" style="'+e.cardImageStyle+'"></div>';var t="card overflowSquareCard loginSquareCard scalableCard overflowSquareCard-scalable";d.Z.tv&&(t+=" show-focus",P&&(t+=" show-animation"));var n="";return n+='<button raised class="'+t+'" style="display:inline-block;" data-id="'+e.id+'" data-url="'+(e.url||"")+'" data-cardtype="'+e.cardType+'">',n+='<div class="cardBox">',n+='<div class="cardScalable">',n+='<div class="cardPadder cardPadder-square">',n+="</div>",n+='<div class="cardContent">',n+='<div class="cardImageContainer coveredImage '.concat(p.default.getDefaultBackgroundClass(),'">'),n+=a,n+="</div>",n+="</div>",n+="</div>",n+='<div class="cardFooter">',(n+='<div class="cardText cardTextCentered">'+r()(e.name)+"</div>")+"</div></div></button>"})).join(""),i=e.querySelector(".servers");t.length||(n="<p>"+u.ZP.translate("MessageNoServersAvailable")+"</p>"),i.innerHTML=n,s.ZP.hide()}(e,a),d.Z.tv&&o.Z.autoFocus(e)}function f(){s.ZP.show(),Z.Z.getAvailableServers().then(n)}var m;!function(e,a){"1"==a.showuser?(e.classList.add("libraryPage"),e.classList.remove("standalonePage"),e.classList.add("noSecondaryNavPage")):(e.classList.add("standalonePage"),e.classList.remove("libraryPage"),e.classList.remove("noSecondaryNavPage"))}(e,a),e.addEventListener("viewshow",(function(e){var a=e.detail.isRestored;c.Z.setTitle(null),c.Z.setTransparentMenu(!0),a||f()})),e.querySelector(".servers").addEventListener("click",(function(e){var a=h.ZP.parentWithClass(e.target,"card");if(a){var n=a.getAttribute("data-url");if(n)i.appRouter.show(n);else{var r=a.getAttribute("data-id");t(m.filter((function(e){return e.Id===r}))[0])}}}))}}}]);