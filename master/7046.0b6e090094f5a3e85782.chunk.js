"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7046],{27046:function(e,t,a){a.r(t),a.d(t,{getCommands:function(){return m},show:function(){return f}}),a(5769),a(63238),a(61418),a(17460),a(14078),a(52077),a(911),a(23938);var n=a(47518),i=a(44614),r=a(78407),o=a(94389),s=a(86628),l=a(71616),c=a(53218),d=a(53913),u=a(25152);function m(e){var t=e.item,a=e.user,r=c.O.canPlay(t),s=(n.Z.operaTv||n.Z.web0s)&&!a.Policy.IsAdministrator,d=[];r&&"Photo"!==t.MediaType&&(!1!==e.play&&d.push({name:i.ZP.translate("Play"),id:"resume",icon:"play_arrow"}),e.playAllFromHere&&"Program"!==t.Type&&"TvChannel"!==t.Type&&d.push({name:i.ZP.translate("PlayAllFromHere"),id:"playallfromhere",icon:"play_arrow"})),null!==c.O.getCurrentPlayer()&&(e.stopPlayback&&d.push({name:i.ZP.translate("StopPlayback"),id:"stopPlayback",icon:"stop"}),e.clearQueue&&d.push({name:i.ZP.translate("ClearQueue"),id:"clearQueue",icon:"clear_all"})),c.O.canQueue(t)&&(!1!==e.queue&&d.push({name:i.ZP.translate("AddToPlayQueue"),id:"queue",icon:"playlist_add"}),!1!==e.queue&&d.push({name:i.ZP.translate("PlayNext"),id:"queuenext",icon:"playlist_add"})),(t.IsFolder||"MusicArtist"===t.Type||"MusicGenre"===t.Type)&&"livetv"!==t.CollectionType&&!1!==e.shuffle&&d.push({name:i.ZP.translate("Shuffle"),id:"shuffle",icon:"shuffle"}),"Audio"!==t.MediaType&&"MusicAlbum"!==t.Type&&"MusicArtist"!==t.Type&&"MusicGenre"!==t.Type||!1===e.instantMix||l.ZP.isLocalItem(t)||d.push({name:i.ZP.translate("InstantMix"),id:"instantmix",icon:"explore"}),d.length&&d.push({divider:!0}),s||(l.ZP.supportsAddingToCollection(t)&&d.push({name:i.ZP.translate("AddToCollection"),id:"addtocollection",icon:"playlist_add"}),l.ZP.supportsAddingToPlaylist(t)&&!1!==e.playlist&&d.push({name:i.ZP.translate("AddToPlaylist"),id:"addtoplaylist",icon:"playlist_add"})),"Timer"===t.Type&&a.Policy.EnableLiveTvManagement&&!1!==e.cancelTimer&&d.push({name:i.ZP.translate("CancelRecording"),id:"canceltimer",icon:"cancel"}),"Recording"===t.Type&&"InProgress"===t.Status&&a.Policy.EnableLiveTvManagement&&!1!==e.cancelTimer&&d.push({name:i.ZP.translate("CancelRecording"),id:"canceltimer",icon:"cancel"}),"SeriesTimer"===t.Type&&a.Policy.EnableLiveTvManagement&&!1!==e.cancelTimer&&d.push({name:i.ZP.translate("CancelSeries"),id:"cancelseriestimer",icon:"cancel"}),t.CanDelete&&!1!==e.deleteItem&&("Playlist"===t.Type||"BoxSet"===t.Type?d.push({name:i.ZP.translate("Delete"),id:"delete",icon:"delete"}):d.push({name:i.ZP.translate("DeleteMedia"),id:"delete",icon:"delete"})),t.CanDownload&&o.M.supports("filedownload")&&"Book"!==t.Type&&(d.push({name:i.ZP.translate("Download"),id:"download",icon:"file_download"}),d.push({name:i.ZP.translate("CopyStreamURL"),id:"copy-stream",icon:"content_copy"})),d.length&&d.push({divider:!0});var u=l.ZP.canEdit(a,t);if(u&&!1!==e.edit&&"SeriesTimer"!==t.Type){var m="Timer"===t.Type||"SeriesTimer"===t.Type?i.ZP.translate("Edit"):i.ZP.translate("EditMetadata");d.push({name:m,id:"edit",icon:"edit"})}return l.ZP.canEditImages(a,t)&&!1!==e.editImages&&d.push({name:i.ZP.translate("EditImages"),id:"editimages",icon:"image"}),u&&("Video"!==t.MediaType||"TvChannel"===t.Type||"Program"===t.Type||"Virtual"===t.LocationType||"Recording"===t.Type&&"Completed"!==t.Status||!1!==e.editSubtitles&&d.push({name:i.ZP.translate("EditSubtitles"),id:"editsubtitles",icon:"closed_caption"})),!1!==e.identify&&l.ZP.canIdentify(a,t)&&d.push({name:i.ZP.translate("Identify"),id:"identify",icon:"edit"}),t.MediaSources&&!1!==e.moremediainfo&&d.push({name:i.ZP.translate("MoreMediaInfo"),id:"moremediainfo",icon:"info"}),"Program"===t.Type&&!1!==e.record&&t.TimerId&&d.push({name:i.ZP.translate("ManageRecording"),id:"record",icon:"fiber_manual_record"}),"Program"===t.Type&&!1!==e.record&&(t.TimerId||d.push({name:i.ZP.translate("Record"),id:"record",icon:"fiber_manual_record"})),l.ZP.canRefreshMetadata(t,a)&&d.push({name:i.ZP.translate("RefreshMetadata"),id:"refresh",icon:"refresh"}),t.PlaylistItemId&&e.playlistId&&d.push({name:i.ZP.translate("RemoveFromPlaylist"),id:"removefromplaylist",icon:"remove"}),e.collectionId&&d.push({name:i.ZP.translate("RemoveFromCollection"),id:"removefromcollection",icon:"remove"}),s||!0===e.share&&l.ZP.canShare(t,a)&&d.push({name:i.ZP.translate("Share"),id:"share",icon:"share"}),!1!==e.sync&&l.ZP.canSync(a,t)&&d.push({name:i.ZP.translate("Sync"),id:"sync",icon:"sync"}),!1!==e.openAlbum&&t.AlbumId&&"Photo"!==t.MediaType&&d.push({name:i.ZP.translate("ViewAlbum"),id:"album",icon:"album"}),!1!==e.openArtist&&t.AlbumArtists&&t.AlbumArtists.length&&d.push({name:i.ZP.translate("ViewAlbumArtist"),id:"artist",icon:"person"}),d}function h(e,t,a,n){return function(){e({command:t,updated:a,deleted:n})}}function p(e,t,a,n){var i=a?n?"queueNext":"queue":"play",r=0;t&&e.UserData&&e.UserData.PlaybackPositionTicks&&(r=e.UserData.PlaybackPositionTicks),"Program"===e.Type?c.O[i]({ids:[e.ChannelId],startPositionTicks:r,serverId:e.ServerId}):c.O[i]({items:[e],startPositionTicks:r})}function f(e){var t=m(e);return t.length?r.default.show({items:t,positionTo:e.positionTo,resolveOnClick:["share"]}).then((function(t){return function(e,t,n){var r=e.Id,o=e.ServerId,l=d.Z.getApiClient(o);return new Promise((function(d,m){switch(t){case"addtocollection":a.e(6372).then(a.bind(a,86372)).then((function(e){new(0,e.default)({items:[r],serverId:o}).then(h(d,t,!0),h(d,t))}));break;case"addtoplaylist":a.e(8013).then(a.bind(a,8013)).then((function(e){new(0,e.default)({items:[r],serverId:o}).then(h(d,t,!0),h(d,t))}));break;case"download":a.e(4111).then(a.bind(a,84111)).then((function(a){var n=l.getItemDownloadUrl(r);a.download([{url:n,itemId:r,serverId:o,title:e.Name,filename:e.Path.replace(/^.*[\\/]/,"")}]),h(h(d,t),t)()}));break;case"copy-stream":var f=l.getItemDownloadUrl(r),y=function(){var e=document.createElement("textarea");e.value=f,document.body.appendChild(e),e.focus(),e.select(),document.execCommand("copy")?(0,u.Z)(i.ZP.translate("CopyStreamURLSuccess")):prompt(i.ZP.translate("CopyStreamURL"),f),document.body.removeChild(e)};void 0===navigator.clipboard?y():navigator.clipboard.writeText(f).then((function(){(0,u.Z)(i.ZP.translate("CopyStreamURLSuccess"))})).catch((function(){y()})),h(d,t)();break;case"editsubtitles":a.e(2912).then(a.bind(a,52912)).then((function(e){e.default.show(r,o).then(h(d,t,!0),h(d,t))}));break;case"edit":(function(e,t){return new Promise((function(n,i){var r=e.serverInfo().Id;"Timer"===t.Type?a.e(3202).then(a.bind(a,3202)).then((function(e){e.default.show(t.Id,r).then(n,i)})):"SeriesTimer"===t.Type?a.e(3940).then(a.bind(a,63940)).then((function(e){e.default.show(t.Id,r).then(n,i)})):a.e(4420).then(a.bind(a,84420)).then((function(e){e.default.show(t.Id,r).then(n,i)}))}))})(l,e).then(h(d,t,!0),h(d,t));break;case"editimages":a.e(1121).then(a.bind(a,71121)).then((function(e){e.show({itemId:r,serverId:o}).then(h(d,t,!0),h(d,t))}));break;case"identify":Promise.resolve().then(a.bind(a,91818)).then((function(e){e.show(r,o).then(h(d,t,!0),h(d,t))}));break;case"moremediainfo":a.e(4609).then(a.bind(a,74609)).then((function(e){e.show(r,o).then(h(d,t),h(d,t))}));break;case"refresh":!function(e,t){a.e(4231).then(a.bind(a,14231)).then((function(a){new(0,a.default)({itemIds:[t.Id],serverId:e.serverInfo().Id,mode:"CollectionFolder"===t.Type?"scan":null}).show()}))}(l,e),h(d,t)();break;case"open":s.appRouter.showItem(e),h(d,t)();break;case"play":p(e,!1),h(d,t)();break;case"resume":p(e,!0),h(d,t)();break;case"queue":p(e,!1,!0),h(d,t)();break;case"queuenext":p(e,!1,!0,!0),h(d,t)();break;case"stopPlayback":c.O.stop();break;case"clearQueue":c.O.clearQueue();break;case"record":Promise.all([a.e(294),a.e(5936)]).then(a.bind(a,55936)).then((function(e){e.default.show(r,o).then(h(d,t,!0),h(d,t))}));break;case"shuffle":c.O.shuffle(e),h(d,t)();break;case"instantmix":c.O.instantMix(e),h(d,t)();break;case"delete":(function(e,t){return new Promise((function(e,n){a.e(6860).then(a.bind(a,96860)).then((function(a){a.deleteItem({item:t,navigate:!1}).then((function(){e(!0)}),n)}))}))})(0,e).then(h(d,t,!0,!0),h(d,t));break;case"share":navigator.share({title:e.Name,text:e.Overview,url:"".concat(l.serverAddress(),"/web/index.html").concat(s.appRouter.getRouteUrl(e))});break;case"album":s.appRouter.showItem(e.AlbumId,e.ServerId),h(d,t)();break;case"artist":s.appRouter.showItem(e.AlbumArtists[0].Id,e.ServerId),h(d,t)();break;case"playallfromhere":case"queueallfromhere":h(d,t)();break;case"removefromplaylist":l.ajax({url:l.getUrl("Playlists/"+n.playlistId+"/Items",{EntryIds:[e.PlaylistItemId].join(",")}),type:"DELETE"}).then((function(){h(d,t,!0)()}));break;case"removefromcollection":l.ajax({type:"DELETE",url:l.getUrl("Collections/"+n.collectionId+"/Items",{Ids:[e.Id].join(",")})}).then((function(){h(d,t,!0)()}));break;case"canceltimer":!function(e,t,n,i){Promise.resolve().then(a.bind(a,58104)).then((function(e){var a=e.default,r=t.TimerId||t.Id;a.cancelTimerWithConfirmation(r,t.ServerId).then((function(){h(n,i,!0)()}))}))}(0,e,d,t);break;case"cancelseriestimer":!function(e,t,n,i){Promise.resolve().then(a.bind(a,58104)).then((function(e){e.default.cancelSeriesTimerWithConfirmation(t.Id,t.ServerId).then((function(){h(n,i,!0)()}))}))}(0,e,d,t);break;default:m()}}))}(e.item,t,e)})):Promise.reject()}t.default={getCommands:m,show:f}}}]);