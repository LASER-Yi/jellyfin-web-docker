"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[38122],{38122:function(e,t,a){a.r(t),a.d(t,{show:function(){return l}}),a(14382),a(76281),a(84734),a(86584),a(78557),a(96054),a(90076),a(99425);var i=a(62882),n=a(39738),r=a(5898),s=a(73706),o=a(86191);function u(e,t,a){var o,u=n.f.getSupportedCommands(t),l=[];if(-1!==u.indexOf("SetAspectRatio")){var p=n.f.getAspectRatio(t),c=n.f.getSupportedAspectRatios(t).filter((function(e){return e.id===p}))[0];l.push({name:r.Ay.translate("AspectRatio"),id:"aspectratio",asideText:c?c.name:null})}if(-1!==u.indexOf("PlaybackRate")){var d=n.f.getPlaybackRate(t),m=n.f.getSupportedPlaybackRates(t).filter((function(e){return e.id===d}))[0];l.push({name:r.Ay.translate("PlaybackRate"),id:"playbackrate",asideText:m?m.name:null})}if(e.quality&&u.includes("SetMaxStreamingBitrate")&&null!=a&&null!==(o=a.Policy)&&void 0!==o&&o.EnableVideoPlaybackTranscoding){var f=function(e){var t=n.f.getPlayerState(e),a=n.f.currentMediaSource(e).MediaStreams.filter((function(e){return"Video"===e.Type}))[0],i=a?a.Width:null,r=a?a.Height:null,o=s.Ay.getVideoQualityOptions({currentMaxBitrate:n.f.getMaxStreamingBitrate(e),isAutomaticBitrateEnabled:n.f.enableAutomaticBitrateDetection(e),videoWidth:i,videoHeight:r,enableAuto:!0}).filter((function(e){return e.selected}));if(!o.length)return null;var u=(o=o[0]).name;return o.autoText&&(t.PlayState&&"Transcode"!==t.PlayState.PlayMethod?u+=" - Direct":u+=" "+o.autoText),u}(t);l.push({name:r.Ay.translate("Quality"),id:"quality",asideText:f})}var b=n.f.getRepeatMode(t);return-1!==u.indexOf("SetRepeatMode")&&n.f.currentMediaSource(t).RunTimeTicks&&l.push({name:r.Ay.translate("RepeatMode"),id:"repeatmode",asideText:"RepeatNone"===b?r.Ay.translate("None"):r.Ay.translate(""+b)}),e.suboffset&&l.push({name:r.Ay.translate("SubtitleOffset"),id:"suboffset",asideText:null}),e.stats&&l.push({name:r.Ay.translate("PlaybackData"),id:"stats",asideText:null}),i.default.show({items:l,positionTo:e.positionTo}).then((function(a){return function(e,t,a){switch(e){case"quality":return function(e,t){var a=n.f.currentMediaSource(e).MediaStreams.filter((function(e){return"Video"===e.Type}))[0],r=a?a.Codec:null,o=a?a.BitRate:null,u=s.Ay.getVideoQualityOptions({currentMaxBitrate:n.f.getMaxStreamingBitrate(e),isAutomaticBitrateEnabled:n.f.enableAutomaticBitrateDetection(e),videoCodec:r,videoBitRate:o,enableAuto:!0}),l=u.map((function(e){var t={name:e.name,id:e.bitrate,asideText:e.secondaryText};return e.selected&&(t.selected=!0),t})),p=u.filter((function(e){return e.selected})),c=p.length?p[0].bitrate:null;return i.default.show({items:l,positionTo:t}).then((function(t){var a=parseInt(t,10);a!==c&&n.f.setMaxStreamingBitrate({enableAutomaticBitrateDetection:!a,maxBitrate:a},e)}))}(a,t.positionTo);case"aspectratio":return function(e,t){var a=n.f.getAspectRatio(e),r=n.f.getSupportedAspectRatios(e).map((function(e){var t=e.id;return{id:t,name:e.name,selected:t===a}}));return i.default.show({items:r,positionTo:t}).then((function(t){return t?(n.f.setAspectRatio(t,e),Promise.resolve()):Promise.reject()}))}(a,t.positionTo);case"playbackrate":return function(e,t){var a=n.f.getPlaybackRate(e),r=n.f.getSupportedPlaybackRates(e).map((function(e){return{id:e.id,name:e.name,selected:e.id===a}}));return i.default.show({items:r,positionTo:t}).then((function(t){return t?(n.f.setPlaybackRate(t,e),Promise.resolve()):Promise.reject()}))}(a,t.positionTo);case"repeatmode":return function(e,t){var a=[],s=n.f.getRepeatMode(e);return a.push({name:r.Ay.translate("RepeatAll"),id:"RepeatAll",selected:"RepeatAll"===s}),a.push({name:r.Ay.translate("RepeatOne"),id:"RepeatOne",selected:"RepeatOne"===s}),a.push({name:r.Ay.translate("None"),id:"RepeatNone",selected:"RepeatNone"===s}),i.default.show({items:a,positionTo:t}).then((function(t){t&&n.f.setRepeatMode(t,e)}))}(a,t.positionTo);case"stats":return t.onOption&&t.onOption("stats"),Promise.resolve();case"suboffset":return t.onOption&&t.onOption("suboffset"),Promise.resolve()}return Promise.reject()}(a,e,t)}))}function l(e){var t=e.player,a=n.f.currentItem(t);return null!=a&&a.ServerId?o.A.getApiClient(a.ServerId).getCurrentUser().then((function(a){return u(e,t,a)})):u(e,t,null)}t.default={show:l}},73706:function(e,t,a){a(14382),a(76281),a(78557);var i=a(5898);t.Ay={getVideoQualityOptions:function(e){var t,a=e.currentMaxBitrate,n=null!==(t=e.videoBitRate)&&void 0!==t?t:-1,r=e.videoCodec,s=n,o=[{name:"120 Mbps",maxHeight:2160,bitrate:12e7},{name:"80 Mbps",maxHeight:2160,bitrate:8e7},{name:"60 Mbps",maxHeight:2160,bitrate:6e7},{name:"40 Mbps",maxHeight:2160,bitrate:4e7},{name:"20 Mbps",maxHeight:2160,bitrate:2e7},{name:"15 Mbps",maxHeight:1440,bitrate:15e6},{name:"10 Mbps",maxHeight:1440,bitrate:1e7},{name:"8 Mbps",maxHeight:1080,bitrate:8e6},{name:"6 Mbps",maxHeight:1080,bitrate:6e6},{name:"4 Mbps",maxHeight:720,bitrate:4e6},{name:"3 Mbps",maxHeight:720,bitrate:3e6},{name:"1.5 Mbps",maxHeight:720,bitrate:15e5},{name:"720 kbps",maxHeight:480,bitrate:72e4},{name:"420 kbps",maxHeight:360,bitrate:42e4}],u=[],l={name:i.Ay.translate("Auto"),bitrate:0,selected:e.isAutomaticBitrateEnabled};if(e.enableAuto&&u.push(l),n>0&&n<o[0].bitrate){r&&["hevc","av1","vp9"].includes(r)&&s<=2e7&&(s*=1.5);var p=o.filter((function(e){return e.bitrate>s})).pop();u.push(p)}if(o.forEach((function(e){(n<=0||e.bitrate<=s)&&u.push(e)})),a){for(var c=u.length-1,d=0,m=u.length;d<m;d++){var f=u[d];if(f.bitrate>0&&f.bitrate<=a){c=d;break}}var b=u[c];e.isAutomaticBitrateEnabled?l.autoText=b.name:b.selected=!0}return u},getAudioQualityOptions:function(e){var t=e.currentMaxBitrate,a=[],n={name:i.Ay.translate("Auto"),bitrate:0,selected:e.isAutomaticBitrateEnabled};if(e.enableAuto&&a.push(n),a.push({name:"2 Mbps",bitrate:2e6}),a.push({name:"1.5 Mbps",bitrate:15e5}),a.push({name:"1 Mbps",bitrate:1e6}),a.push({name:"320 kbps",bitrate:32e4}),a.push({name:"256 kbps",bitrate:256e3}),a.push({name:"192 kbps",bitrate:192e3}),a.push({name:"128 kbps",bitrate:128e3}),a.push({name:"96 kbps",bitrate:96e3}),a.push({name:"64 kbps",bitrate:64e3}),t){for(var r=a.length-1,s=0,o=a.length;s<o;s++){var u=a[s];if(u.bitrate>0&&u.bitrate<=t){r=s;break}}var l=a[r];e.isAutomaticBitrateEnabled?n.autoText=l.name:l.selected=!0}return a}}}}]);