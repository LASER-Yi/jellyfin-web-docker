"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[19029,62882,40501,15605],{35300:function(e,t,n){n(84734),n(77575),n(78557),n(67593),n(23630);var a=n(70267),i=n(98320),r=n(44797),o=n(34789),s=n(76542),l=n(46782),u=n(21069),c=n(65875),d=n(22622),f=n(47629),m=n(5898),p=n(55802),y=(n(15453),n(15605),n(86191));function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function v(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,h(a.key),a)}}function h(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=g(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}n(29305),n(32733),n(84701),n(81678),n(44962),n(4754),n(94),n(36947),n(83994),n(82367);var b,A,S,I,P,T,w,L,k,B,C,x,M,E,q,N,R,F=new(function(){return e=function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=((t=document.createElement("div")).classList.add("appfooter"),document.body.appendChild(t),t),this.add=function(e){this.element.appendChild(e)},this.insert=function(e){"string"==typeof e?this.element.insertAdjacentHTML("afterbegin",e):this.element.insertBefore(e,this.element.firstChild)}},(t=[{key:"destroy",value:function(){this.element=null}}])&&v(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()),O=n(22832),D=(n(57949),[]),U=0,_={},H=0,j=!0,V=!1;function W(){this.classList.add("hide")}function Y(){u.f.playPause(b)}function Q(){if(R)return R;var e,t,n=F.element;return(R=n.querySelector(".nowPlayingBar"))||(n.insertAdjacentHTML("afterbegin",(e="",e+='<div class="nowPlayingBar hide nowPlayingBar-hidden">',e+='<div class="nowPlayingBarTop">',e+='<div class="nowPlayingBarPositionContainer sliderContainer" dir="ltr">',e+='<input type="range" is="emby-slider" pin step=".01" min="0" max="100" value="0" class="slider-medium-thumb nowPlayingBarPositionSlider" data-slider-keep-progress="true"/>',e+="</div>",e+='<div class="nowPlayingBarInfoContainer">',e+='<div class="nowPlayingImage"></div>',e+='<div class="nowPlayingBarText"></div>',e+="</div>",e+='<div class="nowPlayingBarCenter" dir="ltr">',e+='<button is="paper-icon-button-light" class="previousTrackButton mediaButton" title="'.concat(m.Ay.translate("ButtonPreviousTrack"),'"><span class="material-icons skip_previous" aria-hidden="true"></span></button>'),e+='<button is="paper-icon-button-light" class="playPauseButton mediaButton" title="'.concat(m.Ay.translate("ButtonPause"),'"><span class="material-icons pause" aria-hidden="true"></span></button>'),e+='<button is="paper-icon-button-light" class="stopButton mediaButton" title="'.concat(m.Ay.translate("ButtonStop"),'"><span class="material-icons stop" aria-hidden="true"></span></button>'),l.A.mobile||(e+='<button is="paper-icon-button-light" class="nextTrackButton mediaButton" title="'.concat(m.Ay.translate("ButtonNextTrack"),'"><span class="material-icons skip_next" aria-hidden="true"></span></button>')),e+='<div class="nowPlayingBarCurrentTime"></div>',e+="</div>",e+='<div class="nowPlayingBarRight">',e+='<button is="paper-icon-button-light" class="muteButton mediaButton" title="'.concat(m.Ay.translate("Mute"),'"><span class="material-icons volume_up" aria-hidden="true"></span></button>'),e+='<div class="sliderContainer nowPlayingBarVolumeSliderContainer hide" style="width:9em;vertical-align:middle;display:inline-flex;">',e+='<input type="range" is="emby-slider" pin step="1" min="0" max="100" value="0" class="slider-medium-thumb nowPlayingBarVolumeSlider"/>',e+="</div>",e+='<button is="paper-icon-button-light" class="btnAirPlay mediaButton" title="'.concat(m.Ay.translate("AirPlay"),'"><span class="material-icons airplay" aria-hidden="true"></span></button>'),e+='<button is="paper-icon-button-light" class="openLyricsButton mediaButton hide" title="'.concat(m.Ay.translate("Lyrics"),'"><span class="material-icons lyrics" style="top:0.1em" aria-hidden="true"></span></button>'),e+='<button is="paper-icon-button-light" class="toggleRepeatButton mediaButton" title="'.concat(m.Ay.translate("Repeat"),'"><span class="material-icons repeat" aria-hidden="true"></span></button>'),e+='<button is="paper-icon-button-light" class="btnShuffleQueue mediaButton" title="'.concat(m.Ay.translate("Shuffle"),'"><span class="material-icons shuffle" aria-hidden="true"></span></button>'),e+='<div class="nowPlayingBarUserDataButtons">',e+="</div>",e+='<button is="paper-icon-button-light" class="playPauseButton mediaButton" title="'.concat(m.Ay.translate("ButtonPause"),'"><span class="material-icons pause" aria-hidden="true"></span></button>'),l.A.mobile?e+='<button is="paper-icon-button-light" class="nextTrackButton mediaButton" title="'.concat(m.Ay.translate("ButtonNextTrack"),'"><span class="material-icons skip_next" aria-hidden="true"></span></button>'):e+='<button is="paper-icon-button-light" class="btnToggleContextMenu mediaButton" title="'.concat(m.Ay.translate("ButtonMore"),'"><span class="material-icons more_vert" aria-hidden="true"></span></button>'),e+="</div>",(e+="</div>")+"</div>")),window.CustomElements.upgradeSubtree(n),R=n.querySelector(".nowPlayingBar"),l.A.mobile&&(R.querySelector(".btnShuffleQueue").classList.add("hide"),R.querySelector(".nowPlayingBarCenter").classList.add("hide")),o.A.safari&&o.A.slow&&R.classList.add("noMediaProgress"),O.Ay.on(R),A=(t=R).querySelector(".nowPlayingBarCurrentTime"),S=t.querySelector(".nowPlayingImage"),P=t.querySelector(".nowPlayingBarText"),T=t.querySelector(".nowPlayingBarUserDataButtons"),C=t.querySelector(".nowPlayingBarPositionSlider"),w=t.querySelector(".muteButton"),B=t.querySelectorAll(".playPauseButton"),M=t.querySelector(".toggleRepeatButton"),L=t.querySelector(".nowPlayingBarVolumeSlider"),k=t.querySelector(".nowPlayingBarVolumeSliderContainer"),q=R.querySelector(".openLyricsButton"),w.addEventListener("click",(function(){b&&u.f.toggleMute(b)})),t.querySelector(".stopButton").addEventListener("click",(function(){b&&u.f.stop(b)})),B.forEach((function(e){e.addEventListener("click",Y)})),t.querySelector(".nextTrackButton").addEventListener("click",(function(){b&&u.f.nextTrack(b)})),t.querySelector(".previousTrackButton").addEventListener("click",(function(e){if(b){if(u.f.isPlayingAudio(b)){if(e.detail>1)return;if(u.f.currentTime(b)>=5e3||u.f.getCurrentPlaylistIndex(b)<=0)return u.f.seekPercent(0,b),void(C.value=0)}u.f.previousTrack(b)}})),t.querySelector(".previousTrackButton").addEventListener("dblclick",(function(){b&&u.f.previousTrack(b)})),(x=t.querySelector(".btnAirPlay")).addEventListener("click",(function(){b&&u.f.toggleAirPlay(b)})),t.querySelector(".btnShuffleQueue").addEventListener("click",(function(){b&&u.f.toggleQueueShuffleMode()})),q.addEventListener("click",(function(){V?a.appRouter.back():a.appRouter.show("lyrics")})),(M=t.querySelector(".toggleRepeatButton")).addEventListener("click",(function(){switch(u.f.getRepeatMode()){case"RepeatAll":u.f.setRepeatMode("RepeatOne");break;case"RepeatOne":u.f.setRepeatMode("RepeatNone");break;case"RepeatNone":u.f.setRepeatMode("RepeatAll")}})),E=M.querySelector(".material-icons"),k.classList.toggle("hide",d.g.supports("physicalvolumecontrol")),L.addEventListener("input",(function(e){b&&b.setVolume(e.target.value)})),C.addEventListener("change",(function(){if(b){var e=parseFloat(this.value);u.f.seekPercent(e,b)}})),C.getBubbleText=function(e){if(null==_||!_.NowPlayingItem||!H)return"--:--";var t=H;return t/=100,t*=e,i.Ay.getDisplayRunningTime(t)},t.addEventListener("click",(function(e){f.Ay.parentWithTag(e.target,["BUTTON","INPUT"])||a.appRouter.showNowPlaying()}))),R}function z(e){B&&B.forEach((function(t){var n=t.querySelector(".material-icons");n.classList.remove("play_arrow","pause"),n.classList.add(e?"play_arrow":"pause"),t.title=m.Ay.translate(e?"Play":"ButtonPause")}))}function G(e){E.classList.remove("repeat","repeat_one");var t="buttonActive";switch(e){case"RepeatAll":E.classList.add("repeat"),M.classList.add(t);break;case"RepeatOne":E.classList.add("repeat_one"),M.classList.add(t);break;default:E.classList.add("repeat"),M.classList.remove(t)}}function J(e,t,n){if(C&&!C.dragging)if(t){var a=e/t;a*=100,C.value=a}else C.value=0;if(C&&C.setBufferedRanges(n,t,e),A){var r=null==e?"--:--":i.Ay.getDisplayRunningTime(e);t&&(r+=" / "+i.Ay.getDisplayRunningTime(t)),A.innerHTML=r}}function K(e,t){var n=D,a=!0,i=!0;-1===n.indexOf("ToggleMute")&&(a=!1);var r=w.querySelector(".material-icons");r.classList.remove("volume_off","volume_up"),r.classList.add(e?"volume_off":"volume_up"),w.title=m.Ay.translate(e?"Unmute":"Mute"),-1===n.indexOf("SetVolume")&&(i=!1),b.isLocalPlayer&&d.g.supports("physicalvolumecontrol")&&(a=!1,i=!1),w.classList.toggle("hide",!a),L&&(k.classList.toggle("hide",!i),L.dragging||(L.value=t||0))}function X(e){if(N){var t=!!e&&"Audio"===e.Type&&e.HasLyrics;q.classList.toggle("hide",!t),Z()}}function Z(){N&&q.classList.toggle("buttonActive",V)}function $(e,t){console.debug("nowplaying event: "+e.type),re.call(this,e,t)}function ee(){N&&G(u.f.getRepeatMode())}function te(){if(N){var e=u.f.getQueueShuffleMode(),t="buttonActive",n=R.querySelector(".btnShuffleQueue");"Shuffle"===e?n.classList.add(t):n.classList.remove(t)}}function ne(){N=!1;var e=document.getElementsByClassName("nowPlayingBar")[0];e&&function(e){e.offsetWidth,e.classList.add("nowPlayingBar-hidden"),f.Ay.addEventListener(e,f.Ay.whichTransitionEvent(),W,{once:!0})}(e)}function ae(e,t){console.debug("[nowPlayingBar:onPlaybackStopped] event: "+e.type),this.isLocalPlayer?"Audio"!==t.NextMediaType&&ne():t.NextMediaType||ne()}function ie(){N&&z(this.paused())}function re(e,t){if("init"!==e.type){console.debug("[nowPlayingBar:onStateChanged] event: "+e.type);t.NowPlayingItem&&!l.A.tv&&!1!==t.IsFullscreen?this.isLocalPlayer&&t.NowPlayingItem&&"Video"===t.NowPlayingItem.MediaType?ne():(N=!0,R||(Q(),X(t.NowPlayingItem)),function(e,t,n){var a;j?(a=Q(),f.Ay.removeEventListener(a,f.Ay.whichTransitionEvent(),W,{once:!0}),a.classList.remove("hide"),a.offsetWidth,a.classList.remove("nowPlayingBar-hidden")):ne(),_=t;var i=u.f.getPlayerInfo(),r=t.PlayState||{};z(r.IsPaused);var o=i.supportedCommands;D=o,-1===o.indexOf("SetRepeatMode")?M.classList.add("hide"):M.classList.remove("hide");var d=-1===o.indexOf("AirPlay");if(x.classList.toggle("hide",d),G(u.f.getRepeatMode()),te(),K(r.IsMuted,r.VolumeLevel),C&&!C.dragging){C.disabled=!r.CanSeek;var m=t.MediaSource&&null==t.MediaSource.RunTimeTicks;C.setIsClear(m)}var g=t.NowPlayingItem||{};J(r.PositionTicks,g.RunTimeTicks,u.f.getBufferedRanges(n)),function(e){var t=e.NowPlayingItem,n=t?c.A.getNowPlayingNames(t):[];if(P.innerHTML="",n){var a=document.createElement("div"),i=document.createElement("div");if(i.classList.add("nowPlayingBarSecondaryText"),n.length>1&&(n[1].secondary=!0,n[1].text)){var r=document.createElement("a");r.innerText=n[1].text,i.appendChild(r)}if(n[0].text){var o=document.createElement("a");o.innerText=n[0].text,a.appendChild(o)}P.appendChild(a),P.appendChild(i)}var u=t?function(e,t){if(!e)throw new Error("item cannot be null!");if("Episode"!==e.Type)return null;if((t=t||{}).type=t.type||"Primary","Primary"===t.type&&e.SeriesPrimaryImageTag)return t.tag=e.SeriesPrimaryImageTag,y.A.getApiClient(e.ServerId).getScaledImageUrl(e.SeriesId,t);if("Thumb"===t.type){if(e.SeriesThumbImageTag)return t.tag=e.SeriesThumbImageTag,y.A.getApiClient(e.ServerId).getScaledImageUrl(e.SeriesId,t);if(e.ParentThumbImageTag)return t.tag=e.ParentThumbImageTag,y.A.getApiClient(e.ServerId).getScaledImageUrl(e.ParentThumbItemId,t)}return null}(t,{height:70})||function(e,t){var n;if(!e)throw new Error("item cannot be null!");return(t=t||{}).type=t.type||"Primary",null!==(n=e.ImageTags)&&void 0!==n&&n[t.type]?(t.tag=e.ImageTags[t.type],y.A.getApiClient(e.ServerId).getScaledImageUrl(e.PrimaryImageItemId||e.Id,t)):e.AlbumId&&e.AlbumPrimaryImageTag?(t.tag=e.AlbumPrimaryImageTag,y.A.getApiClient(e.ServerId).getScaledImageUrl(e.AlbumId,t)):null}(t,{height:70}):null;if(u!==I&&(u?(I=u,s.default.lazyImage(S,I),S.style.display=null,P.style.marginLeft=null):(I=null,S.style.backgroundImage="",S.style.display="none",P.style.marginLeft="1em")),t.Id){var d=y.A.getApiClient(t.ServerId);d.getItem(d.getCurrentUserId(),t.Id).then((function(e){var t=e.UserData||{},n=null==t.Likes?"":t.Likes;if(!l.A.mobile){var a=R.querySelector(".btnToggleContextMenu"),i=a.cloneNode(!0);a.parentNode.replaceChild(i,a);var r={play:!1,queue:!1,stopPlayback:!0,clearQueue:!0,positionTo:a=R.querySelector(".btnToggleContextMenu")};d.getCurrentUser().then((function(t){a.addEventListener("click",(function(){p.default.show(Object.assign({item:e,user:t},r)).catch((function(){}))}))}))}T.innerHTML='<button is="emby-ratingbutton" type="button" class="mediaButton paper-icon-button-light" data-id="'+e.Id+'" data-serverid="'+e.ServerId+'" data-itemtype="'+e.Type+'" data-likes="'+n+'" data-isfavorite="'+t.IsFavorite+'"><span class="material-icons favorite" aria-hidden="true"></span></button>'}))}else T.innerHTML=""}(t),X(g)}(0,t,this)):ne()}}function oe(){if(N){var e=(new Date).getTime();if(!(e-U<700)){U=e;var t=this;H=u.f.duration(t),J(1e4*u.f.currentTime(t),H,u.f.getBufferedRanges(t))}}}function se(){N&&K(this.isMuted(),this.getVolume())}function le(e,t){var n=u.f.getPlayerState(e);re.call(e,{type:t},n)}function ue(e){V=(0,a.isLyricsPage)(),e!==b&&(function(){var e=b;e&&(r.A.off(e,"playbackstart",$),r.A.off(e,"statechange",$),r.A.off(e,"repeatmodechange",ee),r.A.off(e,"shufflequeuemodechange",te),r.A.off(e,"playbackstop",ae),r.A.off(e,"volumechange",se),r.A.off(e,"pause",ie),r.A.off(e,"unpause",ie),r.A.off(e,"timeupdate",oe),b=null,ne())}(),b=e,e&&(le(e,"init"),r.A.on(e,"playbackstart",$),r.A.on(e,"statechange",$),r.A.on(e,"repeatmodechange",ee),r.A.on(e,"shufflequeuemodechange",te),r.A.on(e,"playbackstop",ae),r.A.on(e,"volumechange",se),r.A.on(e,"pause",ie),r.A.on(e,"unpause",ie),r.A.on(e,"timeupdate",oe)))}r.A.on(u.f,"playerchange",(function(){ue(u.f.getCurrentPlayer())})),ue(u.f.getCurrentPlayer()),document.addEventListener("viewbeforeshow",(function(e){V=(0,a.isLyricsPage)(),Z(),e.detail.options.enableMediaControl?j||(j=!0,b?le(b,"refresh"):ne()):j&&(j=!1,ne())}))},65875:function(e,t,n){n(86584),t.A={getNowPlayingNames:function(e,t){var n,a,i=e,r=null,o=e.Name;e.AlbumId&&"Audio"===e.MediaType&&(i={Id:e.AlbumId,Name:e.Album,Type:"MusicAlbum",IsFolder:!0}),"Video"===e.MediaType&&(null!=e.IndexNumber&&(o=e.IndexNumber+" - "+o),null!=e.ParentIndexNumber&&(o=e.ParentIndexNumber+"."+o));var s="";null!==(n=e.ArtistItems)&&void 0!==n&&n.length?(r={Id:e.ArtistItems[0].Id,Name:e.ArtistItems[0].Name,Type:"MusicArtist",IsFolder:!0},s=e.ArtistItems.map((function(e){return e.Name})).join(", ")):null!==(a=e.Artists)&&void 0!==a&&a.length?s=e.Artists.join(", "):e.SeriesName||e.Album?(s=o,o=e.SeriesName||e.Album,r=i,i=e.SeriesId?{Id:e.SeriesId,Name:e.SeriesName,Type:"Series",IsFolder:!0}:null):e.ProductionYear&&!1!==t&&(s=e.ProductionYear);var l=[];return l.push({text:o,item:i}),s&&l.push({text:s,item:r}),l}}},15605:function(e,t,n){n.r(t);var a=n(10736),i=n(5898),r=n(44797),o=n(10353),s=n(86191);function l(){var e=this,t=e.getAttribute("data-id"),n=e.getAttribute("data-serverid"),a=s.A.getApiClient(n),i=this.getAttribute("data-likes");i="true"===i||"false"!==i&&null,function(e,t,n,a,i){return t.updateFavoriteStatus(t.getCurrentUserId(),n,!i)}(0,a,t,0,"true"===this.getAttribute("data-isfavorite")).then((function(t){c(e,t.Likes,t.IsFavorite)}))}function u(e,t,n){n.ItemId===this.getAttribute("data-id")&&c(this,n.Likes,n.IsFavorite)}function c(e,t,n,a){var i=e.querySelector(".material-icons");n?(i&&(i.classList.add("favorite"),i.classList.add("ratingbutton-icon-withrating")),e.classList.add("ratingbutton-withrating")):(i&&(i.classList.add("favorite"),i.classList.remove("ratingbutton-icon-withrating")),e.classList.remove("ratingbutton-withrating")),!1!==a&&(e.setAttribute("data-isfavorite",n),e.setAttribute("data-likes",null===t?"":t)),d(e,n)}function d(e,t){e.title=t?i.Ay.translate("Favorite"):i.Ay.translate("AddToFavorites");var n=e.querySelector(".button-text");n&&(n.innerText=e.title)}function f(e){var t,n,i;e.removeEventListener("click",l),(i=(t=e)[n="UserDataChanged"])&&(r.A.off(a.default,n,i),t[n]=null)}function m(e){var t,n,i;f(e),e.addEventListener("click",l),t=e,n="UserDataChanged",i=u.bind(t),r.A.on(a.default,n,i),t[n]=i}var p=Object.create(o.A);p.createdCallback=function(){o.A.createdCallback&&o.A.createdCallback.call(this)},p.attachedCallback=function(){o.A.attachedCallback&&o.A.attachedCallback.call(this);var e=this.getAttribute("data-id"),t=this.getAttribute("data-serverid");if(e&&t){var n=this.getAttribute("data-likes");c(this,n="true"===n||"false"!==n&&null,"true"===this.getAttribute("data-isfavorite"),!1),m(this)}else d(this)},p.detachedCallback=function(){o.A.detachedCallback&&o.A.detachedCallback.call(this),f(this)},p.setItem=function(e){if(e){this.setAttribute("data-id",e.Id),this.setAttribute("data-serverid",e.ServerId);var t=e.UserData||{};c(this,t.Likes,t.IsFavorite),m(this)}else this.removeAttribute("data-id"),this.removeAttribute("data-serverid"),this.removeAttribute("data-likes"),this.removeAttribute("data-isfavorite"),f(this)},document.registerElement("emby-ratingbutton",{prototype:p,extends:"button"})},62882:function(e,t,n){n.r(t),n.d(t,{show:function(){return d}});var a=n(22696),i=n.n(a),r=n(79754),o=n(46782),s=n(5898),l=n(47629),u=(n(10353),function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")});function c(e,t,a){Promise.resolve().then(n.bind(n,10838)).then((function(n){var i=a?"on":"off";n.centerFocus[i](e,t)})).catch((function(e){console.warn("Error in centerFocus",e)}))}function d(e){var t,n,a,d={removeOnClose:!0,enableHistory:e.enableHistory,scrollY:!1};o.A.tv?(d.size="fullscreen",a=!0,d.autoFocus=!0):(d.modal=!1,d.entryAnimation=e.entryAnimation,d.exitAnimation=e.exitAnimation,d.entryAnimationDuration=e.entryAnimationDuration||140,d.exitAnimationDuration=e.exitAnimationDuration||100,d.autoFocus=!1);var f=r.default.createDialog(d);a?f.classList.add("actionsheet-fullscreen"):f.classList.add("actionsheet-not-fullscreen"),f.classList.add("actionSheet"),e.dialogClass&&f.classList.add(e.dialogClass);var m="",p=o.A.tv?"scrollY smoothScrollY hiddenScrollY":"scrollY",y="";e.items.length>20&&(y+="min-width:"+(l.Ay.getWindowSize().innerWidth>=300?240:200)+"px;");var g,v=!1,h=[];try{for(var b=u(e.items),A=b.next();!A.done;A=b.next())(g=(w=A.value).icon||(w.selected?"check":null))&&(v=!0),h.push(g||"")}catch(e){t={error:e}}finally{try{A&&!A.done&&(n=b.return)&&n.call(b)}finally{if(t)throw t.error}}o.A.tv&&(m+='<button is="paper-icon-button-light" class="btnCloseActionSheet hide-mouse-idle-tv" tabindex="-1" title="'.concat(s.Ay.translate("ButtonBack"),'">\n                     <span class="material-icons arrow_back" aria-hidden="true"></span>\n                 </button>'));var S=e.title&&!v;S||o.A.tv?m+='<div class="actionSheetContent actionSheetContent-centered">':m+='<div class="actionSheetContent">',e.title&&(m+='<h1 class="actionSheetTitle">'+i()(e.title)+"</h1>"),e.text&&(m+='<p class="actionSheetText">'+i()(e.text)+"</p>");var I="actionSheetScroller";o.A.tv&&(I+=" actionSheetScroller-tv focuscontainer-x focuscontainer-y"),m+='<div class="'+I+" "+p+'" style="'+y+'">';var P="listItem listItem-button actionSheetMenuItem";(e.border||e.shaded)&&(P+=" listItem-border"),e.menuItemClass&&(P+=" "+e.menuItemClass),o.A.tv&&(P+=" listItem-focusscale"),o.A.mobile&&(P+=" actionsheet-xlargeFont");for(var T=0;T<e.items.length;T++){var w;(w=e.items[T]).divider?m+='<div class="actionsheetDivider"></div>':(m+="<button"+(w.selected&&o.A.tv?" autoFocus":"")+' is="emby-button" type="button" class="'+P+'" data-id="'+(null==w.id||""===w.id?w.value:w.id)+'">',(g=h[T])?m+='<span class="actionsheetMenuItemIcon listItemIcon listItemIcon-transparent material-icons '.concat(g,'" aria-hidden="true"></span>'):v&&!S&&(m+='<span class="actionsheetMenuItemIcon listItemIcon listItemIcon-transparent material-icons check" aria-hidden="true" style="visibility:hidden;"></span>'),m+='<div class="listItemBody actionsheetListItemBody">',m+='<div class="listItemBodyText actionSheetItemText">',m+=i()(w.name||w.textContent||w.innerText),m+="</div>",w.secondaryText&&(m+='<div class="listItemBodyText secondary">'.concat(i()(w.secondaryText),"</div>")),m+="</div>",w.asideText&&(m+='<div class="listItemAside actionSheetItemAsideText">'.concat(i()(w.asideText),"</div>")),m+="</button>")}if(e.showCancel&&(m+='<div class="buttons">',m+='<button is="emby-button" type="button" class="btnCloseActionSheet">'.concat(s.Ay.translate("ButtonCancel"),"</button>"),m+="</div>"),m+="</div>",f.innerHTML=m,o.A.tv){var L=f.querySelector(".actionSheetScroller");L&&c(L,!1,!0)}var k=f.querySelector(".btnCloseActionSheet");k&&k.addEventListener("click",(function(){r.default.close(f)}));var B,C=null;return e.timeout&&(B=setTimeout((function(){r.default.close(f)}),e.timeout)),new Promise((function(t,n){var a=!1;f.addEventListener("click",(function(n){var i=l.Ay.parentWithClass(n.target,"actionSheetMenuItem");i&&(C=i.getAttribute("data-id"),e.resolveOnClick&&(Array.isArray(e.resolveOnClick)?-1!==e.resolveOnClick.indexOf(C)&&(t(C),a=!0):(t(C),a=!0)),r.default.close(f))})),f.addEventListener("close",(function(){if(o.A.tv){var i=f.querySelector(".actionSheetScroller");i&&c(i,!1,!1)}B&&(clearTimeout(B),B=void 0),a||(null!=C?(e.callback&&e.callback(C),t(C)):n(new Error("ActionSheet closed without resolving")))})),r.default.open(f).catch((function(e){console.warn("DialogHelper.open error",e)}));var i=e.positionTo&&"fullscreen"!==d.size?function(e,t,n){var a=l.Ay.getWindowSize(),i=a.innerHeight,r=a.innerWidth,o=function(e){var t,n,a=[];if(!document)return a;try{for(var i=u(e),r=i.next();!r.done;r=i.next()){var o=r.value.getBoundingClientRect();a.push({top:o.top,left:o.left,width:o.width,height:o.height})}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return a}([e])[0];"top"!==t.positionY&&(o.top+=(o.height||0)/2),o.left+=(o.width||0)/2;var s=n.offsetHeight||300,c=n.offsetWidth||160;o.top-=s/2,o.left-=c/2;var d=o.left+c-r,f=o.top+s-i;return d>0&&(o.left-=d+20),f>0&&(o.top-=f+20),o.top+=t.offsetTop||0,o.left+=t.offsetLeft||0,o.top=Math.max(o.top,10),o.left=Math.max(o.left,10),o}(e.positionTo,e,f):null;i&&(f.style.position="fixed",f.style.margin="0",f.style.left=i.left+"px",f.style.top=i.top+"px")}))}t.default={show:d}}}]);