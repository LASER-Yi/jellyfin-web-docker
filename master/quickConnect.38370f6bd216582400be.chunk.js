"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[21277],{7037:function(e,n,t){t.r(n);var a=t(24246),i=t(63268),o=t(27378),c=t(27851),r=t(32459),l=t(94994),s=t(88226),u=t(83636),d=t(48215),v=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var a,i,o=t.call(e),c=[];try{for(;(void 0===n||n-- >0)&&!(a=o.next()).done;)c.push(a.value)}catch(e){i={error:e}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(i)throw i.error}}return c};n.default=function(){var e=(0,d.h_)(),n=e.api,t=e.user,p=v((0,c.lr)(),1)[0],f=(0,o.useMemo)((function(){var e;return null!==(e=p.get("code"))&&void 0!==e?e:""}),[]),h=v((0,o.useState)(f),2),m=h[0],b=h[1],y=v((0,o.useState)(),2),C=y[0],g=y[1],k=v((0,o.useState)(!1),2),x=k[0],E=k[1],j=(0,o.useCallback)((function(e){b(e)}),[]),N=(0,o.useCallback)((function(e){var a;if(e.preventDefault(),g(void 0),e.currentTarget.checkValidity()){if(!n)return console.error("[QuickConnect] cannot authorize, missing api instance"),void g("UnknownError");var o=null!==(a=p.get("userId"))&&void 0!==a?a:null==t?void 0:t.Id,c=m.replace(/\s/g,"");console.log("[QuickConnect] authorizing code %s as user %s",c,o),(0,i.y)(n).authorizeQuickConnect({code:c,userId:o}).then((function(){E(!0)})).catch((function(){g("QuickConnectAuthorizeFail")}))}else g("QuickConnectInvalidCode")}),[n,m,p,null==t?void 0:t.Id]);return(0,a.jsx)(r.Z,{id:"quickConnectPreferencesPage",title:l.ZP.translate("QuickConnect"),className:"mainAnimatedPage libraryPage userPreferencesPage noSecondaryNavPage",children:(0,a.jsx)("div",{className:"padded-left padded-right padded-bottom-page",children:(0,a.jsx)("form",{onSubmit:N,children:(0,a.jsxs)("div",{className:"verticalSection",children:[(0,a.jsx)("h2",{className:"sectionTitle",children:l.ZP.translate("QuickConnect")}),(0,a.jsx)("div",{children:l.ZP.translate("QuickConnectDescription")}),(0,a.jsx)("br",{}),C&&(0,a.jsx)("div",{className:"quickConnectError",children:l.ZP.translate(C)}),x?(0,a.jsxs)("div",{style:{textAlign:"center"},children:[(0,a.jsx)("p",{children:l.ZP.translate("QuickConnectAuthorizeSuccess")}),(0,a.jsx)(c.rU,{to:"/home.html",className:"button-link emby-button",children:l.ZP.translate("GoHome")})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{containerClassName:"inputContainer",initialValue:f,onChange:j,id:"txtQuickConnectCode",label:"LabelQuickConnectCode",type:"text",options:"inputmode='numeric' pattern='[0-9\\s]*' minlength='6' required autocomplete='off'"}),(0,a.jsx)(u.Z,{type:"submit",className:"raised button-submit block",title:l.ZP.translate("Authorize")})]})]})})})})}},32459:function(e,n,t){var a=t(24246),i=t(27378),o=t(93110);n.Z=function(e){var n=e.children,t=e.id,c=e.className,r=void 0===c?"":c,l=e.title,s=e.isBackButtonEnabled,u=void 0===s||s,d=e.isMenuButtonEnabled,v=void 0!==d&&d,p=e.isNowPlayingBarEnabled,f=void 0===p||p,h=e.isThemeMediaSupported,m=void 0!==h&&h,b=e.backDropType,y=(0,i.useRef)(null);return(0,i.useEffect)((function(){o.Z.hideView()}),[]),(0,i.useEffect)((function(){var e,n,t,a,i={bubbles:!0,cancelable:!1,detail:{isRestored:!1,options:{enableMediaControl:f,supportsThemeMedia:m}}};null===(e=y.current)||void 0===e||e.dispatchEvent(new CustomEvent("viewbeforeshow",i)),null===(n=y.current)||void 0===n||n.dispatchEvent(new CustomEvent("pagebeforeshow",i)),null===(t=y.current)||void 0===t||t.dispatchEvent(new CustomEvent("viewshow",i)),null===(a=y.current)||void 0===a||a.dispatchEvent(new CustomEvent("pageshow",i))}),[y,f,m]),(0,a.jsx)("div",{ref:y,id:t,"data-role":"page",className:"page ".concat(r),"data-title":l,"data-backbutton":u,"data-menubutton":v,"data-backdroptype":b,children:n})}},83636:function(e,n,t){var a=t(24246),i=(t(27378),t(94994)),o=function(e){var n=e.type,t=e.id,a=e.className,i=e.title,o=e.leftIcon,c=e.rightIcon;return{__html:'<button\n        is="emby-button"\n        type="'.concat(n,'"\n        ').concat(t,'\n        class="').concat(a,'"\n        >\n        ').concat(o,"\n        <span>").concat(i,"</span>\n        ").concat(c,"\n    </button>")}};n.Z=function(e){var n=e.type,t=e.id,c=e.className,r=e.title,l=e.leftIcon,s=e.rightIcon;return(0,a.jsx)("div",{dangerouslySetInnerHTML:o({type:n,id:t?'id="'.concat(t,'"'):"",className:c,title:i.ZP.translate(r),leftIcon:l?'<span class="material-icons '.concat(l,'" aria-hidden="true"></span>'):"",rightIcon:s?'<span class="material-icons '.concat(s,'" aria-hidden="true"></span>'):""})})}},88226:function(e,n,t){var a=t(24246),i=t(27378),o=t(94994);n.Z=function(e){var n=e.containerClassName,t=e.initialValue,c=e.onChange,r=void 0===c?function(){}:c,l=e.type,s=e.id,u=e.label,d=e.options,v=void 0===d?"":d,p=(0,i.useRef)(null),f=(0,i.useMemo)((function(){return function(e){var n=e.id,t=e.label,a=e.initialValue,i=e.options;return{__html:'<input\n        is="emby-input"\n        type="'.concat(e.type,'"\n        id="').concat(n,'"\n        label="').concat(t,'"\n        value="').concat(a,'"\n        ').concat(i,"\n    />")}}({type:l,id:s,label:o.ZP.translate(u),initialValue:t,options:v})}),[]),h=(0,i.useCallback)((function(e){r(e.target.value)}),[r]);return(0,i.useEffect)((function(){var e,n=null===(e=null==p?void 0:p.current)||void 0===e?void 0:e.querySelector("input");return null==n||n.addEventListener("input",h),function(){null==n||n.removeEventListener("input",h)}}),[p,h]),(0,a.jsx)("div",{ref:p,className:n,dangerouslySetInnerHTML:f})}}}]);