"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[10878],{2585:function(e,n,t){t.d(n,{A:function(){return u}});var r=t(62540),a=t(12029),i=t(92779),o=t(69856),l=(t(63696),t(90158)),s=function(){return s=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},s.apply(this,arguments)},c=function(e){var n=e.children,t=e.isLoading,a=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t}(e,["children","isLoading"]);return t?(0,r.jsx)(l.A,s({},a)):n},u=function(e){var n=e.isLoading,t=e.alt,l=e.url,s=e.aspectRatio,u=void 0===s?16/9:s,d=e.FallbackIcon,f=void 0===d?a.A:d;return(0,r.jsx)(o.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",aspectRatio:u,overflow:"hidden"},children:(0,r.jsx)(c,{isLoading:n,variant:"rectangular",width:"100%",height:"100%",children:l?(0,r.jsx)("img",{src:l,alt:t,width:"100%"}):(0,r.jsx)(i.A,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(f,{sx:{height:"25%",width:"auto"}})})})})}},21475:function(e,n,t){t.r(n),t.d(n,{Component:function(){return q},action:function(){return B},loader:function(){return R}});var r=t(62540),a=t(94732),i=t(64788),o=t(31858),l=t(38008),s=t(47891),c=t(92779),u=t(63703),d=t(96441),f=t(70140),p=t(67854),h=t(57836),g=t(89348),y=t(63696),m=t(87404),b=t(9055),v=t(44419),x=t(84849),A=t(2585),C=t(65242),j=t(51371),S=t(69410),w=t(5898),O=t(67430),k=t(31297),L=function(){return L=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},L.apply(this,arguments)},P=function(e,n,t,r){return new(t||(t=Promise))((function(a,i){function o(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,l)}s((r=r.apply(e,n||[])).next())}))},D=function(e,n){var t,r,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(s){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(t=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=n.call(e,i)}catch(e){l=[6,e],r=0}finally{t=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}},I=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,i=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return o},E="branding",N={CustomCss:"CustomCss",LoginDisclaimer:"LoginDisclaimer",SplashscreenEnabled:"SplashscreenEnabled"},B=function(e){return P(void 0,[e],void 0,(function(e){var n,t,r,i,o,l,s,c=e.request;return D(this,(function(e){switch(e.label){case 0:if(!(n=O.tF.getCurrentApi()))throw new Error("No Api instance available");return[4,c.formData()];case 1:return t=e.sent(),r=Object.fromEntries(t),i={CustomCss:null===(o=r.CustomCss)||void 0===o?void 0:o.toString(),LoginDisclaimer:null===(l=r.LoginDisclaimer)||void 0===l?void 0:l.toString(),SplashscreenEnabled:"on"===(null===(s=r.SplashscreenEnabled)||void 0===s?void 0:s.toString())},[4,(0,a.T)(n).updateNamedConfiguration({key:E,body:JSON.stringify(i)})];case 2:return e.sent(),k.q.invalidateQueries({queryKey:[v.t5]}),[2,{isSaved:!0}]}}))}))},R=function(){return k.q.ensureQueryData((0,v.iz)(O.tF.getCurrentApi()))},q=function(){var e,n=(0,S.gf)().api,t=(0,m.cq)(),O=(0,m.mP)(),B="submitting"===t.state,R=(0,v.l9)(),q=R.data,F=R.isPending,T=I((0,y.useState)(q||{}),2),U=T[0],H=T[1],z=I((0,y.useState)(),2),Q=z[0],J=z[1],K=I((0,y.useState)(null!==(e=U.SplashscreenEnabled)&&void 0!==e&&e),2),W=K[0],G=K[1],V=I((0,y.useState)(),2),M=V[0],X=V[1];(0,y.useEffect)((function(){n&&!B&&X(n.getUri(j.u,{t:Date.now()}))}),[n,B]);var Y=(0,y.useCallback)((function(){J(void 0),n&&(0,i.C)(n).deleteCustomSplashscreen().then((function(){X(n.getUri(j.u,{t:Date.now()}))})).catch((function(e){console.error("[BrandingPage] error deleting image",e),J("ImageDeleteFailed")}))}),[n]),Z=(0,y.useCallback)((function(e){J(void 0);var t=e.target.files;if(!n||!t)return!1;var r=t[0],a=new FileReader;a.onerror=function(e){console.error("[BrandingPage] error reading file",e),J("ImageUploadFailed")},a.onabort=function(e){console.warn("[BrandingPage] aborted reading file",e),J("ImageUploadCancelled")},a.onload=function(){var e;if(a.result){var t=a.result,o=t.split(",")[1];(0,i.C)(n).uploadCustomSplashscreen({body:o},{headers:(e={},e["Content-Type"]=r.type,e)}).then((function(){X(t)})).catch((function(e){console.error("[BrandingPage] error uploading splashscreen",e),J("ImageUploadFailed")}))}},a.readAsDataURL(r)}),[n]),$=(0,y.useCallback)((function(e,t){return P(void 0,void 0,void 0,(function(){return D(this,(function(e){switch(e.label){case 0:return G(t),[4,(0,a.T)(n).updateNamedConfiguration({key:E,body:JSON.stringify(L(L({},q),{SplashscreenEnabled:t}))})];case 1:return e.sent(),k.q.invalidateQueries({queryKey:[v.t5]}),[2]}}))}))}),[n,q]),_=(0,y.useCallback)((function(e){var n;Object.keys(N).includes(e.target.name)&&H(L(L({},U),((n={})[e.target.name]=e.target.value,n)))}),[U]),ee=(0,y.useCallback)((function(){J(void 0)}),[]);return F?(0,r.jsx)(x.A,{}):(0,r.jsx)(C.A,{id:"brandingPage",title:w.Ay.translate("HeaderBranding"),className:"mainAnimatedPage type-interior",children:(0,r.jsx)(c.A,{className:"content-primary",children:(0,r.jsx)(b.lV,{method:"POST",onSubmit:ee,children:(0,r.jsxs)(f.A,{spacing:3,children:[(0,r.jsx)(g.A,{variant:"h1",children:w.Ay.translate("HeaderBranding")}),!B&&(null==O?void 0:O.isSaved)&&(0,r.jsx)(s.A,{severity:"success",children:w.Ay.translate("SettingsSaved")}),Q&&(0,r.jsx)(s.A,{severity:"error",children:w.Ay.translate(Q)}),(0,r.jsxs)(f.A,{direction:{xs:"column",sm:"row"},spacing:3,children:[(0,r.jsx)(c.A,{sx:{flex:"1 1 0"},children:(0,r.jsx)(A.A,{isLoading:!1,url:W?M:void 0})}),(0,r.jsxs)(f.A,{spacing:{xs:3,sm:2},sx:{flex:"1 1 0"},children:[(0,r.jsx)(d.A,{control:(0,r.jsx)(p.A,{name:N.SplashscreenEnabled,checked:W,onChange:$}),label:w.Ay.translate("EnableSplashScreen")}),(0,r.jsx)(g.A,{variant:"body2",children:w.Ay.translate("CustomSplashScreenSize")}),(0,r.jsxs)(u.A,{component:"label",variant:"outlined",startIcon:(0,r.jsx)(l.A,{}),disabled:!W,children:[(0,r.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:Z}),w.Ay.translate("UploadCustomImage")]}),(0,r.jsx)(u.A,{variant:"outlined",color:"error",startIcon:(0,r.jsx)(o.A,{}),disabled:!W,onClick:Y,children:w.Ay.translate("DeleteCustomImage")})]})]}),(0,r.jsx)(h.A,{fullWidth:!0,multiline:!0,minRows:5,maxRows:5,name:N.LoginDisclaimer,label:w.Ay.translate("LabelLoginDisclaimer"),helperText:w.Ay.translate("LabelLoginDisclaimerHelp"),value:null==U?void 0:U.LoginDisclaimer,onChange:_,slotProps:{input:{className:"textarea-mono"}}}),(0,r.jsx)(h.A,{fullWidth:!0,multiline:!0,minRows:5,maxRows:20,name:N.CustomCss,label:w.Ay.translate("LabelCustomCss"),helperText:w.Ay.translate("LabelCustomCssHelp"),value:null==U?void 0:U.CustomCss,onChange:_,slotProps:{input:{className:"textarea-mono"}}}),(0,r.jsx)(u.A,{type:"submit",size:"large",children:w.Ay.translate("Save")})]})})})})};q.displayName="BrandingPage"},51371:function(e,n,t){t.d(n,{u:function(){return r}});var r="/Branding/Splashscreen"}}]);