"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[39219,53152],{55360:function(e,a,t){t.r(a),t(5769),t(63238),t(61418),t(17460),t(14078),t(23938),t(61013);var s=t(28540),r=t(72365),n=t(94994),i=t(20990),l=t(15039),c=(t(61414),t(38228),t(60635)),d=t(3137),o=t(61570);function u(e,a){e.querySelector(".localUsers").innerHTML=function(e){return e.map((function(e){return function(e){var a,t="",s="card squareCard scalableCard squareCard-scalable";e.Policy.IsDisabled&&(s+=" grayscale"),t+="<div data-userid='"+e.Id+"' class='"+s+"'>",t+='<div class="cardBox visualCardBox">',t+='<div class="cardScalable visualCardBox-cardScalable">',t+='<div class="cardPadder cardPadder-square"></div>',t+='<a is="emby-linkbutton" class="cardContent '.concat(a?"":o.default.getDefaultBackgroundClass(),'" href="#!/useredit.html?userId=').concat(e.Id,'">'),e.PrimaryImageTag&&(a=ApiClient.getUserImageUrl(e.Id,{width:300,tag:e.PrimaryImageTag,type:"Primary"}));var r="cardImage";e.Policy.IsDisabled&&(r+=" disabledUser"),a?t+='<div class="'+r+'" style="background-image:url(\''+a+"');\">":(t+='<div class="'.concat(r," ").concat(a?"":o.default.getDefaultBackgroundClass(),' flex align-items-center justify-content-center">'),t+='<span class="material-icons cardImageIcon person"></span>'),t+="</div>",t+="</a>",t+="</div>",t+='<div class="cardFooter visualCardBox-cardFooter">',t+='<div class="cardText flex align-items-center">',t+='<div class="flex-grow" style="overflow:hidden;text-overflow:ellipsis;">',t+=e.Name,t+="</div>",t+='<button type="button" is="paper-icon-button-light" class="btnUserMenu flex-shrink-zero"><span class="material-icons more_vert"></span></button>',t+="</div>",t+='<div class="cardText cardText-secondary">';var c,d,u=(c=e.LastActivityDate,d=(0,l.LP)(),c?n.ZP.translate("LastSeen",(0,i.Z)(Date.parse(c),d)):"");return t+=""!=u?u:"&nbsp;",t+="</div>",t+="</div>",(t+="</div>")+"</div>"}(e)})).join("")}(a)}function f(e){s.ZP.show(),ApiClient.getUsers().then((function(a){u(e,a),s.ZP.hide()}))}(0,c.pageIdOn)("pageinit","userProfilesPage",(function(){this.querySelector(".btnAddUser").addEventListener("click",(function(){c.default.navigate("usernew.html")})),this.querySelector(".localUsers").addEventListener("click",(function(e){var a,i,l,o,u,p=r.ZP.parentWithClass(e.target,"btnUserMenu");p&&(a=p,i=r.ZP.parentWithClass(a,"card"),l=r.ZP.parentWithClass(i,"page"),o=i.getAttribute("data-userid"),(u=[]).push({name:n.ZP.translate("ButtonOpen"),id:"open",icon:"mode_edit"}),u.push({name:n.ZP.translate("ButtonLibraryAccess"),id:"access",icon:"lock"}),u.push({name:n.ZP.translate("ButtonParentalControl"),id:"parentalcontrol",icon:"person"}),u.push({name:n.ZP.translate("Delete"),id:"delete",icon:"delete"}),Promise.resolve().then(t.bind(t,12801)).then((function(e){e.default.show({items:u,positionTo:i,callback:function(e){switch(e){case"open":c.default.navigate("useredit.html?userId="+o);break;case"access":c.default.navigate("userlibraryaccess.html?userId="+o);break;case"parentalcontrol":c.default.navigate("userparentalcontrol.html?userId="+o);break;case"delete":!function(e,a){var t=n.ZP.translate("DeleteUserConfirmation");(0,d.Z)({title:n.ZP.translate("DeleteUser"),text:t,confirmText:n.ZP.translate("Delete"),primary:"delete"}).then((function(){s.ZP.show(),ApiClient.deleteUser(a).then((function(){f(e)}))}))}(l,o)}}})})))}))})),(0,c.pageIdOn)("pagebeforeshow","userProfilesPage",(function(){f(this)}))}}]);