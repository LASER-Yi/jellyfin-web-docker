"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[58809],{27239:function(e,r,t){t.r(r),t.d(r,{default:function(){return b}});var a=t(62540),n=t(63696),c=t(89100),s=t(5898),i=t(8566),o=t(47629),u=t(40532),l=t(80096),d=t(93721),f=t(85817),h=t(84851),v=t(36645),m=function(e){var r,t,n,c=e.user,i=void 0===c?{}:c,o="card squareCard scalableCard squareCard-scalable";(null===(r=i.Policy)||void 0===r?void 0:r.IsDisabled)&&(o+=" grayscale"),i.PrimaryImageTag&&i.Id&&(n=window.ApiClient.getUserImageUrl(i.Id,{width:300,tag:i.PrimaryImageTag,type:"Primary"}));var u="cardImage";(null===(t=i.Policy)||void 0===t?void 0:t.IsDisabled)&&(u+=" disabledUser");var m,p=(m=i.LastActivityDate)?s.Ay.translate("LastSeen",(0,l.A)(Date.parse(m),(0,d.OE)())):"",x=n?(0,a.jsx)("div",{className:u,style:{backgroundImage:"url(".concat(n,")")}}):(0,a.jsx)("div",{className:"".concat(u," ").concat((0,v.Qp)(i.Name)," flex align-items-center justify-content-center"),children:(0,a.jsx)("span",{className:"material-icons cardImageIcon person","aria-hidden":"true"})});return(0,a.jsx)("div",{"data-userid":i.Id,"data-username":i.Name,className:o,children:(0,a.jsxs)("div",{className:"cardBox visualCardBox",children:[(0,a.jsxs)("div",{className:"cardScalable visualCardBox-cardScalable",children:[(0,a.jsx)("div",{className:"cardPadder cardPadder-square"}),(0,a.jsx)(h.A,{className:"cardContent",href:"#/dashboard/users/profile?userId=".concat(i.Id),children:x})]}),(0,a.jsxs)("div",{className:"cardFooter visualCardBox-cardFooter",children:[(0,a.jsx)("div",{style:{textAlign:"right",float:"right",paddingTop:"5px"},children:(0,a.jsx)(f.A,{is:"paper-icon-button-light",className:"btnUserMenu flex-shrink-zero",icon:"more_vert"})}),(0,a.jsx)("div",{className:"cardText",children:(0,a.jsx)("span",{children:i.Name})}),(0,a.jsx)("div",{className:"cardText cardText-secondary",children:(0,a.jsx)("span",{children:""!=p?p:""})})]})]})})},p=t(30658),x=(t(10353),t(15453),t(65242)),b=function(){var e=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var a,n,c=t.call(e),s=[];try{for(;(void 0===r||r-- >0)&&!(a=c.next()).done;)s.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(t=c.return)&&t.call(c)}finally{if(n)throw n.error}}return s}((0,n.useState)([]),2),r=e[0],l=e[1],d=(0,n.useRef)(null),f=function(){i.Ay.show(),window.ApiClient.getUsers().then((function(e){l(e),i.Ay.hide()})).catch((function(e){console.error("[userprofiles] failed to fetch users",e)}))};return(0,n.useEffect)((function(){var e=d.current;if(e){f();e.addEventListener("click",(function(e){var r=o.Ay.parentWithClass(e.target,"btnUserMenu");r&&function(e){var r=o.Ay.parentWithClass(e,"card"),a=null==r?void 0:r.getAttribute("data-userid"),n=null==r?void 0:r.getAttribute("data-username");if(a){var l=[];l.push({name:s.Ay.translate("ButtonEditUser"),id:"open",icon:"mode_edit"}),l.push({name:s.Ay.translate("ButtonLibraryAccess"),id:"access",icon:"lock"}),l.push({name:s.Ay.translate("ButtonParentalControl"),id:"parentalcontrol",icon:"person"}),l.push({name:s.Ay.translate("Delete"),id:"delete",icon:"delete"}),t.e(62882).then(t.bind(t,62882)).then((function(e){e.default.show({items:l,positionTo:r,callback:function(e){switch(e){case"open":c.default.navigate("/dashboard/users/profile?userId="+a).catch((function(e){console.error("[userprofiles] failed to navigate to user edit page",e)}));break;case"access":c.default.navigate("/dashboard/users/access?userId="+a).catch((function(e){console.error("[userprofiles] failed to navigate to user library page",e)}));break;case"parentalcontrol":c.default.navigate("/dashboard/users/parentalcontrol?userId="+a).catch((function(e){console.error("[userprofiles] failed to navigate to parental control page",e)}));break;case"delete":!function(e,r){var t=r?s.Ay.translate("DeleteName",r):s.Ay.translate("DeleteUser"),a=s.Ay.translate("DeleteUserConfirmation");(0,u.A)({title:t,text:a,confirmText:s.Ay.translate("Delete"),primary:"delete"}).then((function(){i.Ay.show(),window.ApiClient.deleteUser(e).then((function(){f()})).catch((function(e){console.error("[userprofiles] failed to delete user",e)}))})).catch((function(){}))}(a,n)}}}).catch((function(){}))})).catch((function(e){console.error("[userprofiles] failed to load action sheet",e)}))}else console.error("Unexpected null user id")}(r)})),e.querySelector("#btnAddUser").addEventListener("click",(function(){c.default.navigate("/dashboard/users/add").catch((function(e){console.error("[userprofiles] failed to navigate to new user page",e)}))}))}else console.error("Unexpected null reference")}),[]),(0,a.jsx)(x.A,{id:"userProfilesPage",className:"mainAnimatedPage type-interior userProfilesPage fullWidthContent",title:s.Ay.translate("HeaderUsers"),children:(0,a.jsxs)("div",{ref:d,className:"content-primary",children:[(0,a.jsx)("div",{className:"verticalSection",children:(0,a.jsx)(p.A,{title:s.Ay.translate("HeaderUsers"),isBtnVisible:!0,btnId:"btnAddUser",btnClassName:"fab submit sectionTitleButton",btnTitle:"ButtonAddUser",btnIcon:"add"})}),(0,a.jsx)("div",{className:"localUsers itemsContainer vertical-wrap",children:r.map((function(e){return(0,a.jsx)(m,{user:e},e.Id)}))})]})})}},30658:function(e,r,t){var a=t(62540),n=(t(63696),t(85817));r.A=function(e){var r=e.SectionClassName,t=e.title,c=e.isBtnVisible,s=void 0!==c&&c,i=e.btnId,o=e.btnClassName,u=e.btnTitle,l=e.btnIcon;return(0,a.jsxs)("div",{className:"".concat(r," sectionTitleContainer flex align-items-center"),children:[(0,a.jsx)("h2",{className:"sectionTitle",children:t}),s&&(0,a.jsx)(n.A,{is:"emby-button",id:i,className:o,title:u,icon:l})]})}},36645:function(e,r,t){t.d(r,{QW:function(){return y},Qp:function(){return x},Rn:function(){return p},Tj:function(){return h},a_:function(){return v},hn:function(){return l},n5:function(){return d},uA:function(){return m},w:function(){return f},zo:function(){return g}});var a=t(76942),n=t(58953),c=t(4452),s=t.n(c),i=2/3,o=16/9,u=1e3/185,l=function(e){return"Program"===e||"Timer"===e||"Recording"===e},d=function(e){return"play"===e.defaultAction&&e.isFolder?"link":e.isPhoto?"play":e.defaultAction},f=function(e){var r=window.screen;return!!(r&&r.availWidth-e>20)},h=function(e){return null==e?a.G8.MixedSquare:e>=1.33?a.G8.MixedBackdrop:e>.8?a.G8.MixedSquare:a.G8.MixedPortrait},v=function(e){var r;return s()(((r={card:!0})["".concat(e.shape,"Card")]=e.shape,r["".concat(e.cardCssClass)]=e.cardCssClass,r["".concat(e.cardClass)]=e.cardClass,r["card-hoverable"]=e.isDesktop,r["show-focus"]=e.isTV,r["show-animation"]=e.isTV&&e.enableFocusTransform,r.groupedCard=e.showChildCountIndicator&&e.childCount,r["card-withuserdata"]=!["MusicAlbum","MusicArtist","Audio"].includes(e.itemType),r.itemAction="button"===e.tagName,r))},m=function(e){var r;return s()(((r={cardImageContainer:!0,coveredImage:e.hasCoverImage,"coveredImage-contain":e.hasCoverImage&&"TvChannel"===e.itemType})[x(e.itemName)]=!e.imgUrl,r))},p=function(e){return s()({cardBox:!0,visualCardBox:e.cardLayout,"cardBox-bottompadded":e.hasOuterCardFooter&&!e.cardLayout})},x=function(e){return"defaultCardBackground defaultCardBackground".concat(b(e))},b=function(e){if(e){for(var r=Math.floor(e.length/2),t=String(e.slice(r,r+1).charCodeAt(0)),a=0,c=0;c<t.length;c++)a+=parseInt(t.charAt(c),10);return parseInt(String(a).slice(-1),10)%5+1}return(0,n.HO)(1,5)},g=function(e){return e?-1!==(e=e.toLowerCase()).indexOf("portrait")?i:-1!==e.indexOf("backdrop")?o:-1!==e.indexOf("square")?1:-1!==e.indexOf("banner")?u:null:null},y=function(e,r,t,a){switch(e){case"portrait":return A(r,a);case"square":return w(r,a);case"banner":return C(r);case"backdrop":return I(r,a);case"smallBackdrop":return k(r);case"overflowSmallBackdrop":return N(r,t,a);case"overflowPortrait":return j(r,t,a);case"overflowSquare":return B(r,t,a);case"overflowBackdrop":return P(r,t,a);default:return 4}},A=function(e,r){switch(!0){case r:return 5.9999999988;case e>=2200:return 10;case e>=1920:return 9.000000000009;case e>=1600:return 8;case e>=1400:return 7.0000000000021;case e>=1200:return 5.9999999988;case e>=800:return 5;case e>=700:return 4;default:return 3.0000000003}},w=function(e,r){switch(!0){case r:return 5.9999999988;case e>=2200:return 10;case e>=1920:return 9.000000000009;case e>=1600:return 8;case e>=1400:return 7.0000000000021;case e>=1200:return 5.9999999988;case e>=800:return 5;case e>=700:return 4;case e>=500:return 3.0000000003;default:return 2}},C=function(e){switch(!0){case e>=2200:return 4;case e>=1200:return 3.0000000003;case e>=800:return 2;default:return 1}},I=function(e,r){switch(!0){case r:return 4;case e>=2500:return 6;case e>=1600:return 5;case e>=1200:return 4;case e>=770:return 3;case e>=420:return 2;default:return 1}},k=function(e){switch(!0){case e>=1600:return 8;case e>=1400:return 7.000000000007001;case e>=1200:return 5.9999999988;case e>=1e3:return 5;case e>=800:return 4;case e>=500:return 3.0000000003;default:return 2}},N=function(e,r,t){switch(!0){case t:return 100/18.9;case r&&e>=800:return 100/15.5;case r:return 100/23.3;case e>=540:return 100/30;default:return 100/72}},j=function(e,r,t){switch(!0){case t:return 100/15.5;case r&&e>=1700:return 100/11.6;case r:return 100/15.5;case e>=1400:return 100/15;case e>=1200:return 100/18;case e>=760:return 100/23;case e>=400:return 100/31.5;default:return 100/42}},B=function(e,r,t){switch(!0){case t:return 100/15.5;case r&&e>=1700:return 100/11.6;case r:return 100/15.5;case e>=1400:return 100/15;case e>=1200:return 100/18;case e>=760:return 100/23;case e>=540:return 100/31.5;default:return 100/42}},P=function(e,r,t){switch(!0){case t:return 100/23.3;case r&&e>=1700:return 100/18.5;case r:return 100/23.3;case e>=1800:return 100/23.5;case e>=1400:return 100/30;case e>=760:return 2.5;case e>=640:return 100/56;default:return 100/72}}},76942:function(e,r,t){var a;function n(e){return void 0===e&&(e=!0),e?a.SquareOverflow:a.Square}function c(e){return void 0===e&&(e=!0),e?a.BackdropOverflow:a.Backdrop}function s(e){return void 0===e&&(e=!0),e?a.PortraitOverflow:a.Portrait}t.d(r,{G8:function(){return a},UI:function(){return c},xK:function(){return s},zP:function(){return n}}),function(e){e.Backdrop="backdrop",e.BackdropOverflow="overflowBackdrop",e.Banner="banner",e.Portrait="portrait",e.PortraitOverflow="overflowPortrait",e.Square="square",e.SquareOverflow="overflowSquare",e.Auto="auto",e.AutoHome="autohome",e.AutoOverflow="autooverflow",e.AutoVertical="autoVertical",e.Mixed="mixed",e.MixedSquare="mixedSquare",e.MixedBackdrop="mixedBackdrop",e.MixedPortrait="mixedPortrait"}(a||(a={}))},85817:function(e,r,t){var a=t(62540),n=(t(63696),t(5898));r.A=function(e){var r=e.is,t=e.id,c=e.className,s=e.title,i=e.icon,o=e.dataIndex,u=e.dataTag,l=e.dataProfileid,d=e.onClick,f=function(e){var r=e.id,t=e.className,a=e.title,n=e.icon,c=e.dataIndex,s=e.dataTag,i=e.dataProfileid;return{__html:'<button\n        is="'.concat(e.is,'"\n        type="button"\n        ').concat(r,'\n        class="').concat(t,'"\n        ').concat(a,"\n        ").concat(c,"\n        ").concat(s,"\n        ").concat(i,'\n    >\n        <span class="material-icons ').concat(n,'" aria-hidden="true"></span>\n    </button>')}}({is:r,id:t?'id="'.concat(t,'"'):"",className:c,title:s?'title="'.concat(n.Ay.translate(s),'"'):"",icon:i,dataIndex:o||0===o?'data-index="'.concat(o,'"'):"",dataTag:u?'data-tag="'.concat(u,'"'):"",dataProfileid:l?'data-profileid="'.concat(l,'"'):""});return void 0!==d?(0,a.jsx)("button",{style:{all:"unset"},dangerouslySetInnerHTML:f,onClick:d}):(0,a.jsx)("div",{dangerouslySetInnerHTML:f})}}}]);