"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1831,28312,30657,40248,91068,96084],{13478:function(e,t,r){var n=r(62540),a=(r(63696),r(92779)),i=r(10822),o=r(89348);t.A=function(e){var t=e.task.CurrentProgressPercentage;return(0,n.jsx)(a.A,{sx:{display:"flex",alignItems:"center",height:"1.2rem",mr:2,minWidth:"170px"},children:null!=t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.A,{sx:{width:"100%",mr:1},children:(0,n.jsx)(i.A,{variant:"determinate",value:t})}),(0,n.jsx)(a.A,{children:(0,n.jsx)(o.A,{variant:"body1",children:"".concat(Math.round(t),"%")})})]}):(0,n.jsx)(a.A,{sx:{width:"100%"},children:(0,n.jsx)(i.A,{})})})}},22147:function(e,t,r){var n=r(62540),a=r(63696),i=r(63703),o=r(62010),l=r(98756),s=r(37793),c=r(9042),u=r(57836),d=r(5898),f=r(70140);t.A=function(e){var t=e.open,r=e.title,y=e.label,m=e.helperText,v=e.initialText,h=e.onClose,p=e.confirmButtonText,b=e.onConfirm,g=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}((0,a.useState)(v||""),2),A=g[0],x=g[1],S=(0,a.useCallback)((function(e){x(e.target.value)}),[]),w=(0,a.useCallback)((function(){b(A),x("")}),[A,b]);return(0,n.jsxs)(o.A,{open:t,onClose:h,maxWidth:"xs",fullWidth:!0,children:[r&&(0,n.jsx)(c.A,{children:r||""}),(0,n.jsx)(s.A,{children:(0,n.jsx)(f.A,{children:(0,n.jsx)(u.A,{label:y,value:A,helperText:m,onChange:S,variant:"standard"})})}),(0,n.jsx)(l.A,{children:(0,n.jsx)(i.A,{onClick:w,children:p||d.Ay.translate("ButtonOk")})})]})}},22204:function(e,t,r){r.d(t,{V:function(){return s}});var n=r(53875),a=r(38596),i=r(69410),o=r(31297),l=r(71607),s=function(){var e=(0,i.gf)().api;return(0,a.n)({mutationFn:function(t){return(0,n.g)(e).startTask(t)},onSuccess:function(){o.q.invalidateQueries({queryKey:[l.t]})}})}},32203:function(e,t,r){r.d(t,{Bq:function(){return s},Jd:function(){return l},yq:function(){return o}});var n=r(65369),a=r(11444),i="assets/img/devices/";function o(e){var t;switch(e.AppName||e.Client){case"Samsung Smart TV":return i+"samsungtv.svg";case"Xbox One":return i+"xbox.svg";case"Sony PS4":return i+"playstation.svg";case"Kodi":case"Kodi JellyCon":return i+"kodi.svg";case"Jellyfin Android":case"AndroidTV":case"Android TV":case"Jellyfin Android TV":case"Jellyfin for Android":case"Jellyfin for Android TV":return i+"android.svg";case"Jellyfin Mobile (iOS)":case"Jellyfin Mobile (iPadOS)":case"Jellyfin iOS":case"Jellyfin iPadOS":case"Jellyfin tvOS":case"Swiftfin iPadOS":case"Swiftfin iOS":case"Swiftfin tvOS":case"Infuse":case"Infuse-Direct":case"Infuse-Library":return i+"apple.svg";case"Home Assistant":return i+"home-assistant.svg";case"Jellyfin for WebOS":case"LG Smart TV":return i+"webos.svg";case"Jellyfin Roku":return i+"roku.svg";case"Jellyfin for Titan OS":return i+"titanos.svg";case"Finamp":return i+"finamp.svg";case"Jellyfin Web":return function(e){switch(e){case"Opera":case"Opera TV":case"Opera Android":return i+"opera.svg";case"Chrome":case"Chrome Android":return i+"chrome.svg";case"Firefox":case"Firefox Android":return i+"firefox.svg";case"Safari":case"Safari iPad":case"Safari iPhone":return i+"safari.svg";case"Edge Chromium":case"Edge Chromium Android":case"Edge Chromium iPad":case"Edge Chromium iPhone":return i+"edgechromium.svg";case"Edge":return i+"edge.svg";case"Internet Explorer":return i+"msie.svg";case"Titan OS":return i+"titanos.svg";case"Vega OS":return i+"firetv.svg";default:return i+"html5.svg"}}(e.Name||e.DeviceName);default:if(null===(t=e.Capabilities)||void 0===t?void 0:t.IconUrl)try{return new URL(e.Capabilities.IconUrl).toString()}catch(t){console.error("[getDeviceIcon] device capabilities has invalid IconUrl",e,t)}return i+"other.svg"}}function l(e){switch(e){case n.X.Movies:return"movie";case n.X.Music:return"music_note";case n.X.Homevideos:case n.X.Photos:return"photo";case n.X.Livetv:return"live_tv";case n.X.Tvshows:return"tv";case n.X.Trailers:return"theaters";case n.X.Musicvideos:return"music_video";case n.X.Books:return"book";case n.X.Boxsets:return"video_library";case n.X.Playlists:return"queue";case"channels":return"videocam";case void 0:return"quiz";default:return"folder"}}function s(e,t){switch(e){case a.D.MusicAlbum:return"album";case a.D.MusicArtist:case a.D.Person:return"person";case a.D.Audio:return"audiotrack";case a.D.Movie:return"movie";case a.D.Episode:case a.D.Series:return"tv";case a.D.Program:return"live_tv";case a.D.Book:return"book";case a.D.Folder:return"folder";case a.D.BoxSet:return"video_library";case a.D.Playlist:return"queue";case a.D.Photo:return"photo";case a.D.PhotoAlbum:return"photo_album";default:return t}}t.Ay={getDeviceIcon:o,getLibraryIcon:l,getItemTypeIcon:s}},33077:function(e,t,r){var n;r.d(t,{s:function(){return n}}),function(e){e.AddToPlaylist="addtoplaylist",e.Custom="custom",e.Edit="edit",e.InstantMix="instantmix",e.Link="link",e.Menu="menu",e.None="none",e.Play="play",e.PlayAllFromHere="playallfromhere",e.PlayMenu="playmenu",e.PlayTrailer="playtrailer",e.ProgramDialog="programdialog",e.Queue="queue",e.QueueAllFromHere="queueallfromhere",e.Record="record",e.Resume="resume",e.SetPlaylistIndex="setplaylistindex"}(n||(n={}))},36645:function(e,t,r){r.d(t,{QW:function(){return x},Qp:function(){return b},Rn:function(){return p},Tj:function(){return m},a_:function(){return v},hn:function(){return d},n5:function(){return f},uA:function(){return h},w:function(){return y},zo:function(){return A}});var n=r(4452),a=r.n(n),i=r(33077),o=r(76942),l=r(58953),s=2/3,c=16/9,u=1e3/185,d=function(e){return"Program"===e||"Timer"===e||"Recording"===e},f=function(e){return e.defaultAction===i.s.Play&&e.isFolder?i.s.Link:e.isPhoto?i.s.Play:e.defaultAction},y=function(e){var t=window.screen;return!!(t&&t.availWidth-e>20)},m=function(e){return null==e?o.G8.MixedSquare:e>=1.33?o.G8.MixedBackdrop:e>.8?o.G8.MixedSquare:o.G8.MixedPortrait},v=function(e){var t;return a()(((t={card:!0})["".concat(e.shape,"Card")]=e.shape,t["".concat(e.cardCssClass)]=e.cardCssClass,t["".concat(e.cardClass)]=e.cardClass,t["card-hoverable"]=e.isDesktop,t["show-focus"]=e.isTV,t["show-animation"]=e.isTV&&e.enableFocusTransform,t.groupedCard=e.showChildCountIndicator&&e.childCount,t["card-withuserdata"]=!["MusicAlbum","MusicArtist","Audio"].includes(e.itemType),t.itemAction="button"===e.tagName,t))},h=function(e){var t;return a()(((t={cardImageContainer:!0,coveredImage:e.hasCoverImage,"coveredImage-contain":e.hasCoverImage&&"TvChannel"===e.itemType})[b(e.itemName)]=!e.imgUrl,t))},p=function(e){return a()({cardBox:!0,visualCardBox:e.cardLayout,"cardBox-bottompadded":e.hasOuterCardFooter&&!e.cardLayout})},b=function(e){return"defaultCardBackground defaultCardBackground".concat(g(e))},g=function(e){if(e){for(var t=Math.floor(e.length/2),r=String(e.slice(t,t+1).charCodeAt(0)),n=0,a=0;a<r.length;a++)n+=parseInt(r.charAt(a),10);return parseInt(String(n).slice(-1),10)%5+1}return(0,l.HO)(1,5)},A=function(e){return e?-1!==(e=e.toLowerCase()).indexOf("portrait")?s:-1!==e.indexOf("backdrop")?c:-1!==e.indexOf("square")?1:-1!==e.indexOf("banner")?u:null:null},x=function(e,t,r,n){switch(e){case"portrait":return S(t,n);case"square":return w(t,n);case"banner":return C(t);case"backdrop":return k(t,n);case"smallBackdrop":return I(t);case"overflowSmallBackdrop":return j(t,r,n);case"overflowPortrait":return P(t,r,n);case"overflowSquare":return O(t,r,n);case"overflowBackdrop":return L(t,r,n);default:return 4}},S=function(e,t){switch(!0){case t:return 5.9999999988;case e>=2200:return 10;case e>=1920:return 9.000000000009;case e>=1600:return 8;case e>=1400:return 7.0000000000021;case e>=1200:return 5.9999999988;case e>=800:return 5;case e>=700:return 4;default:return 3.0000000003}},w=function(e,t){switch(!0){case t:return 5.9999999988;case e>=2200:return 10;case e>=1920:return 9.000000000009;case e>=1600:return 8;case e>=1400:return 7.0000000000021;case e>=1200:return 5.9999999988;case e>=800:return 5;case e>=700:return 4;case e>=500:return 3.0000000003;default:return 2}},C=function(e){switch(!0){case e>=2200:return 4;case e>=1200:return 3.0000000003;case e>=800:return 2;default:return 1}},k=function(e,t){switch(!0){case t:return 4;case e>=2500:return 6;case e>=1600:return 5;case e>=1200:return 4;case e>=770:return 3;case e>=420:return 2;default:return 1}},I=function(e){switch(!0){case e>=1600:return 8;case e>=1400:return 7.000000000007001;case e>=1200:return 5.9999999988;case e>=1e3:return 5;case e>=800:return 4;case e>=500:return 3.0000000003;default:return 2}},j=function(e,t,r){switch(!0){case r:return 100/18.9;case t&&e>=800:return 100/15.5;case t:return 100/23.3;case e>=540:return 100/30;default:return 100/72}},P=function(e,t,r){switch(!0){case r:return 100/15.5;case t&&e>=1700:return 100/11.6;case t:return 100/15.5;case e>=1400:return 100/15;case e>=1200:return 100/18;case e>=760:return 100/23;case e>=400:return 100/31.5;default:return 100/42}},O=function(e,t,r){switch(!0){case r:return 100/15.5;case t&&e>=1700:return 100/11.6;case t:return 100/15.5;case e>=1400:return 100/15;case e>=1200:return 100/18;case e>=760:return 100/23;case e>=540:return 100/31.5;default:return 100/42}},L=function(e,t,r){switch(!0){case r:return 100/23.3;case t&&e>=1700:return 100/18.5;case t:return 100/23.3;case e>=1800:return 100/23.5;case e>=1400:return 100/30;case e>=760:return 2.5;case e>=640:return 100/56;default:return 100/72}}},38596:function(e,t,r){r.d(t,{n:function(){return y}}),r(29305),r(32733),r(84701),r(81678),r(14382),r(69892),r(44962),r(89336),r(4754),r(94),r(33087),r(36947),r(36457),r(88908),r(83810),r(78557),r(95021),r(73687),r(83994),r(23630),r(82367);var n=r(63696),a=r(427),i=r(52672),o=r(26073),l=r(9790);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=function(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){var r,s,c=(0,l.jE)(t),d=(r=n.useState((function(){return new a._(c,e)})),s=1,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(r,s)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(r,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];n.useEffect((function(){d.setOptions(e)}),[d,e]);var y=n.useSyncExternalStore(n.useCallback((function(e){return d.subscribe(i.jG.batchCalls(e))}),[d]),(function(){return d.getCurrentResult()}),(function(){return d.getCurrentResult()})),m=n.useCallback((function(e,t){d.mutate(e,t).catch(o.lQ)}),[d]);if(y.error&&(0,o.GU)(d.options.throwOnError,[y.error]))throw y.error;return u(u({},y),{},{mutate:m,mutateAsync:y.mutate})}},54861:function(e,t,r){var n=r(63696),a=r(69410),i=r(71607),o=r(31297),l=r(44797),s=r(10736),c=r(10749);t.A=function(e){var t=(0,a.gf)().__legacyApiClient__,r=(0,i.s)(e);return(0,n.useEffect)((function(){var e=function(e,t,r){o.q.setQueryData([i.t],r)},r=setInterval((function(){(null==t?void 0:t.isMessageChannelOpen())||o.q.invalidateQueries({queryKey:[i.t]})}),1e4);return null==t||t.sendMessage(c.Y.ScheduledTasksInfoStart,"1000,1000"),l.A.on(s.default,c.Y.ScheduledTasksInfo,e),function(){clearInterval(r),null==t||t.sendMessage(c.Y.ScheduledTasksInfoStop,null),l.A.off(s.default,c.Y.ScheduledTasksInfo,e)}}),[t]),r}},57415:function(e,t,r){r.r(t),r.d(t,{Component:function(){return K}});var n=r(62540),a=r(63696),i=r(65242),o=r(5898),l=r(92779),s=r(63703),c=r(70140),u=r(80401),d=r(69410),f=r(98183),y=function(){var e=(0,d.gf)().api;return(0,u.I)({queryKey:["VirtualFolders"],queryFn:function(t){var r=t.signal;return function(e,t){return r=void 0,n=void 0,i=function(){return function(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(s){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],n=0}finally{r=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}}(this,(function(r){switch(r.label){case 0:return[4,(0,f.X)(e).getVirtualFolders(t)];case 1:return[2,r.sent().data]}}))},new((a=void 0)||(a=Promise))((function(e,t){function o(e){try{s(i.next(e))}catch(e){t(e)}}function l(e){try{s(i.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof a?r:new a((function(e){e(r)}))).then(o,l)}s((i=i.apply(r,n||[])).next())}));var r,n,a,i}(e,{signal:r})},enabled:!!e})},m=r(54861),v=r(22204),h=r(13478),p=r(50909),b=r(57962),g=r(69880),A=function(){return[{name:"",value:""},{name:o.Ay.translate("Movies"),value:"movies"},{name:o.Ay.translate("TabMusic"),value:"music"},{name:o.Ay.translate("Shows"),value:"tvshows"},{name:o.Ay.translate("Books"),value:"books"},{name:o.Ay.translate("HomeVideosPhotos"),value:"homevideos"},{name:o.Ay.translate("MusicVideos"),value:"musicvideos"},{name:o.Ay.translate("MixedMoviesShows"),value:"mixed"}]},x=r(44185),S=r(32203),w=r(73696),C=r(31297),k=r(48402),I=r(85637),j=r(44790),P=r(82225),O=r(45464),L=r(17997),T=r(67702),M=r(31858),q=r(60434),B=r(4350),D=r(67430),F=r(22147),R=r(38596),E=r(77004),N=r(57807),V=r(64788),H=r(64680),W=r(36300),_=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},J=function(e){var t,r,i=e.virtualFolder,l=(0,d.gf)().api,s=(0,a.useRef)(null),c=_((0,a.useState)(null),2),u=c[0],y=c[1],m=_((0,a.useState)(!1),2),v=m[0],h=m[1],p=_((0,a.useState)(!1),2),b=p[0],J=p[1],Q=_((0,a.useState)(!1),2),G=Q[0],X=Q[1],K=function(){var e=(0,d.gf)().api;return(0,R.n)({mutationFn:function(t){return(0,f.X)(e).renameVirtualFolder(t)},onSuccess:function(){C.q.invalidateQueries({queryKey:["VirtualFolders"]})}})}(),$=function(){var e=(0,d.gf)().api;return(0,R.n)({mutationFn:function(t){return(0,f.X)(e).removeVirtualFolder(t)},onSuccess:function(){C.q.invalidateQueries({queryKey:["VirtualFolders"]})}})}(),Y=(0,a.useMemo)((function(){if(i.PrimaryImageItemId&&i.ItemId&&l)return(0,V.C)(l).getItemImageUrlById(i.ItemId,H.y.Primary,{maxWidth:Math.round(.4*W.Ay.getScreenWidth())})}),[l,i]),z=(null===(t=A().filter((function(e){return e.value==i.CollectionType}))[0])||void 0===t?void 0:t.name)||o.Ay.translate("Other"),U=(0,a.useCallback)((function(){y(null),h(!1),J(!0)}),[]),Z=(0,a.useCallback)((function(){J(!1)}),[]),ee=(0,a.useCallback)((function(){y(null),h(!1)}),[]),te=(0,a.useCallback)((function(){y(s.current),h(!0)}),[]),re=(0,a.useCallback)((function(e){i.Name&&K.mutate({refreshLibrary:!0,newName:e,name:i.Name},{onSettled:function(){Z()}})}),[K,i,Z]),ne=(0,a.useCallback)((function(){var e;y(null),h(!1),new E.default({itemIds:[i.ItemId],serverId:null===(e=D.tF.currentApiClient())||void 0===e?void 0:e.serverId(),mode:"scan"}).show()}),[i]),ae=(0,a.useCallback)((function(){y(null),h(!1),new w.default({library:i}).then((function(e){e&&C.q.invalidateQueries({queryKey:["VirtualFolders"]})}))}),[i]),ie=(0,a.useCallback)((function(){var e;y(null),h(!1),B.default.show({itemId:i.ItemId,serverId:null===(e=D.tF.currentApiClient())||void 0===e?void 0:e.serverId()}).then((function(){C.q.invalidateQueries({queryKey:["VirtualFolders"]})})).catch((function(){}))}),[i]),oe=(0,a.useCallback)((function(){y(null),h(!1),X(!0)}),[]),le=(0,a.useCallback)((function(){X(!1)}),[]),se=(0,a.useCallback)((function(){i.Name&&$.mutate({name:i.Name,refreshLibrary:!0},{onSettled:function(){X(!1)}})}),[i,$]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F.A,{title:o.Ay.translate("ButtonRename"),open:b,onClose:Z,label:o.Ay.translate("LabelNewName"),helperText:o.Ay.translate("MessageRenameMediaFolder"),initialText:i.Name||"",confirmButtonText:o.Ay.translate("ButtonRename"),onConfirm:re}),(0,n.jsx)(N.A,{open:G,title:o.Ay.translate("HeaderRemoveMediaFolder"),text:o.Ay.translate("MessageAreYouSureYouWishToRemoveMediaFolder")+"\n\n"+o.Ay.translate("MessageTheFollowingLocationWillBeRemovedFromLibrary")+"\n\n"+(null===(r=i.Locations)||void 0===r?void 0:r.join("\n")),confirmButtonText:o.Ay.translate("Delete"),confirmButtonColor:"error",onConfirm:se,onCancel:le}),(0,n.jsx)(g.A,{title:i.Name||"",text:z,image:Y,icon:(0,n.jsx)(x.A,{sx:{fontSize:70},children:(0,S.Jd)(i.CollectionType)}),action:!0,actionRef:s,onActionClick:te,onClick:ae,height:260}),(0,n.jsxs)(k.A,{anchorEl:u,open:v,onClose:ee,children:[(0,n.jsxs)(I.A,{onClick:ie,children:[(0,n.jsx)(j.A,{children:(0,n.jsx)(O.A,{})}),(0,n.jsx)(q.A,{children:o.Ay.translate("EditImages")})]}),(0,n.jsxs)(I.A,{onClick:ae,children:[(0,n.jsx)(j.A,{children:(0,n.jsx)(P.A,{})}),(0,n.jsx)(q.A,{children:o.Ay.translate("ManageLibrary")})]}),(0,n.jsxs)(I.A,{onClick:U,children:[(0,n.jsx)(j.A,{children:(0,n.jsx)(L.A,{})}),(0,n.jsx)(q.A,{children:o.Ay.translate("ButtonRename")})]}),(0,n.jsxs)(I.A,{onClick:ne,children:[(0,n.jsx)(j.A,{children:(0,n.jsx)(T.A,{})}),(0,n.jsx)(q.A,{children:o.Ay.translate("ScanLibrary")})]}),(0,n.jsxs)(I.A,{onClick:oe,children:[(0,n.jsx)(j.A,{children:(0,n.jsx)(M.A,{})}),(0,n.jsx)(q.A,{children:o.Ay.translate("ButtonRemove")})]})]})]})},Q=r(84849),G=r(84826),X=r(30374),K=function(){var e=y(),t=e.data,r=e.isPending,u=(0,v.V)(),d=(0,m.A)({isHidden:!1}),f=d.data,g=d.isPending,x=(0,a.useMemo)((function(){return null==f?void 0:f.find((function(e){return"RefreshLibrary"===e.Key}))}),[f]),S=(0,a.useCallback)((function(){new G.default({collectionTypeOptions:A(),refresh:!0}).then((function(e){e&&C.q.invalidateQueries({queryKey:["VirtualFolders"]})}))}),[]),w=(0,a.useCallback)((function(){(null==x?void 0:x.Id)&&u.mutate({taskId:x.Id})}),[u,x]);return r||g?(0,n.jsx)(Q.A,{}):(0,n.jsx)(i.A,{id:"mediaLibraryPage",title:o.Ay.translate("HeaderLibraries"),className:"mainAnimatedPage type-interior",children:(0,n.jsx)(l.A,{className:"content-primary",children:(0,n.jsxs)(c.A,{spacing:3,mt:2,children:[(0,n.jsxs)(c.A,{direction:"row",alignItems:"center",spacing:1.5,children:[(0,n.jsx)(s.A,{startIcon:(0,n.jsx)(X.A,{}),onClick:S,children:o.Ay.translate("ButtonAddMediaLibrary")}),(0,n.jsx)(s.A,{onClick:w,startIcon:(0,n.jsx)(T.A,{}),loading:x&&x.State!==p.D.Idle,loadingPosition:"start",variant:"outlined",children:o.Ay.translate("ButtonScanAllLibraries")}),x&&x.State==p.D.Running&&(0,n.jsx)(h.A,{task:x})]}),(0,n.jsx)(l.A,{children:(0,n.jsx)(b.Ay,{container:!0,spacing:2,children:null==t?void 0:t.map((function(e){return(0,n.jsx)(b.Ay,{item:!0,xs:12,sm:6,md:3,lg:2.4,children:(0,n.jsx)(J,{virtualFolder:e})},null==e?void 0:e.ItemId)}))})})]})})})};K.displayName="LibrariesPage"},57807:function(e,t,r){var n=r(62540),a=r(63703),i=r(62010),o=r(98756),l=r(37793),s=r(75720),c=r(9042),u=(r(63696),r(5898)),d=function(){return d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},d.apply(this,arguments)};t.A=function(e){var t=e.confirmButtonColor,r=void 0===t?"primary":t,f=e.confirmButtonText,y=e.title,m=e.text,v=e.onCancel,h=e.onConfirm,p=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["confirmButtonColor","confirmButtonText","title","text","onCancel","onConfirm"]);return(0,n.jsxs)(i.A,d({onClose:v},p,{children:[(0,n.jsx)(c.A,{children:y}),(0,n.jsx)(l.A,{children:(0,n.jsx)(s.A,{sx:{whiteSpace:"pre-wrap"},children:m})}),(0,n.jsxs)(o.A,{children:[(0,n.jsx)(a.A,{variant:"text",onClick:v,children:u.Ay.translate("ButtonCancel")}),(0,n.jsx)(a.A,{color:r,onClick:h,children:f||u.Ay.translate("ButtonOk")})]})]}))}},69880:function(e,t,r){var n=r(62540),a=(r(63696),r(92779)),i=r(13786),o=r(91520),l=r(47587),s=r(75487),c=r(89348),u=r(15723),d=r(36645),f=r(42087),y=r(70140),m=r(9055),v=function(){return v=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},v.apply(this,arguments)};t.A=function(e){var t=e.title,r=e.text,h=e.image,p=e.icon,b=e.to,g=e.onClick,A=e.action,x=e.actionRef,S=e.onActionClick,w=e.height,C=e.width;return(0,n.jsxs)(i.A,{sx:{display:"flex",flexDirection:"column",height:w||240,width:C},children:[(0,n.jsx)(f.A,v({},b&&{component:m.N_,to:b},{onClick:g,sx:{display:"flex",flexGrow:1,alignItems:"stretch"},children:h?(0,n.jsx)(l.A,{sx:{flexGrow:1},image:h,title:t}):(0,n.jsx)(a.A,{className:(0,d.Qp)(t),sx:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center"},children:p})})),(0,n.jsx)(o.A,{sx:{minHeight:50,"&:last-child":{paddingBottom:2,paddingRight:1}},children:(0,n.jsxs)(y.A,{flexGrow:1,direction:"row",children:[(0,n.jsxs)(y.A,{flexGrow:1,sx:{overflow:"hidden"},children:[(0,n.jsx)(c.A,{gutterBottom:!0,sx:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:t}),r&&(0,n.jsx)(c.A,{variant:"body2",color:"text.secondary",sx:{lineBreak:"anywhere"},children:r})]}),(0,n.jsx)(a.A,{children:A?(0,n.jsx)(s.A,{ref:x,onClick:S,children:(0,n.jsx)(u.A,{})}):null})]})})]})}},71607:function(e,t,r){r.d(t,{s:function(){return l},t:function(){return o}});var n=r(53875),a=r(80401),i=r(69410),o="Tasks",l=function(e){var t=(0,i.gf)().api;return(0,a.I)({queryKey:[o],queryFn:function(r){var a=r.signal;return function(e,t,r){return a=void 0,i=void 0,l=function(){return function(e,t){var r,n,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(s){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(r=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,n=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){i.label=l[1];break}if(6===l[0]&&i.label<a[1]){i.label=a[1],a=l;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(l);break}a[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],n=0}finally{r=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}}(this,(function(a){switch(a.label){case 0:return[4,(0,n.g)(e).getTasks(t,r)];case 1:return[2,a.sent().data]}}))},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{s(l.next(e))}catch(e){t(e)}}function n(e){try{s(l.throw(e))}catch(e){t(e)}}function s(t){var a;t.done?e(t.value):(a=t.value,a instanceof o?a:new o((function(e){e(a)}))).then(r,n)}s((l=l.apply(a,i||[])).next())}));var a,i,o,l}(t,e,{signal:a})},enabled:!!t})}},73696:function(e,t,r){r.r(t),r.d(t,{MediaLibraryEditor:function(){return j},default:function(){return L}}),r(29305),r(32733),r(84701),r(81678),r(14382),r(44962),r(86584),r(4754),r(94),r(77575),r(36947),r(78557),r(96054),r(90076),r(83994),r(82367);var n=r(22696),a=r.n(n),i=(r(63855),r(8566)),o=r(79754),l=r(36300),s=r(9938),c=r(5898),u=(r(10353),r(15453),r(6882),r(41177)),d=r(71866),f=r(47602);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function v(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=function(e){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}function p(){if(O)return!1;O=!0,i.Ay.show();var e=l.Ay.parentWithClass(this,"dlg-libraryeditor");if(!I.library.ItemId)return i.Ay.hide(),o.default.close(e),(0,u.A)({text:c.Ay.translate("LibraryInvalidItemIdError")}),!1;var t=s.Ay.getLibraryOptions(e.querySelector(".libraryOptions"));return t=Object.assign(I.library.LibraryOptions||{},t),ApiClient.updateVirtualFolderOptions(I.library.ItemId,t).then((function(){P=!0,O=!1,i.Ay.hide(),o.default.close(e)}),(function(){O=!1,i.Ay.hide()})),!1}function b(e){var t=l.Ay.parentWithClass(e.target,"listItem");if(t){var r,n=parseInt(t.getAttribute("data-index"),10),a=(null===(r=I.library.LibraryOptions)||void 0===r?void 0:r.PathInfos)||[],i=(null==n?{}:a[n]||{}).Path||(null==n?null:I.library.Locations[n]),o=l.Ay.parentWithClass(e.target,"btnRemovePath");if(o)return void function(e,t){var r=e,n=I.library;(0,f.A)({title:c.Ay.translate("HeaderRemoveMediaLocation"),text:c.Ay.translate("MessageConfirmRemoveMediaLocation"),confirmText:c.Ay.translate("Delete"),primary:"delete"}).then((function(){var e=I.refresh;ApiClient.removeMediaPath(n.Name,t,e).then((function(){P=!0,A(l.Ay.parentWithClass(r,"dlg-libraryeditor"))}),(function(){(0,d.A)(c.Ay.translate("ErrorDefault"))}))}))}(o,i);w(l.Ay.parentWithClass(t,"dlg-libraryeditor"),i)}}function g(e,t){var r="";return r+='<div class="listItem listItem-border lnkPath" data-index="'.concat(t,'">'),r+='<div class="'.concat(e.NetworkPath?"listItemBody two-line":"listItemBody",'">'),r+='<h3 class="listItemBodyText">',r+=a()(e.Path),r+="</h3>",e.NetworkPath&&(r+='<div class="listItemBodyText secondary">'.concat(a()(e.NetworkPath),"</div>")),r+="</div>",(r+='<button type="button" is="paper-icon-button-light" class="listItemButton btnRemovePath" data-index="'.concat(t,'"><span class="material-icons remove_circle" aria-hidden="true"></span></button>'))+"</div>"}function A(e){ApiClient.getVirtualFolders().then((function(t){var r=t.filter((function(e){return e.Name===I.library.Name}))[0];r&&(I.library=r,x(e,I))}))}function x(e,t){var r,n=(null===(r=t.library.LibraryOptions)||void 0===r?void 0:r.PathInfos)||[];n.length||(n=t.library.Locations.map((function(e){return{Path:e}}))),"boxsets"===t.library.CollectionType?e.querySelector(".folders").classList.add("hide"):e.querySelector(".folders").classList.remove("hide"),e.querySelector(".folderList").innerHTML=n.map(g).join("")}function S(){w(l.Ay.parentWithClass(this,"dlg-libraryeditor"))}function w(e,t){Promise.resolve().then(r.bind(r,21840)).then((function(r){var n=new(0,r.default);n.show({pathReadOnly:null!=t,path:t,callback:function(r){r&&(t?function(e,t){var r=I.library;ApiClient.updateMediaPath(r.Name,{Path:t}).then((function(){P=!0,A(e)}),(function(){(0,d.A)(c.Ay.translate("ErrorAddingMediaPathToVirtualFolder"))}))}(e,t):function(e,t){var r=I.library,n=I.refresh;ApiClient.addMediaPath(r.Name,t,null,n).then((function(){P=!0,A(e)}),(function(){(0,d.A)(c.Ay.translate("ErrorAddingMediaPathToVirtualFolder"))}))}(e,r)),n.close()}})}))}function C(){k.resolveWith(null,[P])}var k,I,j=v((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=jQuery.Deferred();I=t,k=r,P=!1;var n=o.default.createDialog({size:"small",modal:!1,removeOnClose:!0,scrollY:!1});return n.classList.add("dlg-libraryeditor"),n.classList.add("ui-body-a"),n.classList.add("background-theme-a"),n.classList.add("formDialog"),n.innerHTML=c.Ay.translateHtml('<div class="formDialogHeader"> <button type="button" is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1" title="${ButtonBack}"><span class="material-icons arrow_back" aria-hidden="true"></span></button> <h3 class="formDialogHeaderTitle"></h3> </div> <div class="formDialogContent scrollY" style="padding-top:2em"> <div class="dialogContentInner dialog-content-centered"> <div class="infoBanner" style="margin-bottom:1.8em"> ${ChangingMetadataImageSettingsNewContent} </div> <div class="folders hide"> <div style="display:flex;align-items:center"> <h1 style="margin:.5em 0">${Folders}</h1> <button is="emby-button" type="button" class="fab btnAddFolder submit" title="${Add}"> <span class="material-icons add" aria-hidden="true"></span> </button> </div> <div class="paperList folderList" style="margin-bottom:2em"></div> </div> <div class="libraryOptions"></div> </div> </div> <div class="formDialogFooter"> <button is="emby-button" type="button" class="raised btnSubmit button-submit block formDialogFooterItem"> <span>${ButtonOk}</span> </button> </div> '),n.querySelector(".formDialogHeaderTitle").innerText=t.library.Name,function(e,t){x(e,t),e.querySelector(".btnAddFolder").addEventListener("click",S),e.querySelector(".folderList").addEventListener("click",b),e.querySelector(".btnSubmit").addEventListener("click",p),s.Ay.embed(e.querySelector(".libraryOptions"),t.library.CollectionType,t.library.LibraryOptions)}(n,t),n.addEventListener("close",C),o.default.open(n),n.querySelector(".btnCancel").addEventListener("click",(function(){o.default.close(n)})),A(n),r.promise()})),P=!1,O=!1,L=j},76942:function(e,t,r){var n;function a(e){return void 0===e&&(e=!0),e?n.SquareOverflow:n.Square}function i(e){return void 0===e&&(e=!0),e?n.BackdropOverflow:n.Backdrop}function o(e){return void 0===e&&(e=!0),e?n.PortraitOverflow:n.Portrait}r.d(t,{G8:function(){return n},UI:function(){return i},xK:function(){return o},zP:function(){return a}}),function(e){e.Backdrop="backdrop",e.BackdropOverflow="overflowBackdrop",e.Banner="banner",e.Portrait="portrait",e.PortraitOverflow="overflowPortrait",e.Square="square",e.SquareOverflow="overflowSquare",e.Auto="auto",e.AutoHome="autohome",e.AutoOverflow="autooverflow",e.AutoVertical="autoVertical",e.Mixed="mixed",e.MixedSquare="mixedSquare",e.MixedBackdrop="mixedBackdrop",e.MixedPortrait="mixedPortrait"}(n||(n={}))},77004:function(e,t,r){r.r(t),r(29305),r(32733),r(84701),r(81678),r(44962),r(4754),r(94),r(36947),r(78557),r(90076),r(83994),r(23630),r(82367);var n=r(36300),a=r(79754),i=r(8566),o=r(46782),l=r(5898),s=r(67430),c=(r(98959),r(10353),r(15453),r(77157),r(63001),r(71866));function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}function y(e,t,n){Promise.resolve().then(r.bind(r,10838)).then((function(r){var a=n?"on":"off";r.centerFocus[a](e,t)}))}function m(e){i.Ay.show();var t=n.Ay.parentWithClass(e.target,"dialog"),r=this.options,o=s.tF.getApiClient(r.serverId),u="all"===t.querySelector("#selectMetadataRefreshMode").value,d="scan"===t.querySelector("#selectMetadataRefreshMode").value?"Default":"FullRefresh",f="FullRefresh"===d&&t.querySelector(".chkReplaceImages").checked,y="FullRefresh"===d&&t.querySelector(".chkReplaceTrickplayImages").checked;return r.itemIds.forEach((function(e){o.refreshItem(e,{Recursive:!0,ImageRefreshMode:d,MetadataRefreshMode:d,ReplaceAllImages:f,RegenerateTrickplay:y,ReplaceAllMetadata:u})})),a.default.close(t),(0,c.A)(l.Ay.translate("RefreshQueued")),i.Ay.hide(),e.preventDefault(),!1}var v=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t},(t=[{key:"show",value:function(){var e={removeOnClose:!0,scrollY:!1};o.A.tv?e.size="fullscreen":e.size="small";var t=a.default.createDialog(e);t.classList.add("formDialog");var r="",n=l.Ay.translate("RefreshMetadata");return r+='<div class="formDialogHeader">',r+='<button is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1" title="'.concat(l.Ay.translate("ButtonBack"),'"><span class="material-icons arrow_back" aria-hidden="true"></span></button>'),r+='<h3 class="formDialogHeaderTitle">',r+=n,r+="</h3>",r+="</div>",r+=function(){var e="";return e+='<div class="formDialogContent smoothScrollY" style="padding-top:2em;">',e+='<div class="dialogContentInner dialog-content-centered">',e+='<form style="margin:auto;">',e+='<div class="fldSelectPlaylist selectContainer">',e+='<select is="emby-select" id="selectMetadataRefreshMode" label="'+l.Ay.translate("LabelRefreshMode")+'">',e+='<option value="scan" selected>'+l.Ay.translate("ScanForNewAndUpdatedFiles")+"</option>",e+='<option value="missing">'+l.Ay.translate("SearchForMissingMetadata")+"</option>",e+='<option value="all">'+l.Ay.translate("ReplaceAllMetadata")+"</option>",e+="</select>",e+="</div>",e+='<label class="checkboxContainer hide fldReplaceExistingImages">',e+='<input type="checkbox" is="emby-checkbox" class="chkReplaceImages" />',e+="<span>"+l.Ay.translate("ReplaceExistingImages")+"</span>",e+="</label>",e+='<label class="checkboxContainer hide fldReplaceTrickplayImages">',e+='<input type="checkbox" is="emby-checkbox" class="chkReplaceTrickplayImages" />',e+="<span>"+l.Ay.translate("ReplaceTrickplayImages")+"</span>",e+="</label>",e+='<div class="fieldDescription">',e+=l.Ay.translate("RefreshDialogHelp"),e+="</div>",e+='<input type="hidden" class="fldSelectedItemIds" />',e+="<br />",e+='<div class="formDialogFooter">',e+='<button is="emby-button" type="submit" class="raised btnSubmit block formDialogFooterItem button-submit">'+l.Ay.translate("Refresh")+"</button>",e+="</div>",e+="</form>",(e+="</div>")+"</div>"}(),t.innerHTML=r,t.querySelector("form").addEventListener("submit",m.bind(this)),t.querySelector("#selectMetadataRefreshMode").addEventListener("change",(function(){"scan"===this.value?(t.querySelector(".fldReplaceExistingImages").classList.add("hide"),t.querySelector(".fldReplaceTrickplayImages").classList.add("hide")):(t.querySelector(".fldReplaceExistingImages").classList.remove("hide"),t.querySelector(".fldReplaceTrickplayImages").classList.remove("hide"))})),this.options.mode&&(t.querySelector("#selectMetadataRefreshMode").value=this.options.mode),t.querySelector("#selectMetadataRefreshMode").dispatchEvent(new CustomEvent("change")),t.querySelector(".btnCancel").addEventListener("click",(function(){a.default.close(t)})),o.A.tv&&y(t.querySelector(".formDialogContent"),!1,!0),new Promise((function(e){o.A.tv&&y(t.querySelector(".formDialogContent"),!1,!1),t.addEventListener("close",e),a.default.open(t)}))}}])&&d(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();t.default=v},84826:function(e,t,r){r.r(t),r.d(t,{MediaLibraryCreator:function(){return C},default:function(){return P}}),r(29305),r(32733),r(84701),r(81678),r(24776),r(14382),r(69703),r(44962),r(86584),r(4754),r(94),r(36947),r(78557),r(96054),r(90076),r(95021),r(83994),r(93062),r(46968),r(97747),r(82367);var n=r(22696),a=r.n(n),i=r(8566),o=r(79754),l=r(36300),s=r(9938),c=r(5898),u=(r(10353),r(15453),r(98959),r(63001),r(6882),r(71866)),d=r(41177);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function m(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}function h(e){if(e.preventDefault(),j)return!1;if(0==k.length)return(0,d.A)({text:c.Ay.translate("PleaseAddAtLeastOneFolder"),type:"error"}),!1;j=!0,i.Ay.show();var t=l.Ay.parentWithClass(this,"dlg-librarycreator"),r=t.querySelector("#txtValue").value.trim(),n=t.querySelector("#selectCollectionType").value;if(0===r.length)return(0,d.A)({text:c.Ay.translate("LibraryNameInvalid"),type:"error"}),j=!1,i.Ay.hide(),!1;"mixed"==n&&(n=null);var a=s.Ay.getLibraryOptions(t.querySelector(".libraryOptions"));a.PathInfos=k,ApiClient.addVirtualFolder(r,n,w.refresh,a).then((function(){I=!0,j=!1,i.Ay.hide(),o.default.close(t)}),(function(){(0,u.A)(c.Ay.translate("ErrorAddingMediaPathToVirtualFolder")),j=!1,i.Ay.hide()}))}function p(){var e=l.Ay.parentWithClass(this,"dlg-librarycreator");Promise.resolve().then(r.bind(r,21840)).then((function(t){var r=new(0,t.default);r.show({callback:function(t){t&&function(e,t){var r=t.toLowerCase();if(!k.filter((function(e){return e.Path.toLowerCase()==r})).length){var n={Path:t};k.push(n),g(e)}}(e,t),r.close()}})}))}function b(e,t){var r="";return r+='<div class="listItem listItem-border lnkPath">',r+='<div class="'.concat(e.NetworkPath?"listItemBody two-line":"listItemBody",'">'),r+='<div class="listItemBodyText" dir="ltr">'.concat(a()(e.Path),"</div>"),e.NetworkPath&&(r+='<div class="listItemBodyText secondary" dir="ltr">'.concat(a()(e.NetworkPath),"</div>")),r+="</div>",(r+='<button type="button" is="paper-icon-button-light"" class="listItemButton btnRemovePath" data-index="'.concat(t,'"><span class="material-icons remove_circle" aria-hidden="true"></span></button>'))+"</div>"}function g(e){var t=k.map(b).join(""),r=e.querySelector(".folderList");r.innerHTML=t,t?r.classList.remove("hide"):r.classList.add("hide")}function A(e){var t=l.Ay.parentWithClass(e.target,"btnRemovePath"),r=parseInt(t.getAttribute("data-index"),10),n=k[r].Path.toLowerCase();k=k.filter((function(e){return e.Path.toLowerCase()!=n})),g(l.Ay.parentWithClass(t,"dlg-librarycreator"))}function x(){S(I)}var S,w,C=m((function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),new Promise((function(e){w=t,S=e,I=!1;var r,n,a,i=o.default.createDialog({size:"small",modal:!1,removeOnClose:!0,scrollY:!1});i.classList.add("ui-body-a"),i.classList.add("background-theme-a"),i.classList.add("dlg-librarycreator"),i.classList.add("formDialog"),i.innerHTML=c.Ay.translateHtml('<div class="formDialogHeader"> <button type="button" is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1" title="${ButtonBack}"><span class="material-icons arrow_back" aria-hidden="true"></span></button> <h3 class="formDialogHeaderTitle">${ButtonAddMediaLibrary}</h3> </div> <div class="formDialogContent scrollY" style="padding-top:2em"> <div class="dialogContentInner dialog-content-centered"> <form class="addLibraryForm" style="max-width:100%"> <div id="fldCollectionType" class="selectContainer"> <select is="emby-select" id="selectCollectionType" data-mini="true" required="required" label="${LabelContentType}"></select> <div class="collectionTypeFieldDescription fieldDescription"> </div> </div> <div class="inputContainer"> <input is="emby-input" type="text" id="txtValue" required="required" label="${LabelDisplayName}"/> </div> <div class="folders"> <div style="display:flex;align-items:center"> <h1 style="margin:.5em 0">${Folders}</h1> <button is="emby-button" type="button" class="fab btnAddFolder submit" title="${Add}"> <span class="material-icons add" aria-hidden="true"></span> </button> </div> <div class="paperList folderList hide" style="margin-bottom:2em"></div> </div> <div class="libraryOptions"></div> <div class="formDialogFooter"> <button is="emby-button" type="submit" class="raised btnSubmit button-submit block formDialogFooterItem"> <span>${ButtonOk}</span> </button> </div> </form> </div> </div> '),r=i,n=t.collectionTypeOptions,(a=r.querySelector("#selectCollectionType")).innerHTML=function(e){return e.map((function(e){return'<option value="'.concat(e.value,'">').concat(e.name,"</option>")})).join("")}(n),a.value="",a.addEventListener("change",(function(){var e=this.value,t=l.Ay.parentWithClass(this,"dialog");if(s.Ay.setContentType(t.querySelector(".libraryOptions"),e),e?t.querySelector(".libraryOptions").classList.remove("hide"):t.querySelector(".libraryOptions").classList.add("hide"),"mixed"!=e){var r=this.selectedIndex;if(-1!=r){var a=this.options[r].innerHTML.replaceAll("*","").replaceAll("&amp;","&");t.querySelector("#txtValue").value=a}}var i=n.find((function(t){return t.value===e}));t.querySelector(".collectionTypeFieldDescription").innerHTML=(null==i?void 0:i.message)||""})),r.querySelector(".btnAddFolder").addEventListener("click",p),r.querySelector(".addLibraryForm").addEventListener("submit",h),r.querySelector(".folderList").addEventListener("click",A),i.addEventListener("close",x),o.default.open(i),i.querySelector(".btnCancel").addEventListener("click",(function(){o.default.close(i)})),k=[],g(i),function(e){s.Ay.embed(e.querySelector(".libraryOptions")).then((function(){e.querySelector("#selectCollectionType").dispatchEvent(new Event("change"))}))}(i)}))})),k=[],I=!1,j=!1,P=C}}]);