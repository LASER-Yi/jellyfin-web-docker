"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5098,9337],{9337:function(e,t,n){n.r(t),n.d(t,{getCommands:function(){return y},show:function(){return g}}),n(5769),n(63238),n(61418),n(17460),n(14078),n(52077),n(911),n(23938);var a=n(57366),r=n(87796),i=n(94994),l=n(12801),o=n(84881),s=n(52050),c=n(21776),u=n(48957),d=n(18613),m=n(56663);function y(e){var t=e.item,n=e.user,r=u.O.canPlay(t),l=(a.Z.operaTv||a.Z.web0s)&&!n.Policy.IsAdministrator,s=[];r&&"Photo"!==t.MediaType&&(!1!==e.play&&s.push({name:i.ZP.translate("Play"),id:"resume",icon:"play_arrow"}),e.playAllFromHere&&"Program"!==t.Type&&"TvChannel"!==t.Type&&s.push({name:i.ZP.translate("PlayAllFromHere"),id:"playallfromhere",icon:"play_arrow"})),null!==u.O.getCurrentPlayer()&&(e.stopPlayback&&s.push({name:i.ZP.translate("StopPlayback"),id:"stopPlayback",icon:"stop"}),e.clearQueue&&s.push({name:i.ZP.translate("ClearQueue"),id:"clearQueue",icon:"clear_all"})),u.O.canQueue(t)&&(!1!==e.queue&&s.push({name:i.ZP.translate("AddToPlayQueue"),id:"queue",icon:"playlist_add"}),!1!==e.queue&&s.push({name:i.ZP.translate("PlayNext"),id:"queuenext",icon:"playlist_add"})),!t.IsFolder&&"MusicArtist"!==t.Type&&"MusicGenre"!==t.Type||"livetv"===t.CollectionType||!1===e.shuffle||s.push({name:i.ZP.translate("Shuffle"),id:"shuffle",icon:"shuffle"}),"Audio"!==t.MediaType&&"MusicAlbum"!==t.Type&&"MusicArtist"!==t.Type&&"MusicGenre"!==t.Type||!1===e.instantMix||c.ZP.isLocalItem(t)||s.push({name:i.ZP.translate("InstantMix"),id:"instantmix",icon:"explore"}),s.length&&s.push({divider:!0}),l||(c.ZP.supportsAddingToCollection(t)&&s.push({name:i.ZP.translate("AddToCollection"),id:"addtocollection",icon:"playlist_add"}),c.ZP.supportsAddingToPlaylist(t)&&!1!==e.playlist&&s.push({name:i.ZP.translate("AddToPlaylist"),id:"addtoplaylist",icon:"playlist_add"})),"Timer"===t.Type&&n.Policy.EnableLiveTvManagement&&!1!==e.cancelTimer&&s.push({name:i.ZP.translate("CancelRecording"),id:"canceltimer",icon:"cancel"}),"Recording"===t.Type&&"InProgress"===t.Status&&n.Policy.EnableLiveTvManagement&&!1!==e.cancelTimer&&s.push({name:i.ZP.translate("CancelRecording"),id:"canceltimer",icon:"cancel"}),"SeriesTimer"===t.Type&&n.Policy.EnableLiveTvManagement&&!1!==e.cancelTimer&&s.push({name:i.ZP.translate("CancelSeries"),id:"cancelseriestimer",icon:"cancel"}),t.CanDelete&&!1!==e.deleteItem&&("Playlist"===t.Type||"BoxSet"===t.Type?s.push({name:i.ZP.translate("Delete"),id:"delete",icon:"delete"}):s.push({name:i.ZP.translate("DeleteMedia"),id:"delete",icon:"delete"})),t.CanDownload&&o.M.supports("filedownload")&&"Book"!==t.Type&&(s.push({name:i.ZP.translate("Download"),id:"download",icon:"file_download"}),s.push({name:i.ZP.translate("CopyStreamURL"),id:"copy-stream",icon:"content_copy"})),s.length&&s.push({divider:!0});var d=c.ZP.canEdit(n,t);if(d&&!1!==e.edit&&"SeriesTimer"!==t.Type){var m="Timer"===t.Type||"SeriesTimer"===t.Type?i.ZP.translate("Edit"):i.ZP.translate("EditMetadata");s.push({name:m,id:"edit",icon:"edit"})}return c.ZP.canEditImages(n,t)&&!1!==e.editImages&&s.push({name:i.ZP.translate("EditImages"),id:"editimages",icon:"image"}),!d||"Video"!==t.MediaType||"TvChannel"===t.Type||"Program"===t.Type||"Virtual"===t.LocationType||"Recording"===t.Type&&"Completed"!==t.Status||!1===e.editSubtitles||s.push({name:i.ZP.translate("EditSubtitles"),id:"editsubtitles",icon:"closed_caption"}),!1!==e.identify&&c.ZP.canIdentify(n,t)&&s.push({name:i.ZP.translate("Identify"),id:"identify",icon:"edit"}),t.MediaSources&&!1!==e.moremediainfo&&s.push({name:i.ZP.translate("MoreMediaInfo"),id:"moremediainfo",icon:"info"}),"Program"===t.Type&&!1!==e.record&&(t.TimerId?s.push({name:i.ZP.translate("ManageRecording"),id:"record",icon:"fiber_manual_record"}):s.push({name:i.ZP.translate("Record"),id:"record",icon:"fiber_manual_record"})),c.ZP.canRefreshMetadata(t,n)&&s.push({name:i.ZP.translate("RefreshMetadata"),id:"refresh",icon:"refresh"}),t.PlaylistItemId&&e.playlistId&&s.push({name:i.ZP.translate("RemoveFromPlaylist"),id:"removefromplaylist",icon:"remove"}),e.collectionId&&s.push({name:i.ZP.translate("RemoveFromCollection"),id:"removefromcollection",icon:"remove"}),!l&&!0===e.share&&c.ZP.canShare(t,n)&&s.push({name:i.ZP.translate("Share"),id:"share",icon:"share"}),!1!==e.sync&&c.ZP.canSync(n,t)&&s.push({name:i.ZP.translate("Sync"),id:"sync",icon:"sync"}),!1!==e.openAlbum&&t.AlbumId&&"Photo"!==t.MediaType&&s.push({name:i.ZP.translate("ViewAlbum"),id:"album",icon:"album"}),!1!==e.openArtist&&t.AlbumArtists&&t.AlbumArtists.length&&s.push({name:i.ZP.translate("ViewAlbumArtist"),id:"artist",icon:"person"}),s}function f(e,t,n,a){return function(){e({command:t,updated:n,deleted:a})}}function p(e,t,n,a){var r="play";n&&(r=a?"queueNext":"queue");var i=0;t&&e.UserData&&e.UserData.PlaybackPositionTicks&&(i=e.UserData.PlaybackPositionTicks),"Program"===e.Type?u.O[r]({ids:[e.ChannelId],startPositionTicks:i,serverId:e.ServerId}):u.O[r]({items:[e],startPositionTicks:i})}function g(e){var t=y(e);return t.length?l.default.show({items:t,positionTo:e.positionTo,resolveOnClick:["share"]}).then((function(t){return function(e,t,a){var l=e.Id,o=e.ServerId,c=d.Z.getApiClient(o);return new Promise((function(d,y){switch(t){case"addtocollection":n.e(9449).then(n.bind(n,19449)).then((function(e){(new(0,e.default)).show({items:[l],serverId:o}).then(f(d,t,!0),f(d,t))}));break;case"addtoplaylist":n.e(3126).then(n.bind(n,43126)).then((function(e){new(0,e.default)({items:[l],serverId:o}).then(f(d,t,!0),f(d,t))}));break;case"download":n.e(6381).then(n.bind(n,26381)).then((function(n){var a=c.getItemDownloadUrl(l);n.download([{url:a,itemId:l,serverId:o,title:e.Name,filename:e.Path.replace(/^.*[\\/]/,"")}]),f(f(d,t),t)()}));break;case"copy-stream":var g=c.getItemDownloadUrl(l);(0,r.J)(g).then((function(){(0,m.Z)(i.ZP.translate("CopyStreamURLSuccess"))})).catch((function(){prompt(i.ZP.translate("CopyStreamURL"),g)})),f(d,t)();break;case"editsubtitles":n.e(327).then(n.bind(n,327)).then((function(e){e.default.show(l,o).then(f(d,t,!0),f(d,t))}));break;case"edit":(function(e,t){return new Promise((function(a,r){var i=e.serverInfo().Id;"Timer"===t.Type?n.e(1341).then(n.bind(n,21341)).then((function(e){e.default.show(t.Id,i).then(a,r)})):"SeriesTimer"===t.Type?n.e(4896).then(n.bind(n,4896)).then((function(e){e.default.show(t.Id,i).then(a,r)})):n.e(3786).then(n.bind(n,43786)).then((function(e){e.default.show(t.Id,i).then(a,r)}))}))})(c,e).then(f(d,t,!0),f(d,t));break;case"editimages":n.e(3635).then(n.bind(n,23635)).then((function(e){e.show({itemId:l,serverId:o}).then(f(d,t,!0),f(d,t))}));break;case"identify":Promise.resolve().then(n.bind(n,9599)).then((function(e){e.show(l,o).then(f(d,t,!0),f(d,t))}));break;case"moremediainfo":n.e(4166).then(n.bind(n,14166)).then((function(e){e.show(l,o).then(f(d,t),f(d,t))}));break;case"refresh":!function(e,t){n.e(6929).then(n.bind(n,36929)).then((function(n){new(0,n.default)({itemIds:[t.Id],serverId:e.serverInfo().Id,mode:"CollectionFolder"===t.Type?"scan":null}).show()}))}(c,e),f(d,t)();break;case"open":s.appRouter.showItem(e),f(d,t)();break;case"play":p(e,!1),f(d,t)();break;case"resume":p(e,!0),f(d,t)();break;case"queue":p(e,!1,!0),f(d,t)();break;case"queuenext":p(e,!1,!0,!0),f(d,t)();break;case"stopPlayback":u.O.stop();break;case"clearQueue":u.O.clearQueue();break;case"record":n.e(9553).then(n.bind(n,45012)).then((function(e){e.default.show(l,o).then(f(d,t,!0),f(d,t))}));break;case"shuffle":u.O.shuffle(e),f(d,t)();break;case"instantmix":u.O.instantMix(e),f(d,t)();break;case"delete":(function(e,t){return new Promise((function(e,a){n.e(5854).then(n.bind(n,35854)).then((function(n){n.deleteItem({item:t,navigate:!1}).then((function(){e(!0)}),a)}))}))})(0,e).then(f(d,t,!0,!0),f(d,t));break;case"share":navigator.share({title:e.Name,text:e.Overview,url:"".concat(c.serverAddress(),"/web/index.html").concat(s.appRouter.getRouteUrl(e))});break;case"album":s.appRouter.showItem(e.AlbumId,e.ServerId),f(d,t)();break;case"artist":s.appRouter.showItem(e.AlbumArtists[0].Id,e.ServerId),f(d,t)();break;case"playallfromhere":case"queueallfromhere":f(d,t)();break;case"removefromplaylist":c.ajax({url:c.getUrl("Playlists/"+a.playlistId+"/Items",{EntryIds:[e.PlaylistItemId].join(",")}),type:"DELETE"}).then((function(){f(d,t,!0)()}));break;case"removefromcollection":c.ajax({type:"DELETE",url:c.getUrl("Collections/"+a.collectionId+"/Items",{Ids:[e.Id].join(",")})}).then((function(){f(d,t,!0)()}));break;case"canceltimer":!function(e,t,a,r){Promise.resolve().then(n.bind(n,30531)).then((function(e){var n=e.default,i=t.TimerId||t.Id;n.cancelTimerWithConfirmation(i,t.ServerId).then((function(){f(a,r,!0)()}))}))}(0,e,d,t);break;case"cancelseriestimer":!function(e,t,a,r){Promise.resolve().then(n.bind(n,30531)).then((function(e){e.default.cancelSeriesTimerWithConfirmation(t.Id,t.ServerId).then((function(){f(a,r,!0)()}))}))}(0,e,d,t);break;default:y()}}))}(e.item,t,e)})):Promise.reject()}t.default={getCommands:y,show:g}},69011:function(e,t,n){n(61013);var a=n(65009),r=n.n(a);t.Z={getNowPlayingNames:function(e,t){var n=e,a=null,i=e.Name;e.AlbumId&&"Audio"===e.MediaType&&(n={Id:e.AlbumId,Name:e.Album,Type:"MusicAlbum",IsFolder:!0}),"Video"===e.MediaType&&(null!=e.IndexNumber&&(i=e.IndexNumber+" - "+i),null!=e.ParentIndexNumber&&(i=e.ParentIndexNumber+"."+i));var l="";e.ArtistItems&&e.ArtistItems.length?(a={Id:e.ArtistItems[0].Id,Name:e.ArtistItems[0].Name,Type:"MusicArtist",IsFolder:!0},l=e.ArtistItems.map((function(e){return e.Name})).join(", ")):e.Artists&&e.Artists.length?l=e.Artists.join(", "):e.SeriesName||e.Album?(l=i,i=e.SeriesName||e.Album,a=n,n=e.SeriesId?{Id:e.SeriesId,Name:e.SeriesName,Type:"Series",IsFolder:!0}:null):e.ProductionYear&&!1!==t&&(l=e.ProductionYear);var o=[];return o.push({text:r()(i),item:n}),l&&o.push({text:r()(l),item:a}),o}}},62010:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}}),n(15610),n(25901),n(92189),n(91047),n(5769),n(61013),n(63238),n(61418),n(17460),n(14078),n(32081),n(52077),n(911),n(23938),n(72410),n(48410),n(27471),n(95623),n(61514),n(98010),n(43512);var a=n(65009),r=n.n(a),i=n(61693),l=n(57084),o=n(63873),s=n(98301),c=n(48957),u=n(69011),d=n(81643),m=n(84881),y=n(94994),f=n(30325),p=n(60934),g=n(61570),v=n(9337),h=(n(82427),n(27636),n(18613)),S=n(56663),b=n(52050);function P(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){o=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(o)throw i}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var T=!0,w=!0;function q(e,t){t?e.classList.remove("hide"):e.classList.add("hide")}function k(){function e(e,n,i){G=i;var o=i.NowPlayingItem,s=c.O.getPlayerInfo().supportedCommands;J=s;var d=i.PlayState||{},m=s.includes("DisplayMessage")||s.includes("SendString")||s.includes("Select");if(q(n.querySelector(".btnToggleFullscreen"),o&&"Video"==o.MediaType&&s.includes("ToggleFullscreen")),function(e,t){var n=J;q(t.querySelector(".btnAudioTracks"),c.O.audioTracks(e).length>1&&-1!=n.indexOf("SetAudioStreamIndex"))}(e,n),function(e,t){var n=J;q(t.querySelector(".btnSubtitles"),c.O.subtitleTracks(e).length&&-1!=n.indexOf("SetSubtitleStreamIndex"))}(e,n),s.includes("DisplayMessage")&&!z.isLocalPlayer?n.querySelector(".sendMessageSection").classList.remove("hide"):n.querySelector(".sendMessageSection").classList.add("hide"),s.includes("SendString")&&!z.isLocalPlayer?n.querySelector(".sendTextSection").classList.remove("hide"):n.querySelector(".sendTextSection").classList.add("hide"),s.includes("Select")&&!z.isLocalPlayer?n.querySelector(".navigationSection").classList.remove("hide"):n.querySelector(".navigationSection").classList.add("hide"),m&&!z.isLocalPlayer?n.querySelector(".remoteControlSection").classList.remove("hide"):n.querySelector(".remoteControlSection").classList.add("hide"),q(n.querySelector(".btnStop"),null!=o),q(n.querySelector(".btnNextTrack"),null!=o),q(n.querySelector(".btnPreviousTrack"),null!=o),f.Z.mobile){var y=c.O.isPlayingVideo()&&null!==o,S=!c.O.isPlayingVideo()&&null!==o;q(n.querySelector(".btnRepeat"),S),q(n.querySelector(".btnShuffleQueue"),S),q(n.querySelector(".btnRewind"),y),q(n.querySelector(".btnFastForward"),y),q(n.querySelector(".nowPlayingSecondaryButtons .btnShuffleQueue"),y),q(n.querySelector(".nowPlayingSecondaryButtons .btnRepeat"),y)}else q(n.querySelector(".btnRewind"),null!=o),q(n.querySelector(".btnFastForward"),null!=o);var b=n.querySelector(".nowPlayingPositionSlider");if(b&&o&&o.RunTimeTicks&&b.setKeyboardSteps(1e6*p.skipBackLength()/o.RunTimeTicks,1e6*p.skipForwardLength()/o.RunTimeTicks),b&&!b.dragging){b.disabled=!d.CanSeek;var T=i.MediaSource&&null==i.MediaSource.RunTimeTicks;b.setIsClear(T)}I(d.IsPaused,null!=o),k(d.PositionTicks,o?o.RunTimeTicks:null),a(n,d.IsMuted,d.VolumeLevel),o&&"Video"==o.MediaType?n.classList.remove("hideVideoButtons"):n.classList.add("hideVideoButtons"),t(c.O.getRepeatMode()),M(!1),function(e,t,n){var a,i=t.NowPlayingItem,o=i?(a=i,u.Z.getNowPlayingNames(a,void 0).map((function(e){return r()(e.text)})).join("<br/>")).replace("<br/>"," - "):"";if(i){var s=i.ServerId||n;if("AudioBook"==i.Type||"Audio"==i.Type||"Audio"==i.MediaStreams[0].Type){var c="",d="";if(null!=i.Artists)if(null!=i.ArtistItems){var m,y=P(i.ArtistItems);try{for(y.s();!(m=y.n()).done;){var f=m.value;c+='<a class="button-link emby-button" is="emby-linkbutton" href="#/details?id='.concat(f.Id,"&serverId=").concat(s,'">').concat(r()(f.Name),"</a>"),f!==i.ArtistItems.slice(-1)[0]&&(c+=", ")}}catch(e){y.e(e)}finally{y.f()}}else if(i.Artists){var p,S=P(i.Artists);try{for(S.s();!(p=S.n()).done;){var b=p.value;c+="<a>".concat(r()(b),"</a>"),b!==i.Artists.slice(-1)[0]&&(c+=", ")}}catch(e){S.e(e)}finally{S.f()}}null!=i.Album&&(d='<a class="button-link emby-button" is="emby-linkbutton" href="#/details?id='+i.AlbumId+"&serverId=".concat(s,'">')+r()(i.Album)+"</a>"),e.querySelector(".nowPlayingAlbum").innerHTML=d,e.querySelector(".nowPlayingArtist").innerHTML=c,e.querySelector(".nowPlayingSongName").innerText=i.Name}else if("Episode"==i.Type){if(null!=i.SeasonName){var I=i.SeasonName;e.querySelector(".nowPlayingSeason").innerHTML='<a class="button-link emby-button" is="emby-linkbutton" href="#/details?id='+i.SeasonId+"&serverId=".concat(s,'">').concat(r()(I),"</a>")}if(null!=i.SeriesName){var T=i.SeriesName;null!=i.SeriesId?e.querySelector(".nowPlayingSerie").innerHTML='<a class="button-link emby-button" is="emby-linkbutton" href="#/details?id='+i.SeriesId+"&serverId=".concat(s,'">').concat(r()(T),"</a>"):e.querySelector(".nowPlayingSerie").innerText=T}e.querySelector(".nowPlayingEpisode").innerText=i.Name}else e.querySelector(".nowPlayingPageTitle").innerHTML=o;o.length>0&&"Audio"!=i.Type&&"Episode"!=i.Type?e.querySelector(".nowPlayingPageTitle").classList.remove("hide"):e.querySelector(".nowPlayingPageTitle").classList.add("hide");var w=function(e,t){if("Episode"!==e.Type)return null;if((t=t||{}).type=t.type||"Primary","Primary"===t.type&&e.SeriesPrimaryImageTag)return t.tag=e.SeriesPrimaryImageTag,h.Z.getApiClient(e.ServerId).getScaledImageUrl(e.SeriesId,t);if("Thumb"===t.type){if(e.SeriesThumbImageTag)return t.tag=e.SeriesThumbImageTag,h.Z.getApiClient(e.ServerId).getScaledImageUrl(e.SeriesId,t);if(e.ParentThumbImageTag)return t.tag=e.ParentThumbImageTag,h.Z.getApiClient(e.ServerId).getScaledImageUrl(e.ParentThumbItemId,t)}return null}(i,{maxHeight:300})||function(e,t){return(t=t||{}).type=t.type||"Primary",e.ImageTags&&e.ImageTags[t.type]?(t.tag=e.ImageTags[t.type],h.Z.getApiClient(e.ServerId).getScaledImageUrl(e.PrimaryImageItemId||e.Id,t)):e.AlbumId&&e.AlbumPrimaryImageTag?(t.tag=e.AlbumPrimaryImageTag,h.Z.getApiClient(e.ServerId).getScaledImageUrl(e.AlbumId,t)):null}(i,{maxHeight:300}),q=e.querySelector(".btnToggleContextMenu"),k=document.activeElement===q,L=q.cloneNode(!0);q.parentNode.replaceChild(L,q),q=e.querySelector(".btnToggleContextMenu"),k&&q.focus();var A={play:!1,queue:!1,stopPlayback:!0,clearQueue:!0,openAlbum:!1,positionTo:q},Z=h.Z.getApiClient(i.ServerId);Z.getItem(Z.getCurrentUserId(),i.Id).then((function(e){Z.getCurrentUser().then((function(t){q.addEventListener("click",(function(){v.default.show(Object.assign({item:e,user:t},A))}))}))})),function(e,t,n){var a=t.NowPlayingItem,r=e.querySelector(".nowPlayingPageImageContainer");n?(r.innerHTML='<img class="nowPlayingPageImage" src="'+n+'" />',e.querySelector(".nowPlayingPageImage").classList.toggle("nowPlayingPageImageAudio","Audio"===a.Type),e.querySelector(".nowPlayingPageImage").classList.toggle("nowPlayingPageImagePoster","Audio"!==a.Type)):r.innerHTML='<div class="nowPlayingPageImageContainerNoAlbum"><button data-action="link" class="cardImageContainer coveredImage '+g.default.getDefaultBackgroundClass(a.Name)+' cardContent cardContent-shadow itemAction"><span class="cardImageIcon material-icons album" aria-hidden="true"></span></button></div>'}(e,t,w),(0,l.pZ)([i]),Z.getItem(Z.getCurrentUserId(),i.Id).then((function(t){var n=t.UserData||{},a=null==n.Likes?"":n.Likes;e.querySelector(".nowPlayingPageUserDataButtonsTitle").innerHTML='<button is="emby-ratingbutton" type="button" class="listItemButton paper-icon-button-light" data-id="'+t.Id+'" data-serverid="'+t.ServerId+'" data-itemtype="'+t.Type+'" data-likes="'+a+'" data-isfavorite="'+n.IsFavorite+'"><span class="material-icons favorite" aria-hidden="true"></span></button>',e.querySelector(".nowPlayingPageUserDataButtons").innerHTML='<button is="emby-ratingbutton" type="button" class="listItemButton paper-icon-button-light" data-id="'+t.Id+'" data-serverid="'+t.ServerId+'" data-itemtype="'+t.Type+'" data-likes="'+a+'" data-isfavorite="'+n.IsFavorite+'"><span class="material-icons favorite" aria-hidden="true"></span></button>'}))}else(0,l.rs)(),e.querySelector(".nowPlayingPageUserDataButtons").innerHTML=""}(n,i)}function t(e){var t=Q.querySelectorAll(".repeatToggleButton"),n='<span class="material-icons repeat" aria-hidden="true"></span>',a=!0;switch(e){case"RepeatAll":break;case"RepeatOne":n='<span class="material-icons repeat_one" aria-hidden="true"></span>';break;default:a=!1}var r,i=P(t);try{for(i.s();!(r=i.n()).done;){var l=r.value;l.classList.toggle("buttonActive",a),l.innerHTML=n}}catch(e){i.e(e)}finally{i.f()}}function a(e,t,n){var a=e,r=J;-1===r.indexOf("Mute")&&(T=!1),-1===r.indexOf("SetVolume")&&(w=!1),z.isLocalPlayer&&m.M.supports("physicalvolumecontrol")&&(T=!1,w=!1);var i=a.querySelector(".buttonMute"),l=i.querySelector(".material-icons");if(l.classList.remove("volume_off","volume_up"),t?(i.setAttribute("title",y.ZP.translate("Unmute")),l.classList.add("volume_off")):(i.setAttribute("title",y.ZP.translate("Mute")),l.classList.add("volume_up")),T||w){i.classList.toggle("hide",!T);var o=e.querySelector(".nowPlayingVolumeSlider"),s=e.querySelector(".nowPlayingVolumeSliderContainer");o&&(s.classList.toggle("hide",!w),o.dragging||(o.value=n||0))}else e.querySelector(".volumecontrol").classList.add("hide")}function I(e,t){var n=Q.querySelector(".btnPlayPause"),a=n.querySelector(".material-icons");a.classList.remove("play_circle_filled","pause_circle_filled"),a.classList.add(e?"play_circle_filled":"pause_circle_filled"),q(n,t)}function k(e,t){var n=Q,a=n.querySelector(".nowPlayingPositionSlider");if(a&&!a.dragging)if(t){var r=e/t;r*=100,a.value=r}else a.value=0;n.querySelector(".positionTime").innerHTML=null==e?"--:--":i.ZP.getDisplayRunningTime(e),n.querySelector(".runtime").innerHTML=null!=t?i.ZP.getDisplayRunningTime(t):"--:--"}function L(e){return c.O.getPlaylist(e)}function A(e,t){console.debug("remotecontrol event: "+e.type),N.call(this,e,t)}function Z(){t(c.O.getRepeatMode())}function M(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=c.O.getQueueShuffleMode(this),a=Q,r="buttonActive",i=a.querySelectorAll(".btnShuffleQueue"),l=P(i);try{for(l.s();!(e=l.n()).done;){var o=e.value;"Shuffle"===n?o.classList.add(r):o.classList.remove(r)}}catch(e){l.e(e)}finally{l.f()}t&&C()}function C(){var e,t;e=Q,L(t=this).then((function(n){var a="",r=!0;f.Z.mobile&&(n.length>0?e.querySelector(".btnTogglePlaylist").classList.remove("hide"):e.querySelector(".btnTogglePlaylist").classList.add("hide"),r=!1),a+=o.Z.getListViewHtml({items:n,smallIcon:!0,action:"setplaylistindex",enableUserDataButtons:r,rightButtons:[{icon:"remove_circle_outline",title:y.ZP.translate("ButtonRemove"),id:"remove"}],dragHandle:!0});var i=e.querySelector(".playlist"),l=i.querySelector("button:focus");if(i.innerHTML=a,null!==l){l=l.getAttribute("data-playlistitemid");var u=i.querySelector('button[data-playlistitemid="'.concat(l,'"]'));null!==u&&u.focus()}var d=c.O.getCurrentPlaylistItemId(t);if(d){var m=i.querySelector('.listItem[data-playlistItemId="'.concat(d,'"] .listItemImage'));m&&(m.classList.remove("lazy"),m.classList.add("playlistIndexIndicatorImage"))}s.default.lazyChildren(i)}))}function O(e,t){var n=Q;if(void 0!==t)for(var a=t.playlistItemIds,r=0,i=a.length;r<i;r++){var l=n.querySelector('.listItem[data-playlistItemId="'+a[r]+'"]');l&&l.parentNode.removeChild(l)}else C()}function x(t,n){console.debug("remotecontrol event: "+t.type),n.NextMediaType||(e(this,Q,{}),b.appRouter.back())}function R(){I(this.paused(),!0)}function N(t,n){e(this,Q,n),C()}function E(){var e=(new Date).getTime();e-K<700||(K=e,W=c.O.duration(this),k(1e4*c.O.currentTime(this),W))}function _(){a(Q,this.isMuted(),this.getVolume())}function B(){var e=z;e&&(d.Z.off(e,"playbackstart",A),d.Z.off(e,"statechange",N),d.Z.off(e,"repeatmodechange",Z),d.Z.off(e,"shufflequeuemodechange",M),d.Z.off(e,"playlistitemremove",O),d.Z.off(e,"playlistitemmove",C),d.Z.off(e,"playlistitemadd",C),d.Z.off(e,"playbackstop",x),d.Z.off(e,"volumechange",_),d.Z.off(e,"pause",R),d.Z.off(e,"unpause",R),d.Z.off(e,"timeupdate",E),z=null)}function D(e,t){if(B(),z=t,t){var n=c.O.getPlayerState(t);N.call(t,{type:"init"},n),d.Z.on(t,"playbackstart",A),d.Z.on(t,"statechange",N),d.Z.on(t,"repeatmodechange",Z),d.Z.on(t,"shufflequeuemodechange",M),d.Z.on(t,"playlistitemremove",O),d.Z.on(t,"playlistitemmove",C),d.Z.on(t,"playlistitemadd",C),d.Z.on(t,"playbackstop",x),d.Z.on(t,"volumechange",_),d.Z.on(t,"pause",R),d.Z.on(t,"unpause",R),d.Z.on(t,"timeupdate",E);var a=c.O.getPlayerInfo().supportedCommands;J=a,function(e,t){for(var n=e.querySelectorAll(".btnCommand"),a=0,r=n.length;a<r;a++){var i=-1!==t.indexOf(n[a].getAttribute("data-command"));n[a].disabled=!i}}(e,a)}}function F(){z&&(this.classList.contains("repeatToggleButton")?function(){switch(c.O.getRepeatMode()){case"RepeatAll":c.O.setRepeatMode("RepeatOne");break;case"RepeatOne":c.O.setRepeatMode("RepeatNone");break;case"RepeatNone":c.O.setRepeatMode("RepeatAll")}}():c.O.sendCommand({Name:this.getAttribute("data-command")},z))}function U(){n.e(3126).then(n.bind(n,43126)).then((function(e){var t=e.default;L(z).then((function(e){return e.filter((function(e){return e.Id&&e.ServerId}))})).then((function(e){var n=e.length?e[0].ServerId:ApiClient.serverId();new t({items:e.map((function(e){return e.Id})),serverId:n,enableAddToPlayQueue:!1,defaultValue:"new"})}))}))}function H(){D(Q,c.O.getCurrentPlayer())}function V(e){var t=e.target;return c.O.sendCommand({Name:"DisplayMessage",Arguments:{Header:t.querySelector("#txtMessageTitle").value,Text:t.querySelector("#txtMessageText",t).value}},z),t.querySelector("input").value="",(0,S.Z)(y.ZP.translate("MessageSent")),e.preventDefault(),e.stopPropagation(),!1}function j(e){var t=e.target;return c.O.sendCommand({Name:"SendString",Arguments:{String:t.querySelector("#txtTypeText",t).value}},z),t.querySelector("input").value="",(0,S.Z)(y.ZP.translate("TextSent")),e.preventDefault(),e.stopPropagation(),!1}var Q,z,G,J=[],K=0,W=0,Y=this;Y.init=function(e,t){!function(e,t){var a='<div class="volumecontrol flex align-items-center flex-wrap-wrap justify-content-center">';a+='<button is="paper-icon-button-light" class="buttonMute autoSize" title='.concat(y.ZP.translate("Mute"),'><span class="xlargePaperIconButton material-icons volume_up" aria-hidden="true"></span></button>'),a+='<div class="sliderContainer nowPlayingVolumeSliderContainer"><input is="emby-slider" type="range" step="1" min="0" max="100" value="0" class="nowPlayingVolumeSlider"/></div>',a+="</div>";var r=t.querySelector(".playlistSectionButton");if(f.Z.mobile?(r.querySelector(".btnTogglePlaylist").insertAdjacentHTML("afterend",a),r.classList.add("playlistSectionButtonTransparent"),t.querySelector(".btnTogglePlaylist").classList.remove("hide"),t.querySelector(".playlistSectionButton").classList.remove("justify-content-center"),t.querySelector(".playlistSectionButton").classList.add("justify-content-space-between")):(t.querySelector(".nowPlayingSecondaryButtons").insertAdjacentHTML("beforeend",a),r.classList.remove("align-items-center","justify-content-center"),r.classList.add("align-items-right","justify-content-flex-end"),t.querySelector(".playlist").classList.remove("hide"),t.querySelector(".btnSavePlaylist").classList.remove("hide"),t.classList.add("padded-bottom")),function(e){for(var t=e.querySelectorAll(".btnCommand"),a=e.querySelector(".nowPlayingPositionSlider"),r=0,l=t.length;r<l;r++)t[r].addEventListener("click",F);e.querySelector(".btnToggleFullscreen").addEventListener("click",(function(){z&&c.O.toggleFullscreen(z)})),e.querySelector(".btnAudioTracks").addEventListener("click",(function(e){var t,a,r,i;z&&G&&G.NowPlayingItem&&(t=z,a=e.target,r=c.O.getAudioStreamIndex(t),i=c.O.audioTracks(t).map((function(e){var t={name:e.DisplayTitle,id:e.Index};return e.Index==r&&(t.selected=!0),t})),Promise.resolve().then(n.bind(n,12801)).then((function(e){e.show({items:i,positionTo:a,callback:function(e){c.O.setAudioStreamIndex(parseInt(e),t)}})})))})),e.querySelector(".btnSubtitles").addEventListener("click",(function(e){var t,a,r,i;z&&G&&G.NowPlayingItem&&(t=z,a=e.target,r=c.O.getSubtitleStreamIndex(t),(i=c.O.subtitleTracks(t).map((function(e){var t={name:e.DisplayTitle,id:e.Index};return e.Index==r&&(t.selected=!0),t}))).unshift({id:-1,name:y.ZP.translate("Off"),selected:null==r}),Promise.resolve().then(n.bind(n,12801)).then((function(e){e.show({items:i,positionTo:a,callback:function(e){c.O.setSubtitleStreamIndex(parseInt(e),t)}})})))})),e.querySelector(".btnStop").addEventListener("click",(function(){z&&c.O.stop(z)})),e.querySelector(".btnPlayPause").addEventListener("click",(function(){z&&c.O.playPause(z)})),e.querySelector(".btnNextTrack").addEventListener("click",(function(){z&&c.O.nextTrack(z)})),e.querySelector(".btnRewind").addEventListener("click",(function(){z&&c.O.rewind(z)})),e.querySelector(".btnFastForward").addEventListener("click",(function(){z&&c.O.fastForward(z)}));var o,s=P(e.querySelectorAll(".btnShuffleQueue"));try{for(s.s();!(o=s.n()).done;)o.value.addEventListener("click",(function(){z&&c.O.toggleQueueShuffleMode(z)}))}catch(e){s.e(e)}finally{s.f()}e.querySelector(".btnPreviousTrack").addEventListener("click",(function(e){if(z)if("Audio"===G.NowPlayingItem.MediaType&&(z._currentTime>=5||!c.O.previousTrack(z))){if(e.detail>1&&c.O.previousTrack(z))return;c.O.seekPercent(0,z),a.value=0}else c.O.previousTrack(z)})),e.querySelector(".btnPreviousTrack").addEventListener("dblclick",(function(){z&&c.O.previousTrack(z)})),a.addEventListener("change",(function(){var e=this.value;if(z){var t=parseFloat(e);c.O.seekPercent(t,z)}})),a.getBubbleText=function(e){if(!G||!G.NowPlayingItem||!W)return"--:--";var t=W;return t/=100,t*=e,i.ZP.getDisplayRunningTime(t)},e.querySelector(".nowPlayingVolumeSlider").addEventListener("input",(function(e){c.O.setVolume(e.target.value,z)})),e.querySelector(".buttonMute").addEventListener("click",(function(){c.O.toggleMute(z)}));var u=e.querySelector(".playlist");u.addEventListener("action-remove",(function(e){c.O.removeFromPlaylist([e.detail.playlistItemId],z)})),u.addEventListener("itemdrop",(function(e){var t=e.detail.newIndex,n=e.detail.playlistItemId;c.O.movePlaylistItem(n,t,z)})),e.querySelector(".btnSavePlaylist").addEventListener("click",U),e.querySelector(".btnTogglePlaylist").addEventListener("click",(function(){e.querySelector(".playlist").classList.contains("hide")?(e.querySelector(".playlist").classList.remove("hide"),e.querySelector(".btnSavePlaylist").classList.remove("hide"),e.querySelector(".volumecontrol").classList.add("hide"),f.Z.mobile&&e.querySelector(".playlistSectionButton").classList.remove("playlistSectionButtonTransparent")):(e.querySelector(".playlist").classList.add("hide"),e.querySelector(".btnSavePlaylist").classList.add("hide"),(T||w)&&e.querySelector(".volumecontrol").classList.remove("hide"),f.Z.mobile&&e.querySelector(".playlistSectionButton").classList.add("playlistSectionButtonTransparent"))}))}(t),t.querySelector(".sendMessageForm").addEventListener("submit",V),t.querySelector(".typeTextForm").addEventListener("submit",j),d.Z.on(c.O,"playerchange",H),f.Z.tv){var l=t.querySelector(".nowPlayingPositionSlider");l.classList.add("focusable"),l.enableKeyboardDragging()}}(0,Q=t)},Y.onShow=function(){D(Q,c.O.getCurrentPlayer())},Y.destroy=function(){B(),d.Z.off(c.O,"playerchange",H),G=null}}var L=n(71487);function A(e){var t=new k;t.init(e,e.querySelector(".remoteControlContent")),e.addEventListener("viewshow",(function(){L.Z.setTransparentMenu(!0),t&&t.onShow()})),e.addEventListener("viewbeforehide",(function(){L.Z.setTransparentMenu(!1),t&&t.destroy()}))}n(38228)},87796:function(e,t,n){n.d(t,{J:function(){return i}}),n(63238),n(61418);var a=n(57366);function r(e){var t,n=document.createElement("textarea");if(n.value=e,document.body.appendChild(n),n.focus(),a.Z.iOS&&a.Z.iOSVersion<13.4){var r=document.createRange();r.selectNodeContents(n);var i=window.getSelection();i.removeAllRanges(),i.addRange(r),n.setSelectionRange(0,999999)}else n.select();try{t=document.execCommand("copy")?Promise.resolve():Promise.reject()}catch(e){t=Promise.reject()}return document.body.removeChild(n),t}function i(e){return void 0===navigator.clipboard?r(e):navigator.clipboard.writeText(e).catch((function(){return r(e)}))}}}]);