"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6728],{38903:function(t,e,n){n.r(e),n(72410),n(15610),n(52077),n(25901),n(92189),n(91047),n(5769),n(98010),n(63238),n(23938),n(69217),n(61013),n(61418),n(17460),n(14078),n(95623),n(61514);var a=n(28540),i=n(71487),r=n(72365),s=n(94994),l=n(61570),o=(n(38228),n(60635)),c=n(3137);function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function d(t,e){ApiClient.getJSON(ApiClient.getUrl("web/configurationpages")+"?pageType=PluginConfiguration").then((function(n){!function(t,e,n){var i=(e=e.sort((function(t,e){return t.Name>e.Name?1:-1}))).map((function(t){return function(t,e){var n=e.filter((function(e){return e.PluginId==t.Id}))[0],a=n?o.ZP.getPluginUrl(n.Name):null,i="";if(i+="<div data-id='".concat(t.Id,"' data-version='").concat(t.Version,"' data-name='").concat(t.Name,"' data-removable='").concat(t.CanUninstall,"' data-status='").concat(t.Status,"' class='card backdropCard'>"),i+='<div class="cardBox visualCardBox">',i+='<div class="cardScalable">',i+='<div class="cardPadder cardPadder-backdrop"></div>',i+='<div class="cardContent">',i+=a?'<a class="cardImageContainer" is="emby-linkbutton" style="margin:0;padding:0" href="'.concat(a,'">'):'<div class="cardImageContainer noConfigPluginCard noHoverEffect emby-button" style="margin:0;padding:0">',t.HasImage){var r=ApiClient.getUrl("/Plugins/".concat(t.Id,"/").concat(t.Version,"/Image"));i+='<img src="'.concat(r,'" style="width:100%" />')}else i+='<div class="cardImage flex align-items-center justify-content-center '.concat(l.getDefaultBackgroundClass(),'">'),i+='<span class="cardImageIcon material-icons extension" aria-hidden="true"></span>',i+="</div>";return i+=a?"</a>":"</div>",i+="</div>",i+="</div>",i+='<div class="cardFooter">',(n||t.CanUninstall)&&(s.ZP.getIsRTL()?i+='<div style="text-align:left; float:left;padding-top:5px;">':i+='<div style="text-align:right; float:right;padding-top:5px;">',i+='<button type="button" is="paper-icon-button-light" class="btnCardMenu autoSize"><span class="material-icons more_vert" aria-hidden="true"></span></button>',i+="</div>"),i+='<div class="cardText">',i+="".concat(t.Name,"<span class='cardText cardText-secondary'>").concat(t.Version,"</span>"),i+="</div>",i+='<div class="cardText">'.concat(s.ZP.translate("LabelStatus")," ").concat(t.Status,"</div>"),i+="</div>",(i+="</div>")+"</div>"}(t,n)})).join(""),r=t.querySelector(".installedPlugins");r.removeEventListener("click",p),r.addEventListener("click",p),e.length?(r.classList.add("itemsContainer"),r.classList.add("vertical-wrap")):(i+='<div class="centerMessage">',i+="<h1>"+s.ZP.translate("MessageNoPluginsInstalled")+"</h1>",i+='<p><a is="emby-linkbutton" class="button-link" href="#/availableplugins.html">',i+=s.ZP.translate("MessageBrowsePluginCatalog"),i+="</a></p>",i+="</div>");var c=t.querySelector("#txtSearchPlugins");c&&c.addEventListener("input",(function(){return function(t,e){var n,a=e.value.toLowerCase(),i=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,r=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw r}}}}(t.querySelectorAll(".card"));try{for(i.s();!(n=i.n()).done;){var r=n.value;a&&""!=a&&!r.textContent.toLowerCase().includes(a)?r.style.display="none":r.style.display="unset"}}catch(t){i.e(t)}finally{i.f()}}(t,c)})),r.innerHTML=i,a.ZP.hide()}(t,e,n)}))}function g(t){a.ZP.show(),ApiClient.getInstalledPlugins().then((function(e){d(t,e)}))}function f(){return[{href:"#/installedplugins.html",name:s.ZP.translate("TabMyPlugins")},{href:"#/availableplugins.html",name:s.ZP.translate("TabCatalog")},{href:"#/repositories.html",name:s.ZP.translate("TabRepositories")}]}function p(t){if(r.ZP.parentWithClass(t.target,"noConfigPluginCard"))o.ZP.alert({message:s.ZP.translate("MessageNoPluginConfiguration")});else if(r.ZP.parentWithClass(t.target,"connectModePluginCard"))o.ZP.alert({message:s.ZP.translate("MessagePluginConfigurationRequiresLocalAccess")});else{var e=r.ZP.parentWithClass(t.target,"btnCardMenu");e&&(i=r.ZP.parentWithClass(e,"page"),l=e,u=r.ZP.parentWithClass(l,"card"),d=u.getAttribute("data-id"),f=u.getAttribute("data-name"),p=u.getAttribute("data-removable"),v=u.querySelector(".cardImageContainer").getAttribute("href"),h=u.getAttribute("data-status"),P=u.getAttribute("data-version"),b=[],v&&b.push({name:s.ZP.translate("Settings"),id:"open",icon:"mode_edit"}),"true"===p&&("Disabled"===h&&b.push({name:s.ZP.translate("EnablePlugin"),id:"enable",icon:"check_circle_outline"}),"Active"===h&&b.push({name:s.ZP.translate("DisablePlugin"),id:"disable",icon:"do_not_disturb"}),b.push({name:s.ZP.translate("ButtonUninstall"),id:"delete",icon:"delete"})),Promise.resolve().then(n.bind(n,12801)).then((function(t){t.show({items:b,positionTo:l,callback:function(t){switch(t){case"open":o.ZP.navigate(v);break;case"delete":!function(t,e,n,i){var r=s.ZP.translate("UninstallPluginConfirmation",i);(0,c.Z)({title:s.ZP.translate("HeaderUninstallPlugin"),text:r,primary:"delete",confirmText:s.ZP.translate("HeaderUninstallPlugin")}).then((function(){a.ZP.show(),ApiClient.uninstallPluginByVersion(e,n).then((function(){g(t)}))}))}(i,d,P,f);break;case"enable":!function(t,e,n){a.ZP.show(),ApiClient.enablePlugin(e,n).then((function(){g(t)}))}(i,d,P);break;case"disable":!function(t,e,n){a.ZP.show(),ApiClient.disablePlugin(e,n).then((function(){g(t)}))}(i,d,P)}}})})))}var i,l,u,d,f,p,v,h,P,b}(0,o.Xz)("pageshow","pluginsPage",(function(){i.Z.setTabs("plugins",0,f),g(this)})),window.PluginsPage={renderPlugins:d}}}]);