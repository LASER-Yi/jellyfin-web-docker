(self.webpackChunk=self.webpackChunk||[]).push([[88788],{17240:function(e,t,n){"use strict";n.d(t,{A:function(){return a}}),n(63696);var r=n(91785),i=n(62540);function a(e){var t=e.styles,n=e.defaultTheme,a=void 0===n?{}:n,o="function"==typeof t?function(e){return t(null==(n=e)||0===Object.keys(n).length?a:e);var n}:t;return(0,i.jsx)(r.mL,{styles:o})}},40362:function(e,t,n){"use strict";var r=n(56441);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},62688:function(e,t,n){e.exports=n(40362)()},56441:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},20446:function(e,t,n){"use strict";n.d(t,{UI:function(){return a}});var r="NOT_FOUND",i=function(e,t){return e===t};function a(e,t){var n,a,o="object"==typeof t?t:{equalityCheck:t},l=o.equalityCheck,u=void 0===l?i:l,c=o.maxSize,s=void 0===c?1:c,f=o.resultEqualityCheck,d=function(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}}(u),p=1===s?(n=d,{get:function(e){return a&&n(a.key,e)?a.value:r},put:function(e,t){a={key:e,value:t}},getEntries:function(){return a?[a]:[]},clear:function(){a=void 0}}):function(e,t){var n=[];function i(e){var i=n.findIndex((function(n){return t(e,n.key)}));if(i>-1){var a=n[i];return i>0&&(n.splice(i,1),n.unshift(a)),a.value}return r}return{get:i,put:function(t,a){i(t)===r&&(n.unshift({key:t,value:a}),n.length>e&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(s,d);function v(){var t=p.get(arguments);if(t===r){if(t=e.apply(null,arguments),f){var n=p.getEntries().find((function(e){return f(e.value,t)}));n&&(t=n.value)}p.put(arguments,t)}return t}return v.clearCache=function(){return p.clear()},v}},24885:function(e,t,n){"use strict";function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a,o=0,l={memoizeOptions:void 0},u=r.pop();if("object"==typeof u&&(l=u,u=r.pop()),"function"!=typeof u)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof u+"]");var c=l.memoizeOptions,s=void 0===c?n:c,f=Array.isArray(s)?s:[s],d=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}(r),p=e.apply(void 0,[function(){return o++,u.apply(null,arguments)}].concat(f)),v=e((function(){for(var e=[],t=d.length,n=0;n<t;n++)e.push(d[n].apply(null,arguments));return a=p.apply(null,e)}));return Object.assign(v,{resultFunc:u,memoizedResultFunc:p,dependencies:d,lastResult:function(){return a},recomputations:function(){return o},resetRecomputations:function(){return o=0}}),v}}n.d(t,{Mz:function(){return i}});var i=r(n(20446).UI)},94209:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return F}});var r,i=n(62540),a=n(63696),o=n(55099),l=n(7758),u=n(46999),c=n(5271),s=n(34907),f=n(19044),d=n(99502),p=n(99851),v=n(87282),y=n(9055),h=n(7397),m=n(92342),b=n(14847),g=n(98320),w=n(5898),x=n(67202),A=n(10104),j=n(23392),O=function(e){var t,n=e.level;switch(n){case A.$.Information:t="info";break;case A.$.Warning:t="warning";break;case A.$.Error:case A.$.Critical:t="error"}var r=w.Ay.translate("LogLevel.".concat(n));return(0,i.jsx)(j.A,{size:"small",color:t,label:r,title:r})},S=n(10789),k=n(36161),I=n(20541),C=function(e){var t=e.Overview,n=e.ShortOverview,r=null!=n?n:t,o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}((0,a.useState)(!1),2),l=o[0],u=o[1],f=(0,a.useCallback)((function(){u(!1)}),[]),d=(0,a.useCallback)((function(){u(!0)}),[]);return r?(0,i.jsxs)(c.A,{sx:{display:"flex",width:"100%",alignItems:"center"},children:[(0,i.jsx)(c.A,{sx:{flexGrow:1,overflow:"hidden",textOverflow:"ellipsis"},component:"div",title:r,children:r}),n&&t&&(0,i.jsx)(k.x,{onClickAway:f,children:(0,i.jsx)(I.A,{title:t,placement:"top",arrow:!0,onClose:f,open:l,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,children:(0,i.jsx)(s.A,{onClick:d,children:(0,i.jsx)(S.A,{})})})})]}):null},L=n(70578),T=function(){return T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},T.apply(this,arguments)},E=function(e){var t=e.to,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["to"]);return(0,i.jsx)(y.N_,{to:t,children:(0,i.jsx)(L.Z,T({},n))})},U=function(){return U=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},U.apply(this,arguments)},N=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}u((r=r.apply(e,t||[])).next())}))},P=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&l[0]?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){o.label=l[1];break}if(6===l[0]&&o.label<i[1]){o.label=i[1],i=l;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(l);break}i[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],r=0}finally{n=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}},z=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},_=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},R="useractivity";!function(e){e[e.All=0]="All",e[e.User=1]="User",e[e.System=2]="System"}(r||(r={}));var D=function(e){return null===e?r.All:(0,x.G)(e)?r.User:r.System},G=function(e){var t;return null!==(t=e.Id)&&void 0!==t?t:-1},F=function(){var e=(0,b.gf)().api,t=z((0,y.ok)(),2),n=t[0],x=t[1],A=z((0,a.useState)(D(n.get(R))),2),j=A[0],S=A[1],k=z((0,a.useState)(!0),2),I=k[0],L=k[1],T=z((0,a.useState)({page:0,pageSize:25}),2),F=T[0],M=T[1],q=z((0,a.useState)(0),2),H=q[0],W=q[1],$=z((0,a.useState)([]),2),Y=$[0],B=$[1],J=z((0,a.useState)({}),2),V=J[0],Z=J[1],K=j!==r.System?[{field:"User",headerName:w.Ay.translate("LabelUser"),width:60,valueGetter:function(e,t){var n;return null===(n=V[t.UserId])||void 0===n?void 0:n.Name},renderCell:function(e){var t,n,r=e.row;return(0,i.jsx)(s.A,{size:"large",color:"inherit",sx:{padding:0},title:null!==(n=null===(t=V[r.UserId])||void 0===t?void 0:t.Name)&&void 0!==n?n:void 0,component:y.N_,to:"/dashboard/users/profile?userId=".concat(r.UserId),children:(0,i.jsx)(m.A,{user:V[r.UserId]})})}}]:[],Q=_(_([{field:"Date",headerName:w.Ay.translate("LabelDate"),width:90,type:"date",valueGetter:function(e){return(0,g.mk)(e)},valueFormatter:function(e){return(0,g.hJ)(e)}},{field:"Time",headerName:w.Ay.translate("LabelTime"),width:100,type:"dateTime",valueGetter:function(e,t){return(0,g.mk)(t.Date)},valueFormatter:function(e){return(0,g.kY)(e)}},{field:"Severity",headerName:w.Ay.translate("LabelLevel"),width:110,renderCell:function(e){var t=e.value;return t?(0,i.jsx)(O,{level:t}):void 0}}],z(K),!1),[{field:"Name",headerName:w.Ay.translate("LabelName"),width:300},{field:"Overview",headerName:w.Ay.translate("LabelOverview"),width:200,valueGetter:function(e,t){var n;return null!==(n=t.ShortOverview)&&void 0!==n?n:t.Overview},renderCell:function(e){var t=e.row;return(0,i.jsx)(C,U({},t))}},{field:"Type",headerName:w.Ay.translate("LabelType"),width:180},{field:"actions",type:"actions",width:50,getActions:function(e){var t=e.row,n=[];return t.ItemId&&n.push((0,i.jsx)(E,{size:"large",icon:(0,i.jsx)(u.A,{}),label:w.Ay.translate("LabelMediaDetails"),title:w.Ay.translate("LabelMediaDetails"),to:"/details?id=".concat(t.ItemId)})),n}}],!1),X=(0,a.useCallback)((function(e,t){null!==t&&S(t)}),[]);return(0,a.useEffect)((function(){e&&N(void 0,void 0,void 0,(function(){var t,n;return P(this,(function(r){switch(r.label){case 0:return[4,(0,l.q)(e).getUsers()];case 1:return t=r.sent().data,n={},t.forEach((function(e){e.Id&&(n[e.Id]=e)})),Z(n),[2]}}))})).catch((function(e){console.error("[activity] failed to fetch users",e)}))}),[e]),(0,a.useEffect)((function(){e&&(L(!0),N(void 0,void 0,void 0,(function(){var t,n,i,a;return P(this,(function(l){switch(l.label){case 0:return t={startIndex:F.page*F.pageSize,limit:F.pageSize},j!==r.All&&(t.hasUserId=j===r.User),[4,(0,o.A)(e).getLogEntries(t)];case 1:return n=l.sent().data,W(null!==(i=n.TotalRecordCount)&&void 0!==i?i:0),B(null!==(a=n.Items)&&void 0!==a?a:[]),L(!1),[2]}}))})).catch((function(e){console.error("[activity] failed to fetch activity log entries",e)})))}),[j,e,F]),(0,a.useEffect)((function(){D(n.get(R))!==j&&(j===r.All?n.delete(R):n.set(R,"".concat(j===r.User)),x(n))}),[j,n,x]),(0,i.jsx)(h.A,{id:"serverActivityPage",title:w.Ay.translate("HeaderActivity"),className:"mainAnimatedPage type-interior",children:(0,i.jsxs)(c.A,{className:"content-primary",sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,i.jsxs)(c.A,{sx:{display:"flex",alignItems:"baseline",marginY:2},children:[(0,i.jsx)(c.A,{sx:{flexGrow:1},children:(0,i.jsx)(p.A,{variant:"h2",children:w.Ay.translate("HeaderActivity")})}),(0,i.jsxs)(d.A,{value:j,onChange:X,exclusive:!0,children:[(0,i.jsx)(f.A,{value:r.All,children:w.Ay.translate("All")}),(0,i.jsx)(f.A,{value:r.User,children:w.Ay.translate("LabelUser")}),(0,i.jsx)(f.A,{value:r.System,children:w.Ay.translate("LabelSystem")})]})]}),(0,i.jsx)(v.z,{columns:Q,rows:Y,pageSizeOptions:[10,25,50,100],paginationMode:"server",paginationModel:F,onPaginationModelChange:M,rowCount:H,getRowId:G,loading:I})]})})}},29520:function(e,t,n){"use strict";function r(e){if(null==e)throw new TypeError("Cannot destructure "+e)}n.d(t,{A:function(){return r}})}}]);