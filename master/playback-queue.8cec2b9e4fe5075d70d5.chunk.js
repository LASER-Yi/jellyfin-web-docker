"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[66884,77574,96084],{1177:function(e,t,n){n(84734),n(44962),n(78557),n(96054),n(90076),n(83994),n(82367),n(69177);var i=n(65210),a=n(22832),r=n(38490),l=n(39738),s=n(76542),o=n(46782),c=n(34789),u=n(36300),d=n(8566),f=n(9164),y=n(67430),m=n(10736),h=n(44797),v=Object.create(HTMLDivElement.prototype);function g(e){var t=this,n=t.multiSelect;!1!==(null==n?void 0:n.onContainerClick.call(t,e))&&a.Ay.onClick.call(t,e)}function p(e){return e.preventDefault(),e.stopPropagation(),!1}function b(e){var t=e.target,n=u.Ay.parentWithAttribute(t,"data-id");if(null!=n&&n.getAttribute("data-serverid"))return r.default.handleCommand("menu",{sourceElement:n}),e.preventDefault(),e.stopPropagation(),!1}function S(e,t,i){var a=this;Promise.all([n.e(45642),n.e(24468),n.e(66884)]).then(n.bind(n,24468)).then((function(e){e.onUserDataChanged(i,a)}));var r=A(a);-1===r.indexOf("markfavorite")&&-1===r.indexOf("markplayed")||a.notifyRefreshNeeded()}function A(e){var t=e.getAttribute("data-monitor");return t?t.split(","):[]}function I(e,t,i){var a=this;if(-1===A(a).indexOf("timers")){var r=i.ProgramId,l=i.Id;Promise.all([n.e(45642),n.e(24468),n.e(66884)]).then(n.bind(n,24468)).then((function(e){e.onTimerCreated(r,l,a)}))}else a.notifyRefreshNeeded()}function L(){-1!==A(this).indexOf("seriestimers")&&this.notifyRefreshNeeded()}function T(e,t,i){var a=this;-1===A(a).indexOf("timers")?Promise.all([n.e(45642),n.e(24468),n.e(66884)]).then(n.bind(n,24468)).then((function(e){e.onTimerCancelled(i.Id,a)})):a.notifyRefreshNeeded()}function P(e,t,i){var a=this;-1===A(a).indexOf("seriestimers")?Promise.all([n.e(45642),n.e(24468),n.e(66884)]).then(n.bind(n,24468)).then((function(e){e.onSeriesTimerCancelled(i.Id,a)})):a.notifyRefreshNeeded()}function q(e,t,n){var i=this,a=A(i);if(-1===a.indexOf("seriestimers")&&-1===a.indexOf("timers")){var r=n.ItemsAdded||[],l=n.ItemsRemoved||[];if(r.length||l.length){var s=i.getAttribute("data-parentid");if(s){var o=n.FoldersAddedTo||[],c=n.FoldersRemovedFrom||[],u=n.CollectionFolders||[];if(-1===o.indexOf(s)&&-1===c.indexOf(s)&&-1===u.indexOf(s))return}i.notifyRefreshNeeded()}}}function k(e,t){var n,i=this,a=t.state,r=A(i);if(a.NowPlayingItem&&"Video"===a.NowPlayingItem.MediaType){if(-1!==r.indexOf("videoplayback"))return void i.notifyRefreshNeeded(!0)}else if("Audio"===(null===(n=a.NowPlayingItem)||void 0===n?void 0:n.MediaType)&&-1!==r.indexOf("audioplayback"))return void i.notifyRefreshNeeded(!0)}function x(e,t,n,i){var a=n.bind(e);i=i||m.default,h.A.on(i,t,a),e["event_"+t]=a}function w(e,t,n){var i=e["event_"+t];i&&(n=n||m.default,h.A.off(n,t,i),e["event_"+t]=null)}function C(e,t){e.refreshInterval&&(clearInterval(e.refreshInterval),e.refreshInterval=null,t||(e.refreshIntervalEndTime=null))}function M(e,t){C(e),t||(t=parseInt(e.getAttribute("data-refreshinterval")||"0",10)),t&&(e.refreshInterval=setInterval(e.notifyRefreshNeeded.bind(e),t),e.refreshIntervalEndTime=(new Date).getTime()+t)}function E(e){var t=e.Items||e,n=this.parentContainer;n&&(t.length?n.classList.remove("hide"):n.classList.add("hide"));var i,a,r=document.activeElement;this.contains(r)&&(a=!0,i=r.getAttribute("data-id")),this.innerHTML=this.getItemsHtml(t),s.default.lazyChildren(this),a&&function(e,t){if(t){var n=e.querySelector('[data-id="'+t+'"]');if(n)try{return void f.A.focus(n)}catch(e){console.error(e)}}f.A.autoFocus(e)}(this,i),M(this),this.afterRefresh&&this.afterRefresh(e)}v.enableMultiSelect=function(e){var t=this.multiSelect;if(e){if(!t){var i=this;n.e(35308).then(n.bind(n,35308)).then((function(e){var t=e.default;i.multiSelect=new t({container:i,bindOnClick:!1})}))}}else t&&(t.destroy(),this.multiSelect=null)},v.enableDragReordering=function(e){var t=this.sortable;if(e){if(!t){var n=this;n.sortable=new i.Ay(n,{draggable:".listItem",handle:".listViewDragHandle",onEnd:function(e){return function(e,t){var n=e.item,i=e.newIndex,a=n.getAttribute("data-playlistitemid"),r=n.getAttribute("data-playlistid");if(r){var l=n.getAttribute("data-serverid"),s=y.tF.getApiClient(l);d.Ay.show(),s.ajax({url:s.getUrl("Playlists/"+r+"/Items/"+a+"/Move/"+i),type:"POST"}).then((function(){d.Ay.hide()}),(function(){d.Ay.hide(),t.refreshItems()}))}else{var o=e.oldIndex;n.dispatchEvent(new CustomEvent("itemdrop",{detail:{oldIndex:o,newIndex:i,playlistItemId:a},bubbles:!0,cancelable:!1}))}}(e,n)}})}}else t&&(t.destroy(),this.sortable=null)},v.createdCallback=function(){this.classList.add("itemsContainer")},v.attachedCallback=function(){this.addEventListener("click",g),c.A.touch?this.addEventListener("contextmenu",p):"false"!==this.getAttribute("data-contextmenu")&&this.addEventListener("contextmenu",b),(o.A.desktop||o.A.mobile&&"false"!==this.getAttribute("data-multiselect"))&&this.enableMultiSelect(!0),o.A.tv&&this.classList.add("itemsContainer-tv"),a.Ay.on(this,{click:!1}),x(this,"UserDataChanged",S),x(this,"TimerCreated",I),x(this,"SeriesTimerCreated",L),x(this,"TimerCancelled",T),x(this,"SeriesTimerCancelled",P),x(this,"LibraryChanged",q),x(this,"playbackstop",k,l.f),"true"===this.getAttribute("data-dragreorder")&&this.enableDragReordering(!0)},v.detachedCallback=function(){C(this),this.enableMultiSelect(!1),this.enableDragReordering(!1),this.removeEventListener("click",g),this.removeEventListener("contextmenu",b),this.removeEventListener("contextmenu",p),a.Ay.off(this,{click:!1}),w(this,"UserDataChanged"),w(this,"TimerCreated"),w(this,"SeriesTimerCreated"),w(this,"TimerCancelled"),w(this,"SeriesTimerCancelled"),w(this,"LibraryChanged"),w(this,"playbackstop",l.f),this.fetchData=null,this.getItemsHtml=null,this.parentContainer=null},v.pause=function(){C(this,!0),this.paused=!0},v.resume=function(e){this.paused=!1;var t=this.refreshIntervalEndTime;if(t){var n=t-(new Date).getTime();n>0&&!this.needsRefresh?M(this,n):(this.needsRefresh=!0,this.refreshIntervalEndTime=null)}return this.needsRefresh||null!=e&&e.refresh?this.refreshItems():Promise.resolve()},v.refreshItems=function(){return this.fetchData?this.paused?(this.needsRefresh=!0,Promise.resolve()):(this.needsRefresh=!1,this.fetchData().then(E.bind(this))):Promise.resolve()},v.notifyRefreshNeeded=function(e){if(this.paused)this.needsRefresh=!0;else{var t=this.refreshTimeout;t&&clearTimeout(t),!0===e?this.refreshItems():this.refreshTimeout=setTimeout(this.refreshItems.bind(this),1e4)}},document.registerElement("emby-itemscontainer",{prototype:v,extends:"div"})},81077:function(e,t,n){n(69177),n(10353);var i=Object.create(HTMLDivElement.prototype);function a(){var e=this,t=e.parentNode.querySelector(".collapseContent");t.expanded?(t.expanded=!1,function(e,t){requestAnimationFrame((function(){t.style.height=t.offsetHeight+"px",t.offsetHeight,t.classList.remove("expanded"),t.style.height="0",setTimeout((function(){t.classList.contains("expanded")?t.classList.remove("hide"):t.classList.add("hide")}),300),e.querySelector(".material-icons").classList.remove("emby-collapse-expandIconExpanded")}))}(e,t)):(t.expanded=!0,function(e,t){requestAnimationFrame((function(){t.classList.remove("hide"),t.classList.add("expanded"),t.style.height="auto";var n=t.offsetHeight+"px";t.style.height="0",t.offsetHeight,t.style.height=n,setTimeout((function(){t.classList.contains("expanded")?t.classList.remove("hide"):t.classList.add("hide"),t.style.height="auto"}),300),e.querySelector(".material-icons").classList.add("emby-collapse-expandIconExpanded")}))}(e,t))}i.attachedCallback=function(){if(!this.classList.contains("emby-collapse")){this.classList.add("emby-collapse");var e=this.querySelector(".collapseContent");e&&e.classList.add("hide");var t=this.getAttribute("title"),n='<button is="emby-button" type="button" on-click="toggleExpand" id="expandButton" class="emby-collapsible-button iconRight"><h3 class="emby-collapsible-title" title="'+t+'">'+t+'</h3><span class="material-icons emby-collapse-expandIcon expand_more" aria-hidden="true"></span></button>';this.insertAdjacentHTML("afterbegin",n);var i=this.querySelector(".emby-collapsible-button");i.addEventListener("click",a),"true"===this.getAttribute("data-expanded")&&a.call(i)}},document.registerElement("emby-collapse",{prototype:i,extends:"div"})},84688:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}}),n(29305),n(32733),n(84701),n(24776),n(14382),n(69892),n(76281),n(84734),n(44962),n(86584),n(89336),n(77575),n(78557),n(67593),n(96054),n(90076),n(95021),n(73687),n(99425),n(83994),n(82367);var i=n(22696),a=n.n(i),r=n(31524),l=n(50921),s=n(97339),o=n(33077),c=n(98320),u=n(89166),d=n(6940),f=n(76542),y=n(39738),m=n(44797),h=n(22622),v=n(5898),g=n(67430),p=n(46782),b=n(82885),S=n(55802),A=n(71866),I=n(70267),L=n(36645);function T(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,r=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw r}}}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}n(10353),n(15453),n(1177),n(15605),n(57949);var q=!0,k=!0;function x(e,t){t?e.classList.remove("hide"):e.classList.add("hide")}function w(){function e(e,n,s){$=s;var c=s.NowPlayingItem,d=y.f.getPlayerInfo().supportedCommands;G=d;var f=s.PlayState||{},m=d.includes("DisplayMessage")||d.includes("SendString")||d.includes("Select");if(x(n.querySelector(".btnToggleFullscreen"),c&&"Video"==c.MediaType&&d.includes("ToggleFullscreen")),function(e,t){var n=G;x(t.querySelector(".btnAudioTracks"),y.f.audioTracks(e).length>1&&-1!=n.indexOf("SetAudioStreamIndex"))}(e,n),function(e,t){var n=G;x(t.querySelector(".btnSubtitles"),y.f.subtitleTracks(e).length&&-1!=n.indexOf("SetSubtitleStreamIndex"))}(e,n),d.includes("DisplayMessage")&&!W.isLocalPlayer?n.querySelector(".sendMessageSection").classList.remove("hide"):n.querySelector(".sendMessageSection").classList.add("hide"),d.includes("SendString")&&!W.isLocalPlayer?n.querySelector(".sendTextSection").classList.remove("hide"):n.querySelector(".sendTextSection").classList.add("hide"),d.includes("Select")&&!W.isLocalPlayer?n.querySelector(".navigationSection").classList.remove("hide"):n.querySelector(".navigationSection").classList.add("hide"),m&&!W.isLocalPlayer?n.querySelector(".remoteControlSection").classList.remove("hide"):n.querySelector(".remoteControlSection").classList.add("hide"),x(n.querySelector(".btnLyrics"),"Audio"===(null==c?void 0:c.Type)&&!p.A.mobile),x(n.querySelector(".btnStop"),null!=c),x(n.querySelector(".btnNextTrack"),null!=c),x(n.querySelector(".btnPreviousTrack"),null!=c),p.A.mobile){var h=y.f.isPlayingVideo()&&null!==c,v=!y.f.isPlayingVideo()&&null!==c,A=v&&"AudioBook"==c.Type;x(n.querySelector(".btnRepeat"),v&&!A),x(n.querySelector(".btnShuffleQueue"),v&&!A),x(n.querySelector(".btnRewind"),h||A),x(n.querySelector(".btnFastForward"),h||A),x(n.querySelector(".nowPlayingSecondaryButtons .btnShuffleQueue"),h),x(n.querySelector(".nowPlayingSecondaryButtons .btnRepeat"),h)}else x(n.querySelector(".btnRewind"),null!=c),x(n.querySelector(".btnFastForward"),null!=c);var I=n.querySelector(".nowPlayingPositionSlider");if(I&&c&&c.RunTimeTicks&&I.setKeyboardSteps(1e6*b.skipBackLength()/c.RunTimeTicks,1e6*b.skipForwardLength()/c.RunTimeTicks),I&&!I.dragging){I.disabled=!f.CanSeek;var q=s.MediaSource&&null==s.MediaSource.RunTimeTicks;I.setIsClear(q)}P(f.IsPaused,null!=c),w(f.PositionTicks,c?c.RunTimeTicks:null),i(n,f.IsMuted,f.VolumeLevel),c&&"Video"==c.MediaType?n.classList.remove("hideVideoButtons"):n.classList.add("hideVideoButtons"),t(y.f.getRepeatMode()),R(!1),function(e,t,n){var i=t.NowPlayingItem,s=i?(0,l.Y)(i).map(a()).join(" - "):"";if(i){var c=i.ServerId||n;if("AudioBook"==i.Type||"Audio"==i.Type||"Audio"==i.MediaStreams[0].Type){var d="",f="";if(null!=i.Artists)if(null!=i.ArtistItems){var y,m=T(i.ArtistItems);try{for(m.s();!(y=m.n()).done;){var h=y.value;d+='<a class="button-link" is="emby-linkbutton" href="#/details?id='.concat(h.Id,"&serverId=").concat(c,'">').concat(a()(h.Name),"</a>"),h!==i.ArtistItems.slice(-1)[0]&&(d+=", ")}}catch(e){m.e(e)}finally{m.f()}}else if(i.Artists){var v,b=T(i.Artists);try{for(b.s();!(v=b.n()).done;){var A=v.value;d+="<a>".concat(a()(A),"</a>"),A!==i.Artists.slice(-1)[0]&&(d+=", ")}}catch(e){b.e(e)}finally{b.f()}}null!=i.Album&&(f='<a class="button-link" is="emby-linkbutton" href="#/details?id='+i.AlbumId+"&serverId=".concat(c,'">')+a()(i.Album)+"</a>"),e.querySelector(".nowPlayingAlbum").innerHTML=f,e.querySelector(".nowPlayingArtist").innerHTML=d,e.querySelector(".nowPlayingSongName").innerText=i.Name}else if("Episode"==i.Type){if(null!=i.SeasonName){var I=i.SeasonName;e.querySelector(".nowPlayingSeason").innerHTML='<a class="button-link" is="emby-linkbutton" href="#/details?id='+i.SeasonId+"&serverId=".concat(c,'">').concat(a()(I),"</a>")}if(null!=i.SeriesName){var P=i.SeriesName;null!=i.SeriesId?e.querySelector(".nowPlayingSerie").innerHTML='<a class="button-link" is="emby-linkbutton" href="#/details?id='+i.SeriesId+"&serverId=".concat(c,'">').concat(a()(P),"</a>"):e.querySelector(".nowPlayingSerie").innerText=P}e.querySelector(".nowPlayingEpisode").innerText=i.Name}else e.querySelector(".nowPlayingPageTitle").innerHTML=s;s.length>0&&"Audio"!=i.Type&&"Episode"!=i.Type?e.querySelector(".nowPlayingPageTitle").classList.remove("hide"):e.querySelector(".nowPlayingPageTitle").classList.add("hide");var q=(0,r.V)(i,{maxHeight:300}),k=e.querySelector(".btnToggleContextMenu"),x=document.activeElement===k,w=k.cloneNode(!0);k.parentNode.replaceChild(w,k),k=e.querySelector(".btnToggleContextMenu"),x&&k.focus();var C={play:!1,queue:!1,stopPlayback:!0,clearQueue:!0,openAlbum:!1,positionTo:k},M=g.tF.getApiClient(i.ServerId);M.getItem(M.getCurrentUserId(),i.Id).then((function(e){M.getCurrentUser().then((function(t){k.addEventListener("click",(function(){S.default.show(Object.assign({item:e,user:t,isMobile:p.A.mobile},C)).catch((function(){}))}))}))})),function(e,t,n){var i=t.NowPlayingItem,a=e.querySelector(".nowPlayingPageImageContainer");n?(a.innerHTML='<img class="nowPlayingPageImage" src="'+n+'" />',e.querySelector(".nowPlayingPageImage").classList.toggle("nowPlayingPageImageAudio","Audio"===i.Type),e.querySelector(".nowPlayingPageImage").classList.toggle("nowPlayingPageImagePoster","Audio"!==i.Type)):a.innerHTML='<div class="nowPlayingPageImageContainerNoAlbum"><button data-action="'.concat(o.s.Link,'" class="cardImageContainer coveredImage ').concat((0,L.Qp)(i.Name),' cardContent cardContent-shadow itemAction"><span class="cardImageIcon material-icons album" aria-hidden="true"></span></button></div>')}(e,t,q),(0,u.C9)([i]),M.getItem(M.getCurrentUserId(),i.Id).then((function(t){var n=t.UserData||{},i=null==n.Likes?"":n.Likes;e.querySelector(".nowPlayingPageUserDataButtonsTitle").innerHTML='<button is="emby-ratingbutton" type="button" class="paper-icon-button-light" data-id="'+t.Id+'" data-serverid="'+t.ServerId+'" data-itemtype="'+t.Type+'" data-likes="'+i+'" data-isfavorite="'+n.IsFavorite+'"><span class="material-icons favorite" aria-hidden="true"></span></button>',e.querySelector(".nowPlayingPageUserDataButtons").innerHTML='<button is="emby-ratingbutton" type="button" class="paper-icon-button-light" data-id="'+t.Id+'" data-serverid="'+t.ServerId+'" data-itemtype="'+t.Type+'" data-likes="'+i+'" data-isfavorite="'+n.IsFavorite+'"><span class="material-icons favorite" aria-hidden="true"></span></button>'}))}else(0,u.gJ)(),e.querySelector(".nowPlayingPageUserDataButtons").innerHTML=""}(n,s)}function t(e){var t=J.querySelectorAll(".repeatToggleButton"),n='<span class="material-icons repeat" aria-hidden="true"></span>',i=!0;switch(e){case"RepeatAll":break;case"RepeatOne":n='<span class="material-icons repeat_one" aria-hidden="true"></span>';break;default:i=!1}var a,r=T(t);try{for(r.s();!(a=r.n()).done;){var l=a.value;l.classList.toggle("buttonActive",i),l.innerHTML=n}}catch(e){r.e(e)}finally{r.f()}}function i(e,t,n){var i=e,a=G;-1===a.indexOf("Mute")&&(q=!1),-1===a.indexOf("SetVolume")&&(k=!1),W.isLocalPlayer&&h.g.supports(s.Y.PhysicalVolumeControl)&&(q=!1,k=!1);var r=i.querySelector(".buttonMute"),l=r.querySelector(".material-icons");if(l.classList.remove("volume_off","volume_up"),t?(r.setAttribute("title",v.Ay.translate("Unmute")),l.classList.add("volume_off")):(r.setAttribute("title",v.Ay.translate("Mute")),l.classList.add("volume_up")),q||k){r.classList.toggle("hide",!q);var o=e.querySelector(".nowPlayingVolumeSlider"),c=e.querySelector(".nowPlayingVolumeSliderContainer");o&&(c.classList.toggle("hide",!k),o.dragging||(o.value=n||0))}else e.querySelector(".volumecontrol").classList.add("hide")}function P(e,t){var n=J,i=n.querySelector(".btnPlayPause"),a=i.querySelector(".material-icons");a.classList.remove("play_circle_filled","pause_circle_filled"),a.classList.add(e?"play_circle_filled":"pause_circle_filled");var r=n.querySelector(".playlistIndexIndicatorImage");r&&r.classList.toggle("playlistIndexIndicatorPausedImage",e),x(i,t)}function w(e,t){var n=J,i=n.querySelector(".nowPlayingPositionSlider");if(i&&!i.dragging)if(t){var a=e/t;a*=100,i.value=a}else i.value=0;n.querySelector(".positionTime").innerHTML=Number.isFinite(e)?c.Ay.getDisplayRunningTime(e):"--:--",n.querySelector(".runtime").innerHTML=Number.isFinite(t)?c.Ay.getDisplayRunningTime(t):"--:--"}function C(e){return y.f.getPlaylist(e)}function M(e,t){console.debug("remotecontrol event: "+e.type),O.call(this,e,t)}function E(){t(y.f.getRepeatMode())}function R(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=y.f.getQueueShuffleMode(this),i="buttonActive",a=T(J.querySelectorAll(".btnShuffleQueue"));try{for(a.s();!(e=a.n()).done;){var r=e.value;"Shuffle"===n?r.classList.add(i):r.classList.remove(i)}}catch(e){a.e(e)}finally{a.f()}t&&N()}function N(){var e,t;e=J,C(t=this).then((function(n){if(0!==n.length){var i="",a=!0;p.A.mobile&&(n.length>0?e.querySelector(".btnTogglePlaylist").classList.remove("hide"):e.querySelector(".btnTogglePlaylist").classList.add("hide"),a=!1),i+=d.A.getListViewHtml({items:n,smallIcon:!0,action:"setplaylistindex",enableUserDataButtons:a,rightButtons:[{icon:"remove_circle_outline",title:v.Ay.translate("ButtonRemove"),id:"remove"}],dragHandle:!0});var r=e.querySelector(".playlist"),l=r.querySelector("button:focus");if(r.innerHTML=i,null!==l){l=l.getAttribute("data-playlistitemid");var s=r.querySelector('button[data-playlistitemid="'.concat(l,'"]'));null!==s&&s.focus()}var o=y.f.getCurrentPlaylistItemId(t);if(o){var c=r.querySelector('.listItem[data-playlistItemId="'.concat(o,'"] .listItemImage'));c&&(c.classList.remove("lazy"),c.classList.add("playlistIndexIndicatorImage"),c.classList.toggle("playlistIndexIndicatorPausedImage",y.f.paused()))}f.default.lazyChildren(r)}}))}function D(e,t){var n=J;if(void 0!==t)for(var i=t.playlistItemIds,a=0,r=i.length;a<r;a++){var l=n.querySelector('.listItem[data-playlistItemId="'+i[a]+'"]');l&&l.parentNode.removeChild(l)}else N()}function H(t,n){console.debug("remotecontrol event: "+t.type),n.NextMediaType||(e(this,J,{}),I.appRouter.back())}function F(){P(this.paused(),!0)}function O(t,n){e(this,J,n),N()}function B(){var e=(new Date).getTime();e-X>=700&&(X=e,Z=y.f.duration(this),w(1e4*y.f.currentTime(this),Z))}function V(){i(J,this.isMuted(),this.getVolume())}function _(){var e=W;e&&(m.A.off(e,"playbackstart",M),m.A.off(e,"statechange",O),m.A.off(e,"repeatmodechange",E),m.A.off(e,"shufflequeuemodechange",R),m.A.off(e,"playlistitemremove",D),m.A.off(e,"playlistitemmove",N),m.A.off(e,"playlistitemadd",N),m.A.off(e,"playbackstop",H),m.A.off(e,"volumechange",V),m.A.off(e,"pause",F),m.A.off(e,"unpause",F),m.A.off(e,"timeupdate",B),W=null)}function j(e,t){if(_(),W=t,t){var n=y.f.getPlayerState(t);O.call(t,{type:"init"},n),m.A.on(t,"playbackstart",M),m.A.on(t,"statechange",O),m.A.on(t,"repeatmodechange",E),m.A.on(t,"shufflequeuemodechange",R),m.A.on(t,"playlistitemremove",D),m.A.on(t,"playlistitemmove",N),m.A.on(t,"playlistitemadd",N),m.A.on(t,"playbackstop",H),m.A.on(t,"volumechange",V),m.A.on(t,"pause",F),m.A.on(t,"unpause",F),m.A.on(t,"timeupdate",B);var i=y.f.getPlayerInfo().supportedCommands;G=i,function(e,t){for(var n=e.querySelectorAll(".btnCommand"),i=0,a=n.length;i<a;i++){var r=-1!==t.indexOf(n[i].getAttribute("data-command"));n[i].disabled=!r}}(e,i)}}function U(){W&&(this.classList.contains("repeatToggleButton")?function(){switch(y.f.getRepeatMode()){case"RepeatAll":y.f.setRepeatMode("RepeatOne");break;case"RepeatOne":y.f.setRepeatMode("RepeatNone");break;case"RepeatNone":y.f.setRepeatMode("RepeatAll")}}():y.f.sendCommand({Name:this.getAttribute("data-command")},W))}function Q(){Promise.all([n.e(45642),n.e(4330)]).then(n.bind(n,4330)).then((function(e){var t=e.default;C(W).then((function(e){return e.filter((function(e){return e.Id&&e.ServerId}))})).then((function(e){var n=e.length?e[0].ServerId:ApiClient.serverId();(new t).show({items:e.map((function(e){return e.Id})),serverId:n,enableAddToPlayQueue:!1,defaultValue:"new"}).catch((function(){}))}))})).catch((function(e){console.error("[savePlaylist] failed to load playlist editor",e)}))}function z(){j(J,y.f.getCurrentPlayer())}function K(e){var t=e.target;return y.f.sendCommand({Name:"DisplayMessage",Arguments:{Header:t.querySelector("#txtMessageTitle").value,Text:t.querySelector("#txtMessageText",t).value}},W),t.querySelector("input").value="",(0,A.A)(v.Ay.translate("MessageSent")),e.preventDefault(),e.stopPropagation(),!1}function Y(e){var t=e.target;return y.f.sendCommand({Name:"SendString",Arguments:{String:t.querySelector("#txtTypeText",t).value}},W),t.querySelector("input").value="",(0,A.A)(v.Ay.translate("TextSent")),e.preventDefault(),e.stopPropagation(),!1}var J,W,$,G=[],X=0,Z=0,ee=this;ee.init=function(e,t){!function(e,t){var i='<div class="volumecontrol flex align-items-center flex-wrap-wrap justify-content-center">';i+='<button is="paper-icon-button-light" class="buttonMute autoSize" title='.concat(v.Ay.translate("Mute"),'><span class="xlargePaperIconButton material-icons volume_up" aria-hidden="true"></span></button>'),i+='<div class="sliderContainer nowPlayingVolumeSliderContainer"><input is="emby-slider" type="range" step="1" min="0" max="100" value="0" class="nowPlayingVolumeSlider"/></div>',i+="</div>";var a=t.querySelector(".playlistSectionButton");if(p.A.mobile?(a.querySelector(".btnTogglePlaylist").insertAdjacentHTML("afterend",i),a.classList.add("playlistSectionButtonTransparent"),t.querySelector(".btnTogglePlaylist").classList.remove("hide"),t.querySelector(".playlistSectionButton").classList.remove("justify-content-center"),t.querySelector(".playlistSectionButton").classList.add("justify-content-space-between")):(t.querySelector(".nowPlayingSecondaryButtons").insertAdjacentHTML("beforeend",i),a.classList.remove("align-items-center","justify-content-center"),a.classList.add("align-items-right","justify-content-flex-end"),t.querySelector(".playlist").classList.remove("hide"),t.querySelector(".btnSavePlaylist").classList.remove("hide"),t.classList.add("padded-bottom")),function(e){for(var t=e.querySelectorAll(".btnCommand"),i=e.querySelector(".nowPlayingPositionSlider"),a=0,r=t.length;a<r;a++)t[a].addEventListener("click",U);e.querySelector(".btnToggleFullscreen").addEventListener("click",(function(){W&&y.f.toggleFullscreen(W)})),e.querySelector(".btnAudioTracks").addEventListener("click",(function(e){var t,i,a,r,l;W&&null!==(t=$)&&void 0!==t&&t.NowPlayingItem&&(i=W,a=e.target,r=y.f.getAudioStreamIndex(i),l=y.f.audioTracks(i).map((function(e){var t={name:e.DisplayTitle,id:e.Index};return e.Index==r&&(t.selected=!0),t})),Promise.resolve().then(n.bind(n,62882)).then((function(e){e.show({items:l,positionTo:a,callback:function(e){y.f.setAudioStreamIndex(parseInt(e,10),i)}})})))})),e.querySelector(".btnSubtitles").addEventListener("click",(function(e){var t,i,a,r,l;W&&null!==(t=$)&&void 0!==t&&t.NowPlayingItem&&(i=W,a=e.target,r=y.f.getSubtitleStreamIndex(i),(l=y.f.subtitleTracks(i).map((function(e){var t={name:e.DisplayTitle,id:e.Index};return e.Index==r&&(t.selected=!0),t}))).unshift({id:-1,name:v.Ay.translate("Off"),selected:null==r}),Promise.resolve().then(n.bind(n,62882)).then((function(e){e.show({items:l,positionTo:a,callback:function(e){y.f.setSubtitleStreamIndex(parseInt(e,10),i)}})})))})),e.querySelector(".btnStop").addEventListener("click",(function(){W&&y.f.stop(W)})),e.querySelector(".btnPlayPause").addEventListener("click",(function(){W&&y.f.playPause(W)})),e.querySelector(".btnNextTrack").addEventListener("click",(function(){W&&y.f.nextTrack(W)})),e.querySelector(".btnRewind").addEventListener("click",(function(){W&&y.f.rewind(W)})),e.querySelector(".btnFastForward").addEventListener("click",(function(){W&&y.f.fastForward(W)})),e.querySelector(".btnLyrics").addEventListener("click",(function(){I.appRouter.show("lyrics")}));var l,s=T(e.querySelectorAll(".btnShuffleQueue"));try{for(s.s();!(l=s.n()).done;)l.value.addEventListener("click",(function(){W&&y.f.toggleQueueShuffleMode(W)}))}catch(e){s.e(e)}finally{s.f()}e.querySelector(".btnPreviousTrack").addEventListener("click",(function(e){if(W){if(y.f.isPlayingAudio(W)){if(e.detail>1)return;if(y.f.currentTime(W)>=5e3||y.f.getCurrentPlaylistIndex(W)<=0)return y.f.seekPercent(0,W),void(i.value=0)}y.f.previousTrack(W)}})),e.querySelector(".btnPreviousTrack").addEventListener("dblclick",(function(){W&&y.f.previousTrack(W)})),i.addEventListener("change",(function(){var e=this.value;if(W){var t=parseFloat(e);y.f.seekPercent(t,W)}})),i.getBubbleText=function(e){if(null==$||!$.NowPlayingItem||!Z)return"--:--";var t=Z;return t/=100,t*=e,c.Ay.getDisplayRunningTime(t)},e.querySelector(".nowPlayingVolumeSlider").addEventListener("input",(function(e){y.f.setVolume(e.target.value,W)})),e.querySelector(".buttonMute").addEventListener("click",(function(){y.f.toggleMute(W)}));var o=e.querySelector(".playlist");o.addEventListener("action-remove",(function(e){y.f.removeFromPlaylist([e.detail.playlistItemId],W)})),o.addEventListener("itemdrop",(function(e){var t=e.detail.newIndex,n=e.detail.playlistItemId;y.f.movePlaylistItem(n,t,W)})),e.querySelector(".btnSavePlaylist").addEventListener("click",Q),e.querySelector(".btnTogglePlaylist").addEventListener("click",(function(){e.querySelector(".playlist").classList.contains("hide")?(e.querySelector(".playlist").classList.remove("hide"),e.querySelector(".btnSavePlaylist").classList.remove("hide"),e.querySelector(".volumecontrol").classList.add("hide"),p.A.mobile&&e.querySelector(".playlistSectionButton").classList.remove("playlistSectionButtonTransparent")):(e.querySelector(".playlist").classList.add("hide"),e.querySelector(".btnSavePlaylist").classList.add("hide"),(q||k)&&e.querySelector(".volumecontrol").classList.remove("hide"),p.A.mobile&&e.querySelector(".playlistSectionButton").classList.add("playlistSectionButtonTransparent"))}))}(t),t.querySelector(".sendMessageForm").addEventListener("submit",K),t.querySelector(".typeTextForm").addEventListener("submit",Y),m.A.on(y.f,"playerchange",z),p.A.tv){var r=t.querySelector(".nowPlayingPositionSlider");r.classList.add("focusable"),r.enableKeyboardDragging()}}(0,J=t)},ee.onShow=function(){j(J,y.f.getCurrentPlayer())},ee.destroy=function(){_(),m.A.off(y.f,"playerchange",z),$=null}}var C=n(73233);function M(e){var t,n=new w;function i(e){32===e.keyCode&&"BUTTON"!==e.target.tagName&&(y.f.playPause(t),e.preventDefault(),e.stopPropagation())}function a(){t&&(t=null)}n.init(e,e.querySelector(".remoteControlContent")),e.addEventListener("viewshow",(function(){var e;C.default.setTransparentMenu(!0),(e=y.f.getCurrentPlayer())!==t&&(a(),t=e),document.addEventListener("keydown",i),n&&n.onShow()})),e.addEventListener("viewbeforehide",(function(){C.default.setTransparentMenu(!1),document.removeEventListener("keydown",i),a(),n&&n.destroy()}))}n(81077),n(98959)}}]);