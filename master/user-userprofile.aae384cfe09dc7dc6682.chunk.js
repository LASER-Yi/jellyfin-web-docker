"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[66781,49213],{18412:function(e,t,r){r.r(t);var a=r(24246),n=r(86808),i=r(27378),l=r(60635),o=r(94994),s=r(71487),d=r(84881),c=r(3137),u=r(48606),m=r(42363),g=r(28540),f=r(56663),p=r(85951),y=r(6055),h=function(){return h=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},h.apply(this,arguments)};t.default=function(){var e=(0,p.a)("userId"),t=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,i=r.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=i.next()).done;)l.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return l}((0,i.useState)(""),2),r=t[0],v=t[1],P=(0,i.useRef)(null),b=(0,i.useCallback)((function(){var t=P.current;t?(g.ZP.show(),window.ApiClient.getUser(e).then((function(e){if(!e.Name)throw new Error("Unexpected null user.Name");if(!e.Id)throw new Error("Unexpected null user.Id");v(e.Name),s.default.setTitle(e.Name);var r="assets/img/avatar.png";e.PrimaryImageTag&&(r=window.ApiClient.getUserImageUrl(e.Id,{tag:e.PrimaryImageTag,type:"Primary"})),t.querySelector("#image").style.backgroundImage="url("+r+")",l.default.getCurrentUser().then((function(r){var a;if(!e.Policy)throw new Error("Unexpected null user.Policy");e.PrimaryImageTag?(t.querySelector("#btnAddImage").classList.add("hide"),t.querySelector("#btnDeleteImage").classList.remove("hide")):d.M.supports("fileinput")&&((null===(a=null==r?void 0:r.Policy)||void 0===a?void 0:a.IsAdministrator)||e.Policy.EnableUserPreferenceAccess)&&(t.querySelector("#btnDeleteImage").classList.add("hide"),t.querySelector("#btnAddImage").classList.remove("hide"))})),g.ZP.hide()}))):console.error("Unexpected null reference")}),[e]);return(0,i.useEffect)((function(){var t=P.current;if(t){b();var r=function(e){var t,r;switch(g.ZP.hide(),null===(r=null===(t=e.target)||void 0===t?void 0:t.error)||void 0===r?void 0:r.code){case DOMException.NOT_FOUND_ERR:(0,f.Z)(o.ZP.translate("FileNotFound"));break;case DOMException.ABORT_ERR:a();break;default:(0,f.Z)(o.ZP.translate("FileReadError"))}},a=function(){g.ZP.hide(),(0,f.Z)(o.ZP.translate("FileReadCancelled"))};t.querySelector("#btnDeleteImage").addEventListener("click",(function(){(0,c.Z)(o.ZP.translate("DeleteImageConfirmation"),o.ZP.translate("DeleteImage")).then((function(){g.ZP.show(),window.ApiClient.deleteUserImage(e,n._.Primary).then((function(){g.ZP.hide(),b()}))}))})),t.querySelector("#btnAddImage").addEventListener("click",(function(){var e=t.querySelector("#uploadImage");e.value="",e.click()})),t.querySelector("#uploadImage").addEventListener("change",(function(i){!function(i){var l=t.querySelector("#image"),o=i.target.files[0];if(!o||!o.type.match("image.*"))return!1;var s=new FileReader;s.onerror=r,s.onabort=a,s.onload=function(){l.style.backgroundImage="url("+s.result+")",window.ApiClient.uploadUserImage(e,n._.Primary,o).then((function(){g.ZP.hide(),b()}))},s.readAsDataURL(o)}(i)}))}else console.error("Unexpected null reference")}),[b,e]),(0,a.jsx)(y.Z,h({id:"userProfilePage",title:o.ZP.translate("Profile"),className:"mainAnimatedPage libraryPage userPreferencesPage userPasswordPage noSecondaryNavPage"},{children:(0,a.jsxs)("div",h({ref:P,className:"padded-left padded-right padded-bottom-page"},{children:[(0,a.jsxs)("div",h({className:"readOnlyContent",style:{margin:"0 auto",marginBottom:"1.8em",padding:"0 1em",display:"flex",flexDirection:"row",alignItems:"center"}},{children:[(0,a.jsxs)("div",h({className:"imagePlaceHolder",style:{position:"relative",display:"inline-block",maxWidth:200}},{children:[(0,a.jsx)("input",{id:"uploadImage",type:"file",accept:"image/*",style:{position:"absolute",right:0,width:"100%",height:"100%",opacity:0,cursor:"pointer"}}),(0,a.jsx)("div",{id:"image",style:{width:200,height:200,backgroundRepeat:"no-repeat",backgroundPosition:"center",borderRadius:"100%",backgroundSize:"cover"}})]})),(0,a.jsxs)("div",h({style:{verticalAlign:"top",margin:"1em 2em",display:"flex",flexDirection:"column",alignItems:"center"}},{children:[(0,a.jsx)("h2",h({className:"username",style:{margin:0,fontSize:"xx-large"}},{children:r})),(0,a.jsx)("br",{}),(0,a.jsx)(u.Z,{type:"button",id:"btnAddImage",className:"raised button-submit hide",title:"ButtonAddImage"}),(0,a.jsx)(u.Z,{type:"button",id:"btnDeleteImage",className:"raised hide",title:"DeleteImage"})]}))]})),(0,a.jsx)(m.Z,{userId:e})]}))}))}}}]);