"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9337],{9337:function(e,t,n){n.r(t),n.d(t,{getCommands:function(){return f},show:function(){return b}}),n(13227),n(81414),n(37666),n(14011),n(11431),n(59139),n(86028),n(96626),n(44350),n(9815),n(84159);var a=n(57366),i=n(87796),r=n(72365),o=n(94994),s=n(12801),l=n(84881),d=n(66560),c=n(21776),u=n(48957),m=n(18613),h=n(56663),p=n(60934);function f(e){var t=e.item,n=e.user,i=[];u.O.canPlay(t)&&"Photo"!==t.MediaType&&(!1!==e.play&&i.push({name:o.ZP.translate("Play"),id:"resume",icon:"play_arrow"}),e.playAllFromHere&&"Program"!==t.Type&&"TvChannel"!==t.Type&&i.push({name:o.ZP.translate("PlayAllFromHere"),id:"playallfromhere",icon:"play_arrow"})),null!==u.O.getCurrentPlayer()&&(e.stopPlayback&&i.push({name:o.ZP.translate("StopPlayback"),id:"stopPlayback",icon:"stop"}),e.clearQueue&&i.push({name:o.ZP.translate("ClearQueue"),id:"clearQueue",icon:"clear_all"})),u.O.canQueue(t)&&(!1!==e.queue&&i.push({name:o.ZP.translate("AddToPlayQueue"),id:"queue",icon:"playlist_add"}),!1!==e.queue&&i.push({name:o.ZP.translate("PlayNext"),id:"queuenext",icon:"playlist_add"})),!t.IsFolder&&"MusicArtist"!==t.Type&&"MusicGenre"!==t.Type||"livetv"===t.CollectionType||!1===e.shuffle||i.push({name:o.ZP.translate("Shuffle"),id:"shuffle",icon:"shuffle"}),"Audio"!==t.MediaType&&"MusicAlbum"!==t.Type&&"MusicArtist"!==t.Type&&"MusicGenre"!==t.Type||!1===e.instantMix||c.ZP.isLocalItem(t)||i.push({name:o.ZP.translate("InstantMix"),id:"instantmix",icon:"explore"}),i.length&&i.push({divider:!0}),a.Z.tv||(e.positionTo&&null!==r.ZP.parentWithClass(e.positionTo,"card")&&i.push({name:o.ZP.translate("Select"),id:"multiSelect",icon:"library_add_check"}),c.ZP.supportsAddingToCollection(t)&&(n.Policy.IsAdministrator||n.Policy.EnableCollectionManagement)&&i.push({name:o.ZP.translate("AddToCollection"),id:"addtocollection",icon:"playlist_add"}),c.ZP.supportsAddingToPlaylist(t)&&!1!==e.playlist&&i.push({name:o.ZP.translate("AddToPlaylist"),id:"addtoplaylist",icon:"playlist_add"})),"Timer"===t.Type&&n.Policy.EnableLiveTvManagement&&!1!==e.cancelTimer&&i.push({name:o.ZP.translate("CancelRecording"),id:"canceltimer",icon:"cancel"}),"Recording"===t.Type&&"InProgress"===t.Status&&n.Policy.EnableLiveTvManagement&&!1!==e.cancelTimer&&i.push({name:o.ZP.translate("CancelRecording"),id:"canceltimer",icon:"cancel"}),"SeriesTimer"===t.Type&&n.Policy.EnableLiveTvManagement&&!1!==e.cancelTimer&&i.push({name:o.ZP.translate("CancelSeries"),id:"cancelseriestimer",icon:"cancel"}),"Season"!==t.Type&&"Series"!=t.Type||i.push({name:o.ZP.translate("DownloadAll"),id:"downloadall",icon:"file_download"}),t.CanDelete&&!1!==e.deleteItem&&("Playlist"===t.Type||"BoxSet"===t.Type?i.push({name:o.ZP.translate("Delete"),id:"delete",icon:"delete"}):i.push({name:o.ZP.translate("DeleteMedia"),id:"delete",icon:"delete"})),t.CanDownload&&l.M.supports("filedownload")&&"Book"!==t.Type&&(i.push({name:o.ZP.translate("Download"),id:"download",icon:"file_download"}),i.push({name:o.ZP.translate("CopyStreamURL"),id:"copy-stream",icon:"content_copy"})),i.length&&i.push({divider:!0});var s=c.ZP.canEdit(n,t);if(s&&!1!==e.edit&&"SeriesTimer"!==t.Type){var d="Timer"===t.Type||"SeriesTimer"===t.Type?o.ZP.translate("Edit"):o.ZP.translate("EditMetadata");i.push({name:d,id:"edit",icon:"edit"})}return c.ZP.canEditImages(n,t)&&!1!==e.editImages&&i.push({name:o.ZP.translate("EditImages"),id:"editimages",icon:"image"}),!s||"Video"!==t.MediaType||"TvChannel"===t.Type||"Program"===t.Type||"Virtual"===t.LocationType||"Recording"===t.Type&&"Completed"!==t.Status||!1===e.editSubtitles||i.push({name:o.ZP.translate("EditSubtitles"),id:"editsubtitles",icon:"closed_caption"}),!1!==e.identify&&c.ZP.canIdentify(n,t)&&i.push({name:o.ZP.translate("Identify"),id:"identify",icon:"edit"}),t.MediaSources&&!1!==e.moremediainfo&&i.push({name:o.ZP.translate("MoreMediaInfo"),id:"moremediainfo",icon:"info"}),"Program"===t.Type&&!1!==e.record&&(t.TimerId?i.push({name:o.ZP.translate("ManageRecording"),id:"record",icon:"fiber_manual_record"}):i.push({name:o.ZP.translate("Record"),id:"record",icon:"fiber_manual_record"})),c.ZP.canRefreshMetadata(t,n)&&i.push({name:o.ZP.translate("RefreshMetadata"),id:"refresh",icon:"refresh"}),t.PlaylistItemId&&e.playlistId&&i.push({name:o.ZP.translate("RemoveFromPlaylist"),id:"removefromplaylist",icon:"remove"}),e.collectionId&&i.push({name:o.ZP.translate("RemoveFromCollection"),id:"removefromcollection",icon:"remove"}),!a.Z.tv&&!0===e.share&&c.ZP.canShare(t,n)&&i.push({name:o.ZP.translate("Share"),id:"share",icon:"share"}),!1!==e.openAlbum&&t.AlbumId&&"Photo"!==t.MediaType&&i.push({name:o.ZP.translate("ViewAlbum"),id:"album",icon:"album"}),!1!==e.openArtist&&t.AlbumArtists&&t.AlbumArtists.length&&i.push({name:o.ZP.translate("ViewAlbumArtist"),id:"artist",icon:"person"}),i}function y(e,t,n,a){return function(){e({command:t,updated:n,deleted:a})}}function P(e,t,n,a){var i="play";n&&(i=a?"queueNext":"queue");var r=0;if(t&&e.UserData&&e.UserData.PlaybackPositionTicks&&(r=e.UserData.PlaybackPositionTicks),"Program"===e.Type)u.O[i]({ids:[e.ChannelId],startPositionTicks:r,serverId:e.ServerId});else{var o="items-"+(e.IsFolder?e.Id:e.ParentId)+"-Folder",s=p.getSortValuesLegacy(o);u.O[i]({items:[e],startPositionTicks:r,queryOptions:{SortBy:s.sortBy,SortOrder:s.sortOrder}})}}function b(e){var t=f(e);return t.length?s.default.show({items:t,positionTo:e.positionTo,resolveOnClick:["share"]}).then((function(t){return function(e,t,a){var s=e.Id,l=e.ServerId,c=m.Z.getApiClient(l);return new Promise((function(m,p){switch(t){case"addtocollection":n.e(5864).then(n.bind(n,19449)).then((function(e){(new(0,e.default)).show({items:[s],serverId:l}).then(y(m,t,!0),y(m,t))}));break;case"addtoplaylist":n.e(43839).then(n.bind(n,43126)).then((function(e){new(0,e.default)({items:[s],serverId:l}).then(y(m,t,!0),y(m,t))}));break;case"download":n.e(26381).then(n.bind(n,26381)).then((function(n){var a=c.getItemDownloadUrl(s);n.download([{url:a,itemId:s,serverId:l,title:e.Name,filename:e.Path.replace(/^.*[\\/]/,"")}]),y(y(m,t),t)()}));break;case"downloadall":var f=function(e){Promise.all(e.map((function(e){return c.getEpisodes(e.SeriesId,{seasonId:e.Id,userId:a.user.Id,Fields:"CanDownload,Path"})}))).then((function(e){var t;t=e.map((function(e){return e.Items})).flat(),n.e(26381).then(n.bind(n,26381)).then((function(e){var n=t.map((function(e){return{url:c.getItemDownloadUrl(e.Id),itemId:e.Id,serverId:l,title:e.Name,filename:e.Path.replace(/^.*[\\/]/,"")}}));e.download(n)}))}))};"Season"===e.Type?f([e]):"Series"===e.Type&&c.getSeasons(e.Id,{userId:a.user.Id,Fields:"ItemCounts"}).then((function(e){return f(e.Items)})),y(y(m,t),t)();break;case"copy-stream":var b=c.getItemDownloadUrl(s);(0,i.J)(b).then((function(){(0,h.Z)(o.ZP.translate("CopyStreamURLSuccess"))})).catch((function(){prompt(o.ZP.translate("CopyStreamURL"),b)})),y(m,t)();break;case"editsubtitles":n.e(327).then(n.bind(n,327)).then((function(e){e.default.show(s,l).then(y(m,t,!0),y(m,t))}));break;case"edit":(function(e,t){return new Promise((function(a,i){var r=e.serverInfo().Id;"Timer"===t.Type?n.e(21341).then(n.bind(n,21341)).then((function(e){e.default.show(t.Id,r).then(a,i)})):"SeriesTimer"===t.Type?n.e(3346).then(n.bind(n,4896)).then((function(e){e.default.show(t.Id,r).then(a,i)})):Promise.all([n.e(43786),n.e(8096)]).then(n.bind(n,43786)).then((function(e){e.default.show(t.Id,r).then(a,i)}))}))})(c,e).then(y(m,t,!0),y(m,t));break;case"editimages":n.e(23635).then(n.bind(n,23635)).then((function(e){e.show({itemId:s,serverId:l}).then(y(m,t,!0),y(m,t))}));break;case"identify":Promise.resolve().then(n.bind(n,9599)).then((function(e){e.show(s,l).then(y(m,t,!0),y(m,t))}));break;case"moremediainfo":n.e(14166).then(n.bind(n,14166)).then((function(e){e.show(s,l).then(y(m,t),y(m,t))}));break;case"multiSelect":Promise.all([n.e(52943),n.e(16383)]).then(n.bind(n,8156)).then((function(e){(0,e.startMultiSelect)(r.ZP.parentWithClass(a.positionTo,"card"))}));break;case"refresh":!function(e,t){n.e(36929).then(n.bind(n,36929)).then((function(n){new(0,n.default)({itemIds:[t.Id],serverId:e.serverInfo().Id,mode:"CollectionFolder"===t.Type?"scan":null}).show()}))}(c,e),y(m,t)();break;case"open":d.appRouter.showItem(e),y(m,t)();break;case"play":P(e,!1),y(m,t)();break;case"resume":P(e,!0),y(m,t)();break;case"queue":P(e,!1,!0),y(m,t)();break;case"queuenext":P(e,!1,!0,!0),y(m,t)();break;case"stopPlayback":u.O.stop();break;case"clearQueue":u.O.clearQueue();break;case"record":Promise.all([n.e(95785),n.e(90311)]).then(n.bind(n,45012)).then((function(e){e.default.show(s,l).then(y(m,t,!0),y(m,t))}));break;case"shuffle":u.O.shuffle(e),y(m,t)();break;case"instantmix":u.O.instantMix(e),y(m,t)();break;case"delete":(function(e,t){return new Promise((function(e,a){n.e(35854).then(n.bind(n,35854)).then((function(n){n.deleteItem({item:t,navigate:!1}).then((function(){e(!0)}),a)}))}))})(0,e).then(y(m,t,!0,!0),y(m,t));break;case"share":navigator.share({title:e.Name,text:e.Overview,url:"".concat(c.serverAddress(),"/web/index.html").concat(d.appRouter.getRouteUrl(e))});break;case"album":d.appRouter.showItem(e.AlbumId,e.ServerId),y(m,t)();break;case"artist":d.appRouter.showItem(e.AlbumArtists[0].Id,e.ServerId),y(m,t)();break;case"playallfromhere":case"queueallfromhere":y(m,t)();break;case"removefromplaylist":c.ajax({url:c.getUrl("Playlists/"+a.playlistId+"/Items",{EntryIds:[e.PlaylistItemId].join(",")}),type:"DELETE"}).then((function(){y(m,t,!0)()}));break;case"removefromcollection":c.ajax({type:"DELETE",url:c.getUrl("Collections/"+a.collectionId+"/Items",{Ids:[e.Id].join(",")})}).then((function(){y(m,t,!0)()}));break;case"canceltimer":!function(e,t,a,i){n.e(30531).then(n.bind(n,30531)).then((function(e){var n=e.default,r=t.TimerId||t.Id;n.cancelTimerWithConfirmation(r,t.ServerId).then((function(){y(a,i,!0)()}))}))}(0,e,m,t);break;case"cancelseriestimer":!function(e,t,a,i){n.e(30531).then(n.bind(n,30531)).then((function(e){e.default.cancelSeriesTimerWithConfirmation(t.Id,t.ServerId).then((function(){y(a,i,!0)()}))}))}(0,e,m,t);break;default:p()}}))}(e.item,t,e)})):Promise.reject()}t.default={getCommands:f,show:b}},87796:function(e,t,n){n.d(t,{J:function(){return r}}),n(81414),n(37666);var a=n(57366);function i(e){var t,n=document.createElement("textarea");if(n.value=e,document.body.appendChild(n),n.focus(),a.Z.iOS&&a.Z.iOSVersion<13.4){var i=document.createRange();i.selectNodeContents(n);var r=window.getSelection();r.removeAllRanges(),r.addRange(i),n.setSelectionRange(0,999999)}else n.select();try{t=document.execCommand("copy")?Promise.resolve():Promise.reject()}catch(e){t=Promise.reject()}return document.body.removeChild(n),t}function r(e){return void 0===navigator.clipboard?i(e):navigator.clipboard.writeText(e).catch((function(){return i(e)}))}}}]);