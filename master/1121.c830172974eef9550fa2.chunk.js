"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1121],{71121:function(e,t,a){a.r(t),a.d(t,{default:function(){return _},show:function(){return O}}),a(5769),a(98010),a(63238),a(69217),a(61418),a(17460),a(14078),a(32081);var n=a(90914),i=a(56705),r=a(83094),s=a(78695),d=a(27515),o=a(33942),l=a(74227),c=a(21361),u=a(47518),m=a(94389),g=(a(46650),a(6626),a(78066),a(21865),a(1892)),p=a.n(g),b=a(95760),h=a.n(b),v=a(38311),f=a.n(v),I=a(58192),y=a.n(I),Z=a(38060),C=a.n(Z),k=a(54865),x=a.n(k),P=a(57882),S={};S.styleTagTransform=x(),S.setAttributes=y(),S.insert=f().bind(null,"head"),S.domAPI=h(),S.insertStyleElement=C(),p()(P.Z,S),P.Z&&P.Z.locals&&P.Z.locals;var T,A=a(53913),w=a(61642),B=a(56346),M=!u.Z.slow&&!u.Z.edge,L=!1;function z(e,t,a){var n;i.ZP.show(),t?(n=A.Z.getApiClient(t.ServerId),E(e,t,n,a)):(n=A.Z.getApiClient(T.ServerId)).getItem(n.getCurrentUserId(),T.Id).then((function(t){E(e,t,n,a)}))}function D(e,t,a,n){e.addEventListener(a,(function(e){var a=r.ZP.parentWithClass(e.target,t);a&&n.call(a,e)}))}function E(e,t,a,n){T=t,a.getRemoteImageProviders(function(){var e={};return e.itemId=T.Id,e}()).then((function(t){for(var r=e.querySelectorAll(".btnBrowseAllImages"),o=0,l=r.length;o<l;o++)t.length?r[o].classList.remove("hide"):r[o].classList.add("hide");a.getItemImageInfos(T.Id).then((function(r){!function(e,t,a,n,i){var r=n.filter((function(e){return"Backdrop"!==e.ImageType&&"Chapter"!==e.ImageType}));U(0,0,t,r,i,e.querySelector("#images"))}(e,a,0,r,t),function(e,t,a,n,i){var r=n.filter((function(e){return"Backdrop"===e.ImageType})).sort((function(e,t){return e.ImageIndex-t.ImageIndex}));r.length?(e.querySelector("#backdropsContainer",e).classList.remove("hide"),U(0,0,t,r,i,e.querySelector("#backdrops"))):e.querySelector("#backdropsContainer",e).classList.add("hide")}(e,a,0,r,t),i.ZP.hide(),s.Z.tv&&d.Z.autoFocus(n||e)}))}))}function W(e,t,a,n,i,r,d,l){var c="",u="card scalableCard imageEditorCard";u+=" backdropCard backdropCard-scalable","button"===d?(u+=" btnImageCard",s.Z.tv&&(u+=" show-focus",M&&(u+=" show-animation")),c+='<button type="button" class="'+u+'"'):c+='<div class="'+u+'"',c+=' data-id="'+T.Id+'" data-serverid="'+n.serverId()+'" data-index="'+t+'" data-numimages="'+a+'" data-imagetype="'+e.ImageType+'" data-providers="'+i.length+'"',c+=">",c+='<div class="cardBox visualCardBox">',c+='<div class="cardScalable visualCardBox-cardScalable" style="background-color:transparent;">',c+='<div class="cardPadder-backdrop"></div>',c+='<div class="cardContent">';var m=function(e,t,a,n,i){return(i=i||{}).type=a,i.index=n,i.tag="Backdrop"===a?e.BackdropImageTags[n]:"Primary"===a&&e.PrimaryImageTag||e.ImageTags[a],t.getScaledImageUrl(e.Id||e.ItemId,i)}(T,n,e.ImageType,e.ImageIndex,{maxWidth:r});return c+='<div class="cardImageContainer" style="background-image:url(\''+m+"');background-position:center center;background-size:contain;\"></div>",c+="</div>",c+="</div>",c+='<div class="cardFooter visualCardBox-cardFooter">',c+='<h3 class="cardText cardTextCentered" style="margin:0;">'+o.ZP.translate(""+e.ImageType)+"</h3>",c+='<div class="cardText cardText-secondary cardTextCentered">',e.Width&&e.Height?c+=e.Width+" X "+e.Height:c+="&nbsp;",c+="</div>",l&&(c+='<div class="cardText cardTextCentered">',"Backdrop"===e.ImageType?(c+=t>0?'<button type="button" is="paper-icon-button-light" class="btnMoveImage autoSize" data-imagetype="'+e.ImageType+'" data-index="'+e.ImageIndex+'" data-newindex="'+(e.ImageIndex-1)+'" title="'+o.ZP.translate("MoveLeft")+'"><span class="material-icons chevron_left"></span></button>':'<button type="button" is="paper-icon-button-light" class="autoSize" disabled title="'+o.ZP.translate("MoveLeft")+'"><span class="material-icons chevron_left" aria-hidden="true"></span></button>',c+=t<a-1?'<button type="button" is="paper-icon-button-light" class="btnMoveImage autoSize" data-imagetype="'+e.ImageType+'" data-index="'+e.ImageIndex+'" data-newindex="'+(e.ImageIndex+1)+'" title="'+o.ZP.translate("MoveRight")+'"><span class="material-icons chevron_right" aria-hidden="true"></span></button>':'<button type="button" is="paper-icon-button-light" class="autoSize" disabled title="'+o.ZP.translate("MoveRight")+'"><span class="material-icons chevron_right" aria-hidden="true"></span></button>'):i.length&&(c+='<button type="button" is="paper-icon-button-light" data-imagetype="'+e.ImageType+'" class="btnSearchImages autoSize" title="'+o.ZP.translate("Search")+'"><span class="material-icons search" aria-hidden="true"></span></button>'),c+='<button type="button" is="paper-icon-button-light" data-imagetype="'+e.ImageType+'" data-index="'+(null!=e.ImageIndex?e.ImageIndex:"null")+'" class="btnDeleteImage autoSize" title="'+o.ZP.translate("Delete")+'"><span class="material-icons delete" aria-hidden="true"></span></button>',c+="</div>"),c+="</div>",(c+="</div>")+"</"+d+">"}function H(e,t,a,n,i,r){var s=function(){i.deleteItemImage(t,a,n).then((function(){L=!0,z(e)}))};r?(0,B.Z)({text:o.ZP.translate("ConfirmDeleteImage"),confirmText:o.ZP.translate("Delete"),primary:"delete"}).then(s):s()}function q(e,t,a,n,i,r,s){t.updateItemImageIndex(a,n,i,r).then((function(){L=!0,z(e,null,s)}),(function(){(0,w.Z)(o.ZP.translate("ErrorDefault"))}))}function U(e,t,a,n,i,d){var o="",l=300,u=r.ZP.getWindowSize();u.innerWidth>=1280&&(l=Math.round(u.innerWidth/4));for(var m=s.Z.tv?"button":"div",g=!s.Z.tv,p=0,b=n.length;p<b;p++)o+=W(n[p],p,b,a,i,l,m,g);d.innerHTML=o,c.default.lazyChildren(d)}function F(e,t){a.e(982).then(a.bind(a,30982)).then((function(a){a.show(T.Id,T.ServerId,T.Type,t,"Season"==T.Type?T.ParentId:null).then((function(){L=!0,z(e)}))}))}function O(e){return new Promise((function(t,d){L=!1,function(e,t,d){var c=e.itemId,u=e.serverId;i.ZP.show();var g=A.Z.getApiClient(u);g.getItem(g.getCurrentUserId(),c).then((function(c){var u={removeOnClose:!0};s.Z.tv?u.size="fullscreen":u.size="small";var g=n.default.createDialog(u);g.classList.add("formDialog"),g.innerHTML=o.ZP.translateHtml('<div class="formDialogHeader"> <button is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1" title="${ButtonBack}"><span class="material-icons arrow_back" aria-hidden="true"></span></button> <h3 class="formDialogHeaderTitle"> ${HeaderEditImages} </h3> </div> <div class="formDialogContent smoothScrollY"> <div class="dialogContentInner"> <div id="imagesContainer"> <div class="imageEditor-buttons first-imageEditor-buttons"> <h2 style="margin:0">${Images}</h2> <button type="button" is="emby-button" class="btnBrowseAllImages fab mini autoSize" style="margin-left:1em"> <span class="material-icons search" aria-hidden="true"></span> </button> <button type="button" is="emby-button" class="btnOpenUploadMenu fab mini hide" style="margin-left:.5em"> <span class="material-icons add" aria-hidden="true"></span> </button> </div> <div id="images" class="itemsContainer vertical-wrap"> </div> <br/> </div> <div id="backdropsContainer" class="hide"> <div class="imageEditor-buttons"> <h2 style="margin:0">${Backdrops}</h2> <button type="button" is="emby-button" class="btnBrowseAllImages fab mini autoSize" style="margin-left:1em" data-imagetype="Backdrop"> <span class="material-icons search" aria-hidden="true"></span> </button> <button type="button" is="emby-button" class="btnOpenUploadMenu fab mini hide" style="margin-left:.5em" data-imagetype="Backdrop"> <span class="material-icons add" aria-hidden="true"></span> </button> </div> <div id="backdrops" class="itemsContainer vertical-wrap"> </div> <br/> </div> </div> </div> ',"core"),s.Z.tv&&l.default.centerFocus.on(g,!1),function(e,t){for(var n=e.querySelectorAll(".btnOpenUploadMenu"),i=m.M.supports("fileinput"),s=0,d=n.length;s<d;s++)i?n[s].classList.remove("hide"):n[s].classList.add("hide");D(e,"btnOpenUploadMenu","click",(function(){var n=this.getAttribute("data-imagetype");a.e(5356).then(a.bind(a,25356)).then((function(a){a.default.show({theme:t.theme,imageType:n,itemId:T.Id,serverId:T.ServerId}).then((function(t){t&&(L=!0,z(e))}))}))})),D(e,"btnSearchImages","click",(function(){F(e,this.getAttribute("data-imagetype"))})),D(e,"btnBrowseAllImages","click",(function(){F(e,this.getAttribute("data-imagetype")||"Primary")})),D(e,"btnImageCard","click",(function(){!function(e,t){var n=t.getAttribute("data-id"),i=t.getAttribute("data-serverid"),s=A.Z.getApiClient(i),d=t.getAttribute("data-imagetype"),l=parseInt(t.getAttribute("data-index")),c=parseInt(t.getAttribute("data-providers")),u=parseInt(t.getAttribute("data-numimages"));Promise.resolve().then(a.bind(a,78407)).then((function(a){var i=a.default,m=[];m.push({name:o.ZP.translate("Delete"),id:"delete"}),"Backdrop"===d&&(l>0&&m.push({name:o.ZP.translate("MoveLeft"),id:"moveleft"}),l<u-1&&m.push({name:o.ZP.translate("MoveRight"),id:"moveright"})),c&&m.push({name:o.ZP.translate("Search"),id:"search"}),i.show({items:m,positionTo:t}).then((function(a){switch(a){case"delete":H(e,n,d,l,s,!1);break;case"search":F(e,d);break;case"moveleft":q(e,s,n,d,l,l-1,r.ZP.parentWithClass(t,"itemsContainer"));break;case"moveright":q(e,s,n,d,l,l+1,r.ZP.parentWithClass(t,"itemsContainer"))}}))}))}(e,this)})),D(e,"btnDeleteImage","click",(function(){var t=this.getAttribute("data-imagetype"),a=this.getAttribute("data-index");a="null"===a?null:parseInt(a);var n=A.Z.getApiClient(T.ServerId);H(e,T.Id,t,a,n,!0)})),D(e,"btnMoveImage","click",(function(){var t=this.getAttribute("data-imagetype"),a=this.getAttribute("data-index"),n=this.getAttribute("data-newindex"),i=A.Z.getApiClient(T.ServerId);q(e,i,T.Id,t,a,n,r.ZP.parentWithClass(this,"itemsContainer"))}))}(g,e),g.addEventListener("close",(function(){s.Z.tv&&l.default.centerFocus.off(g,!1),i.ZP.hide(),L?t():d()})),n.default.open(g),z(g,c),g.querySelector(".btnCancel").addEventListener("click",(function(){n.default.close(g)}))}))}(e,t,d)}))}var _={show:O}},57882:function(e,t,a){var n=a(54933),i=a.n(n),r=a(93476),s=a.n(r)()(i());s.push([e.id,".imageEditor-buttons{-webkit-align-items:center;align-items:center;display:-webkit-flex;display:flex;margin:1em 0}.first-imageEditor-buttons{margin-top:2em}",""]),t.Z=s}}]);