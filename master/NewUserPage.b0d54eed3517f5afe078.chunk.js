/*! For license information please see NewUserPage.b0d54eed3517f5afe078.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9629],{71426:function(e,n,t){t(62525);var l=t(27378),a=60103;if(n.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var r=Symbol.for;a=r("react.element"),n.Fragment=r("react.fragment")}var c=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function o(e,n,t){var l,r={},o=null,d=null;for(l in void 0!==t&&(o=""+t),void 0!==n.key&&(o=""+n.key),void 0!==n.ref&&(d=n.ref),n)i.call(n,l)&&!s.hasOwnProperty(l)&&(r[l]=n[l]);if(e&&e.defaultProps)for(l in n=e.defaultProps)void 0===r[l]&&(r[l]=n[l]);return{$$typeof:a,type:e,key:o,ref:d,props:r,_owner:c.current}}n.jsx=o,n.jsxs=o},24246:function(e,n,t){e.exports=t(71426)},4007:function(e,n,t){var l=t(24246),a=(t(27378),t(44614)),r=function(e){var n=e.type,t=e.className,l=e.title;return{__html:'<button\n        is="emby-button"\n        type="'.concat(n,'"\n        class="').concat(t,'"\n        >\n        <span>').concat(l,"</span>\n    </button>")}};n.Z=function(e){var n=e.type,t=e.className,c=e.title;return(0,l.jsx)("div",{dangerouslySetInnerHTML:r({type:n,className:t,title:a.ZP.translate(c)})},void 0)}},89663:function(e,n,t){var l=t(24246),a=(t(27378),t(44614)),r=function(e){var n=e.labelClassName,t=e.type,l=e.className,a=e.title;return{__html:'<label class="'.concat(n,'">\n        <input\n            is="emby-checkbox"\n            type="').concat(t,'"\n            class="').concat(l,'"\n        />\n        <span>').concat(a,"</span>\n    </label>")}};n.Z=function(e){var n=e.labelClassName,t=e.type,c=e.className,i=e.title;return(0,l.jsx)("div",{className:"sectioncheckbox",dangerouslySetInnerHTML:r({labelClassName:n||"",type:t,className:c,title:a.ZP.translate(i)})},void 0)}},56883:function(e,n,t){var l=t(24246),a=(t(27378),function(e){var n=e.className,t=e.Name,l=e.dataAttributes,a=e.AppName,r=e.checkedAttribute;return{__html:'<label>\n        <input\n            type="checkbox"\n            is="emby-checkbox"\n            class="'.concat(n,'"\n            ').concat(l," ").concat(r,"\n        />\n        <span>").concat(t," ").concat(a,"</span>\n    </label>")}});n.Z=function(e){var n=e.className,t=e.Name,r=e.Id,c=e.ItemType,i=e.AppName,s=e.checkedAttribute;return(0,l.jsx)("div",{className:"sectioncheckbox",dangerouslySetInnerHTML:a({className:n,Name:t,dataAttributes:c?"data-itemtype='".concat(c,"'"):"data-id='".concat(r,"'"),AppName:i?"- ".concat(i):"",checkedAttribute:s})},void 0)}},26670:function(e,n,t){var l=t(24246),a=(t(27378),t(44614)),r=function(e){var n=e.type,t=e.id,l=e.label,a=e.options;return{__html:'<input\n        is="emby-input"\n        type="'.concat(n,'"\n        id="').concat(t,'"\n        label="').concat(l,'"\n        ').concat(a,"\n    />")}};n.Z=function(e){var n=e.type,t=e.id,c=e.label,i=e.options;return(0,l.jsx)("div",{dangerouslySetInnerHTML:r({type:n,id:t,label:a.ZP.translate(c),options:i||""})},void 0)}},45754:function(e,n,t){var l=t(24246),a=(t(27378),t(44614)),r=function(e){var n=e.className,t=e.title,l=e.href;return{__html:'<a\n        is="emby-linkbutton"\n        rel="noopener noreferrer"\n        class="'.concat(n,'"\n        target="_blank"\n        href="').concat(l,'"\n        >\n        ').concat(t,"\n    </a>")}};n.Z=function(e){var n=e.className,t=e.title,c=e.url;return(0,l.jsx)("div",{dangerouslySetInnerHTML:r({className:n,title:a.ZP.translate(t),href:c})},void 0)}},42699:function(e,n,t){t.r(n);var l=t(24246),a=t(27378),r=t(76543),c=t(44614),i=t(56705),s=t(25152),o=t(45754),d=t(26670),u=t(89663),v=t(56883),h=t(4007),m=function(){return m=Object.assign||function(e){for(var n,t=1,l=arguments.length;t<l;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},m.apply(this,arguments)};n.default=function(){var e=(0,a.useState)([]),n=e[0],t=e[1],p=(0,a.useState)([]),b=p[0],f=p[1],y=(0,a.useRef)(null),N=function(e){return e.map((function(e){return{Id:e.Id,Name:e.Name}}))},x=(0,a.useCallback)((function(e){var n,t=N(e);f(t),(null===(n=null==y?void 0:y.current)||void 0===n?void 0:n.querySelector(".folderAccess")).dispatchEvent(new CustomEvent("create")),y.current.querySelector(".chkEnableAllFolders").checked=!1}),[]),A=(0,a.useCallback)((function(e){var n,l,a=N(e);t(a),(null===(n=null==y?void 0:y.current)||void 0===n?void 0:n.querySelector(".channelAccess")).dispatchEvent(new CustomEvent("create"));var r=null===(l=null==y?void 0:y.current)||void 0===l?void 0:l.querySelector(".channelAccessContainer");a.length?r.classList.remove("hide"):r.classList.add("hide"),y.current.querySelector(".chkEnableAllChannels").checked=!1}),[]),k=(0,a.useCallback)((function(){y.current.querySelector("#txtUsername").value="",y.current.querySelector("#txtPassword").value="",i.ZP.show();var e=window.ApiClient.getJSON(window.ApiClient.getUrl("Library/MediaFolders",{IsHidden:!1})),n=window.ApiClient.getJSON(window.ApiClient.getUrl("Channels"));Promise.all([e,n]).then((function(e){x(e[0].Items),A(e[1].Items),i.ZP.hide()}))}),[A,x]);return(0,a.useEffect)((function(){var e,n,t,l;k(),null===(e=null==y?void 0:y.current)||void 0===e||e.querySelector(".chkEnableAllChannels").addEventListener("change",(function(){var e,n=null===(e=null==y?void 0:y.current)||void 0===e?void 0:e.querySelector(".channelAccessListContainer");this.checked?n.classList.add("hide"):n.classList.remove("hide")})),null===(n=null==y?void 0:y.current)||void 0===n||n.querySelector(".chkEnableAllFolders").addEventListener("change",(function(){var e,n=null===(e=null==y?void 0:y.current)||void 0===e?void 0:e.querySelector(".folderAccessListContainer");this.checked?n.classList.add("hide"):n.classList.remove("hide")})),null===(t=null==y?void 0:y.current)||void 0===t||t.querySelector(".newUserProfileForm").addEventListener("submit",(function(e){return i.ZP.show(),function(){var e,n,t={};t.Name=null===(e=null==y?void 0:y.current)||void 0===e?void 0:e.querySelector("#txtUsername").value,t.Password=null===(n=null==y?void 0:y.current)||void 0===n?void 0:n.querySelector("#txtPassword").value,window.ApiClient.createUser(t).then((function(e){var n,t,l,a;e.Policy.EnableAllFolders=null===(n=null==y?void 0:y.current)||void 0===n?void 0:n.querySelector(".chkEnableAllFolders").checked,e.Policy.EnabledFolders=[],e.Policy.EnableAllFolders||(e.Policy.EnabledFolders=Array.prototype.filter.call(null===(t=null==y?void 0:y.current)||void 0===t?void 0:t.querySelectorAll(".chkFolder"),(function(e){return e.checked})).map((function(e){return e.getAttribute("data-id")}))),e.Policy.EnableAllChannels=null===(l=null==y?void 0:y.current)||void 0===l?void 0:l.querySelector(".chkEnableAllChannels").checked,e.Policy.EnabledChannels=[],e.Policy.EnableAllChannels||(e.Policy.EnabledChannels=Array.prototype.filter.call(null===(a=null==y?void 0:y.current)||void 0===a?void 0:a.querySelectorAll(".chkChannel"),(function(e){return e.checked})).map((function(e){return e.getAttribute("data-id")}))),window.ApiClient.updateUserPolicy(e.Id,e.Policy).then((function(){r.ZP.navigate("useredit.html?userId="+e.Id)}))}),(function(){(0,s.Z)(c.ZP.translate("ErrorDefault")),i.ZP.hide()}))}(),e.preventDefault(),e.stopPropagation(),!1})),null===(l=null==y?void 0:y.current)||void 0===l||l.querySelector(".button-cancel").addEventListener("click",(function(){window.history.back()}))}),[k]),(0,l.jsx)("div",m({ref:y},{children:(0,l.jsxs)("div",m({className:"content-primary"},{children:[(0,l.jsx)("div",m({className:"verticalSection"},{children:(0,l.jsxs)("div",m({className:"sectionTitleContainer flex align-items-center"},{children:[(0,l.jsx)("h2",m({className:"sectionTitle"},{children:c.ZP.translate("ButtonAddUser")}),void 0),(0,l.jsx)(o.Z,{className:"raised button-alt headerHelpButton",title:"Help",url:"https://docs.jellyfin.org/general/server/users/"},void 0)]}),void 0)}),void 0),(0,l.jsxs)("form",m({className:"newUserProfileForm"},{children:[(0,l.jsx)("div",m({className:"inputContainer"},{children:(0,l.jsx)(d.Z,{type:"text",id:"txtUsername",label:"LabelName",options:"required"},void 0)}),void 0),(0,l.jsx)("div",m({className:"inputContainer"},{children:(0,l.jsx)(d.Z,{type:"password",id:"txtPassword",label:"LabelPassword"},void 0)}),void 0),(0,l.jsxs)("div",m({className:"folderAccessContainer"},{children:[(0,l.jsx)("h2",{children:c.ZP.translate("HeaderLibraryAccess")},void 0),(0,l.jsx)(u.Z,{type:"checkbox",className:"chkEnableAllFolders",title:"OptionEnableAccessToAllLibraries"},void 0),(0,l.jsxs)("div",m({className:"folderAccessListContainer"},{children:[(0,l.jsxs)("div",m({className:"folderAccess"},{children:[(0,l.jsx)("h3",m({className:"checkboxListLabel"},{children:c.ZP.translate("HeaderLibraries")}),void 0),(0,l.jsx)("div",m({className:"checkboxList paperList",style:{padding:".5em 1em"}},{children:b.map((function(e){return(0,l.jsx)(v.Z,{className:"chkFolder",Id:e.Id,Name:e.Name,checkedAttribute:""},e.Id)}))}),void 0)]}),void 0),(0,l.jsx)("div",m({className:"fieldDescription"},{children:c.ZP.translate("LibraryAccessHelp")}),void 0)]}),void 0)]}),void 0),(0,l.jsxs)("div",m({className:"channelAccessContainer verticalSection-extrabottompadding hide"},{children:[(0,l.jsx)("h2",{children:c.ZP.translate("HeaderChannelAccess")},void 0),(0,l.jsx)(u.Z,{type:"checkbox",className:"chkEnableAllChannels",title:"OptionEnableAccessToAllChannels"},void 0),(0,l.jsxs)("div",m({className:"channelAccessListContainer"},{children:[(0,l.jsxs)("div",m({className:"channelAccess"},{children:[(0,l.jsx)("h3",m({className:"checkboxListLabel"},{children:c.ZP.translate("Channels")}),void 0),(0,l.jsx)("div",m({className:"checkboxList paperList",style:{padding:".5em 1em"}},{children:n.map((function(e){return(0,l.jsx)(v.Z,{className:"chkChannel",Id:e.Id,Name:e.Name,checkedAttribute:""},e.Id)}))}),void 0)]}),void 0),(0,l.jsx)("div",m({className:"fieldDescription"},{children:c.ZP.translate("ChannelAccessHelp")}),void 0)]}),void 0)]}),void 0),(0,l.jsxs)("div",{children:[(0,l.jsx)(h.Z,{type:"submit",className:"raised button-submit block",title:"Save"},void 0),(0,l.jsx)(h.Z,{type:"button",className:"raised button-cancel block btnCancel",title:"ButtonCancel"},void 0)]},void 0)]}),void 0)]}),void 0)}),void 0)}}}]);