"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[30694,89824,49213],{17369:function(e,n,t){t.r(n),t(96626),t(26031),t(95822),t(56187),t(38690),t(81414),t(11908),t(33096),t(89228),t(13227),t(14011),t(11431);var a=t(17081),o=t(84597),r=t(56663),l=t(12801),i=t(94994),c=t(94915),s=t(67932),u=t(18613),y=t(90846),p=t(67561);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,P(a.key),a)}}function P(e){var n=function(e,n){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=f(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(n)?n:String(n)}var b=new(function(){function e(){var n,t=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.syncPlayEnabled=!1,this.SyncPlay=null===(n=s.E.firstOfType(y.z.SyncPlay))||void 0===n?void 0:n.instance,this.SyncPlay&&p.Z.on(this.SyncPlay.Manager,"enabled",(function(e,n){t.syncPlayEnabled=n})),p.Z.on(s.E,"registered",(function(e,n){n.type===y.z.SyncPlay&&(t.SyncPlay=n.instance,p.Z.on(n.instance.Manager,"enabled",(function(e,n){t.syncPlayEnabled=n})))}))}var n,t;return n=e,(t=[{key:"showNewJoinGroupSelection",value:function(e,n,t){var a=n.localUser?n.localUser.Policy:{};t.getSyncPlayGroups().then((function(c){c.json().then((function(c){var s=c.map((function(e){return{name:e.GroupName,icon:"person",id:e.GroupId,selected:!1,secondaryText:e.Participants.join(", ")}}));if("CreateAndJoinGroups"===a.SyncPlayAccess&&s.push({name:i.ZP.translate("LabelSyncPlayNewGroup"),icon:"add",id:"new-group",selected:!0,secondaryText:i.ZP.translate("LabelSyncPlayNewGroupDescription")}),0===s.length&&"JoinGroups"===a.SyncPlayAccess)return(0,r.Z)({text:i.ZP.translate("MessageSyncPlayCreateGroupDenied")}),void o.ZP.hide();var u={title:i.ZP.translate("HeaderSyncPlaySelectGroup"),items:s,positionTo:e,border:!0,dialogClass:"syncPlayGroupMenu"};l.default.show(u).then((function(e){"new-group"==e?t.createSyncPlayGroup({GroupName:i.ZP.translate("SyncPlayGroupDefaultTitle",n.localUser.Name)}):e&&t.joinSyncPlayGroup({GroupId:e})})).catch((function(e){e&&console.error("SyncPlay: unexpected error listing groups:",e)})),o.ZP.hide()}))})).catch((function(e){console.error(e),o.ZP.hide(),(0,r.Z)({text:i.ZP.translate("MessageSyncPlayErrorAccessingGroups")})}))}},{key:"showLeaveGroupSelection",value:function(e,n,t){var r,c,s,u,y=this,p=null===(r=this.SyncPlay)||void 0===r?void 0:r.Manager.getGroupInfo(),f=[];null!==(c=this.SyncPlay)&&void 0!==c&&c.Manager.isPlaylistEmpty()||null!==(s=this.SyncPlay)&&void 0!==s&&s.Manager.isPlaybackActive()?null!==(u=this.SyncPlay)&&void 0!==u&&u.Manager.isPlaybackActive()&&f.push({name:i.ZP.translate("LabelSyncPlayHaltPlayback"),icon:"pause_circle_filled",id:"halt-playback",selected:!1,secondaryText:i.ZP.translate("LabelSyncPlayHaltPlaybackDescription")}):f.push({name:i.ZP.translate("LabelSyncPlayResumePlayback"),icon:"play_circle_filled",id:"resume-playback",selected:!1,secondaryText:i.ZP.translate("LabelSyncPlayResumePlaybackDescription")}),f.push({name:i.ZP.translate("Settings"),icon:"video_settings",id:"settings",selected:!1,secondaryText:i.ZP.translate("LabelSyncPlaySettingsDescription")}),f.push({name:i.ZP.translate("LabelSyncPlayLeaveGroup"),icon:"meeting_room",id:"leave-group",selected:!0,secondaryText:i.ZP.translate("LabelSyncPlayLeaveGroupDescription")});var d={title:p.GroupName,text:p.Participants.join(", "),dialogClass:"syncPlayGroupMenu",items:f,positionTo:e,border:!0};l.default.show(d).then((function(e){var n;if("resume-playback"==e)null===(n=y.SyncPlay)||void 0===n||n.Manager.resumeGroupPlayback(t);else if("halt-playback"==e){var o;null===(o=y.SyncPlay)||void 0===o||o.Manager.haltGroupPlayback(t)}else if("leave-group"==e)t.leaveSyncPlayGroup();else if("settings"==e){var r;new a.default(t,null===(r=y.SyncPlay)||void 0===r?void 0:r.Manager.getTimeSyncCore(),{groupInfo:p}).embed().catch((function(e){e&&console.error("Error creating SyncPlay settings editor",e)}))}})).catch((function(e){e&&console.error("SyncPlay: unexpected error showing group menu:",e)})),o.ZP.hide()}},{key:"show",value:function(e){var n=this;o.ZP.show(),c.default.check().then((function(){console.debug("Playback is allowed.")})).catch((function(e){console.error("Playback not allowed!",e),(0,r.Z)({text:i.ZP.translate("MessageSyncPlayPlaybackPermissionRequired")})}));var t=u.Z.currentApiClient();u.Z.user(t).then((function(a){n.syncPlayEnabled?n.showLeaveGroupSelection(e,a,t):n.showNewJoinGroupSelection(e,a,t)})).catch((function(e){console.error(e),o.ZP.hide(),(0,r.Z)({text:i.ZP.translate("MessageSyncPlayNoGroupsAvailable")})}))}}])&&d(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),e}());n.default=b},94915:function(e,n,t){t.r(n),t(81414),t(37666),t(44231),t(26031),t(95822),t(56187),t(38690),t(11908),t(33096),t(89228),t(13227),t(14011),t(11431);var a=t(92811);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,l(a.key),a)}}function l(e){var n=function(e,n){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(n)?n:String(n)}var i=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,t;return n=e,(t=[{key:"check",value:function(){if(a.M.supports("htmlaudioautoplay"))return Promise.resolve(!0);var e,n=((e=document.createElement("audio")).classList.add("testMediaPlayerAudio"),e.classList.add("hide"),document.body.appendChild(e),e.volume=1,e.src="assets/audio/silence.mp3",e);return n.play().finally((function(){!function(e){e.pause(),e.remove()}(n)}))}}])&&r(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),e}();n.default=new i}}]);