"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[40501,54487,62882,96084],{62882:function(e,t,i){i.r(t),i.d(t,{show:function(){return u}});var r=i(22696),n=i.n(r),s=i(79754),a=i(46782),l=i(5898),o=i(47629),c=(i(10353),function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")});function d(e,t,r){Promise.resolve().then(i.bind(i,10838)).then((function(i){var n=r?"on":"off";i.centerFocus[n](e,t)})).catch((function(e){console.warn("Error in centerFocus",e)}))}function u(e){var t,i,r,u={removeOnClose:!0,enableHistory:e.enableHistory,scrollY:!1};a.A.tv?(u.size="fullscreen",r=!0,u.autoFocus=!0):(u.modal=!1,u.entryAnimation=e.entryAnimation,u.exitAnimation=e.exitAnimation,u.entryAnimationDuration=e.entryAnimationDuration||140,u.exitAnimationDuration=e.exitAnimationDuration||100,u.autoFocus=!1);var y=s.default.createDialog(u);r?y.classList.add("actionsheet-fullscreen"):y.classList.add("actionsheet-not-fullscreen"),y.classList.add("actionSheet"),e.dialogClass&&y.classList.add(e.dialogClass);var v="",f=a.A.tv?"scrollY smoothScrollY hiddenScrollY":"scrollY",h="";e.items.length>20&&(h+="min-width:"+(o.Ay.getWindowSize().innerWidth>=300?240:200)+"px;");var m,g=!1,T=[];try{for(var p=c(e.items),S=p.next();!S.done;S=p.next())(m=(D=S.value).icon||(D.selected?"check":null))&&(g=!0),T.push(m||"")}catch(e){t={error:e}}finally{try{S&&!S.done&&(i=p.return)&&i.call(p)}finally{if(t)throw t.error}}a.A.tv&&(v+='<button is="paper-icon-button-light" class="btnCloseActionSheet hide-mouse-idle-tv" tabindex="-1" title="'.concat(l.Ay.translate("ButtonBack"),'">\n                     <span class="material-icons arrow_back" aria-hidden="true"></span>\n                 </button>'));var A=e.title&&!g;A||a.A.tv?v+='<div class="actionSheetContent actionSheetContent-centered">':v+='<div class="actionSheetContent">',e.title&&(v+='<h1 class="actionSheetTitle">'+n()(e.title)+"</h1>"),e.text&&(v+='<p class="actionSheetText">'+n()(e.text)+"</p>");var b="actionSheetScroller";a.A.tv&&(b+=" actionSheetScroller-tv focuscontainer-x focuscontainer-y"),v+='<div class="'+b+" "+f+'" style="'+h+'">';var L="listItem listItem-button actionSheetMenuItem";(e.border||e.shaded)&&(L+=" listItem-border"),e.menuItemClass&&(L+=" "+e.menuItemClass),a.A.tv&&(L+=" listItem-focusscale"),a.A.mobile&&(L+=" actionsheet-xlargeFont");for(var k=0;k<e.items.length;k++){var D;(D=e.items[k]).divider?v+='<div class="actionsheetDivider"></div>':(v+="<button"+(D.selected&&a.A.tv?" autoFocus":"")+' is="emby-button" type="button" class="'+L+'" data-id="'+(null==D.id||""===D.id?D.value:D.id)+'">',(m=T[k])?v+='<span class="actionsheetMenuItemIcon listItemIcon listItemIcon-transparent material-icons '.concat(m,'" aria-hidden="true"></span>'):g&&!A&&(v+='<span class="actionsheetMenuItemIcon listItemIcon listItemIcon-transparent material-icons check" aria-hidden="true" style="visibility:hidden;"></span>'),v+='<div class="listItemBody actionsheetListItemBody">',v+='<div class="listItemBodyText actionSheetItemText">',v+=n()(D.name||D.textContent||D.innerText),v+="</div>",D.secondaryText&&(v+='<div class="listItemBodyText secondary">'.concat(n()(D.secondaryText),"</div>")),v+="</div>",D.asideText&&(v+='<div class="listItemAside actionSheetItemAsideText">'.concat(n()(D.asideText),"</div>")),v+="</button>")}if(e.showCancel&&(v+='<div class="buttons">',v+='<button is="emby-button" type="button" class="btnCloseActionSheet">'.concat(l.Ay.translate("ButtonCancel"),"</button>"),v+="</div>"),v+="</div>",y.innerHTML=v,a.A.tv){var q=y.querySelector(".actionSheetScroller");q&&d(q,!1,!0)}var I=y.querySelector(".btnCloseActionSheet");I&&I.addEventListener("click",(function(){s.default.close(y)}));var x,w=null;return e.timeout&&(x=setTimeout((function(){s.default.close(y)}),e.timeout)),new Promise((function(t,i){var r=!1;y.addEventListener("click",(function(i){var n=o.Ay.parentWithClass(i.target,"actionSheetMenuItem");n&&(w=n.getAttribute("data-id"),e.resolveOnClick&&(Array.isArray(e.resolveOnClick)?-1!==e.resolveOnClick.indexOf(w)&&(t(w),r=!0):(t(w),r=!0)),s.default.close(y))})),y.addEventListener("close",(function(){if(a.A.tv){var n=y.querySelector(".actionSheetScroller");n&&d(n,!1,!1)}x&&(clearTimeout(x),x=void 0),r||(null!=w?(e.callback&&e.callback(w),t(w)):i(new Error("ActionSheet closed without resolving")))})),s.default.open(y).catch((function(e){console.warn("DialogHelper.open error",e)}));var n=e.positionTo&&"fullscreen"!==u.size?function(e,t,i){var r=o.Ay.getWindowSize(),n=r.innerHeight,s=r.innerWidth,a=function(e){var t,i,r=[];if(!document)return r;try{for(var n=c(e),s=n.next();!s.done;s=n.next()){var a=s.value.getBoundingClientRect();r.push({top:a.top,left:a.left,width:a.width,height:a.height})}}catch(e){t={error:e}}finally{try{s&&!s.done&&(i=n.return)&&i.call(n)}finally{if(t)throw t.error}}return r}([e])[0];"top"!==t.positionY&&(a.top+=(a.height||0)/2),a.left+=(a.width||0)/2;var l=i.offsetHeight||300,d=i.offsetWidth||160;a.top-=l/2,a.left-=d/2;var u=a.left+d-s,y=a.top+l-n;return u>0&&(a.left-=u+20),y>0&&(a.top-=y+20),a.top+=t.offsetTop||0,a.left+=t.offsetLeft||0,a.top=Math.max(a.top,10),a.left=Math.max(a.left,10),a}(e.positionTo,e,y):null;n&&(y.style.position="fixed",y.style.margin="0",y.style.left=n.left+"px",y.style.top=n.top+"px")}))}t.default={show:u}},63001:function(e,t,i){var r=i(46782),n=i(34789),s=i(62882),a=(i(69177),Object.create(HTMLSelectElement.prototype));function l(){return!(!n.A.edgeUwp&&!n.A.xboxOne&&(n.A.tizen||n.A.orsay||n.A.web0s||!n.A.tv&&r.A.tv))}function o(e){var t=c(e),i=t?t.textContent||t.innerText:null;s.default.show({items:e.options,positionTo:e,title:i}).then((function(t){!function(e,t){e.value=t}(e,t),function(e){var t=new Event("change",{bubbles:!1,cancelable:!0});e.dispatchEvent(t)}(e)}))}function c(e){for(var t=e.previousSibling;t&&"LABEL"!==t.tagName;)t=t.previousSibling;return t}function d(){var e=c(this);e&&e.classList.add("selectLabelFocused")}function u(){var e=c(this);e&&e.classList.remove("selectLabelFocused")}function y(e){e.button||l()||(e.preventDefault(),o(this))}function v(e){13!==e.keyCode||l()||(e.preventDefault(),o(this))}var f=0;a.createdCallback=function(){this.id||(this.id="embyselect"+f,f++),this.classList.add("emby-select-withcolor"),r.A.tv&&this.classList.add("emby-select-focusscale"),this.addEventListener("mousedown",y),this.addEventListener("keydown",v),this.addEventListener("focus",d),this.addEventListener("blur",u)},a.attachedCallback=function(){var e;if(!this.classList.contains("emby-select")){this.classList.add("emby-select");var t,i=this.ownerDocument.createElement("label");i.innerText=this.getAttribute("label")||"",i.classList.add("selectLabel"),i.htmlFor=this.id,null===(e=this.parentNode)||void 0===e||e.insertBefore(i,this),this.classList.contains("emby-select-withcolor")&&(null===(t=this.parentNode)||void 0===t||t.insertAdjacentHTML("beforeend",'<div class="selectArrowContainer"><div style="visibility:hidden;display:none;">0</div><span class="selectArrow material-icons keyboard_arrow_down" aria-hidden="true"></span></div>'))}},a.setLabel=function(e){var t;(null===(t=this.parentNode)||void 0===t?void 0:t.querySelector("label")).innerText=e},document.registerElement("emby-select",{prototype:a,extends:"select"})},93318:function(e,t,i){i.r(t),i.d(t,{default:function(){return d}}),i(44962),i(86584),i(74576),i(78557),i(67593),i(96054),i(90076),i(83994),i(82367);var r=i(8566),n=i(98320),s=i(47629),a=i(5898),l=(i(98959),i(10353),i(63001),i(40532)),o=i(83375),c={refreshScheduledTask:function(e){r.Ay.show();var t=(0,o.E)("id");ApiClient.getScheduledTask(t).then((function(t){c.loadScheduledTask(e,t)}))},loadScheduledTask:function(e,t){e.querySelector(".taskName").innerHTML=t.Name,e.querySelector("#pTaskDescription").innerHTML=t.Description,i.e(51133).then(i.bind(i,51133)).then((function(){c.loadTaskTriggers(e,t)})),r.Ay.hide()},loadTaskTriggers:function(e,t){var i="";i+='<div class="paperList">';for(var r=0,n=t.Triggers.length;r<n;r++){var s=t.Triggers[r];if(i+='<div class="listItem listItem-border">',i+='<span class="material-icons listItemIcon schedule" aria-hidden="true"></span>',s.MaxRuntimeTicks?i+='<div class="listItemBody two-line">':i+='<div class="listItemBody">',i+="<div class='listItemBodyText'>"+c.getTriggerFriendlyName(s)+"</div>",s.MaxRuntimeTicks){i+='<div class="listItemBodyText secondary">';var l=s.MaxRuntimeTicks/36e9;i+=1==l?a.Ay.translate("ValueTimeLimitSingleHour"):a.Ay.translate("ValueTimeLimitMultiHour",l),i+="</div>"}i+="</div>",i+='<button class="btnDeleteTrigger" data-index="'+r+'" type="button" is="paper-icon-button-light" title="'+a.Ay.translate("Delete")+'"><span class="material-icons delete" aria-hidden="true"></span></button>',i+="</div>"}i+="</div>",e.querySelector(".taskTriggers").innerHTML=i},getTriggerFriendlyName:function(e){if("DailyTrigger"==e.Type)return a.Ay.translate("DailyAt",c.getDisplayTime(e.TimeOfDayTicks));if("WeeklyTrigger"==e.Type)return a.Ay.translate("WeeklyAt",e.DayOfWeek,c.getDisplayTime(e.TimeOfDayTicks));if("SystemEventTrigger"==e.Type&&"WakeFromSleep"==e.SystemEvent)return a.Ay.translate("OnWakeFromSleep");if("IntervalTrigger"==e.Type){var t=e.IntervalTicks/36e9;return.25==t?a.Ay.translate("EveryXMinutes","15"):.5==t?a.Ay.translate("EveryXMinutes","30"):.75==t?a.Ay.translate("EveryXMinutes","45"):1==t?a.Ay.translate("EveryHour"):a.Ay.translate("EveryXHours",t)}return"StartupTrigger"==e.Type?a.Ay.translate("OnApplicationStartup"):e.Type},getDisplayTime:function(e){var t=e/1e4,i=new Date;return i.setHours(0,0,0,0),i.setTime(i.getTime()+t),n.Ay.getDisplayTime(i)},showAddTriggerPopup:function(e){e.querySelector("#selectTriggerType").value="DailyTrigger",e.querySelector("#selectTriggerType").dispatchEvent(new CustomEvent("change",{})),e.querySelector("#popupAddTrigger").classList.remove("hide")},confirmDeleteTrigger:function(e,t){(0,l.A)(a.Ay.translate("MessageDeleteTaskTrigger"),a.Ay.translate("HeaderDeleteTaskTrigger")).then((function(){c.deleteTrigger(e,t)}))},deleteTrigger:function(e,t){r.Ay.show();var i=(0,o.E)("id");ApiClient.getScheduledTask(i).then((function(i){i.Triggers.splice(t,1),ApiClient.updateScheduledTaskTriggers(i.Id,i.Triggers).then((function(){c.refreshScheduledTask(e)}))}))},refreshTriggerFields:function(e,t){"DailyTrigger"==t?(e.querySelector("#fldTimeOfDay").classList.remove("hide"),e.querySelector("#fldDayOfWeek").classList.add("hide"),e.querySelector("#fldSelectSystemEvent").classList.add("hide"),e.querySelector("#fldSelectInterval").classList.add("hide"),e.querySelector("#selectTimeOfDay").setAttribute("required","required")):"WeeklyTrigger"==t?(e.querySelector("#fldTimeOfDay").classList.remove("hide"),e.querySelector("#fldDayOfWeek").classList.remove("hide"),e.querySelector("#fldSelectSystemEvent").classList.add("hide"),e.querySelector("#fldSelectInterval").classList.add("hide"),e.querySelector("#selectTimeOfDay").setAttribute("required","required")):"SystemEventTrigger"==t?(e.querySelector("#fldTimeOfDay").classList.add("hide"),e.querySelector("#fldDayOfWeek").classList.add("hide"),e.querySelector("#fldSelectSystemEvent").classList.remove("hide"),e.querySelector("#fldSelectInterval").classList.add("hide"),e.querySelector("#selectTimeOfDay").removeAttribute("required")):"IntervalTrigger"==t?(e.querySelector("#fldTimeOfDay").classList.add("hide"),e.querySelector("#fldDayOfWeek").classList.add("hide"),e.querySelector("#fldSelectSystemEvent").classList.add("hide"),e.querySelector("#fldSelectInterval").classList.remove("hide"),e.querySelector("#selectTimeOfDay").removeAttribute("required")):"StartupTrigger"==t&&(e.querySelector("#fldTimeOfDay").classList.add("hide"),e.querySelector("#fldDayOfWeek").classList.add("hide"),e.querySelector("#fldSelectSystemEvent").classList.add("hide"),e.querySelector("#fldSelectInterval").classList.add("hide"),e.querySelector("#selectTimeOfDay").removeAttribute("required"))},getTriggerToAdd:function(e){var t={Type:e.querySelector("#selectTriggerType").value};"DailyTrigger"==t.Type?t.TimeOfDayTicks=e.querySelector("#selectTimeOfDay").value:"WeeklyTrigger"==t.Type?(t.DayOfWeek=e.querySelector("#selectDayOfWeek").value,t.TimeOfDayTicks=e.querySelector("#selectTimeOfDay").value):"SystemEventTrigger"==t.Type?t.SystemEvent=e.querySelector("#selectSystemEvent").value:"IntervalTrigger"==t.Type&&(t.IntervalTicks=e.querySelector("#selectInterval").value);var i=e.querySelector("#txtTimeLimit").value||"0";return i=36e5*parseFloat(i),t.MaxRuntimeTicks=1e4*i||null,t}};function d(e){e.querySelector(".addTriggerForm").addEventListener("submit",(function(t){r.Ay.show();var i=(0,o.E)("id");ApiClient.getScheduledTask(i).then((function(t){t.Triggers.push(c.getTriggerToAdd(e)),ApiClient.updateScheduledTaskTriggers(t.Id,t.Triggers).then((function(){document.querySelector("#popupAddTrigger").classList.add("hide"),c.refreshScheduledTask(e)}))})),t.preventDefault()})),function(e){for(var t=[],i=0;i<864e5;i+=9e5)t.push({name:c.getDisplayTime(1e4*i),value:1e4*i});e.innerHTML=t.map((function(e){return'<option value="'+e.value+'">'+e.name+"</option>"})).join("")}(e.querySelector("#selectTimeOfDay")),e.querySelector("#popupAddTrigger").parentNode.trigger(new Event("create")),e.querySelector(".selectTriggerType").addEventListener("change",(function(){c.refreshTriggerFields(e,this.value)})),e.querySelector(".btnAddTrigger").addEventListener("click",(function(){c.showAddTriggerPopup(e)})),e.addEventListener("click",(function(t){var i=s.Ay.parentWithClass(t.target,"btnDeleteTrigger");i&&c.confirmDeleteTrigger(e,parseInt(i.getAttribute("data-index"),10))})),e.addEventListener("viewshow",(function(){c.refreshScheduledTask(e)}))}}}]);