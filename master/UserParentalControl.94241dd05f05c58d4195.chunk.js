/*! For license information please see UserParentalControl.94241dd05f05c58d4195.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3895],{71426:function(e,t,n){n(62525);var a=n(27378),r=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var l=Symbol.for;r=l("react.element"),t.Fragment=l("react.fragment")}var i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c=Object.prototype.hasOwnProperty,o={key:!0,ref:!0,__self:!0,__source:!0};function s(e,t,n){var a,l={},s=null,u=null;for(a in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(u=t.ref),t)c.call(t,a)&&!o.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===l[a]&&(l[a]=t[a]);return{$$typeof:r,type:e,key:s,ref:u,props:l,_owner:i.current}}t.jsx=s,t.jsxs=s},24246:function(e,t,n){e.exports=n(71426)},4007:function(e,t,n){var a=n(24246),r=(n(27378),n(44614)),l=function(e){var t=e.type,n=e.className,a=e.title;return{__html:'<button\n        is="emby-button"\n        type="'.concat(t,'"\n        class="').concat(n,'"\n        >\n        <span>').concat(a,"</span>\n    </button>")}};t.Z=function(e){var t=e.type,n=e.className,i=e.title;return(0,a.jsx)("div",{dangerouslySetInnerHTML:l({type:t,className:n,title:r.ZP.translate(i)})},void 0)}},56883:function(e,t,n){var a=n(24246),r=(n(27378),function(e){var t=e.className,n=e.Name,a=e.dataAttributes,r=e.AppName,l=e.checkedAttribute;return{__html:'<label>\n        <input\n            type="checkbox"\n            is="emby-checkbox"\n            class="'.concat(t,'"\n            ').concat(a," ").concat(l,"\n        />\n        <span>").concat(n," ").concat(r,"</span>\n    </label>")}});t.Z=function(e){var t=e.className,n=e.Name,l=e.Id,i=e.ItemType,c=e.AppName,o=e.checkedAttribute;return(0,a.jsx)("div",{className:"sectioncheckbox",dangerouslySetInnerHTML:r({className:t,Name:n,dataAttributes:i?"data-itemtype='".concat(i,"'"):"data-id='".concat(l,"'"),AppName:c?"- ".concat(c):"",checkedAttribute:o})},void 0)}},44243:function(e,t,n){var a=n(24246),r=(n(27378),n(44614)),l=function(e){var t=e.activeTab;return{__html:'<a href="#"\n        is="emby-linkbutton"\n        data-role="button"\n        class="'.concat("useredit"===t?"ui-btn-active":"",'"\n        onclick="Dashboard.navigate(\'useredit.html\', true);">\n        ').concat(r.ZP.translate("Profile"),'\n    </a>\n    <a href="#"\n        is="emby-linkbutton"\n        data-role="button"\n        class="').concat("userlibraryaccess"===t?"ui-btn-active":"",'"\n        onclick="Dashboard.navigate(\'userlibraryaccess.html\', true);">\n        ').concat(r.ZP.translate("TabAccess"),'\n    </a>\n    <a href="#"\n        is="emby-linkbutton"\n        data-role="button"\n        class="').concat("userparentalcontrol"===t?"ui-btn-active":"",'"\n        onclick="Dashboard.navigate(\'userparentalcontrol.html\', true);">\n        ').concat(r.ZP.translate("TabParentalControl"),'\n    </a>\n    <a href="#"\n        is="emby-linkbutton"\n        data-role="button"\n        class="').concat("userpassword"===t?"ui-btn-active":"",'"\n        onclick="Dashboard.navigate(\'userpassword.html\', true);">\n        ').concat(r.ZP.translate("HeaderPassword"),"\n    </a>")}};t.Z=function(e){var t=e.activeTab;return(0,a.jsx)("div",{"data-role":"controlgroup","data-type":"horizontal",className:"localnav",dangerouslySetInnerHTML:l({activeTab:t})},void 0)}},62269:function(e,t,n){var a=n(24246),r=(n(27378),n(44614)),l=function(e){var t=e.className,n=e.title,a=e.icon;return{__html:'<button\n        is="emby-button"\n        type="button"\n        class="'.concat(t,'"\n        style="margin-left:1em;"\n        title="').concat(n,'"\n    >\n        <span class="material-icons ').concat(a,'"></span>\n    </button>')}};t.Z=function(e){var t=e.className,n=e.title,i=e.icon;return(0,a.jsx)("div",{dangerouslySetInnerHTML:l({className:t,title:r.ZP.translate(n),icon:i})},void 0)}},45754:function(e,t,n){var a=n(24246),r=(n(27378),n(44614)),l=function(e){var t=e.className,n=e.title,a=e.href;return{__html:'<a\n        is="emby-linkbutton"\n        rel="noopener noreferrer"\n        class="'.concat(t,'"\n        target="_blank"\n        href="').concat(a,'"\n        >\n        ').concat(n,"\n    </a>")}};t.Z=function(e){var t=e.className,n=e.title,i=e.url;return(0,a.jsx)("div",{dangerouslySetInnerHTML:l({className:t,title:r.ZP.translate(n),href:i})},void 0)}},38902:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var a=n(24246),r=n(27378),l=n(44614),i=n(3319),c=n(86628),o=n(28469),s=function(){return s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)},u=function(e){var t=e.index;return{__html:"<button\n        type='button'\n        is='paper-icon-button-light'\n        class='btnDelete listItemButton'\n        data-index='".concat(t,"'\n    >\n        <span class='material-icons delete' />\n    </button>")}};function d(e){var t=0,n=e%1;return n&&(t=Math.floor(60*n)),o.ZP.getDisplayTime(new Date(2e3,1,1,e,t,0,0))}var v=function(e){var t=e.index,n=e.DayOfWeek,r=e.StartHour,i=e.EndHour;return(0,a.jsxs)("div",s({className:"liSchedule listItem","data-day":n,"data-start":r,"data-end":i},{children:[(0,a.jsxs)("div",s({className:"listItemBody two-line"},{children:[(0,a.jsx)("h3",s({className:"listItemBodyText"},{children:l.ZP.translate(n)}),void 0),(0,a.jsx)("div",s({className:"listItemBodyText secondary"},{children:d(r)+" - "+d(i)}),void 0)]}),void 0),(0,a.jsx)("div",{dangerouslySetInnerHTML:u({index:t})},void 0)]}),void 0)},m=function(){return m=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},m.apply(this,arguments)},h=function(e){var t=e.tag;return{__html:"<button\n        type='button'\n        is='paper-icon-button-light'\n        class='blockedTag btnDeleteTag listItemButton'\n        data-tag='".concat(t,"'\n    >\n        <span class='material-icons delete' />\n    </button>")}},f=function(e){var t=e.tag;return(0,a.jsx)("div",m({className:"paperList"},{children:(0,a.jsxs)("div",m({className:"listItem"},{children:[(0,a.jsx)("div",m({className:"listItemBody"},{children:(0,a.jsx)("h3",m({className:"listItemBodyText"},{children:t}),void 0)}),void 0),(0,a.jsx)("div",{dangerouslySetInnerHTML:h({tag:t})},void 0)]}),void 0)}),void 0)},p=n(4007),b=n(56883),y=n(62269),g=n(45754),x=function(e){var t=e.className,n=e.label,a=e.option;return{__html:'<select\n        class="'.concat(t,'"\n        is="emby-select"\n        label="').concat(n,"\"\n    >\n        <option value=''></option>\n        ").concat(a,"\n    </select>")}},N=function(e){var t=e.className,n=e.label,r=e.parentalRatings;return(0,a.jsx)("div",{dangerouslySetInnerHTML:x({className:t,label:l.ZP.translate(n),option:function(){for(var e="",t=0,n=r;t<n.length;t++){var a=n[t];e+="<option value='".concat(a.Value,"'>").concat(a.Name,"</option>")}return e}()})},void 0)},k=n(44243),P=n(56705),S=n(25152),j=function(){return j=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},j.apply(this,arguments)},T=function(){var e=(0,r.useState)(""),t=e[0],o=e[1],s=(0,r.useState)([]),u=s[0],d=s[1],m=(0,r.useState)([]),h=m[0],x=m[1],T=(0,r.useState)([]),A=T[0],Z=T[1],I=(0,r.useState)([]),_=I[0],L=I[1],w=(0,r.useRef)(null),C=(0,r.useCallback)((function(e){for(var t,n=[],a=0,r=e.length;a<r;a++){if(t=e[a],n.length){var l=n[n.length-1];if(l.Value===t.Value){l.Name+="/"+t.Name;continue}}n.push({Name:t.Name,Value:t.Value})}d(n)}),[]),H=(0,r.useCallback)((function(e){for(var t,n=[],a=0,r=[{name:l.ZP.translate("Books"),value:"Book"},{name:l.ZP.translate("Channels"),value:"ChannelContent"},{name:l.ZP.translate("LiveTV"),value:"LiveTvChannel"},{name:l.ZP.translate("Movies"),value:"Movie"},{name:l.ZP.translate("Music"),value:"Music"},{name:l.ZP.translate("Trailers"),value:"Trailer"},{name:l.ZP.translate("Shows"),value:"Series"}];a<r.length;a++){var i=r[a],c=-1!=e.Policy.BlockUnratedItems.indexOf(i.value)?' checked="checked"':"";n.push({value:i.value,name:i.name,checkedAttribute:c})}x(n),(null===(t=null==w?void 0:w.current)||void 0===t?void 0:t.querySelector(".blockUnratedItems")).dispatchEvent(new CustomEvent("create"))}),[]),B=(0,r.useCallback)((function(e){var t;L(e);for(var n=function(t){t.addEventListener("click",(function(){var n=t.getAttribute("data-tag"),a=e.filter((function(e){return e!=n}));B(a)}))},a=0,r=(null===(t=null==w?void 0:w.current)||void 0===t?void 0:t.querySelector(".blockedTags")).querySelectorAll(".btnDeleteTag");a<r.length;a++)n(r[a])}),[]),O=(0,r.useCallback)((function(e){var t;Z(e);for(var n=function(t){t.addEventListener("click",(function(){var n=parseInt(t.getAttribute("data-index"));e.splice(n,1);var a=e.filter((function(e){return e!=n}));O(a)}))},a=0,r=(null===(t=null==w?void 0:w.current)||void 0===t?void 0:t.querySelector(".accessScheduleList")).querySelectorAll(".btnDelete");a<r.length;a++)n(r[a])}),[]),M=(0,r.useCallback)((function(e,t){var n,a;o(e.Name),i.Z.setTitle(e.Name),H(e),B(e.Policy.BlockedTags),C(t);var r="";if(e.Policy.MaxParentalRating)for(var l=0,c=t.length;l<c;l++){var s=t[l];e.Policy.MaxParentalRating>=s.Value&&(r=s.Value)}w.current.querySelector(".selectMaxParentalRating").value=r,e.Policy.IsAdministrator?null===(n=null==w?void 0:w.current)||void 0===n||n.querySelector(".accessScheduleSection").classList.add("hide"):null===(a=null==w?void 0:w.current)||void 0===a||a.querySelector(".accessScheduleSection").classList.remove("hide"),O(e.Policy.AccessSchedules||[]),P.ZP.hide()}),[B,H,C,O]),R=(0,r.useCallback)((function(){P.ZP.show();var e=c.appRouter.param("userId"),t=window.ApiClient.getUser(e),n=window.ApiClient.getParentalRatings();Promise.all([t,n]).then((function(e){M(e[0],e[1])}))}),[M]);return(0,r.useEffect)((function(){var e,t,a;R();var r=function(){var e;return Array.prototype.map.call(null===(e=null==w?void 0:w.current)||void 0===e?void 0:e.querySelectorAll(".liSchedule"),(function(e){return{DayOfWeek:e.getAttribute("data-day"),StartHour:e.getAttribute("data-start"),EndHour:e.getAttribute("data-end")}}))},i=function(){var e;return Array.prototype.map.call(null===(e=null==w?void 0:w.current)||void 0===e?void 0:e.querySelectorAll(".blockedTag"),(function(e){return e.getAttribute("data-tag")}))};null===(e=null==w?void 0:w.current)||void 0===e||e.querySelector(".btnAddSchedule").addEventListener("click",(function(){var e,t;t=-1,e=(e={})||{},n.e(9969).then(n.bind(n,99969)).then((function(n){n.default.show({schedule:e}).then((function(e){var n=r();-1==t&&(t=n.length),n[t]=e,O(n)}))}))})),null===(t=null==w?void 0:w.current)||void 0===t||t.querySelector(".btnAddBlockedTag").addEventListener("click",(function(){n.e(8e3).then(n.bind(n,58e3)).then((function(e){(0,e.default)({label:l.ZP.translate("LabelTag")}).then((function(e){var t=i();-1==t.indexOf(e)&&(t.push(e),B(t))}))}))})),null===(a=null==w?void 0:w.current)||void 0===a||a.querySelector(".userParentalControlForm").addEventListener("submit",(function(e){P.ZP.show();var t=c.appRouter.param("userId");return window.ApiClient.getUser(t).then((function(e){!function(e){var t,n;e.Policy.MaxParentalRating=(null===(t=null==w?void 0:w.current)||void 0===t?void 0:t.querySelector(".selectMaxParentalRating").value)||null,e.Policy.BlockUnratedItems=Array.prototype.filter.call(null===(n=null==w?void 0:w.current)||void 0===n?void 0:n.querySelectorAll(".chkUnratedItem"),(function(e){return e.checked})).map((function(e){return e.getAttribute("data-itemtype")})),e.Policy.AccessSchedules=r(),e.Policy.BlockedTags=i(),window.ApiClient.updateUserPolicy(e.Id,e.Policy).then((function(){P.ZP.hide(),(0,S.Z)(l.ZP.translate("SettingsSaved"))}))}(e)})),e.preventDefault(),e.stopPropagation(),!1}))}),[B,R,O]),(0,a.jsx)("div",j({ref:w},{children:(0,a.jsxs)("div",j({className:"content-primary"},{children:[(0,a.jsx)("div",j({className:"verticalSection"},{children:(0,a.jsxs)("div",j({className:"sectionTitleContainer flex align-items-center"},{children:[(0,a.jsx)("h2",j({className:"sectionTitle username"},{children:t}),void 0),(0,a.jsx)(g.Z,{className:"raised button-alt headerHelpButton",title:"Help",url:"https://docs.jellyfin.org/general/server/users/"},void 0)]}),void 0)}),void 0),(0,a.jsx)(k.Z,{activeTab:"userparentalcontrol"},void 0),(0,a.jsxs)("form",j({className:"userParentalControlForm"},{children:[(0,a.jsxs)("div",j({className:"selectContainer"},{children:[(0,a.jsx)(N,{className:"selectMaxParentalRating",label:"LabelMaxParentalRating",parentalRatings:u},void 0),(0,a.jsx)("div",j({className:"fieldDescription"},{children:l.ZP.translate("MaxParentalRatingHelp")}),void 0)]}),void 0),(0,a.jsx)("div",{children:(0,a.jsxs)("div",j({className:"blockUnratedItems"},{children:[(0,a.jsx)("h3",j({className:"checkboxListLabel"},{children:l.ZP.translate("HeaderBlockItemsWithNoRating")}),void 0),(0,a.jsx)("div",j({className:"checkboxList paperList",style:{padding:".5em 1em"}},{children:h.map((function(e){return(0,a.jsx)(b.Z,{className:"chkUnratedItem",ItemType:e.value,Name:e.name,checkedAttribute:e.checkedAttribute},e.value)}))}),void 0)]}),void 0)},void 0),(0,a.jsx)("br",{},void 0),(0,a.jsxs)("div",j({className:"verticalSection",style:{marginBottom:"2em"}},{children:[(0,a.jsxs)("div",j({className:"detailSectionHeader sectionTitleContainer",style:{display:"flex",alignItems:"center",paddingBottom:"1em"}},{children:[(0,a.jsx)("h2",j({className:"sectionTitle"},{children:l.ZP.translate("LabelBlockContentWithTags")}),void 0),(0,a.jsx)(y.Z,{className:"fab btnAddBlockedTag submit",title:"Add",icon:"add"},void 0)]}),void 0),(0,a.jsx)("div",j({className:"blockedTags",style:{marginTop:".5em"}},{children:_.map((function(e,t){return(0,a.jsx)(f,{tag:e},t)}))}),void 0)]}),void 0),(0,a.jsxs)("div",j({className:"accessScheduleSection verticalSection",style:{marginBottom:"2em"}},{children:[(0,a.jsxs)("div",j({className:"sectionTitleContainer",style:{display:"flex",alignItems:"center",paddingBottom:"1em"}},{children:[(0,a.jsx)("h2",j({className:"sectionTitle"},{children:l.ZP.translate("HeaderAccessSchedule")}),void 0),(0,a.jsx)(y.Z,{className:"fab btnAddSchedule submit",title:"Add",icon:"add"},void 0)]}),void 0),(0,a.jsx)("p",{children:l.ZP.translate("HeaderAccessScheduleHelp")},void 0),(0,a.jsx)("div",j({className:"accessScheduleList paperList"},{children:A.map((function(e,t){return(0,a.jsx)(v,{index:t,DayOfWeek:e.DayOfWeek,StartHour:e.StartHour,EndHour:e.EndHour},t)}))}),void 0)]}),void 0),(0,a.jsx)("div",{children:(0,a.jsx)(p.Z,{type:"submit",className:"raised button-submit block",title:"Save"},void 0)},void 0)]}),void 0)]}),void 0)}),void 0)}}}]);