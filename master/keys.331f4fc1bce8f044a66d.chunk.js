"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[24167],{7397:function(e,n,t){var r=t(30177),a=t(41906);n.A=function(e){var n=e.cell,t=(0,a.Y)().dateFnsLocale;return(0,r.A)(n.getValue(),"Pp",{locale:t})}},33783:function(e,n,t){t.r(n),t.d(n,{default:function(){return j}});var r=t(62540),a=t(34401),o=t(7397),i=t(65242),c=t(69410),l=t(5898),u=t(63696),s=t(40532),f=t(51137),p=t(61586),d="ApiKeys",y=function(){var e=(0,c.gf)().api;return(0,p.I)({queryKey:[d],queryFn:function(){return function(e){return n=void 0,t=void 0,a=function(){return function(e,n){var t,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(t=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=n.call(e,o)}catch(e){c=[6,e],r=0}finally{t=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}(this,(function(n){switch(n.label){case 0:return e?[4,(0,f._)(e).getKeys()]:(console.error("[useApiKeys] Failed to create Api instance"),[2]);case 1:return[2,n.sent().data]}}))},new((r=void 0)||(r=Promise))((function(e,o){function i(e){try{l(a.next(e))}catch(e){o(e)}}function c(e){try{l(a.throw(e))}catch(e){o(e)}}function l(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}l((a=a.apply(n,t||[])).next())}));var n,t,r,a}(e)},enabled:!!e})},h=t(38596),A=t(53678),b=t(5271),v=t(77890),m=t(34907),w=t(58765),x=t(20541),g=t(99851),k=t(51602),C=t(16638),K=t(86074),j=function(){var e=(0,c.gf)().api,n=y(),p=n.data,j=n.isLoading,T=function(){var e=(0,c.gf)().api;return(0,h.n)({mutationFn:function(n){return(0,f._)(e).revokeKey(n)},onSuccess:function(){A.q.invalidateQueries({queryKey:[d]})}})}(),H=function(){var e=(0,c.gf)().api;return(0,h.n)({mutationFn:function(n){return(0,f._)(e).createKey(n)},onSuccess:function(){A.q.invalidateQueries({queryKey:[d]})}})}(),S=(0,u.useMemo)((function(){return[{id:"ApiKey",accessorKey:"AccessToken",header:l.Ay.translate("HeaderApiKey"),size:300},{id:"AppName",accessorKey:"AppName",header:l.Ay.translate("HeaderApp")},{id:"DateIssued",accessorFn:function(e){return e.DateCreated?(0,a.A)(e.DateCreated):void 0},Cell:o.A,header:l.Ay.translate("HeaderDateIssued"),filterVariant:"datetime-range"}]}),[]),F=(0,k.Up)({columns:S,data:(null==p?void 0:p.Items)||[],state:{isLoading:j},rowCount:(null==p?void 0:p.TotalRecordCount)||0,enableColumnPinning:!0,enableColumnResizing:!0,enableStickyFooter:!0,enableStickyHeader:!0,muiTableContainerProps:{sx:{maxHeight:"calc(100% - 7rem)"}},enableRowActions:!0,positionActionsColumn:"last",displayColumnDefOptions:{"mrt-row-actions":{header:"",size:25}},renderTopToolbarCustomActions:function(){return(0,r.jsx)(v.A,{startIcon:(0,r.jsx)(K.A,{}),onClick:L,children:l.Ay.translate("HeaderNewApiKey")})},renderRowActions:function(e){var n=e.row;return(0,r.jsx)(b.A,{sx:{display:"flex"},children:(0,r.jsx)(x.A,{title:l.Ay.translate("ButtonRevoke"),children:(0,r.jsx)(m.A,{color:"error",onClick:function(){var e;return(null===(e=n.original)||void 0===e?void 0:e.AccessToken)&&I(n.original.AccessToken)},children:(0,r.jsx)(C.A,{})})})})}}),I=(0,u.useCallback)((function(n){e&&(0,s.A)(l.Ay.translate("MessageConfirmRevokeApiKey"),l.Ay.translate("HeaderConfirmRevokeApiKey")).then((function(){T.mutate({key:n})})).catch((function(e){console.error("[apikeys] failed to show confirmation dialog",e)}))}),[e,T]),L=(0,u.useCallback)((function(){e&&t.e(72521).then(t.bind(t,72521)).then((function(e){(0,e.default)({title:l.Ay.translate("HeaderNewApiKey"),label:l.Ay.translate("LabelAppName"),description:l.Ay.translate("LabelAppNameExample")}).then((function(e){H.mutate({app:e})})).catch((function(){}))})).catch((function(e){console.error("[apikeys] failed to load api key popup",e)}))}),[e,H]);return(0,r.jsx)(i.A,{id:"apiKeysPage",title:l.Ay.translate("HeaderApiKeys"),className:"mainAnimatedPage type-interior",children:(0,r.jsxs)(b.A,{className:"content-primary",sx:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,r.jsx)(b.A,{sx:{marginBottom:1},children:(0,r.jsxs)(w.A,{spacing:2,children:[(0,r.jsx)(g.A,{variant:"h2",children:l.Ay.translate("HeaderApiKeys")}),(0,r.jsx)(g.A,{children:l.Ay.translate("HeaderApiKeysHelp")})]})}),(0,r.jsx)(k.zp,{table:F})]})})}},41906:function(e,n,t){t.d(n,{Y:function(){return f}});var r=t(62864),a=t(63696),o=t(5898),i=t(93721),c=t(28626),l=function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function c(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}l((r=r.apply(e,n||[])).next())}))},u=function(e,n){var t,r,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(t=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){o.label=c[1];break}if(6===c[0]&&o.label<a[1]){o.label=a[1],a=c;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(c);break}a[2]&&o.ops.pop(),o.trys.pop();continue}c=n.call(e,o)}catch(e){c=[6,e],r=0}finally{t=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},s=function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,o=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i};function f(){var e=this,n=(0,c.Q)(),t=n.dateTimeLocale,f=n.language,p=s((0,a.useState)(r.A),2),d=p[0],y=p[1],h=(0,a.useMemo)((function(){return(0,o.Tl)(f||(0,o.i5)())}),[f]),A=(0,a.useMemo)((function(){return t?(0,o.Tl)(t):h}),[t,h]);return(0,a.useEffect)((function(){l(e,void 0,void 0,(function(){var e,n;return u(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,i.Fq)((0,i.QC)(A))];case 1:return e=t.sent(),y(e),[3,3];case 2:return n=t.sent(),console.warn("[useLocale] failed to fetch dateFns locale",n),[3,3];case 3:return[2]}}))}))}),[A]),{locale:h,dateTimeLocale:A,dateFnsLocale:d}}}}]);