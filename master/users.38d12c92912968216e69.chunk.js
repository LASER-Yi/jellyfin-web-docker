"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[58809],{55340:function(e,r,t){t.r(r),t.d(r,{default:function(){return y}});var n=t(62540),a=t(63696),c=t(89100),s=t(5898),i=t(56869),o=t(47629),u=t(40532),l=t(80096),d=t(56948),f=t(96268),h=t(22696),v=t.n(h),m=t(36668),p=function(e){var r=e.user,t=e.renderImgUrl;return{__html:'<a\n        is="emby-linkbutton"\n        class="cardContent"\n        href="#/dashboard/users/profile?userId='.concat(r.Id,'"\n        >\n        ').concat(t,"\n    </a>")}},g=function(e){var r,t,a,c=e.user,i=void 0===c?{}:c,o="card squareCard scalableCard squareCard-scalable";(null===(r=i.Policy)||void 0===r?void 0:r.IsDisabled)&&(o+=" grayscale"),i.PrimaryImageTag&&i.Id&&(a=window.ApiClient.getUserImageUrl(i.Id,{width:300,tag:i.PrimaryImageTag,type:"Primary"}));var u="cardImage";(null===(t=i.Policy)||void 0===t?void 0:t.IsDisabled)&&(u+=" disabledUser");var h,g=(h=i.LastActivityDate)?s.Ay.translate("LastSeen",(0,l.A)(Date.parse(h),(0,d.OE)())):"",b=a?"<div class='".concat(u,"' style='background-image:url(").concat(a,")'></div>"):"<div class='".concat(u," ").concat((0,m.Qp)(i.Name)," flex align-items-center justify-content-center'>\n            <span class='material-icons cardImageIcon person' aria-hidden='true'></span>\n        </div>");return(0,n.jsx)("div",{"data-userid":i.Id,"data-username":i.Name,className:o,children:(0,n.jsxs)("div",{className:"cardBox visualCardBox",children:[(0,n.jsxs)("div",{className:"cardScalable visualCardBox-cardScalable",children:[(0,n.jsx)("div",{className:"cardPadder cardPadder-square"}),(0,n.jsx)("div",{dangerouslySetInnerHTML:p({user:i,renderImgUrl:b})})]}),(0,n.jsxs)("div",{className:"cardFooter visualCardBox-cardFooter",children:[(0,n.jsx)("div",{style:{textAlign:"right",float:"right",paddingTop:"5px"},children:(0,n.jsx)(f.A,{is:"paper-icon-button-light",className:"btnUserMenu flex-shrink-zero",icon:"more_vert"})}),(0,n.jsx)("div",{className:"cardText",children:(0,n.jsx)("span",{children:v()(i.Name)})}),(0,n.jsx)("div",{className:"cardText cardText-secondary",children:(0,n.jsx)("span",{children:""!=g?g:""})})]})]})})},b=t(85757),x=(t(10353),t(15453),t(7397)),y=function(){var e=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,a,c=t.call(e),s=[];try{for(;(void 0===r||r-- >0)&&!(n=c.next()).done;)s.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(t=c.return)&&t.call(c)}finally{if(a)throw a.error}}return s}((0,a.useState)([]),2),r=e[0],l=e[1],d=(0,a.useRef)(null),f=function(){i.Ay.show(),window.ApiClient.getUsers().then((function(e){l(e),i.Ay.hide()})).catch((function(e){console.error("[userprofiles] failed to fetch users",e)}))};return(0,a.useEffect)((function(){var e=d.current;if(e){f();e.addEventListener("click",(function(e){var r=o.Ay.parentWithClass(e.target,"btnUserMenu");r&&function(e){var r=o.Ay.parentWithClass(e,"card"),n=null==r?void 0:r.getAttribute("data-userid"),a=null==r?void 0:r.getAttribute("data-username");if(n){var l=[];l.push({name:s.Ay.translate("ButtonEditUser"),id:"open",icon:"mode_edit"}),l.push({name:s.Ay.translate("ButtonLibraryAccess"),id:"access",icon:"lock"}),l.push({name:s.Ay.translate("ButtonParentalControl"),id:"parentalcontrol",icon:"person"}),l.push({name:s.Ay.translate("Delete"),id:"delete",icon:"delete"}),t.e(79617).then(t.bind(t,79617)).then((function(e){e.default.show({items:l,positionTo:r,callback:function(e){switch(e){case"open":c.default.navigate("/dashboard/users/profile?userId="+n).catch((function(e){console.error("[userprofiles] failed to navigate to user edit page",e)}));break;case"access":c.default.navigate("/dashboard/users/access?userId="+n).catch((function(e){console.error("[userprofiles] failed to navigate to user library page",e)}));break;case"parentalcontrol":c.default.navigate("/dashboard/users/parentalcontrol?userId="+n).catch((function(e){console.error("[userprofiles] failed to navigate to parental control page",e)}));break;case"delete":!function(e,r){var t=r?s.Ay.translate("DeleteName",r):s.Ay.translate("DeleteUser"),n=s.Ay.translate("DeleteUserConfirmation");(0,u.A)({title:t,text:n,confirmText:s.Ay.translate("Delete"),primary:"delete"}).then((function(){i.Ay.show(),window.ApiClient.deleteUser(e).then((function(){f()})).catch((function(e){console.error("[userprofiles] failed to delete user",e)}))})).catch((function(){}))}(n,a)}}}).catch((function(){}))})).catch((function(e){console.error("[userprofiles] failed to load action sheet",e)}))}else console.error("Unexpected null user id")}(r)})),e.querySelector("#btnAddUser").addEventListener("click",(function(){c.default.navigate("/dashboard/users/add").catch((function(e){console.error("[userprofiles] failed to navigate to new user page",e)}))}))}else console.error("Unexpected null reference")}),[]),(0,n.jsx)(x.A,{id:"userProfilesPage",className:"mainAnimatedPage type-interior userProfilesPage fullWidthContent",title:s.Ay.translate("HeaderUsers"),children:(0,n.jsxs)("div",{ref:d,className:"content-primary",children:[(0,n.jsx)("div",{className:"verticalSection",children:(0,n.jsx)(b.A,{title:s.Ay.translate("HeaderUsers"),isBtnVisible:!0,btnId:"btnAddUser",btnClassName:"fab submit sectionTitleButton",btnTitle:"ButtonAddUser",btnIcon:"add",url:"https://jellyfin.org/docs/general/server/users/adding-managing-users"})}),(0,n.jsx)("div",{className:"localUsers itemsContainer vertical-wrap",children:r.map((function(e){return(0,n.jsx)(g,{user:e},e.Id)}))})]})})}},36668:function(e,r,t){t.d(r,{QW:function(){return y},Qp:function(){return g},Rn:function(){return p},Tj:function(){return h},a_:function(){return v},hn:function(){return l},n5:function(){return d},uA:function(){return m},w:function(){return f},zo:function(){return x}});var n=t(80633),a=t(51686),c=t(4452),s=t.n(c),i=2/3,o=16/9,u=1e3/185,l=function(e){return"Program"===e||"Timer"===e||"Recording"===e},d=function(e){return"play"===e.defaultAction&&e.isFolder?"link":e.isPhoto?"play":e.defaultAction},f=function(e){var r=window.screen;return!!(r&&r.availWidth-e>20)},h=function(e){return null==e?n.G8.MixedSquare:e>=1.33?n.G8.MixedBackdrop:e>.8?n.G8.MixedSquare:n.G8.MixedPortrait},v=function(e){var r;return s()(((r={card:!0})["".concat(e.shape,"Card")]=e.shape,r["".concat(e.cardCssClass)]=e.cardCssClass,r["".concat(e.cardClass)]=e.cardClass,r["card-hoverable"]=e.isDesktop,r["show-focus"]=e.isTV,r["show-animation"]=e.isTV&&e.enableFocusTransform,r.groupedCard=e.showChildCountIndicator&&e.childCount,r["card-withuserdata"]=!["MusicAlbum","MusicArtist","Audio"].includes(e.itemType),r.itemAction="button"===e.tagName,r))},m=function(e){var r;return s()(((r={cardImageContainer:!0,coveredImage:e.hasCoverImage,"coveredImage-contain":e.hasCoverImage&&"TvChannel"===e.itemType})[g(e.itemName)]=!e.imgUrl,r))},p=function(e){return s()({cardBox:!0,visualCardBox:e.cardLayout,"cardBox-bottompadded":e.hasOuterCardFooter&&!e.cardLayout})},g=function(e){return"defaultCardBackground defaultCardBackground".concat(b(e))},b=function(e){if(e){for(var r=Math.floor(e.length/2),t=String(e.slice(r,r+1).charCodeAt(0)),n=0,c=0;c<t.length;c++)n+=parseInt(t.charAt(c),10);return parseInt(String(n).slice(-1),10)%5+1}return(0,a.HO)(1,5)},x=function(e){return e?-1!==(e=e.toLowerCase()).indexOf("portrait")?i:-1!==e.indexOf("backdrop")?o:-1!==e.indexOf("square")?1:-1!==e.indexOf("banner")?u:null:null},y=function(e,r,t,n){switch(e){case"portrait":return A(r,n);case"square":return w(r,n);case"banner":return C(r);case"backdrop":return I(r,n);case"smallBackdrop":return k(r);case"overflowSmallBackdrop":return N(r,t,n);case"overflowPortrait":return B(r,t,n);case"overflowSquare":return P(r,t,n);case"overflowBackdrop":return j(r,t,n);default:return 4}},A=function(e,r){switch(!0){case r:return 5.9999999988;case e>=2200:return 10;case e>=1920:return 9.000000000009;case e>=1600:return 8;case e>=1400:return 7.0000000000021;case e>=1200:return 5.9999999988;case e>=800:return 5;case e>=700:return 4;default:return 3.0000000003}},w=function(e,r){switch(!0){case r:return 5.9999999988;case e>=2200:return 10;case e>=1920:return 9.000000000009;case e>=1600:return 8;case e>=1400:return 7.0000000000021;case e>=1200:return 5.9999999988;case e>=800:return 5;case e>=700:return 4;case e>=500:return 3.0000000003;default:return 2}},C=function(e){switch(!0){case e>=2200:return 4;case e>=1200:return 3.0000000003;case e>=800:return 2;default:return 1}},I=function(e,r){switch(!0){case r:return 4;case e>=2500:return 6;case e>=1600:return 5;case e>=1200:return 4;case e>=770:return 3;case e>=420:return 2;default:return 1}},k=function(e){switch(!0){case e>=1600:return 8;case e>=1400:return 7.000000000007001;case e>=1200:return 5.9999999988;case e>=1e3:return 5;case e>=800:return 4;case e>=500:return 3.0000000003;default:return 2}},N=function(e,r,t){switch(!0){case t:return 100/18.9;case r&&e>=800:return 100/15.5;case r:return 100/23.3;case e>=540:return 100/30;default:return 100/72}},B=function(e,r,t){switch(!0){case t:return 100/15.5;case r&&e>=1700:return 100/11.6;case r:return 100/15.5;case e>=1400:return 100/15;case e>=1200:return 100/18;case e>=760:return 100/23;case e>=400:return 100/31.5;default:return 100/42}},P=function(e,r,t){switch(!0){case t:return 100/15.5;case r&&e>=1700:return 100/11.6;case r:return 100/15.5;case e>=1400:return 100/15;case e>=1200:return 100/18;case e>=760:return 100/23;case e>=540:return 100/31.5;default:return 100/42}},j=function(e,r,t){switch(!0){case t:return 100/23.3;case r&&e>=1700:return 100/18.5;case r:return 100/23.3;case e>=1800:return 100/23.5;case e>=1400:return 100/30;case e>=760:return 2.5;case e>=640:return 100/56;default:return 100/72}}},96268:function(e,r,t){var n=t(62540),a=(t(63696),t(5898)),c=function(e){var r=e.is,t=e.id,n=e.className,a=e.title,c=e.icon,s=e.dataIndex,i=e.dataTag,o=e.dataProfileid;return{__html:'<button\n        is="'.concat(r,'"\n        type="button"\n        ').concat(t,'\n        class="').concat(n,'"\n        ').concat(a,"\n        ").concat(s,"\n        ").concat(i,"\n        ").concat(o,'\n    >\n        <span class="material-icons ').concat(c,'" aria-hidden="true"></span>\n    </button>')}};r.A=function(e){var r=e.is,t=e.id,s=e.className,i=e.title,o=e.icon,u=e.dataIndex,l=e.dataTag,d=e.dataProfileid;return(0,n.jsx)("div",{dangerouslySetInnerHTML:c({is:r,id:t?'id="'.concat(t,'"'):"",className:s,title:i?'title="'.concat(a.Ay.translate(i),'"'):"",icon:o,dataIndex:u?'data-index="'.concat(u,'"'):"",dataTag:l?'data-tag="'.concat(l,'"'):"",dataProfileid:d?'data-profileid="'.concat(d,'"'):""})})}},85757:function(e,r,t){t.d(r,{A:function(){return o}});var n=t(62540),a=(t(63696),t(96268)),c=t(5898),s=function(e){var r=e.className,t=e.title,n=e.href;return{__html:'<a\n        is="emby-linkbutton"\n        rel="noopener noreferrer"\n        class="'.concat(r,'"\n        target="_blank"\n        href="').concat(n,'"\n        >\n        ').concat(t,"\n    </a>")}},i=function(e){var r=e.className,t=e.title,a=e.url;return(0,n.jsx)("div",{dangerouslySetInnerHTML:s({className:r,title:c.Ay.translate(t),href:a})})},o=function(e){var r=e.SectionClassName,t=e.title,c=e.isBtnVisible,s=void 0!==c&&c,o=e.btnId,u=e.btnClassName,l=e.btnTitle,d=e.btnIcon,f=e.isLinkVisible,h=void 0===f||f,v=e.url;return(0,n.jsxs)("div",{className:"".concat(r," sectionTitleContainer flex align-items-center"),children:[(0,n.jsx)("h2",{className:"sectionTitle",children:t}),s&&(0,n.jsx)(a.A,{is:"emby-button",id:o,className:u,title:l,icon:d}),h&&(0,n.jsx)(i,{className:"raised button-alt headerHelpButton",title:"Help",url:v})]})}},80633:function(e,r,t){var n;function a(e){return void 0===e&&(e=!0),e?n.SquareOverflow:n.Square}function c(e){return void 0===e&&(e=!0),e?n.BackdropOverflow:n.Backdrop}function s(e){return void 0===e&&(e=!0),e?n.PortraitOverflow:n.Portrait}t.d(r,{G8:function(){return n},UI:function(){return c},xK:function(){return s},zP:function(){return a}}),function(e){e.Backdrop="backdrop",e.BackdropOverflow="overflowBackdrop",e.Banner="banner",e.Portrait="portrait",e.PortraitOverflow="overflowPortrait",e.Square="square",e.SquareOverflow="overflowSquare",e.Auto="auto",e.AutoHome="autohome",e.AutoOverflow="autooverflow",e.AutoVertical="autoVertical",e.Mixed="mixed",e.MixedSquare="mixedSquare",e.MixedBackdrop="mixedBackdrop",e.MixedPortrait="mixedPortrait"}(n||(n={}))}}]);