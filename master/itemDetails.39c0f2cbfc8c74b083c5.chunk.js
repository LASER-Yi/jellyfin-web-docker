"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7686,9337,6381],{9337:function(e,t,r){r.r(t),r.d(t,{getCommands:function(){return h},show:function(){return f}}),r(5769),r(63238),r(61418),r(17460),r(14078),r(52077),r(911),r(23938);var n=r(57366),a=r(87796),i=r(94994),s=r(12801),o=r(84881),l=r(52050),c=r(21776),d=r(48957),u=r(18613),m=r(56663);function h(e){var t=e.item,r=e.user,a=d.O.canPlay(t),s=(n.Z.operaTv||n.Z.web0s)&&!r.Policy.IsAdministrator,l=[];a&&"Photo"!==t.MediaType&&(!1!==e.play&&l.push({name:i.ZP.translate("Play"),id:"resume",icon:"play_arrow"}),e.playAllFromHere&&"Program"!==t.Type&&"TvChannel"!==t.Type&&l.push({name:i.ZP.translate("PlayAllFromHere"),id:"playallfromhere",icon:"play_arrow"})),null!==d.O.getCurrentPlayer()&&(e.stopPlayback&&l.push({name:i.ZP.translate("StopPlayback"),id:"stopPlayback",icon:"stop"}),e.clearQueue&&l.push({name:i.ZP.translate("ClearQueue"),id:"clearQueue",icon:"clear_all"})),d.O.canQueue(t)&&(!1!==e.queue&&l.push({name:i.ZP.translate("AddToPlayQueue"),id:"queue",icon:"playlist_add"}),!1!==e.queue&&l.push({name:i.ZP.translate("PlayNext"),id:"queuenext",icon:"playlist_add"})),!t.IsFolder&&"MusicArtist"!==t.Type&&"MusicGenre"!==t.Type||"livetv"===t.CollectionType||!1===e.shuffle||l.push({name:i.ZP.translate("Shuffle"),id:"shuffle",icon:"shuffle"}),"Audio"!==t.MediaType&&"MusicAlbum"!==t.Type&&"MusicArtist"!==t.Type&&"MusicGenre"!==t.Type||!1===e.instantMix||c.ZP.isLocalItem(t)||l.push({name:i.ZP.translate("InstantMix"),id:"instantmix",icon:"explore"}),l.length&&l.push({divider:!0}),s||(c.ZP.supportsAddingToCollection(t)&&l.push({name:i.ZP.translate("AddToCollection"),id:"addtocollection",icon:"playlist_add"}),c.ZP.supportsAddingToPlaylist(t)&&!1!==e.playlist&&l.push({name:i.ZP.translate("AddToPlaylist"),id:"addtoplaylist",icon:"playlist_add"})),"Timer"===t.Type&&r.Policy.EnableLiveTvManagement&&!1!==e.cancelTimer&&l.push({name:i.ZP.translate("CancelRecording"),id:"canceltimer",icon:"cancel"}),"Recording"===t.Type&&"InProgress"===t.Status&&r.Policy.EnableLiveTvManagement&&!1!==e.cancelTimer&&l.push({name:i.ZP.translate("CancelRecording"),id:"canceltimer",icon:"cancel"}),"SeriesTimer"===t.Type&&r.Policy.EnableLiveTvManagement&&!1!==e.cancelTimer&&l.push({name:i.ZP.translate("CancelSeries"),id:"cancelseriestimer",icon:"cancel"}),t.CanDelete&&!1!==e.deleteItem&&("Playlist"===t.Type||"BoxSet"===t.Type?l.push({name:i.ZP.translate("Delete"),id:"delete",icon:"delete"}):l.push({name:i.ZP.translate("DeleteMedia"),id:"delete",icon:"delete"})),t.CanDownload&&o.M.supports("filedownload")&&"Book"!==t.Type&&(l.push({name:i.ZP.translate("Download"),id:"download",icon:"file_download"}),l.push({name:i.ZP.translate("CopyStreamURL"),id:"copy-stream",icon:"content_copy"})),l.length&&l.push({divider:!0});var u=c.ZP.canEdit(r,t);if(u&&!1!==e.edit&&"SeriesTimer"!==t.Type){var m="Timer"===t.Type||"SeriesTimer"===t.Type?i.ZP.translate("Edit"):i.ZP.translate("EditMetadata");l.push({name:m,id:"edit",icon:"edit"})}return c.ZP.canEditImages(r,t)&&!1!==e.editImages&&l.push({name:i.ZP.translate("EditImages"),id:"editimages",icon:"image"}),!u||"Video"!==t.MediaType||"TvChannel"===t.Type||"Program"===t.Type||"Virtual"===t.LocationType||"Recording"===t.Type&&"Completed"!==t.Status||!1===e.editSubtitles||l.push({name:i.ZP.translate("EditSubtitles"),id:"editsubtitles",icon:"closed_caption"}),!1!==e.identify&&c.ZP.canIdentify(r,t)&&l.push({name:i.ZP.translate("Identify"),id:"identify",icon:"edit"}),t.MediaSources&&!1!==e.moremediainfo&&l.push({name:i.ZP.translate("MoreMediaInfo"),id:"moremediainfo",icon:"info"}),"Program"===t.Type&&!1!==e.record&&(t.TimerId?l.push({name:i.ZP.translate("ManageRecording"),id:"record",icon:"fiber_manual_record"}):l.push({name:i.ZP.translate("Record"),id:"record",icon:"fiber_manual_record"})),c.ZP.canRefreshMetadata(t,r)&&l.push({name:i.ZP.translate("RefreshMetadata"),id:"refresh",icon:"refresh"}),t.PlaylistItemId&&e.playlistId&&l.push({name:i.ZP.translate("RemoveFromPlaylist"),id:"removefromplaylist",icon:"remove"}),e.collectionId&&l.push({name:i.ZP.translate("RemoveFromCollection"),id:"removefromcollection",icon:"remove"}),!s&&!0===e.share&&c.ZP.canShare(t,r)&&l.push({name:i.ZP.translate("Share"),id:"share",icon:"share"}),!1!==e.sync&&c.ZP.canSync(r,t)&&l.push({name:i.ZP.translate("Sync"),id:"sync",icon:"sync"}),!1!==e.openAlbum&&t.AlbumId&&"Photo"!==t.MediaType&&l.push({name:i.ZP.translate("ViewAlbum"),id:"album",icon:"album"}),!1!==e.openArtist&&t.AlbumArtists&&t.AlbumArtists.length&&l.push({name:i.ZP.translate("ViewAlbumArtist"),id:"artist",icon:"person"}),l}function y(e,t,r,n){return function(){e({command:t,updated:r,deleted:n})}}function p(e,t,r,n){var a="play";r&&(a=n?"queueNext":"queue");var i=0;t&&e.UserData&&e.UserData.PlaybackPositionTicks&&(i=e.UserData.PlaybackPositionTicks),"Program"===e.Type?d.O[a]({ids:[e.ChannelId],startPositionTicks:i,serverId:e.ServerId}):d.O[a]({items:[e],startPositionTicks:i})}function f(e){var t=h(e);return t.length?s.default.show({items:t,positionTo:e.positionTo,resolveOnClick:["share"]}).then((function(t){return function(e,t,n){var s=e.Id,o=e.ServerId,c=u.Z.getApiClient(o);return new Promise((function(u,h){switch(t){case"addtocollection":r.e(9449).then(r.bind(r,19449)).then((function(e){new(0,e.default)({items:[s],serverId:o}).then(y(u,t,!0),y(u,t))}));break;case"addtoplaylist":r.e(3126).then(r.bind(r,43126)).then((function(e){new(0,e.default)({items:[s],serverId:o}).then(y(u,t,!0),y(u,t))}));break;case"download":r.e(6381).then(r.bind(r,26381)).then((function(r){var n=c.getItemDownloadUrl(s);r.download([{url:n,itemId:s,serverId:o,title:e.Name,filename:e.Path.replace(/^.*[\\/]/,"")}]),y(y(u,t),t)()}));break;case"copy-stream":var f=c.getItemDownloadUrl(s);(0,a.J)(f).then((function(){(0,m.Z)(i.ZP.translate("CopyStreamURLSuccess"))})).catch((function(){prompt(i.ZP.translate("CopyStreamURL"),f)})),y(u,t)();break;case"editsubtitles":r.e(327).then(r.bind(r,327)).then((function(e){e.default.show(s,o).then(y(u,t,!0),y(u,t))}));break;case"edit":(function(e,t){return new Promise((function(n,a){var i=e.serverInfo().Id;"Timer"===t.Type?r.e(1341).then(r.bind(r,21341)).then((function(e){e.default.show(t.Id,i).then(n,a)})):"SeriesTimer"===t.Type?r.e(4896).then(r.bind(r,4896)).then((function(e){e.default.show(t.Id,i).then(n,a)})):r.e(3786).then(r.bind(r,43786)).then((function(e){e.default.show(t.Id,i).then(n,a)}))}))})(c,e).then(y(u,t,!0),y(u,t));break;case"editimages":r.e(3635).then(r.bind(r,23635)).then((function(e){e.show({itemId:s,serverId:o}).then(y(u,t,!0),y(u,t))}));break;case"identify":Promise.resolve().then(r.bind(r,9599)).then((function(e){e.show(s,o).then(y(u,t,!0),y(u,t))}));break;case"moremediainfo":r.e(4166).then(r.bind(r,14166)).then((function(e){e.show(s,o).then(y(u,t),y(u,t))}));break;case"refresh":!function(e,t){r.e(6929).then(r.bind(r,36929)).then((function(r){new(0,r.default)({itemIds:[t.Id],serverId:e.serverInfo().Id,mode:"CollectionFolder"===t.Type?"scan":null}).show()}))}(c,e),y(u,t)();break;case"open":l.appRouter.showItem(e),y(u,t)();break;case"play":p(e,!1),y(u,t)();break;case"resume":p(e,!0),y(u,t)();break;case"queue":p(e,!1,!0),y(u,t)();break;case"queuenext":p(e,!1,!0,!0),y(u,t)();break;case"stopPlayback":d.O.stop();break;case"clearQueue":d.O.clearQueue();break;case"record":r.e(9553).then(r.bind(r,45012)).then((function(e){e.default.show(s,o).then(y(u,t,!0),y(u,t))}));break;case"shuffle":d.O.shuffle(e),y(u,t)();break;case"instantmix":d.O.instantMix(e),y(u,t)();break;case"delete":(function(e,t){return new Promise((function(e,n){r.e(5854).then(r.bind(r,35854)).then((function(r){r.deleteItem({item:t,navigate:!1}).then((function(){e(!0)}),n)}))}))})(0,e).then(y(u,t,!0,!0),y(u,t));break;case"share":navigator.share({title:e.Name,text:e.Overview,url:"".concat(c.serverAddress(),"/web/index.html").concat(l.appRouter.getRouteUrl(e))});break;case"album":l.appRouter.showItem(e.AlbumId,e.ServerId),y(u,t)();break;case"artist":l.appRouter.showItem(e.AlbumArtists[0].Id,e.ServerId),y(u,t)();break;case"playallfromhere":case"queueallfromhere":y(u,t)();break;case"removefromplaylist":c.ajax({url:c.getUrl("Playlists/"+n.playlistId+"/Items",{EntryIds:[e.PlaylistItemId].join(",")}),type:"DELETE"}).then((function(){y(u,t,!0)()}));break;case"removefromcollection":c.ajax({type:"DELETE",url:c.getUrl("Collections/"+n.collectionId+"/Items",{Ids:[e.Id].join(",")})}).then((function(){y(u,t,!0)()}));break;case"canceltimer":!function(e,t,n,a){Promise.resolve().then(r.bind(r,30531)).then((function(e){var r=e.default,i=t.TimerId||t.Id;r.cancelTimerWithConfirmation(i,t.ServerId).then((function(){y(n,a,!0)()}))}))}(0,e,u,t);break;case"cancelseriestimer":!function(e,t,n,a){Promise.resolve().then(r.bind(r,30531)).then((function(e){e.default.cancelSeriesTimerWithConfirmation(t.Id,t.ServerId).then((function(){y(n,a,!0)()}))}))}(0,e,u,t);break;default:h()}}))}(e.item,t,e)})):Promise.reject()}t.default={getCommands:h,show:f}},71341:function(e,t,r){r.r(t),r.d(t,{default:function(){return oe}}),r(72410),r(15610),r(25901),r(92189),r(91047),r(5769),r(63238),r(61418),r(17460),r(14078),r(27471),r(55849),r(95289),r(95163),r(32081),r(69217),r(61013),r(98010),r(23938),r(56446),r(52077),r(911);var n=r(63626),a=r(31699),i=r.n(a),s=r(65009),o=r.n(s),l=r(1294),c=r(84881),d=r(28540),u=r(52050),m=r(30325),h=r(47005),y=r(60934),p=r(61570),f=r(61693),v=r(70350),S=r(57084),T=r(63873),I=r(9337),g=r(21776),b=r(72365),P=r(98301),L=r(71487),C=r(94994),A=r(57366),M=r(48957),w=(r(82427),r(12291),r(38228),r(36662),r(27636),r(24432),r(15856),r(61008)),Z=r(60635),q=r(18613),k=r(3137),x=r(26381);function D(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=H(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw i}}}}function H(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function U(e){Promise.resolve().then(r.bind(r,87680)).then((function(t){t.default.autoFocus(e)}))}function N(e,t){var r=t.id;if(r)return e.getItem(e.getCurrentUserId(),r);if(t.seriesTimerId)return e.getLiveTvSeriesTimer(t.seriesTimerId);if(t.genre)return e.getGenre(t.genre,e.getCurrentUserId());if(t.musicgenre)return e.getMusicGenre(t.musicgenre,e.getCurrentUserId());if(t.musicartist)return e.getArtist(t.musicartist,e.getCurrentUserId());throw new Error("Invalid request")}function B(e,t,r){var n,a=D(e.querySelectorAll("."+t));try{for(a.s();!(n=a.n()).done;){var i=n.value;r?i.classList.remove("hide"):i.classList.add("hide")}}catch(e){a.e(e)}finally{a.f()}}function R(e,t,r){return{item:e,open:!1,play:!1,playAllFromHere:!1,queueAllFromHere:!1,positionTo:r,cancelTimer:!1,record:!1,deleteItem:!0===e.CanDelete,shuffle:!1,instantMix:!1,user:t,share:!0}}function O(e,t,r,n){var a=e.querySelector(".selectSource");if(!r.MediaSources||!g.ZP.supportsMediaSourceSelection(r)||-1===M.O.getSupportedCommands().indexOf("PlayMediaSource")||!M.O.canPlay(r))return e.querySelector(".trackSelections").classList.add("hide"),a.innerHTML="",e.querySelector(".selectVideo").innerHTML="",e.querySelector(".selectAudio").innerHTML="",void(e.querySelector(".selectSubtitles").innerHTML="");var i=r.MediaSources,s=[],l=[];i.forEach((function(e){!e.Name.endsWith("p")&&!e.Name.endsWith("i")||Number.isNaN(parseInt(e.Name,10))?l.push(e):s.push(e)})),s.sort((function(e,t){return parseInt(t.Name,10)-parseInt(e.Name,10)})),l.sort((function(e,t){var r=e.Name.toUpperCase(),n=t.Name.toUpperCase();return r<n?-1:r>n?1:0})),i=[],s.forEach((function(e){i.push(e)})),l.forEach((function(e){i.push(e)})),t._currentPlaybackMediaSources=i,e.querySelector(".trackSelections").classList.remove("hide"),a.setLabel(C.ZP.translate("LabelVersion"));var c=a.value,d=i[0].Id;a.innerHTML=i.map((function(e){var t=e.Id===d?" selected":"";return'<option value="'+e.Id+'"'+t+">"+o()(e.Name)+"</option>"})).join(""),i.length>1?e.querySelector(".selectSourceContainer").classList.remove("hide"):e.querySelector(".selectSourceContainer").classList.add("hide"),(a.value!==c||n)&&(V(e,i),F(e,i),j(e,i))}function V(e,t){var r=e.querySelector(".selectSource").value,n=t.filter((function(e){return e.Id===r}))[0].MediaStreams.filter((function(e){return"Video"===e.Type})),a=e.querySelector(".selectVideo");a.setLabel(C.ZP.translate("Video"));var i=n.length?n[0].Index:-1;a.innerHTML=n.map((function(e){var t=e.Index===i?" selected":"",r=[],n=v.ZP.getResolutionText(e);return n&&r.push(n),e.Codec&&r.push(e.Codec.toUpperCase()),'<option value="'+e.Index+'" '+t+">"+(e.DisplayTitle||r.join(" "))+"</option>"})).join(""),a.setAttribute("disabled","disabled"),n.length?e.querySelector(".selectVideoContainer").classList.remove("hide"):e.querySelector(".selectVideoContainer").classList.add("hide")}function F(e,t){var r=e.querySelector(".selectSource").value,n=t.filter((function(e){return e.Id===r}))[0],a=n.MediaStreams.filter((function(e){return"Audio"===e.Type}));a.sort(g.ZP.sortTracks);var i=e.querySelector(".selectAudio");i.setLabel(C.ZP.translate("Audio"));var s=n.DefaultAudioStreamIndex;i.innerHTML=a.map((function(e){var t=e.Index===s?" selected":"";return'<option value="'+e.Index+'" '+t+">"+e.DisplayTitle+"</option>"})).join(""),a.length>1?i.removeAttribute("disabled"):i.setAttribute("disabled","disabled"),a.length?e.querySelector(".selectAudioContainer").classList.remove("hide"):e.querySelector(".selectAudioContainer").classList.add("hide")}function j(e,t){var r=e.querySelector(".selectSource").value,n=t.filter((function(e){return e.Id===r}))[0],a=n.MediaStreams.filter((function(e){return"Subtitle"===e.Type}));a.sort(g.ZP.sortTracks);var i=e.querySelector(".selectSubtitles");i.setLabel(C.ZP.translate("Subtitles"));var s=null==n.DefaultSubtitleStreamIndex?-1:n.DefaultSubtitleStreamIndex,o=-1===s?" selected":"";i.innerHTML='<option value="-1">'+C.ZP.translate("Off")+"</option>"+a.map((function(e){return o=e.Index===s?" selected":"",'<option value="'+e.Index+'" '+o+">"+e.DisplayTitle+"</option>"})).join(""),a.length>0?i.removeAttribute("disabled"):i.setAttribute("disabled","disabled"),a.length?e.querySelector(".selectSubtitlesContainer").classList.remove("hide"):e.querySelector(".selectSubtitlesContainer").classList.add("hide")}function W(e,t){var r=!1;if("Program"==t.Type){var n=new Date;n>=f.ZP.parseISO8601Date(t.StartDate,!0)&&n<f.ZP.parseISO8601Date(t.EndDate,!0)?(B(e,"btnPlay",!0),r=!0):B(e,"btnPlay"),B(e,"btnReplay"),B(e,"btnInstantMix"),B(e,"btnShuffle")}else if(M.O.canPlay(t)){B(e,"btnPlay",!0),B(e,"btnInstantMix",-1!==["Audio","MusicAlbum","MusicGenre","MusicArtist"].indexOf(t.Type)),B(e,"btnShuffle",t.IsFolder||-1!==["MusicAlbum","MusicGenre","MusicArtist"].indexOf(t.Type)),r=!0;var a=t.UserData&&t.UserData.PlaybackPositionTicks>0;B(e,"btnReplay",a);var i,s=D(e.querySelectorAll(".btnPlay"));try{for(s.s();!(i=s.n()).done;){i.value.title=a?C.ZP.translate("ButtonResume"):C.ZP.translate("Play")}}catch(e){s.e(e)}finally{s.f()}}else B(e,"btnPlay"),B(e,"btnReplay"),B(e,"btnInstantMix"),B(e,"btnShuffle");return r}function _(e,t,r){var n,a=[],i=D(e);try{for(i.s();!(n=i.n()).done;){var s=n.value,l=u.appRouter.getRouteUrl(s,{context:r,itemType:"MusicArtist",serverId:t});a.push('<a style="color:inherit;" class="button-link" is="emby-linkbutton" href="'+l+'">'+o()(s.Name)+"</a>")}}catch(e){i.e(e)}finally{i.f()}return a.join(" / ")}function z(e,t){(t.LocalTrailerCount||t.RemoteTrailers&&t.RemoteTrailers.length)&&-1!==M.O.getSupportedCommands().indexOf("PlayTrailers")?B(e,"btnPlayTrailer",!0):B(e,"btnPlayTrailer")}function G(e){!m.Z.mobile&&b.ZP.getWindowSize().innerWidth>=1e3?(0,S.pZ)([e]):(0,S.rs)()}function Q(e,t,a,i,s){var l=q.Z.getApiClient(i.ServerId);L.Z.setTitle(""),function(e,t){!function(e,t,r){var n=[];n.push(t);var a=p.default.getCardsHtml(n,{shape:"auto",showTitle:!1,centerText:!0,overlayText:!1,transition:!1,disableHoverMenu:!0,disableIndicators:!0,overlayPlayButton:m.Z.desktop,action:m.Z.desktop?"resume":"none",width:.25*b.ZP.getWindowSize().innerWidth});e.innerHTML=a,r.lazyChildren(e),e.querySelector("a, button").tabIndex=-1}(e.querySelector(".detailImageContainer"),t,P.default)}(t,i),m.Z.tv||(function(e,t,r){var n=e.querySelector(".detailLogo"),a=function(e,t,r){return(r=r||{}).type="Logo",e.ImageTags&&e.ImageTags.Logo?(r.tag=e.ImageTags.Logo,t.getScaledImageUrl(e.Id,r)):e.ParentLogoImageTag?(r.tag=e.ParentLogoImageTag,t.getScaledImageUrl(e.ParentLogoItemId,r)):null}(t,r,{});a?(n.classList.remove("hide"),P.default.setLazyImage(n,a)):n.classList.add("hide")}(t,i,l),function(e,t,r){if(!y.detailsBanner())return!1;if("Person"===t.Type||"Book"===t.Type)return!1;var n,a=e.querySelector("#itemBackdrop");t.BackdropImageTags&&t.BackdropImageTags.length?(n=r.getScaledImageUrl(t.Id,{type:"Backdrop",maxWidth:b.ZP.getScreenWidth(),index:0,tag:t.BackdropImageTags[0]}),P.default.lazyImage(a,n)):t.ParentBackdropItemId&&t.ParentBackdropImageTags&&t.ParentBackdropImageTags.length?(n=r.getScaledImageUrl(t.ParentBackdropItemId,{type:"Backdrop",maxWidth:b.ZP.getScreenWidth(),index:0,tag:t.ParentBackdropImageTags[0]}),P.default.lazyImage(a,n)):t.ImageTags&&t.ImageTags.Primary?(n=r.getScaledImageUrl(t.Id,{type:"Primary",maxWidth:b.ZP.getScreenWidth(),tag:t.ImageTags.Primary}),P.default.lazyImage(a,n)):a.style.backgroundImage=""}(t,i,l)),G(i),t.querySelector(".detailPagePrimaryContainer").classList.add("detailRibbon"),function(e,t,r){var n=[],a=!1;e.AlbumArtists?(n.push(_(e.AlbumArtists,e.ServerId,r)),a=!0):e.ArtistItems&&e.ArtistItems.length&&"MusicVideo"===e.Type?(n.push(_(e.ArtistItems,e.ServerId,r)),a=!0):e.SeriesName&&"Episode"===e.Type?n.push('<a style="color:inherit;" class="button-link itemAction" is="emby-linkbutton" href="#" data-action="link" data-id="'.concat(e.SeriesId,'" data-serverid="').concat(e.ServerId,'" data-type="Series" data-isfolder="true">').concat(o()(e.SeriesName),"</a>")):(e.IsSeries||e.EpisodeTitle)&&n.push(o()(e.Name)),e.SeriesName&&"Season"===e.Type?n.push('<a style="color:inherit;" class="button-link itemAction" is="emby-linkbutton" href="#" data-action="link" data-id="'.concat(e.SeriesId,'" data-serverid="').concat(e.ServerId,'" data-type="Series" data-isfolder="true">').concat(o()(e.SeriesName),"</a>")):null!=e.ParentIndexNumber&&"Episode"===e.Type?n.push('<a style="color:inherit;" class="button-link itemAction" is="emby-linkbutton" href="#" data-action="link" data-id="'.concat(e.SeasonId,'" data-serverid="').concat(e.ServerId,'" data-type="Season" data-isfolder="true">').concat(o()(e.SeasonName),"</a>")):null!=e.ParentIndexNumber&&e.IsSeries?n.push(o()(e.SeasonName||"S"+e.ParentIndexNumber)):e.Album&&e.AlbumId&&("MusicVideo"===e.Type||"Audio"===e.Type)?n.push('<a style="color:inherit;" class="button-link itemAction" is="emby-linkbutton" href="#" data-action="link" data-id="'.concat(e.AlbumId,'" data-serverid="').concat(e.ServerId,'" data-type="MusicAlbum" data-isfolder="true">').concat(o()(e.Album),"</a>")):e.Album&&n.push(o()(e.Album));var i="",s=n[0],l=n[1];n.length&&(i=a?m.Z.mobile?'<h3 class="parentName musicParentName">'+n.join("</br>")+"</h3>":'<h3 class="parentName musicParentName focuscontainer-x">'+n.join(" - ")+"</h3>":'<h1 class="parentName focuscontainer-x">'+s+"</h1>");var c=o()(g.ZP.getDisplayName(e,{includeParentInfo:!1}));i&&!a?i+=l?'<h3 class="itemName infoText subtitle focuscontainer-x">'+l+" - "+c+"</h3>":'<h3 class="itemName infoText subtitle">'+c+"</h3>":i=e.OriginalTitle&&e.OriginalTitle!=e.Name?'<h1 class="itemName infoText parentNameLast withOriginalTitle">'+c+"</h1>"+i:'<h1 class="itemName infoText parentNameLast">'+c+"</h1>"+i,e.OriginalTitle&&e.OriginalTitle!=e.Name&&(i+='<h4 class="itemName infoText originalTitle">'+o()(e.OriginalTitle)+"</h4>"),t.innerHTML=i,i.length?t.classList.remove("hide"):t.classList.add("hide")}(i,t.querySelector(".nameContainer"),a.context),J(t,i,l,a.context),O(t,e,i),function(e,t,n,a){if("SeriesTimer"===t.Type){if(a.Policy.EnableLiveTvManagement)return r.e(4896).then(r.bind(r,4896)).then((function(r){r.default.embed(t,n.serverId(),{context:e.querySelector(".seriesRecordingEditor")})})),e.querySelector(".seriesTimerScheduleSection").classList.remove("hide"),B(e,"btnCancelSeriesTimer",!0),void function(e,t,r){t.getLiveTvTimers({UserId:t.getCurrentUserId(),ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Thumb",SortBy:"StartDate",EnableTotalRecordCount:!1,EnableUserData:!1,SeriesTimerId:r,Fields:"ChannelInfo,ChannelImage"}).then((function(t){t.Items.length&&t.Items[0].SeriesTimerId!=r&&(t.Items=[]);var n=function(e){var t="";return t+='<div is="emby-itemscontainer" class="itemsContainer vertical-list" data-contextmenu="false">',(t+=T.Z.getListViewHtml({items:e,enableUserDataButtons:!1,image:!0,imageSource:"channel",showProgramDateTime:!0,showChannel:!1,mediaInfo:!1,action:"none",moreButton:!1,recordButton:!1}))+"</div>"}(t.Items),a=e.querySelector(".seriesTimerSchedule");a.innerHTML=n,P.default.lazyChildren(a)}))}(e,n,t.Id);e.querySelector(".seriesTimerScheduleSection").classList.add("hide"),B(e,"btnCancelSeriesTimer")}else B(e,"btnCancelSeriesTimer")}(t,i,l,s),function(e,t,r,n){"Recording"===t.Type&&n.Policy.EnableLiveTvManagement&&t.TimerId&&"InProgress"===t.Status?B(e,"btnCancelTimer",!0):B(e,"btnCancelTimer")}(t,i,0,s),X(t,i,0,a.context,s);var u=W(t,i);z(t,i),"Program"!==i.Type||u?B(t,"mainDetailButtons",!0):B(t,"mainDetailButtons"),function(e,t,n,a){if(!e.currentRecordingFields){var i=t.querySelector(".recordingFields");"Program"==n.Type&&a.Policy.EnableLiveTvManagement?r.e(9656).then(r.bind(r,9656)).then((function(t){var r=t.default;e.currentRecordingFields=new r({parent:i,programId:n.Id,serverId:n.ServerId}),i.classList.remove("hide")})):(i.classList.add("hide"),i.innerHTML="")}}(e,t,i,s);var h=(i.MediaSources||[]).filter((function(e){return"Grouping"==e.Type}));s.Policy.IsAdministrator&&h.length?t.querySelector(".btnSplitVersions").classList.remove("hide"):t.querySelector(".btnSplitVersions").classList.add("hide"),I.default.getCommands(R(i,s)).length?B(t,"btnMoreCommands",!0):B(t,"btnMoreCommands");var v=t.querySelector("#itemBirthday");if("Person"==i.Type&&i.PremiereDate)try{var S=f.ZP.parseISO8601Date(i.PremiereDate,!0),A=(0,n.Z)({start:S,end:Date.now()});v.classList.remove("hide"),i.EndDate?v.innerHTML=C.ZP.translate("BirthDateValue",S.toLocaleDateString()):v.innerHTML="".concat(C.ZP.translate("BirthDateValue",S.toLocaleDateString())," ").concat(C.ZP.translate("AgeValue",A.years))}catch(e){console.error(e),v.classList.add("hide")}else v.classList.add("hide");var M=t.querySelector("#itemDeathDate");if("Person"==i.Type&&i.EndDate)try{var w=f.ZP.parseISO8601Date(i.EndDate,!0);if(M.classList.remove("hide"),i.PremiereDate){var Z=f.ZP.parseISO8601Date(i.PremiereDate,!0),k=(0,n.Z)({start:Z,end:w});M.innerHTML="".concat(C.ZP.translate("DeathDateValue",w.toLocaleDateString())," ").concat(C.ZP.translate("AgeValue",k.years))}else M.innerHTML=C.ZP.translate("DeathDateValue",w.toLocaleDateString())}catch(e){console.error(e),M.classList.add("hide")}else M.classList.add("hide");var x=t.querySelector("#itemBirthLocation");if("Person"==i.Type&&i.ProductionLocations&&i.ProductionLocations.length){var D=i.ProductionLocations[0];D=!m.Z.tv&&c.M.supports("externallinks")?'<a is="emby-linkbutton" class="button-link textlink" target="_blank" href="https://www.openstreetmap.org/search?query='.concat(encodeURIComponent(D),'">').concat(o()(D),"</a>"):o()(D),x.classList.remove("hide"),x.innerHTML=C.ZP.translate("BirthPlaceValue",D)}else x.classList.add("hide");!function(e,t){"Audio"==t.MediaType||"MusicAlbum"==t.Type||"Book"==t.MediaType||"Photo"==t.MediaType?e.querySelector("#peopleHeader").innerHTML=C.ZP.translate("People"):e.querySelector("#peopleHeader").innerHTML=C.ZP.translate("HeaderCastAndCrew")}(t,i),d.ZP.hide(),"Book"===i.Type&&i.CanDownload&&c.M.supports("filedownload")&&B(t,"btnDownload",!0),U(t)}function X(e,t,n,a,i){e.querySelector(".collectionItems").innerHTML="","Playlist"==t.Type?(e.querySelector("#childrenCollapsible").classList.remove("hide"),function(e,t){r.e(3494).then(r.bind(r,83494)).then((function(r){r.default.render(e,t)}))}(e,t)):"Studio"==t.Type||"Person"==t.Type||"Genre"==t.Type||"MusicGenre"==t.Type||"MusicArtist"==t.Type?(e.querySelector("#childrenCollapsible").classList.remove("hide"),function(e,t){r.e(2457).then(r.bind(r,92457)).then((function(r){r.default.renderItems(e,t)}))}(e,t)):t.IsFolder?("BoxSet"==t.Type&&e.querySelector("#childrenCollapsible").classList.add("hide"),$(e,t)):e.querySelector("#childrenCollapsible").classList.add("hide"),"Series"==t.Type?(function(e,t){var r=q.Z.getApiClient(t.ServerId);r.getLiveTvPrograms({UserId:r.getCurrentUserId(),HasAired:!1,SortBy:"StartDate",EnableTotalRecordCount:!1,EnableImages:!1,ImageTypeLimit:0,Limit:50,EnableUserData:!1,LibrarySeriesId:t.Id}).then((function(t){t.Items.length?e.querySelector("#seriesScheduleSection").classList.remove("hide"):e.querySelector("#seriesScheduleSection").classList.add("hide"),e.querySelector("#seriesScheduleList").innerHTML=T.Z.getListViewHtml({items:t.Items,enableUserDataButtons:!1,showParentTitle:!1,image:!1,showProgramDateTime:!0,mediaInfo:!1,showTitle:!0,moreButton:!1,action:"programdialog"}),d.ZP.hide()}))}(e,t),function(e,t,r){var n=e.querySelector(".nextUpSection");"Series"==t.Type?q.Z.getApiClient(t.ServerId).getNextUpEpisodes({SeriesId:t.Id,UserId:r.Id,Fields:"MediaSourceCount"}).then((function(e){e.Items.length?n.classList.remove("hide"):n.classList.add("hide");var r=p.default.getCardsHtml({items:e.Items,shape:"overflowBackdrop",showTitle:!0,displayAsSpecial:"Season"==t.Type&&t.IndexNumber,overlayText:!1,centerText:!0,overlayPlayButton:!0}),a=n.querySelector(".nextUpItems");a.innerHTML=r,P.default.lazyChildren(a)})):n.classList.add("hide")}(e,t,i)):e.querySelector(".nextUpSection").classList.add("hide"),function(e,t){var n=t.Chapters||[];if(n.length&&!n[0].ImageTag&&(n=[]),n.length){e.querySelector("#scenesCollapsible").classList.remove("hide");var a=e.querySelector("#scenesContent");r.e(8616).then(r.bind(r,8616)).then((function(e){e.default.buildChapterCards(t,n,{itemsContainer:a,backdropShape:"overflowBackdrop",squareShape:"overflowSquare",imageBlurhashes:t.ImageBlurHashes})}))}else e.querySelector("#scenesCollapsible").classList.add("hide")}(e,t),t.SpecialFeatureCount>0?(e.querySelector("#specialsCollapsible").classList.remove("hide"),function(e,t,r){q.Z.getApiClient(t.ServerId).getSpecialFeatures(r.Id,t.Id).then((function(t){var r=e.querySelector("#specialsContent");r.innerHTML=ne(t),P.default.lazyChildren(r)}))}(e,t,i)):e.querySelector("#specialsCollapsible").classList.add("hide"),ae(e,t),t.PartCount&&t.PartCount>1?(e.querySelector("#additionalPartsCollapsible").classList.remove("hide"),function(e,t,r){q.Z.getApiClient(t.ServerId).getAdditionalVideoParts(r.Id,t.Id).then((function(t){if(t.Items.length){e.querySelector("#additionalPartsCollapsible").classList.remove("hide");var r=e.querySelector("#additionalPartsContent");r.innerHTML=ne(t.Items),P.default.lazyChildren(r)}else e.querySelector("#additionalPartsCollapsible").classList.add("hide")}))}(e,t,i)):e.querySelector("#additionalPartsCollapsible").classList.add("hide"),"MusicAlbum"==t.Type?function(e,t,r){q.Z.getApiClient(t.ServerId).getItems(r.Id,{SortBy:"SortName",SortOrder:"Ascending",IncludeItemTypes:"MusicVideo",Recursive:!0,Fields:"PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount",AlbumIds:t.Id}).then((function(t){if(t.Items.length){e.querySelector("#musicVideosCollapsible").classList.remove("hide");var r=e.querySelector("#musicVideosContent");r.innerHTML=ne(t.Items),P.default.lazyChildren(r)}else e.querySelector("#musicVideosCollapsible").classList.add("hide")}))}(e,t,i):e.querySelector("#musicVideosCollapsible").classList.add("hide")}function Y(e,t){var r=t.target,n="detail-clamp-text";e.classList.contains(n)?(e.classList.remove(n),r.innerHTML=C.ZP.translate("ShowLess")):(e.classList.add(n),r.innerHTML=C.ZP.translate("ShowMore"))}function J(e,t,r,n,a){!function(e,t,r){var n=e.querySelector("#similarCollapsible");if(n){if("Movie"!=t.Type&&"Trailer"!=t.Type&&"Series"!=t.Type&&"Program"!=t.Type&&"Recording"!=t.Type&&"MusicAlbum"!=t.Type&&"MusicArtist"!=t.Type&&"Playlist"!=t.Type)return void n.classList.add("hide");n.classList.remove("hide");var a=q.Z.getApiClient(t.ServerId),i={userId:a.getCurrentUserId(),limit:12,fields:"PrimaryImageAspectRatio,CanDelete"};"MusicAlbum"==t.Type&&t.AlbumArtists&&t.AlbumArtists.length&&(i.ExcludeArtistIds=t.AlbumArtists[0].Id),a.getSimilarItems(t.Id,i).then((function(e){if(e.Items.length){n.classList.remove("hide");var a="";a+=p.default.getCardsHtml({items:e.Items,shape:"autooverflow",showParentTitle:"MusicAlbum"==t.Type,centerText:!0,showTitle:!0,context:r,lazy:!0,showDetailsMenu:!0,coverImage:"MusicAlbum"==t.Type||"MusicArtist"==t.Type,overlayPlayButton:!0,overlayText:!1,showYear:"Movie"===t.Type||"Trailer"===t.Type||"Series"===t.Type});var i=n.querySelector(".similarContent");i.innerHTML=a,P.default.lazyChildren(i)}else n.classList.add("hide")}))}}(e,t,n),function(e,t,r){var n=e.querySelector(".moreFromSeasonSection");if(n){if("Episode"!==t.Type||!t.SeasonId||!t.SeriesId)return void n.classList.add("hide");var a=r.getCurrentUserId();r.getEpisodes(t.SeriesId,{SeasonId:t.SeasonId,UserId:a,Fields:"ItemCounts,PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount"}).then((function(e){if(e.Items.length<2)n.classList.add("hide");else{n.classList.remove("hide"),n.querySelector("h2").innerText=C.ZP.translate("MoreFromValue",t.SeasonName);var r=n.querySelector(".itemsContainer");p.default.buildCards(e.Items,{parentContainer:n,itemsContainer:r,shape:"autooverflow",sectionTitleTagName:"h2",scalable:!0,showTitle:!0,overlayText:!1,centerText:!0,includeParentInfoInTitle:!1,allowBottomPadding:!1});var a=r.querySelector('.card[data-id="'+t.Id+'"]');a&&setTimeout((function(){n.querySelector(".emby-scroller").toStart(a.previousSibling||a,!0)}),100)}}))}}(e,t,r),function(e,t,r){var n=e.querySelector(".moreFromArtistSection");if(n){if("MusicArtist"===t.Type){if(!r.isMinServerVersion("3.4.1.19"))return void n.classList.add("hide")}else if("MusicAlbum"!==t.Type||!t.AlbumArtists||!t.AlbumArtists.length)return void n.classList.add("hide");var a={IncludeItemTypes:"MusicAlbum",Recursive:!0,ExcludeItemIds:t.Id,SortBy:"PremiereDate,ProductionYear,SortName",SortOrder:"Descending"};"MusicArtist"===t.Type?a.ContributingArtistIds=t.Id:a.ContributingArtistIds=t.AlbumArtists.map((function(e){return e.Id})).join(","),r.getItems(r.getCurrentUserId(),a).then((function(e){e.Items.length?(n.classList.remove("hide"),"MusicArtist"===t.Type?n.querySelector("h2").innerText=C.ZP.translate("HeaderAppearsOn"):n.querySelector("h2").innerText=C.ZP.translate("MoreFromValue",t.AlbumArtists[0].Name),p.default.buildCards(e.Items,{parentContainer:n,itemsContainer:n.querySelector(".itemsContainer"),shape:"autooverflow",sectionTitleTagName:"h2",scalable:!0,coverImage:"MusicArtist"===t.Type||"MusicAlbum"===t.Type,showTitle:!0,showParentTitle:!1,centerText:!0,overlayText:!1,overlayPlayButton:!0,showYear:!0})):n.classList.add("hide")}))}}(e,t,r),function(e,t,r){var n=(t.People||[]).filter((function(e){return"Director"===e.Type})),a=n.map((function(e){return'<a style="color:inherit;" class="button-link" is="emby-linkbutton" href="'+u.appRouter.getRouteUrl({Name:e.Name,Type:"Person",ServerId:t.ServerId,Id:e.Id},{context:r})+'">'+o()(e.Name)+"</a>"})).join(", ");e.querySelector(".directorsLabel").innerHTML=C.ZP.translate(n.length>1?"Directors":"Director"),e.querySelector(".directors").innerHTML=a;var i=e.querySelector(".directorsGroup");n.length?i.classList.remove("hide"):i.classList.add("hide")}(e,t,n),function(e,t,r){var n=(t.People||[]).filter((function(e){return"Writer"===e.Type})),a=n.map((function(e){return'<a style="color:inherit;" class="button-link" is="emby-linkbutton" href="'+u.appRouter.getRouteUrl({Name:e.Name,Type:"Person",ServerId:t.ServerId,Id:e.Id},{context:r})+'">'+o()(e.Name)+"</a>"})).join(", ");e.querySelector(".writersLabel").innerHTML=C.ZP.translate(n.length>1?"Writers":"Writer"),e.querySelector(".writers").innerHTML=a;var i=e.querySelector(".writersGroup");n.length?i.classList.remove("hide"):i.classList.add("hide")}(e,t,n),function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ee(t),n=t.GenreItems||[],a="music"===r?"MusicGenre":"Genre",i=n.map((function(e){return'<a style="color:inherit;" class="button-link" is="emby-linkbutton" href="'+u.appRouter.getRouteUrl({Name:e.Name,Type:a,ServerId:t.ServerId,Id:e.Id},{context:r})+'">'+o()(e.Name)+"</a>"})).join(", ");e.querySelector(".genresLabel").innerHTML=C.ZP.translate(n.length>1?"Genres":"Genre"),e.querySelector(".genres").innerHTML=i;var s=e.querySelector(".genresGroup");n.length?s.classList.remove("hide"):s.classList.add("hide")}(e,t,n),function(e,t,r){"TvChannel"===r.Type&&(e.querySelector(".programGuideSection").classList.remove("hide"),t.getLiveTvPrograms({ChannelIds:r.Id,UserId:t.getCurrentUserId(),HasAired:!1,SortBy:"StartDate",EnableTotalRecordCount:!1,EnableImages:!1,ImageTypeLimit:0,EnableUserData:!1}).then((function(t){!function(e,t){for(var r="",n=[],a=null,i=0,s=t.Items.length;i<s;i++){var o=t.Items[i],l=f.ZP.parseISO8601Date(o.StartDate);a&&a.toDateString()===l.toDateString()||(n.length&&(r+='<div class="verticalSection verticalDetailSection">',r+='<h2 class="sectionTitle padded-left">'+f.ZP.toLocaleDateString(a,{weekday:"long",month:"long",day:"numeric"})+"</h2>",r+='<div is="emby-itemscontainer" class="vertical-list padded-left padded-right">'+T.Z.getListViewHtml({items:n,enableUserDataButtons:!1,showParentTitle:!0,image:!1,showProgramTime:!0,mediaInfo:!1,parentTitleWithTitle:!0})+"</div></div>"),a=l,n=[]),n.push(o)}n.length&&(r+='<div class="verticalSection verticalDetailSection">',r+='<h2 class="sectionTitle padded-left">'+f.ZP.toLocaleDateString(a,{weekday:"long",month:"long",day:"numeric"})+"</h2>",r+='<div is="emby-itemscontainer" class="vertical-list padded-left padded-right">'+T.Z.getListViewHtml({items:n,enableUserDataButtons:!1,showParentTitle:!0,image:!1,showProgramTime:!0,mediaInfo:!1,parentTitleWithTitle:!0})+"</div></div>"),e.querySelector(".programGuide").innerHTML=r}(e,t)})))}(e,r,t),function(e,t){var r=e.querySelector(".tagline");t.Taglines&&t.Taglines.length?(r.classList.remove("hide"),r.innerText=t.Taglines[0]):r.classList.add("hide")}(e,t),function(e,t){var r=e.querySelectorAll(".overview");if(r.length>0){var n=i().sanitize(t.Overview||"");if(n){var a,s=D(r);try{for(s.s();!(a=s.n()).done;){var o=a.value;o.innerHTML=n,o.classList.remove("hide"),o.classList.add("detail-clamp-text");var l=o.parentElement.querySelector(".overview-expand");Math.abs(o.scrollHeight-o.offsetHeight)>2?l.classList.remove("hide"):l.classList.add("hide"),l.addEventListener("click",Y.bind(null,o));var c,d=D(o.querySelectorAll("a"));try{for(d.s();!(c=d.n()).done;)c.value.setAttribute("target","_blank")}catch(e){d.e(e)}finally{d.f()}}}catch(e){s.e(e)}finally{s.f()}}else{var u,m=D(r);try{for(m.s();!(u=m.n()).done;){var h=u.value;h.innerHTML="",h.classList.add("hide")}}catch(e){m.e(e)}finally{m.f()}}}}(e,t),function(e,t){var r,n=D(e.querySelectorAll(".itemMiscInfo-primary"));try{for(n.s();!(r=n.n()).done;){var a=r.value;v.ZP.fillPrimaryMediaInfo(a,t,{interactive:!0,episodeTitle:!1,subtitles:!1}),a.innerHTML&&"SeriesTimer"!==t.Type?a.classList.remove("hide"):a.classList.add("hide")}}catch(e){n.e(e)}finally{n.f()}var i,s=D(e.querySelectorAll(".itemMiscInfo-secondary"));try{for(s.s();!(i=s.n()).done;){var o=i.value;v.ZP.fillSecondaryMediaInfo(o,t,{interactive:!0}),o.innerHTML&&"SeriesTimer"!==t.Type?o.classList.remove("hide"):o.classList.add("hide")}}catch(e){s.e(e)}finally{s.f()}}(e,t),function(e,t){var r,n,a=e.querySelectorAll(".btnPlaystate");for(r=0,n=a.length;r<n;r++){var i=a[r];g.ZP.canMarkPlayed(t)?(i.classList.remove("hide"),i.setItem(t)):(i.classList.add("hide"),i.setItem(null))}var s=e.querySelectorAll(".btnUserRating");for(r=0,n=s.length;r<n;r++){var o=s[r];g.ZP.canRate(t)?(o.classList.remove("hide"),o.setItem(t)):(o.classList.add("hide"),o.setItem(null))}}(e,t),!m.Z.tv&&c.M.supports("externallinks")&&function(e,t){var r=e.querySelector(".itemExternalLinks"),n=[];if(!m.Z.tv&&t.HomePageUrl&&n.push('<a is="emby-linkbutton" class="button-link" href="'.concat(t.HomePageUrl,'" target="_blank">').concat(C.ZP.translate("ButtonWebsite"),"</a>")),t.ExternalUrls){var a,i=D(t.ExternalUrls);try{for(i.s();!(a=i.n()).done;){var s=a.value;n.push('<a is="emby-linkbutton" class="button-link" href="'.concat(s.Url,'" target="_blank">').concat(o()(s.Name),"</a>"))}}catch(e){i.e(e)}finally{i.f()}}var l=[];n.length&&l.push(n.join(", ")),r.innerHTML=l.join(", "),l.length?r.classList.remove("hide"):r.classList.add("hide")}(e,t),function(e,t){var r=e.querySelector(".itemTags"),n=[],a=t.Tags||[];"Program"===t.Type&&(a=[]);for(var i=0,s=a.length;i<s;i++)n.push(a[i]);n.length?(r.innerText=C.ZP.translate("TagsValue",n.join(", ")),r.classList.remove("hide")):(r.innerHTML="",r.classList.add("hide"))}(e,t),function(e,t,r){var n=e.querySelector("#seriesAirTime");if("Series"==t.Type){var a="";if(t.AirDays&&t.AirDays.length&&(7==t.AirDays.length?a+="daily":a+=t.AirDays.map((function(e){return e+"s"})).join(",")),t.AirTime&&(a+=" at "+t.AirTime),t.Studios.length)if(r)a+=" on "+o()(t.Studios[0].Name);else{var i=ee(t);a+=' on <a class="textlink button-link" is="emby-linkbutton" href="'+u.appRouter.getRouteUrl(t.Studios[0],{context:i,itemType:"Studio",serverId:t.ServerId})+'">'+o()(t.Studios[0].Name)+"</a>"}a?(a=("Ended"==t.Status?"Aired ":"Airs ")+a,n.innerHTML=a,n.classList.remove("hide")):n.classList.add("hide")}else n.classList.add("hide")}(e,t,a)}function K(){return A.Z.mobile&&window.screen.availWidth<=1e3}function $(e,t){var r,n="ItemCounts,PrimaryImageAspectRatio,BasicSyncInfo,CanDelete,MediaSourceCount",a={ParentId:t.Id,Fields:n};"MusicAlbum"==t.Type?a.SortBy="ParentIndexNumber,IndexNumber,SortName":"BoxSet"!==t.Type&&(a.SortBy="SortName");var i=q.Z.getApiClient(t.ServerId),s=i.getCurrentUserId();"Series"==t.Type?r=i.getSeasons(t.Id,{userId:s,Fields:n}):"Season"==t.Type?(n+=",Overview",r=i.getEpisodes(t.SeriesId,{seasonId:t.Id,userId:s,Fields:n})):"MusicArtist"==t.Type&&(a.SortBy="PremiereDate,ProductionYear,SortName"),(r=r||i.getItems(i.getCurrentUserId(),a)).then((function(r){var n="",a=!1,i=!1,s=e.querySelector(".childrenItemsContainer");if("MusicAlbum"==t.Type){var o,c=!1,d=D(r.Items);try{for(d.s();!(o=d.n()).done;){var u=o.value;if(!(0,l.Z)(u.ArtistItems.map((function(e){return e.Id})).sort(),u.AlbumArtists.map((function(e){return e.Id})).sort())){c=!0;break}}}catch(e){d.e(e)}finally{d.f()}var h=r.Items.map((function(e){return e.ParentIndexNumber}));n=T.Z.getListViewHtml({items:r.Items,smallIcon:!0,showIndex:new Set(h).size>1||h.length>=1&&h[0]>1,index:"disc",showIndexNumberLeft:!0,playFromHere:!0,action:"playallfromhere",image:!1,artist:c,containerAlbumArtists:t.AlbumArtists}),i=!0}else if("Series"==t.Type)a=K(),n=p.default.getCardsHtml({items:r.Items,shape:"overflowPortrait",showTitle:!0,centerText:!0,lazy:!0,overlayPlayButton:!0,allowBottomPadding:!a});else if("Season"==t.Type||"Episode"==t.Type){if("Episode"!==t.Type&&(i=!0),a="Episode"==t.Type,r.Items.length<2&&"Episode"===t.Type)return;"Episode"===t.Type?n=p.default.getCardsHtml({items:r.Items,shape:"overflowBackdrop",showTitle:!0,displayAsSpecial:"Season"==t.Type&&t.IndexNumber,playFromHere:!0,overlayText:!0,lazy:!0,showDetailsMenu:!0,overlayPlayButton:!0,allowBottomPadding:!a,includeParentInfoInTitle:!1}):"Season"===t.Type&&(n=T.Z.getListViewHtml({items:r.Items,showIndexNumber:!1,enableOverview:!0,enablePlayedButton:!m.Z.mobile,infoButton:!m.Z.mobile,imageSize:"large",enableSideMediaInfo:!1,highlight:!1,action:m.Z.desktop?"none":"link",imagePlayButton:!0,includeParentInfoInTitle:!1}))}if("BoxSet"!==t.Type&&e.querySelector("#childrenCollapsible").classList.remove("hide"),a?(s.classList.add("scrollX"),s.classList.add("hiddenScrollX"),s.classList.remove("vertical-wrap"),s.classList.remove("vertical-list")):(s.classList.remove("scrollX"),s.classList.remove("hiddenScrollX"),s.classList.remove("smoothScrollX"),i?(s.classList.add("vertical-list"),s.classList.remove("vertical-wrap")):(s.classList.add("vertical-wrap"),s.classList.remove("vertical-list"))),m.Z.mobile&&s.classList.remove("padded-right"),s.innerHTML=n,P.default.lazyChildren(s),"BoxSet"==t.Type){var y=[{name:C.ZP.translate("HeaderVideos"),mediaType:"Video"},{name:C.ZP.translate("Series"),type:"Series"},{name:C.ZP.translate("Albums"),type:"MusicAlbum"},{name:C.ZP.translate("Books"),type:"Book"}];!function(e,t,r,n){e.querySelector(".collectionItems").classList.remove("hide"),e.querySelector(".collectionItems").innerHTML="";var a,i=D(r);try{for(i.s();!(a=i.n()).done;){var s=a.value,o=te(n,s);o.length&&re(e,t,s,o)}}catch(e){i.e(e)}finally{i.f()}var l={name:C.ZP.translate("HeaderOtherItems")},c=n.filter((function(e){return!r.filter((function(t){return te([e],t).length>0})).length}));c.length&&re(e,t,l,c),n.length||re(e,t,{name:C.ZP.translate("Items")},n);var d,u=function(){$(e,t)},m=D(e.querySelectorAll(".collectionItemsContainer"));try{for(m.s();!(d=m.n()).done;)d.value.notifyRefreshNeeded=u}catch(e){m.e(e)}finally{m.f()}(function(e){for(var t=0,r=e.length;t<r;t++)if(M.O.canPlay(e[t]))return!0;return!1})(n)||(B(e,"btnPlay",!1),B(e,"btnShuffle",!1)),U(e)}(e,t,y,r.Items)}})),"Season"==t.Type?e.querySelector("#childrenTitle").innerHTML=C.ZP.translate("Episodes"):"Series"==t.Type?e.querySelector("#childrenTitle").innerHTML=C.ZP.translate("HeaderSeasons"):"MusicAlbum"==t.Type?e.querySelector("#childrenTitle").innerHTML=C.ZP.translate("HeaderTracks"):e.querySelector("#childrenTitle").innerHTML=C.ZP.translate("Items"),"MusicAlbum"==t.Type||"Season"==t.Type?(e.querySelector(".childrenSectionHeader").classList.add("hide"),e.querySelector("#childrenCollapsible").classList.add("verticalSection-extrabottompadding")):e.querySelector(".childrenSectionHeader").classList.remove("hide")}function ee(e){return"Movie"===e.Type||"BoxSet"===e.Type?"movies":"Series"===e.Type||"Season"===e.Type||"Episode"===e.Type?"tvshows":"MusicArtist"===e.Type||"MusicAlbum"===e.Type||"Audio"===e.Type||"AudioBook"===e.Type?"music":"Program"===e.Type?"livetv":null}function te(e,t){return e.filter((function(e){return t.mediaType?e.MediaType==t.mediaType:e.Type==t.type}))}function re(e,t,r,n){var a="";a+='<div class="verticalSection">',a+='<div class="sectionTitleContainer sectionTitleContainer-cards padded-left">',a+='<h2 class="sectionTitle sectionTitle-cards">',a+="<span>"+r.name+"</span>",a+="</h2>",a+="</div>",a+='<div is="emby-itemscontainer" class="itemsContainer collectionItemsContainer vertical-wrap padded-left padded-right">';var i,s="MusicAlbum"==r.type?(null==(i=!1)&&(i=K()),i?"overflowSquare":"square"):function(e){return null==e&&(e=K()),e?"overflowPortrait":"portrait"}(!1);a+=p.default.getCardsHtml({items:n,shape:s,showTitle:!0,showYear:"Video"===r.mediaType||"Series"===r.type,centerText:!0,lazy:!0,showDetailsMenu:!0,overlayMoreButton:!0,showAddToCollection:!1,showRemoveFromCollection:!0,collectionId:t.Id}),a+="</div>",a+="</div>";var o=e.querySelector(".collectionItems");o.insertAdjacentHTML("beforeend",a),P.default.lazyChildren(o.lastChild)}function ne(e){return p.default.getCardsHtml({items:e,shape:"autooverflow",showTitle:!0,action:"play",overlayText:!1,centerText:!0,showRuntime:!0})}function ae(e,t){var n=(t.People||[]).filter((function(e){return"Actor"===e.Type}));if(n.length){e.querySelector("#castCollapsible").classList.remove("hide");var a=e.querySelector("#castContent");r.e(2884).then(r.bind(r,22884)).then((function(e){e.default.buildPeopleCards(n,{itemsContainer:a,coverImage:!0,serverId:t.ServerId,shape:"overflowPortrait",imageBlurhashes:t.ImageBlurHashes})}))}else e.querySelector("#castCollapsible").classList.add("hide")}function ie(e,t,r,n){var a,i=D(e.querySelectorAll(t));try{for(i.s();!(a=i.n()).done;)a.value.addEventListener(r,n)}catch(e){i.e(e)}finally{i.f()}}function se(e){return e.preventDefault(),!1}function oe(e,t){function n(){return t.serverId?q.Z.getApiClient(t.serverId):ApiClient}function a(e,t,r){d.ZP.show();var a=n();Promise.all([N(a,r),a.getCurrentUser()]).then((function(n){var a,i,s=(i=2,function(e){if(Array.isArray(e))return e}(a=n)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(e){o=!0,a=e}finally{try{s||null==r.return||r.return()}finally{if(o)throw a}}return i}}(a,i)||H(a,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=s[0],c=s[1];l=o,Q(e,t,r,o,c)})).catch((function(e){console.error("failed to get item or current user: ",e)}))}function i(){var t=this,r=t.getAttribute("data-action");r||(r=(t=t.querySelector("[data-action]")||t).getAttribute("data-action")),function(t,r){var n=l;if("Program"!==n.Type)!function(t,r){var n=function(t){var r=e.querySelector(".selectAudio").value||null;return{startPositionTicks:t,mediaSourceId:e.querySelector(".selectSource").value,audioStreamIndex:r,subtitleStreamIndex:e.querySelector(".selectSubtitles").value}}(r);n.items=[t],M.O.play(n)}(n,n.UserData&&"resume"===r?n.UserData.PlaybackPositionTicks:0);else{var a=q.Z.getApiClient(n.ServerId);a.getLiveTvChannel(n.ChannelId,a.getCurrentUserId()).then((function(e){M.O.play({items:[e]})}))}}(0,r)}function s(){O(e,y,l),z(e,l)}function o(t,r){var a=r,i=n();if("UserDataChanged"===a.MessageType&&l&&a.Data.UserId==i.getCurrentUserId()){var s=l.UserData.Key,o=a.Data.UserDataList.filter((function(e){return e.Key==s}))[0];o&&(l.UserData=o,W(e,l),U(e))}}var l,c,y=this;c=n(),ie(e,".btnPlay","click",i),ie(e,".btnReplay","click",i),ie(e,".btnInstantMix","click",(function(){M.O.instantMix(l)})),ie(e,".btnShuffle","click",(function(){M.O.shuffle(l)})),ie(e,".btnPlayTrailer","click",(function(){M.O.playTrailers(l)})),ie(e,".btnCancelSeriesTimer","click",(function(){Promise.resolve().then(r.bind(r,30531)).then((function(e){e.default.cancelSeriesTimerWithConfirmation(l.Id,l.ServerId).then((function(){Z.ZP.navigate("livetv.html")}))}))})),ie(e,".btnCancelTimer","click",(function(){Promise.resolve().then(r.bind(r,30531)).then((function(r){r.default.cancelTimer(q.Z.getApiClient(l.ServerId),l.TimerId).then((function(){a(y,e,t)}))}))})),ie(e,".btnDownload","click",(function(){var e=n().getItemDownloadUrl(l.Id);(0,x.download)([{url:e,itemId:l.Id,serverId:l.ServerId,title:l.Name,filename:l.Path.replace(/^.*[\\/]/,"")}])})),e.querySelector(".detailImageContainer").addEventListener("click",i),e.querySelector(".trackSelections").addEventListener("submit",se),e.querySelector(".btnSplitVersions").addEventListener("click",(function(){!function(e,t,r,n){(0,k.Z)("Are you sure you wish to split the media sources into separate items?","Split Media Apart").then((function(){d.ZP.show(),r.ajax({type:"DELETE",url:r.getUrl("Videos/"+n.id+"/AlternateSources")}).then((function(){d.ZP.hide(),a(e,t,n)}))}))}(y,e,c,t)})),ie(e,".btnMoreCommands","click",(function(){var r=this,i=e.querySelector(".selectSource").value||l.Id,s=n();s.getItem(s.getCurrentUserId(),i).then((function(n){i=n,s.getCurrentUser().then((function(n){I.default.show(R(i,n,r)).then((function(r){r.deleted?u.appRouter.goHome():r.updated&&a(y,e,t)}))}))}))})),e.querySelector(".selectSource").addEventListener("change",(function(){V(e,y._currentPlaybackMediaSources),F(e,y._currentPlaybackMediaSources),j(e,y._currentPlaybackMediaSources)})),e.addEventListener("viewshow",(function(r){L.Z.setTransparentMenu(!m.Z.mobile),r.detail.isRestored?l&&(L.Z.setTitle(""),O(this,y,l,!0),G(l)):a(y,this,t),h.Events.on(c,"message",o),h.Events.on(M.O,"playerchange",s),w.ZP.on(e.querySelector(".nameContainer"))})),e.addEventListener("viewbeforehide",(function(){w.ZP.off(e.querySelector(".nameContainer")),h.Events.off(c,"message",o),h.Events.off(M.O,"playerchange",s),L.Z.setTransparentMenu(!1)})),e.addEventListener("viewdestroy",(function(){l=null,y._currentPlaybackMediaSources=null,y.currentRecordingFields=null}))}window.ItemDetailPage=new function(){var e=this;e.setInitialCollapsibleState=X,e.renderDetails=J,e.renderCast=ae}},87796:function(e,t,r){r.d(t,{J:function(){return i}}),r(63238),r(61418);var n=r(57366);function a(e){var t,r=document.createElement("textarea");if(r.value=e,document.body.appendChild(r),r.focus(),n.Z.iOS&&n.Z.iOSVersion<13.4){var a=document.createRange();a.selectNodeContents(r);var i=window.getSelection();i.removeAllRanges(),i.addRange(a),r.setSelectionRange(0,999999)}else r.select();try{t=document.execCommand("copy")?Promise.resolve():Promise.reject()}catch(e){t=Promise.reject()}return document.body.removeChild(r),t}function i(e){return void 0===navigator.clipboard?a(e):navigator.clipboard.writeText(e).catch((function(){return a(e)}))}},26381:function(e,t,r){r.r(t),r.d(t,{download:function(){return s}}),r(61013),r(63238),r(55849);var n=r(57366);function a(e){var t=document.createElement("a");t.download="",t.href=e,t.dispatchEvent(new MouseEvent("click"))}var i=r(92581);function s(e){i.Z.downloadFiles(e)||function(e){if(!e)throw new Error("`urls` required");if(void 0===document.createElement("a").download)return function(e){var t=0;!function r(){var n=document.createElement("iframe");n.style.display="none",n.src=e[t++],document.documentElement.appendChild(n);var a=setInterval((function(){"complete"!==n.contentWindow.document.readyState&&"interactive"!==n.contentWindow.document.readyState||(clearInterval(a),setTimeout((function(){n.parentNode.removeChild(n)}),1e3),t<e.length&&r())}),100)}()}(e);var t=0;e.forEach((function(e){!n.Z.firefox||function(e){var t=document.createElement("a");return t.href=e,window.location.hostname===t.hostname&&window.location.protocol===t.protocol}(e)?a(e):setTimeout(a.bind(null,e),100*++t)}))}(e.map((function(e){return e.url})))}}}]);