"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9375],{96084:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}}),n(5769),n(86248),n(63238),n(61418),n(17460),n(14078),n(61013),n(98010),n(23938);var a=n(65009),i=n.n(a),r=n(61097),c=n(56705),s=n(83094),d=n(33942),o=n(7816),l=n(64258),u=n(65321),v=(n(78066),n(32420),n(46650),n(93586)),p=n(56346);function f(e,t,n,a,i,r,c){try{var s=e[r](c),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(a,i)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function c(e){f(r,a,i,c,s,"next",e)}function s(e){f(r,a,i,c,s,"throw",e)}c(void 0)}))}}var h=[];function g(e){return e!==ApiClient.deviceId()}function b(e){c.ZP.show(),ApiClient.getJSON(ApiClient.getUrl("Devices")).then((function(t){!function(e,t){var n="";n+=t.map((function(e){var t="";t+="<div data-id='"+e.Id+"' class='card backdropCard'>",t+='<div class="cardBox visualCardBox">',t+='<div class="cardScalable">',t+='<div class="cardPadder cardPadder-backdrop"></div>',t+='<a is="emby-linkbutton" href="'.concat(P?"#/device.html?id="+e.Id:"#",'" class="cardContent cardImageContainer ').concat(r.default.getDefaultBackgroundClass(),'">');var n=o.ZP.getDeviceIcon(e);return n?(t+='<div class="cardImage" style="background-image:url(\''+n+"');background-size: auto 64%;background-position:center center;\">",t+="</div>"):t+='<span class="cardImageIcon material-icons tablet_android" aria-hidden="true"></span>',t+="</a>",t+="</div>",t+='<div class="cardFooter">',(P||g(e.Id))&&(t+='<div style="text-align:right; float:right;padding-top:5px;">',t+='<button type="button" is="paper-icon-button-light" data-id="'+e.Id+'" title="'+d.ZP.translate("Menu")+'" class="btnDeviceMenu"><span class="material-icons more_vert" aria-hidden="true"></span></button>',t+="</div>"),t+="<div class='cardText'>",t+=i()(e.Name),t+="</div>",t+="<div class='cardText cardText-secondary'>",t+=i()(e.AppName+" "+e.AppVersion),t+="</div>",t+="<div class='cardText cardText-secondary'>",e.LastUserName&&(t+=i()(e.LastUserName),t+=", "+(0,l.Z)(Date.parse(e.DateLastActivity),u.mF)),t+="&nbsp;",t+="</div>",t+="</div>",(t+="</div>")+"</div>"})).join(""),e.querySelector(".devicesList").innerHTML=n}(e,t.Items),h=t.Items.map((function(e){return e.Id})),c.ZP.hide()}))}var P=ApiClient.isMinServerVersion("3.4.1.31");function D(e){e.querySelector(".devicesList").addEventListener("click",(function(t){var a=s.ZP.parentWithClass(t.target,"btnDeviceMenu");a&&function(e,t,a){var i=[];P&&i.push({name:d.ZP.translate("Edit"),id:"open",icon:"mode_edit"}),g(a)&&i.push({name:d.ZP.translate("Delete"),id:"delete",icon:"delete"}),Promise.resolve().then(n.bind(n,78407)).then((function(n){n.default.show({items:i,positionTo:t,callback:function(t){switch(t){case"open":v.ZP.navigate("device.html?id="+a);break;case"delete":!function(e,t){var n=d.ZP.translate("DeleteDeviceConfirmation");(0,p.Z)({text:n,title:d.ZP.translate("HeaderDeleteDevice"),confirmText:d.ZP.translate("Delete"),primary:"delete"}).then(m(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.ZP.show(),n.next=3,ApiClient.deleteDevice(t);case 3:b(e);case 4:case"end":return n.stop()}}),n)}))))}(e,a)}}})}))}(e,a,a.getAttribute("data-id"))})),e.addEventListener("viewshow",(function(){b(this)})),e.querySelector("#deviceDeleteAll").addEventListener("click",(function(){var t,n;t=e,n=d.ZP.translate("DeleteDevicesConfirmation"),(0,p.Z)({text:n,title:d.ZP.translate("HeaderDeleteDevices"),confirmText:d.ZP.translate("Delete"),primary:"delete"}).then(m(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.ZP.show(),e.next=3,Promise.all(h.filter(g).map((function(e){return ApiClient.deleteDevice(e)})));case 3:b(t);case 4:case"end":return e.stop()}}),e)}))))}))}}}]);