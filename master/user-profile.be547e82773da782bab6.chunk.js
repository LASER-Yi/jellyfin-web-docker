"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[35273,55357],{75899:function(e,t,r){r.r(t),r.d(t,{default:function(){return d}}),r(5769),r(63238),r(61418),r(17460),r(14078);var a=r(28540),s=r(71487),n=r(94994),o=(r(38228),r(60635)),i=r(56663),l=r(3137);function c(e,t){var a=t.userId;ApiClient.getUser(a).then((function(t){o.default.getCurrentUser().then((function(a){s.Z.setTitle(t.Name),e.querySelector(".username").innerText=t.Name;var n=!0,o=!1;"Guest"==t.ConnectLinkType?(e.querySelector(".localAccessSection").classList.add("hide"),n=!1):t.HasConfiguredPassword?(e.querySelector("#btnResetPassword").classList.remove("hide"),e.querySelector("#fldCurrentPassword").classList.remove("hide"),o=!0):(e.querySelector("#btnResetPassword").classList.add("hide"),e.querySelector("#fldCurrentPassword").classList.add("hide")),n&&(a.Policy.IsAdministrator||t.Policy.EnableUserPreferenceAccess)?e.querySelector(".passwordSection").classList.remove("hide"):e.querySelector(".passwordSection").classList.add("hide"),o&&(a.Policy.IsAdministrator||t.Policy.EnableUserPreferenceAccess)?e.querySelector(".localAccessSection").classList.remove("hide"):e.querySelector(".localAccessSection").classList.add("hide");var i=e.querySelector("#txtEasyPassword");i.value="",t.HasConfiguredEasyPassword?(i.placeholder="******",e.querySelector("#btnResetEasyPassword").classList.remove("hide")):(i.removeAttribute("placeholder"),i.placeholder="",e.querySelector("#btnResetEasyPassword").classList.add("hide")),e.querySelector(".chkEnableLocalEasyPassword").checked=t.Configuration.EnableLocalPassword,Promise.resolve().then(r.bind(r,87680)).then((function(t){t.default.autoFocus(e)}))}))})),e.querySelector("#txtCurrentPassword").value="",e.querySelector("#txtNewPassword").value="",e.querySelector("#txtNewPasswordConfirm").value=""}function d(e,t){function r(r){ApiClient.getUser(r).then((function(r){r.Configuration.EnableLocalPassword=e.querySelector(".chkEnableLocalEasyPassword").checked,ApiClient.updateUserConfiguration(r.Id,r.Configuration).then((function(){a.ZP.hide(),(0,i.Z)(n.ZP.translate("SettingsSaved")),c(e,t)}))}))}e.querySelector(".updatePasswordForm").addEventListener("submit",(function(r){var s,l,d;return this.querySelector("#txtNewPassword").value!=this.querySelector("#txtNewPasswordConfirm").value?(0,i.Z)(n.ZP.translate("PasswordMatchError")):(a.ZP.show(),s=t.userId,l=e.querySelector("#txtCurrentPassword").value,d=e.querySelector("#txtNewPassword").value,e.querySelector("#fldCurrentPassword").classList.contains("hide")&&(l=""),ApiClient.updateUserPassword(s,l,d).then((function(){a.ZP.hide(),(0,i.Z)(n.ZP.translate("PasswordSaved")),c(e,t)}),(function(){a.ZP.hide(),o.default.alert({title:n.ZP.translate("HeaderLoginFailure"),message:n.ZP.translate("MessageInvalidUser")})}))),r.preventDefault(),!1})),e.querySelector(".localAccessForm").addEventListener("submit",(function(s){var n,o;return a.ZP.show(),n=t.userId,(o=e.querySelector("#txtEasyPassword").value)?ApiClient.updateEasyPassword(n,o).then((function(){r(n)})):r(n),s.preventDefault(),!1})),e.querySelector("#btnResetEasyPassword").addEventListener("click",(function(){var r=n.ZP.translate("PinCodeResetConfirmation");(0,l.Z)(r,n.ZP.translate("HeaderPinCodeReset")).then((function(){var r=t.userId;a.ZP.show(),ApiClient.resetEasyPassword(r).then((function(){a.ZP.hide(),o.default.alert({message:n.ZP.translate("PinCodeResetComplete"),title:n.ZP.translate("HeaderPinCodeReset")}),c(e,t)}))}))})),e.querySelector("#btnResetPassword").addEventListener("click",(function(){var r=n.ZP.translate("PasswordResetConfirmation");(0,l.Z)(r,n.ZP.translate("ResetPassword")).then((function(){var r=t.userId;a.ZP.show(),ApiClient.resetUserPassword(r).then((function(){a.ZP.hide(),o.default.alert({message:n.ZP.translate("PasswordResetComplete"),title:n.ZP.translate("ResetPassword")}),c(e,t)}))}))})),e.addEventListener("viewshow",(function(){c(e,t)}))}},17905:function(e,t,r){r.r(t),r.d(t,{default:function(){return y}}),r(52077),r(1203);var a=r(75899),s=r(28540),n=r(71487),o=r(84881),i=r(94994),l=(r(38228),r(60635)),c=r(56663),d=r(3137),u=r(85951);function P(e){var t=(0,u.a)("userId");s.ZP.show(),ApiClient.getUser(t).then((function(t){e.querySelector(".username").innerText=t.Name,n.Z.setTitle(t.Name);var r="assets/img/avatar.png";t.PrimaryImageTag&&(r=ApiClient.getUserImageUrl(t.Id,{tag:t.PrimaryImageTag,type:"Primary"})),e.querySelector("#image").style.backgroundImage="url("+r+")",l.default.getCurrentUser().then((function(r){t.PrimaryImageTag?(e.querySelector("#btnAddImage").classList.add("hide"),e.querySelector("#btnDeleteImage").classList.remove("hide")):o.M.supports("fileinput")&&(r.Policy.IsAdministrator||t.Policy.EnableUserPreferenceAccess)&&(e.querySelector("#btnDeleteImage").classList.add("hide"),e.querySelector("#btnAddImage").classList.remove("hide"))})),s.ZP.hide()}))}function f(e){switch(s.ZP.hide(),e.target.error.code){case e.target.error.NOT_FOUND_ERR:(0,c.Z)(i.ZP.translate("FileNotFound"));break;case e.target.error.ABORT_ERR:h();break;case e.target.error.NOT_READABLE_ERR:default:(0,c.Z)(i.ZP.translate("FileReadError"))}}function h(){s.ZP.hide(),(0,c.Z)(i.ZP.translate("FileReadCancelled"))}function y(e,t){P(e),new a.default(e,t),e.querySelector("#btnDeleteImage").addEventListener("click",(function(){(0,d.Z)(i.ZP.translate("DeleteImageConfirmation"),i.ZP.translate("DeleteImage")).then((function(){s.ZP.show();var t=(0,u.a)("userId");ApiClient.deleteUserImage(t,"primary").then((function(){s.ZP.hide(),P(e)}))}))})),e.querySelector("#btnAddImage").addEventListener("click",(function(){e.querySelector("#uploadImage").click()})),e.querySelector("#uploadImage").addEventListener("change",(function(t){!function(e,t){var r=e.querySelector("#image"),a=t[0];if(!a||!a.type.match("image.*"))return!1;var n=new FileReader;n.onerror=f,n.onabort=h,n.onload=function(t){r.style.backgroundImage="url("+t.target.result+")";var n=(0,u.a)("userId");ApiClient.uploadUserImage(n,"Primary",a).then((function(){s.ZP.hide(),P(e)}))},n.readAsDataURL(a)}(e,t.target.files)}))}}}]);