"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[22681,83264],{13528:function(e,t,a){a.r(t),a.d(t,{default:function(){return j}});var n=a(24246),r=a(27378),s=a(60635),i=a(94994),o=a(28540),c=a(72365),l=a(3137),d=a(20990),u=a(49365),f=a(32991),p=a(56285),v=a(65009),h=a.n(v),b=function(){return b=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},b.apply(this,arguments)},m=function(e){var t=e.user,a=e.renderImgUrl;return{__html:'<a\n        is="emby-linkbutton"\n        class="cardContent"\n        href="#/dashboard/users/profile?userId='.concat(t.Id,'"\n        >\n        ').concat(a,"\n    </a>")}},g=function(e){var t,a,r,s=e.user,o=void 0===s?{}:s,c="card squareCard scalableCard squareCard-scalable";(null===(t=o.Policy)||void 0===t?void 0:t.IsDisabled)&&(c+=" grayscale"),o.PrimaryImageTag&&o.Id&&(r=window.ApiClient.getUserImageUrl(o.Id,{width:300,tag:o.PrimaryImageTag,type:"Primary"}));var l="cardImage";(null===(a=o.Policy)||void 0===a?void 0:a.IsDisabled)&&(l+=" disabledUser");var v,g=(v=o.LastActivityDate)?i.ZP.translate("LastSeen",(0,d.Z)(Date.parse(v),(0,u.LP)())):"",y=r?"<div class='".concat(l,"' style='background-image:url(").concat(r,")'></div>"):"<div class='".concat(l," ").concat(f.default.getDefaultBackgroundClass(o.Name)," flex align-items-center justify-content-center'>\n            <span class='material-icons cardImageIcon person' aria-hidden='true'></span>\n        </div>");return(0,n.jsx)("div",b({"data-userid":o.Id,className:c},{children:(0,n.jsxs)("div",b({className:"cardBox visualCardBox"},{children:[(0,n.jsxs)("div",b({className:"cardScalable visualCardBox-cardScalable"},{children:[(0,n.jsx)("div",{className:"cardPadder cardPadder-square"}),(0,n.jsx)("div",{dangerouslySetInnerHTML:m({user:o,renderImgUrl:y})})]})),(0,n.jsxs)("div",b({className:"cardFooter visualCardBox-cardFooter"},{children:[(0,n.jsx)("div",b({style:{textAlign:"right",float:"right",paddingTop:"5px"}},{children:(0,n.jsx)(p.Z,{is:"paper-icon-button-light",className:"btnUserMenu flex-shrink-zero",icon:"more_vert"})})),(0,n.jsx)("div",b({className:"cardText"},{children:(0,n.jsx)("span",{children:h()(o.Name)})})),(0,n.jsx)("div",b({className:"cardText cardText-secondary"},{children:(0,n.jsx)("span",{children:""!=g?g:""})}))]}))]}))}))},y=a(87926),x=(a(38228),a(61414),a(87143)),P=function(){return P=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},P.apply(this,arguments)},j=function(){var e=function(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,s=a.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(a=s.return)&&a.call(s)}finally{if(r)throw r.error}}return i}((0,r.useState)([]),2),t=e[0],d=e[1],u=(0,r.useRef)(null),f=function(){o.ZP.show(),window.ApiClient.getUsers().then((function(e){d(e),o.ZP.hide()})).catch((function(e){console.error("[userprofiles] failed to fetch users",e)}))};return(0,r.useEffect)((function(){var e=u.current;if(e){f();e.addEventListener("click",(function(e){var t=c.ZP.parentWithClass(e.target,"btnUserMenu");t&&function(e){var t=c.ZP.parentWithClass(e,"card"),n=null==t?void 0:t.getAttribute("data-userid");if(n){var r=[];r.push({name:i.ZP.translate("ButtonOpen"),id:"open",icon:"mode_edit"}),r.push({name:i.ZP.translate("ButtonLibraryAccess"),id:"access",icon:"lock"}),r.push({name:i.ZP.translate("ButtonParentalControl"),id:"parentalcontrol",icon:"person"}),r.push({name:i.ZP.translate("Delete"),id:"delete",icon:"delete"}),a.e(12801).then(a.bind(a,12801)).then((function(e){e.default.show({items:r,positionTo:t,callback:function(e){switch(e){case"open":s.default.navigate("/dashboard/users/profile?userId="+n).catch((function(e){console.error("[userprofiles] failed to navigate to user edit page",e)}));break;case"access":s.default.navigate("/dashboard/users/access?userId="+n).catch((function(e){console.error("[userprofiles] failed to navigate to user library page",e)}));break;case"parentalcontrol":s.default.navigate("/dashboard/users/parentalcontrol?userId="+n).catch((function(e){console.error("[userprofiles] failed to navigate to parental control page",e)}));break;case"delete":!function(e){var t=i.ZP.translate("DeleteUserConfirmation");(0,l.Z)({title:i.ZP.translate("DeleteUser"),text:t,confirmText:i.ZP.translate("Delete"),primary:"delete"}).then((function(){o.ZP.show(),window.ApiClient.deleteUser(e).then((function(){f()})).catch((function(e){console.error("[userprofiles] failed to delete user",e)}))})).catch((function(){}))}(n)}}}).catch((function(){}))})).catch((function(e){console.error("[userprofiles] failed to load action sheet",e)}))}else console.error("Unexpected null user id")}(t)})),e.querySelector("#btnAddUser").addEventListener("click",(function(){s.default.navigate("/dashboard/users/add").catch((function(e){console.error("[userprofiles] failed to navigate to new user page",e)}))}))}else console.error("Unexpected null reference")}),[]),(0,n.jsx)(x.Z,P({id:"userProfilesPage",className:"mainAnimatedPage type-interior userProfilesPage fullWidthContent"},{children:(0,n.jsxs)("div",P({ref:u,className:"content-primary"},{children:[(0,n.jsx)("div",P({className:"verticalSection"},{children:(0,n.jsx)(y.Z,{title:i.ZP.translate("HeaderUsers"),isBtnVisible:!0,btnId:"btnAddUser",btnClassName:"fab submit sectionTitleButton",btnTitle:"ButtonAddUser",btnIcon:"add",url:"https://jellyfin.org/docs/general/server/users/adding-managing-users"})})),(0,n.jsx)("div",P({className:"localUsers itemsContainer vertical-wrap"},{children:t.map((function(e){return(0,n.jsx)(g,{user:e},e.Id)}))}))]}))}))}},87143:function(e,t,a){var n=a(24246),r=a(27378),s=a(93110),i=function(){return i=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};t.Z=function(e){var t=e.children,a=e.id,o=e.className,c=void 0===o?"":o,l=e.title,d=e.isBackButtonEnabled,u=void 0===d||d,f=e.isMenuButtonEnabled,p=void 0!==f&&f,v=e.isNowPlayingBarEnabled,h=void 0===v||v,b=e.isThemeMediaSupported,m=void 0!==b&&b,g=e.backDropType,y=(0,r.useRef)(null);return(0,r.useEffect)((function(){s.Z.hideView()}),[]),(0,r.useEffect)((function(){var e,t,a,n,r={bubbles:!0,cancelable:!1,detail:{isRestored:!1,options:{enableMediaControl:h,supportsThemeMedia:m}}};null===(e=y.current)||void 0===e||e.dispatchEvent(new CustomEvent("viewbeforeshow",r)),null===(t=y.current)||void 0===t||t.dispatchEvent(new CustomEvent("pagebeforeshow",r)),null===(a=y.current)||void 0===a||a.dispatchEvent(new CustomEvent("viewshow",r)),null===(n=y.current)||void 0===n||n.dispatchEvent(new CustomEvent("pageshow",r))}),[y,h,m]),(0,n.jsx)("div",i({ref:y,id:a,"data-role":"page",className:"page ".concat(c),"data-title":l,"data-backbutton":u,"data-menubutton":p,"data-backdroptype":g},{children:t}))}},56285:function(e,t,a){var n=a(24246),r=(a(27378),a(94994)),s=function(e){var t=e.is,a=e.id,n=e.className,r=e.title,s=e.icon,i=e.dataIndex,o=e.dataTag,c=e.dataProfileid;return{__html:'<button\n        is="'.concat(t,'"\n        type="button"\n        ').concat(a,'\n        class="').concat(n,'"\n        ').concat(r,"\n        ").concat(i,"\n        ").concat(o,"\n        ").concat(c,'\n    >\n        <span class="material-icons ').concat(s,'" aria-hidden="true"></span>\n    </button>')}};t.Z=function(e){var t=e.is,a=e.id,i=e.className,o=e.title,c=e.icon,l=e.dataIndex,d=e.dataTag,u=e.dataProfileid;return(0,n.jsx)("div",{dangerouslySetInnerHTML:s({is:t,id:a?'id="'.concat(a,'"'):"",className:i,title:o?'title="'.concat(r.ZP.translate(o),'"'):"",icon:c,dataIndex:l?'data-index="'.concat(l,'"'):"",dataTag:d?'data-tag="'.concat(d,'"'):"",dataProfileid:u?'data-profileid="'.concat(u,'"'):""})})}},87926:function(e,t,a){a.d(t,{Z:function(){return l}});var n=a(24246),r=(a(27378),a(56285)),s=a(94994),i=function(e){var t=e.className,a=e.title,n=e.href;return{__html:'<a\n        is="emby-linkbutton"\n        rel="noopener noreferrer"\n        class="'.concat(t,'"\n        target="_blank"\n        href="').concat(n,'"\n        >\n        ').concat(a,"\n    </a>")}},o=function(e){var t=e.className,a=e.title,r=e.url;return(0,n.jsx)("div",{dangerouslySetInnerHTML:i({className:t,title:s.ZP.translate(a),href:r})})},c=function(){return c=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},c.apply(this,arguments)},l=function(e){var t=e.SectionClassName,a=e.title,s=e.isBtnVisible,i=void 0!==s&&s,l=e.btnId,d=e.btnClassName,u=e.btnTitle,f=e.btnIcon,p=e.isLinkVisible,v=void 0===p||p,h=e.url;return(0,n.jsxs)("div",c({className:"".concat(t," sectionTitleContainer flex align-items-center")},{children:[(0,n.jsx)("h2",c({className:"sectionTitle"},{children:a})),i&&(0,n.jsx)(r.Z,{is:"emby-button",id:l,className:d,title:u,icon:f}),v&&(0,n.jsx)(o,{className:"raised button-alt headerHelpButton",title:"Help",url:h})]}))}}}]);