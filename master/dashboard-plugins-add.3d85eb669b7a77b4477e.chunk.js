"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[66968],{30473:function(e,n,t){t.r(n),t.d(n,{default:function(){return h}}),t(69217),t(98010),t(63238),t(25901),t(92189),t(5769),t(61418),t(17460),t(14078),t(72410),t(15610),t(52077),t(91047),t(51789);var r=t(76728),i=t(31699),a=t.n(i),o=t(28540),l=t(94994),s=(t(38228),t(60635)),u=t(37099),c=t(3137);function f(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function v(e,n,t){var i=n.filter((function(n){return n.Name==e.name}))[0];if(function(e,n,t){var r="";e.versions.sort((function(e,n){return n.timestamp<e.timestamp?-1:1}));var i,a=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return f(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?f(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(l)throw a}}}}(e.versions);try{for(a.s();!(i=a.n()).done;){var o=i.value;r+='<option value="'+o.version+'">'+l.ZP.translate("PluginFromRepo",o.version,o.repositoryName)+"</option>"}}catch(e){a.e(e)}finally{a.f()}var s=$("#selectVersion",n).html(r);t||$("#pCurrentVersion",n).hide().html("");var u=e.versions[0];u&&s.val(u.version)}(e,t,i),function(e,n){for(var t="",i=Math.min(e.versions.length,10),o=0;o<i;o++){var l=e.versions[o];t+='<h2 style="margin:.5em 0;">'+l.version+"</h2>",t+='<div style="margin-bottom:1.5em;">'+a().sanitize((0,r.TU)(l.changelog))+"</div>"}$("#revisionHistory",n).html(t)}(e,t),$(".pluginName",t).text(e.name),$("#btnInstallDiv",t).removeClass("hide"),$("#pSelectVersion",t).removeClass("hide"),e.overview?$("#overview",t).show().text(e.overview):$("#overview",t).hide(),$("#description",t).text(e.description),$("#developer",t).text(e.owner),i){var s=l.ZP.translate("MessageYouHaveVersionInstalled","<strong>"+i.Version+"</strong>");$("#pCurrentVersion",t).show().html(s)}else $("#pCurrentVersion",t).hide().text("");o.ZP.hide()}function d(e){(0,u.Z)(e)}function h(e,n){$(".addPluginForm",e).on("submit",(function(){o.ZP.show();var e=$(this).parents("#addPluginPage")[0],t=n.name,r=n.guid;return ApiClient.getInstalledPlugins().then((function(n){var i=n.filter((function(e){return e.Name==t}))[0],a=$("#selectVersion",e).val();i&&i.Version===a?(o.ZP.hide(),s.default.alert({message:l.ZP.translate("MessageAlreadyInstalled"),title:l.ZP.translate("HeaderPluginInstallation")})):function(e,n,t,r){var i=$("#developer",e).html().toLowerCase(),a=function(){o.ZP.show(),e.querySelector("#btnInstall").disabled=!0,ApiClient.installPlugin(n,t,r).then((function(){o.ZP.hide(),d(l.ZP.translate("MessagePluginInstalled"))})).catch((function(){d(l.ZP.translate("MessagePluginInstallError"))}))};if("jellyfin"!==i){o.ZP.hide();var s=l.ZP.translate("MessagePluginInstallDisclaimer");s+="<br/>",s+="<br/>",s+=l.ZP.translate("PleaseConfirmPluginInstallation"),(0,c.Z)(s,l.ZP.translate("HeaderConfirmPluginInstallation")).then((function(){a()})).catch((function(){console.debug("plugin not installed")}))}else a()}(e,t,r,a)})).catch((function(){d(l.ZP.translate("MessageGetInstalledPluginsError"))})),!1})),e.addEventListener("viewshow",(function(){var e=this;o.ZP.show();var t=n.name,r=n.guid,i=ApiClient.getPackageInfo(t,r),a=ApiClient.getInstalledPlugins();Promise.all([i,a]).then((function(n){v(n[0],n[1],e)}))}))}}}]);