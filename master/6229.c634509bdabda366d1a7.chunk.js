"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6229,7636,9337],{9337:function(e,t,a){a.r(t),a.d(t,{getCommands:function(){return p},show:function(){return g}}),a(5769),a(63238),a(61418),a(17460),a(14078),a(52077),a(911),a(23938);var n=a(57366),i=a(87796),r=a(94994),s=a(12801),o=a(84881),l=a(52050),u=a(21776),d=a(48957),c=a(18613),m=a(56663);function p(e){var t=e.item,a=e.user,i=d.O.canPlay(t),s=(n.Z.operaTv||n.Z.web0s)&&!a.Policy.IsAdministrator,l=[];i&&"Photo"!==t.MediaType&&(!1!==e.play&&l.push({name:r.ZP.translate("Play"),id:"resume",icon:"play_arrow"}),e.playAllFromHere&&"Program"!==t.Type&&"TvChannel"!==t.Type&&l.push({name:r.ZP.translate("PlayAllFromHere"),id:"playallfromhere",icon:"play_arrow"})),null!==d.O.getCurrentPlayer()&&(e.stopPlayback&&l.push({name:r.ZP.translate("StopPlayback"),id:"stopPlayback",icon:"stop"}),e.clearQueue&&l.push({name:r.ZP.translate("ClearQueue"),id:"clearQueue",icon:"clear_all"})),d.O.canQueue(t)&&(!1!==e.queue&&l.push({name:r.ZP.translate("AddToPlayQueue"),id:"queue",icon:"playlist_add"}),!1!==e.queue&&l.push({name:r.ZP.translate("PlayNext"),id:"queuenext",icon:"playlist_add"})),!t.IsFolder&&"MusicArtist"!==t.Type&&"MusicGenre"!==t.Type||"livetv"===t.CollectionType||!1===e.shuffle||l.push({name:r.ZP.translate("Shuffle"),id:"shuffle",icon:"shuffle"}),"Audio"!==t.MediaType&&"MusicAlbum"!==t.Type&&"MusicArtist"!==t.Type&&"MusicGenre"!==t.Type||!1===e.instantMix||u.ZP.isLocalItem(t)||l.push({name:r.ZP.translate("InstantMix"),id:"instantmix",icon:"explore"}),l.length&&l.push({divider:!0}),s||(u.ZP.supportsAddingToCollection(t)&&l.push({name:r.ZP.translate("AddToCollection"),id:"addtocollection",icon:"playlist_add"}),u.ZP.supportsAddingToPlaylist(t)&&!1!==e.playlist&&l.push({name:r.ZP.translate("AddToPlaylist"),id:"addtoplaylist",icon:"playlist_add"})),"Timer"===t.Type&&a.Policy.EnableLiveTvManagement&&!1!==e.cancelTimer&&l.push({name:r.ZP.translate("CancelRecording"),id:"canceltimer",icon:"cancel"}),"Recording"===t.Type&&"InProgress"===t.Status&&a.Policy.EnableLiveTvManagement&&!1!==e.cancelTimer&&l.push({name:r.ZP.translate("CancelRecording"),id:"canceltimer",icon:"cancel"}),"SeriesTimer"===t.Type&&a.Policy.EnableLiveTvManagement&&!1!==e.cancelTimer&&l.push({name:r.ZP.translate("CancelSeries"),id:"cancelseriestimer",icon:"cancel"}),t.CanDelete&&!1!==e.deleteItem&&("Playlist"===t.Type||"BoxSet"===t.Type?l.push({name:r.ZP.translate("Delete"),id:"delete",icon:"delete"}):l.push({name:r.ZP.translate("DeleteMedia"),id:"delete",icon:"delete"})),t.CanDownload&&o.M.supports("filedownload")&&"Book"!==t.Type&&(l.push({name:r.ZP.translate("Download"),id:"download",icon:"file_download"}),l.push({name:r.ZP.translate("CopyStreamURL"),id:"copy-stream",icon:"content_copy"})),l.length&&l.push({divider:!0});var c=u.ZP.canEdit(a,t);if(c&&!1!==e.edit&&"SeriesTimer"!==t.Type){var m="Timer"===t.Type||"SeriesTimer"===t.Type?r.ZP.translate("Edit"):r.ZP.translate("EditMetadata");l.push({name:m,id:"edit",icon:"edit"})}return u.ZP.canEditImages(a,t)&&!1!==e.editImages&&l.push({name:r.ZP.translate("EditImages"),id:"editimages",icon:"image"}),!c||"Video"!==t.MediaType||"TvChannel"===t.Type||"Program"===t.Type||"Virtual"===t.LocationType||"Recording"===t.Type&&"Completed"!==t.Status||!1===e.editSubtitles||l.push({name:r.ZP.translate("EditSubtitles"),id:"editsubtitles",icon:"closed_caption"}),!1!==e.identify&&u.ZP.canIdentify(a,t)&&l.push({name:r.ZP.translate("Identify"),id:"identify",icon:"edit"}),t.MediaSources&&!1!==e.moremediainfo&&l.push({name:r.ZP.translate("MoreMediaInfo"),id:"moremediainfo",icon:"info"}),"Program"===t.Type&&!1!==e.record&&(t.TimerId?l.push({name:r.ZP.translate("ManageRecording"),id:"record",icon:"fiber_manual_record"}):l.push({name:r.ZP.translate("Record"),id:"record",icon:"fiber_manual_record"})),u.ZP.canRefreshMetadata(t,a)&&l.push({name:r.ZP.translate("RefreshMetadata"),id:"refresh",icon:"refresh"}),t.PlaylistItemId&&e.playlistId&&l.push({name:r.ZP.translate("RemoveFromPlaylist"),id:"removefromplaylist",icon:"remove"}),e.collectionId&&l.push({name:r.ZP.translate("RemoveFromCollection"),id:"removefromcollection",icon:"remove"}),!s&&!0===e.share&&u.ZP.canShare(t,a)&&l.push({name:r.ZP.translate("Share"),id:"share",icon:"share"}),!1!==e.sync&&u.ZP.canSync(a,t)&&l.push({name:r.ZP.translate("Sync"),id:"sync",icon:"sync"}),!1!==e.openAlbum&&t.AlbumId&&"Photo"!==t.MediaType&&l.push({name:r.ZP.translate("ViewAlbum"),id:"album",icon:"album"}),!1!==e.openArtist&&t.AlbumArtists&&t.AlbumArtists.length&&l.push({name:r.ZP.translate("ViewAlbumArtist"),id:"artist",icon:"person"}),l}function h(e,t,a,n){return function(){e({command:t,updated:a,deleted:n})}}function f(e,t,a,n){var i="play";a&&(i=n?"queueNext":"queue");var r=0;t&&e.UserData&&e.UserData.PlaybackPositionTicks&&(r=e.UserData.PlaybackPositionTicks),"Program"===e.Type?d.O[i]({ids:[e.ChannelId],startPositionTicks:r,serverId:e.ServerId}):d.O[i]({items:[e],startPositionTicks:r})}function g(e){var t=p(e);return t.length?s.default.show({items:t,positionTo:e.positionTo,resolveOnClick:["share"]}).then((function(t){return function(e,t,n){var s=e.Id,o=e.ServerId,u=c.Z.getApiClient(o);return new Promise((function(c,p){switch(t){case"addtocollection":a.e(9449).then(a.bind(a,19449)).then((function(e){new(0,e.default)({items:[s],serverId:o}).then(h(c,t,!0),h(c,t))}));break;case"addtoplaylist":a.e(3126).then(a.bind(a,43126)).then((function(e){new(0,e.default)({items:[s],serverId:o}).then(h(c,t,!0),h(c,t))}));break;case"download":a.e(6381).then(a.bind(a,26381)).then((function(a){var n=u.getItemDownloadUrl(s);a.download([{url:n,itemId:s,serverId:o,title:e.Name,filename:e.Path.replace(/^.*[\\/]/,"")}]),h(h(c,t),t)()}));break;case"copy-stream":var g=u.getItemDownloadUrl(s);(0,i.J)(g).then((function(){(0,m.Z)(r.ZP.translate("CopyStreamURLSuccess"))})).catch((function(){prompt(r.ZP.translate("CopyStreamURL"),g)})),h(c,t)();break;case"editsubtitles":a.e(327).then(a.bind(a,327)).then((function(e){e.default.show(s,o).then(h(c,t,!0),h(c,t))}));break;case"edit":(function(e,t){return new Promise((function(n,i){var r=e.serverInfo().Id;"Timer"===t.Type?a.e(1341).then(a.bind(a,21341)).then((function(e){e.default.show(t.Id,r).then(n,i)})):"SeriesTimer"===t.Type?a.e(4896).then(a.bind(a,4896)).then((function(e){e.default.show(t.Id,r).then(n,i)})):a.e(3786).then(a.bind(a,43786)).then((function(e){e.default.show(t.Id,r).then(n,i)}))}))})(u,e).then(h(c,t,!0),h(c,t));break;case"editimages":a.e(3635).then(a.bind(a,23635)).then((function(e){e.show({itemId:s,serverId:o}).then(h(c,t,!0),h(c,t))}));break;case"identify":Promise.resolve().then(a.bind(a,9599)).then((function(e){e.show(s,o).then(h(c,t,!0),h(c,t))}));break;case"moremediainfo":a.e(4166).then(a.bind(a,14166)).then((function(e){e.show(s,o).then(h(c,t),h(c,t))}));break;case"refresh":!function(e,t){a.e(6929).then(a.bind(a,36929)).then((function(a){new(0,a.default)({itemIds:[t.Id],serverId:e.serverInfo().Id,mode:"CollectionFolder"===t.Type?"scan":null}).show()}))}(u,e),h(c,t)();break;case"open":l.appRouter.showItem(e),h(c,t)();break;case"play":f(e,!1),h(c,t)();break;case"resume":f(e,!0),h(c,t)();break;case"queue":f(e,!1,!0),h(c,t)();break;case"queuenext":f(e,!1,!0,!0),h(c,t)();break;case"stopPlayback":d.O.stop();break;case"clearQueue":d.O.clearQueue();break;case"record":a.e(9553).then(a.bind(a,45012)).then((function(e){e.default.show(s,o).then(h(c,t,!0),h(c,t))}));break;case"shuffle":d.O.shuffle(e),h(c,t)();break;case"instantmix":d.O.instantMix(e),h(c,t)();break;case"delete":(function(e,t){return new Promise((function(e,n){a.e(5854).then(a.bind(a,35854)).then((function(a){a.deleteItem({item:t,navigate:!1}).then((function(){e(!0)}),n)}))}))})(0,e).then(h(c,t,!0,!0),h(c,t));break;case"share":navigator.share({title:e.Name,text:e.Overview,url:"".concat(u.serverAddress(),"/web/index.html").concat(l.appRouter.getRouteUrl(e))});break;case"album":l.appRouter.showItem(e.AlbumId,e.ServerId),h(c,t)();break;case"artist":l.appRouter.showItem(e.AlbumArtists[0].Id,e.ServerId),h(c,t)();break;case"playallfromhere":case"queueallfromhere":h(c,t)();break;case"removefromplaylist":u.ajax({url:u.getUrl("Playlists/"+n.playlistId+"/Items",{EntryIds:[e.PlaylistItemId].join(",")}),type:"DELETE"}).then((function(){h(c,t,!0)()}));break;case"removefromcollection":u.ajax({type:"DELETE",url:u.getUrl("Collections/"+n.collectionId+"/Items",{Ids:[e.Id].join(",")})}).then((function(){h(c,t,!0)()}));break;case"canceltimer":!function(e,t,n,i){Promise.resolve().then(a.bind(a,30531)).then((function(e){var a=e.default,r=t.TimerId||t.Id;a.cancelTimerWithConfirmation(r,t.ServerId).then((function(){h(n,i,!0)()}))}))}(0,e,c,t);break;case"cancelseriestimer":!function(e,t,n,i){Promise.resolve().then(a.bind(a,30531)).then((function(e){e.default.cancelSeriesTimerWithConfirmation(t.Id,t.ServerId).then((function(){h(n,i,!0)()}))}))}(0,e,c,t);break;default:p()}}))}(e.item,t,e)})):Promise.reject()}t.default={getCommands:p,show:g}},56229:function(e,t,a){a.r(t),a(63238),a(55849),a(43512),a(27471),a(48410);var n=a(61693),i=a(47005),r=a(57366),s=a(98301),o=a(30325),l=a(48957),u=a(69011),d=a(84881),c=a(72365),m=a(9337),p=(a(61414),a(27636),a(18613));function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}a(99785);var f,g,v,y,b,P,I,T,w,k,S,A,C,Z,L,E=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t,a=this;a.element=((t=document.createElement("div")).classList.add("appfooter"),document.body.appendChild(t),t),a.add=function(e){a.element.appendChild(e)},a.insert=function(e){"string"==typeof e?a.element.insertAdjacentHTML("afterbegin",e):a.element.insertBefore(e,a.element.firstChild)}}var t,a;return t=e,(a=[{key:"destroy",value:function(){this.element=null}}])&&h(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()),B=a(61008),M=(a(42855),a(52050)),x=[],O=0,R={},q=0,N=!0;function _(){this.classList.add("hide")}function U(){l.O.playPause(f)}function D(){if(L)return L;var e,t,a=E.element;return(L=a.querySelector(".nowPlayingBar"))||(a.insertAdjacentHTML("afterbegin",(e="",e+='<div class="nowPlayingBar hide nowPlayingBar-hidden">',e+='<div class="nowPlayingBarTop">',e+='<div class="nowPlayingBarPositionContainer sliderContainer">',e+='<input type="range" is="emby-slider" pin step=".01" min="0" max="100" value="0" class="slider-medium-thumb nowPlayingBarPositionSlider" data-slider-keep-progress="true"/>',e+="</div>",e+='<div class="nowPlayingBarInfoContainer">',e+='<div class="nowPlayingImage"></div>',e+='<div class="nowPlayingBarText"></div>',e+="</div>",e+='<div class="nowPlayingBarCenter">',e+='<button is="paper-icon-button-light" class="previousTrackButton mediaButton"><span class="material-icons skip_previous" aria-hidden="true"></span></button>',e+='<button is="paper-icon-button-light" class="playPauseButton mediaButton"><span class="material-icons pause" aria-hidden="true"></span></button>',e+='<button is="paper-icon-button-light" class="stopButton mediaButton"><span class="material-icons stop" aria-hidden="true"></span></button>',o.Z.mobile||(e+='<button is="paper-icon-button-light" class="nextTrackButton mediaButton"><span class="material-icons skip_next" aria-hidden="true"></span></button>'),e+='<div class="nowPlayingBarCurrentTime"></div>',e+="</div>",e+='<div class="nowPlayingBarRight">',e+='<button is="paper-icon-button-light" class="muteButton mediaButton"><span class="material-icons volume_up" aria-hidden="true"></span></button>',e+='<div class="sliderContainer nowPlayingBarVolumeSliderContainer hide" style="width:9em;vertical-align:middle;display:inline-flex;">',e+='<input type="range" is="emby-slider" pin step="1" min="0" max="100" value="0" class="slider-medium-thumb nowPlayingBarVolumeSlider"/>',e+="</div>",e+='<button is="paper-icon-button-light" class="toggleRepeatButton mediaButton"><span class="material-icons repeat" aria-hidden="true"></span></button>',e+='<button is="paper-icon-button-light" class="btnShuffleQueue mediaButton"><span class="material-icons shuffle" aria-hidden="true"></span></button>',e+='<div class="nowPlayingBarUserDataButtons">',e+="</div>",e+='<button is="paper-icon-button-light" class="playPauseButton mediaButton"><span class="material-icons pause" aria-hidden="true"></span></button>',o.Z.mobile?e+='<button is="paper-icon-button-light" class="nextTrackButton mediaButton"><span class="material-icons skip_next" aria-hidden="true"></span></button>':e+='<button is="paper-icon-button-light" class="btnToggleContextMenu mediaButton"><span class="material-icons more_vert" aria-hidden="true"></span></button>',e+="</div>",(e+="</div>")+"</div>")),window.CustomElements.upgradeSubtree(a),L=a.querySelector(".nowPlayingBar"),o.Z.mobile&&(F(L.querySelector(".btnShuffleQueue")),F(L.querySelector(".nowPlayingBarCenter"))),r.Z.safari&&r.Z.slow&&L.classList.add("noMediaProgress"),B.ZP.on(L),g=(t=L).querySelector(".nowPlayingBarCurrentTime"),v=t.querySelector(".nowPlayingImage"),b=t.querySelector(".nowPlayingBarText"),P=t.querySelector(".nowPlayingBarUserDataButtons"),S=t.querySelector(".nowPlayingBarPositionSlider"),I=t.querySelector(".muteButton"),k=t.querySelectorAll(".playPauseButton"),A=t.querySelector(".toggleRepeatButton"),T=t.querySelector(".nowPlayingBarVolumeSlider"),w=t.querySelector(".nowPlayingBarVolumeSliderContainer"),I.addEventListener("click",(function(){f&&l.O.toggleMute(f)})),t.querySelector(".stopButton").addEventListener("click",(function(){f&&l.O.stop(f)})),k.forEach((function(e){e.addEventListener("click",U)})),t.querySelector(".nextTrackButton").addEventListener("click",(function(){f&&l.O.nextTrack(f)})),t.querySelector(".previousTrackButton").addEventListener("click",(function(e){if(f)if("Audio"===R.NowPlayingItem.MediaType&&(f._currentTime>=5||!l.O.previousTrack(f))){if(e.detail>1&&l.O.previousTrack(f))return;l.O.seekPercent(0,f),S.value=0}else l.O.previousTrack(f)})),t.querySelector(".previousTrackButton").addEventListener("dblclick",(function(){f&&l.O.previousTrack(f)})),t.querySelector(".btnShuffleQueue").addEventListener("click",(function(){f&&l.O.toggleQueueShuffleMode()})),(A=t.querySelector(".toggleRepeatButton")).addEventListener("click",(function(){switch(l.O.getRepeatMode()){case"RepeatAll":l.O.setRepeatMode("RepeatOne");break;case"RepeatOne":l.O.setRepeatMode("RepeatNone");break;case"RepeatNone":l.O.setRepeatMode("RepeatAll")}})),C=A.querySelector(".material-icons"),w.classList.toggle("hide",d.M.supports("physicalvolumecontrol")),T.addEventListener("input",(function(e){f&&f.setVolume(e.target.value)})),S.addEventListener("change",(function(){if(f){var e=parseFloat(this.value);l.O.seekPercent(e,f)}})),S.getBubbleText=function(e){if(!R||!R.NowPlayingItem||!q)return"--:--";var t=q;return t/=100,t*=e,n.ZP.getDisplayRunningTime(t)},t.addEventListener("click",(function(e){c.ZP.parentWithTag(e.target,["BUTTON","INPUT"])||M.appRouter.showNowPlaying()}))),L}function F(e){e.classList.add("hide")}function j(e){k&&k.forEach((function(t){var a=t.querySelector(".material-icons");a.classList.remove("play_arrow","pause"),a.classList.add(e?"play_arrow":"pause")}))}function V(e){C.classList.remove("repeat","repeat_one");var t="buttonActive";switch(e){case"RepeatAll":C.classList.add("repeat"),A.classList.add(t);break;case"RepeatOne":C.classList.add("repeat_one"),A.classList.add(t);break;default:C.classList.add("repeat"),A.classList.remove(t)}}function Q(e,t,a){if(S&&!S.dragging)if(t){var i=e/t;i*=100,S.value=i}else S.value=0;if(S&&S.setBufferedRanges(a,t,e),g){var r=null==e?"--:--":n.ZP.getDisplayRunningTime(e);t&&(r+=" / "+n.ZP.getDisplayRunningTime(t)),g.innerHTML=r}}function H(e,t){var a=x,n=!0,i=!0;-1===a.indexOf("ToggleMute")&&(n=!1);var r=I.querySelector(".material-icons");r.classList.remove("volume_off","volume_up"),r.classList.add(e?"volume_off":"volume_up"),-1===a.indexOf("SetVolume")&&(i=!1),f.isLocalPlayer&&d.M.supports("physicalvolumecontrol")&&(n=!1,i=!1),n?I.classList.remove("hide"):F(I),T&&(w.classList.toggle("hide",!i),T.dragging||(T.value=t||0))}function W(e,t){console.debug("nowplaying event: "+e.type),X.call(this,e,t)}function G(){Z&&V(l.O.getRepeatMode())}function J(){if(Z){var e=l.O.getQueueShuffleMode(),t="buttonActive",a=L.querySelector(".btnShuffleQueue");"Shuffle"===e?a.classList.add(t):a.classList.remove(t)}}function Y(){Z=!1;var e=document.getElementsByClassName("nowPlayingBar")[0];e&&function(e){e.offsetWidth,e.classList.add("nowPlayingBar-hidden"),c.ZP.addEventListener(e,c.ZP.whichTransitionEvent(),_,{once:!0})}(e)}function z(e,t){console.debug("nowplaying event: "+e.type),this.isLocalPlayer?"Audio"!==t.NextMediaType&&Y():t.NextMediaType||Y()}function K(){Z&&j(this.paused())}function X(e,t){if("init"!==e.type){console.debug("nowplaying event: "+e.type);t.NowPlayingItem&&!o.Z.tv&&!1!==t.IsFullscreen?this.isLocalPlayer&&t.NowPlayingItem&&"Video"===t.NowPlayingItem.MediaType?Y():(Z=!0,L||D(),function(e,t,a){var n;N?(n=D(),c.ZP.removeEventListener(n,c.ZP.whichTransitionEvent(),_,{once:!0}),n.classList.remove("hide"),n.offsetWidth,n.classList.remove("nowPlayingBar-hidden")):Y(),R=t;var i=l.O.getPlayerInfo(),r=t.PlayState||{};j(r.IsPaused);var d=i.supportedCommands;if(x=d,-1===d.indexOf("SetRepeatMode")?A.classList.add("hide"):A.classList.remove("hide"),V(l.O.getRepeatMode()),J(),H(r.IsMuted,r.VolumeLevel),S&&!S.dragging){S.disabled=!r.CanSeek;var h=t.MediaSource&&null==t.MediaSource.RunTimeTicks;S.setIsClear(h)}var f=t.NowPlayingItem||{};Q(r.PositionTicks,f.RunTimeTicks,l.O.getBufferedRanges(a)),function(e){var t=e.NowPlayingItem,a=t?u.Z.getNowPlayingNames(t):[];if(b.innerHTML="",a){var n=document.createElement("div"),i=document.createElement("div");if(i.classList.add("nowPlayingBarSecondaryText"),a.length>1&&(a[1].secondary=!0,a[1].text)){var r=document.createElement("a");r.innerHTML=a[1].text,i.appendChild(r)}if(a[0].text){var l=document.createElement("a");l.innerHTML=a[0].text,n.appendChild(l)}b.appendChild(n),b.appendChild(i)}var d=t?function(e,t){if(!e)throw new Error("item cannot be null!");if("Episode"!==e.Type)return null;if((t=t||{}).type=t.type||"Primary","Primary"===t.type&&e.SeriesPrimaryImageTag)return t.tag=e.SeriesPrimaryImageTag,p.Z.getApiClient(e.ServerId).getScaledImageUrl(e.SeriesId,t);if("Thumb"===t.type){if(e.SeriesThumbImageTag)return t.tag=e.SeriesThumbImageTag,p.Z.getApiClient(e.ServerId).getScaledImageUrl(e.SeriesId,t);if(e.ParentThumbImageTag)return t.tag=e.ParentThumbImageTag,p.Z.getApiClient(e.ServerId).getScaledImageUrl(e.ParentThumbItemId,t)}return null}(t,{height:70})||function(e,t){if(!e)throw new Error("item cannot be null!");return(t=t||{}).type=t.type||"Primary",e.ImageTags&&e.ImageTags[t.type]?(t.tag=e.ImageTags[t.type],p.Z.getApiClient(e.ServerId).getScaledImageUrl(e.PrimaryImageItemId||e.Id,t)):e.AlbumId&&e.AlbumPrimaryImageTag?(t.tag=e.AlbumPrimaryImageTag,p.Z.getApiClient(e.ServerId).getScaledImageUrl(e.AlbumId,t)):null}(t,{height:70}):null;if(d!==y&&(d?(y=d,s.default.lazyImage(v,y),v.style.display=null,b.style.marginLeft=null):(y=null,v.style.backgroundImage="",v.style.display="none",b.style.marginLeft="1em")),t.Id){var c=p.Z.getApiClient(t.ServerId);c.getItem(c.getCurrentUserId(),t.Id).then((function(e){var t=e.UserData||{},a=null==t.Likes?"":t.Likes;if(!o.Z.mobile){var n=L.querySelector(".btnToggleContextMenu"),i=n.cloneNode(!0);n.parentNode.replaceChild(i,n);var r={play:!1,queue:!1,stopPlayback:!0,clearQueue:!0,positionTo:n=L.querySelector(".btnToggleContextMenu")};c.getCurrentUser().then((function(t){n.addEventListener("click",(function(){m.default.show(Object.assign({item:e,user:t},r))}))}))}P.innerHTML='<button is="emby-ratingbutton" type="button" class="listItemButton mediaButton paper-icon-button-light" data-id="'+e.Id+'" data-serverid="'+e.ServerId+'" data-itemtype="'+e.Type+'" data-likes="'+a+'" data-isfavorite="'+t.IsFavorite+'"><span class="material-icons favorite" aria-hidden="true"></span></button>'}))}else P.innerHTML=""}(t)}(0,t,this)):Y()}}function $(){if(Z){var e=(new Date).getTime();if(!(e-O<700)){O=e;var t=this;q=l.O.duration(t),Q(1e4*l.O.currentTime(t),q,l.O.getBufferedRanges(t))}}}function ee(){Z&&H(this.isMuted(),this.getVolume())}function te(e,t){var a=l.O.getPlayerState(e);X.call(e,{type:t},a)}function ae(e){e!==f&&(function(){var e=f;e&&(i.Events.off(e,"playbackstart",W),i.Events.off(e,"statechange",W),i.Events.off(e,"repeatmodechange",G),i.Events.off(e,"shufflequeuemodechange",J),i.Events.off(e,"playbackstop",z),i.Events.off(e,"volumechange",ee),i.Events.off(e,"pause",K),i.Events.off(e,"unpause",K),i.Events.off(e,"timeupdate",$),f=null,Y())}(),f=e,e&&(te(e,"init"),i.Events.on(e,"playbackstart",W),i.Events.on(e,"statechange",W),i.Events.on(e,"repeatmodechange",G),i.Events.on(e,"shufflequeuemodechange",J),i.Events.on(e,"playbackstop",z),i.Events.on(e,"volumechange",ee),i.Events.on(e,"pause",K),i.Events.on(e,"unpause",K),i.Events.on(e,"timeupdate",$)))}i.Events.on(l.O,"playerchange",(function(){ae(l.O.getCurrentPlayer())})),ae(l.O.getCurrentPlayer()),document.addEventListener("viewbeforeshow",(function(e){e.detail.options.enableMediaControl?N||(N=!0,f?te(f,"refresh"):Y()):N&&(N=!1,Y())}))},69011:function(e,t,a){a(61013);var n=a(65009),i=a.n(n);t.Z={getNowPlayingNames:function(e,t){var a=e,n=null,r=e.Name;e.AlbumId&&"Audio"===e.MediaType&&(a={Id:e.AlbumId,Name:e.Album,Type:"MusicAlbum",IsFolder:!0}),"Video"===e.MediaType&&(null!=e.IndexNumber&&(r=e.IndexNumber+" - "+r),null!=e.ParentIndexNumber&&(r=e.ParentIndexNumber+"."+r));var s="";e.ArtistItems&&e.ArtistItems.length?(n={Id:e.ArtistItems[0].Id,Name:e.ArtistItems[0].Name,Type:"MusicArtist",IsFolder:!0},s=e.ArtistItems.map((function(e){return e.Name})).join(", ")):e.Artists&&e.Artists.length?s=e.Artists.join(", "):e.SeriesName||e.Album?(s=r,r=e.SeriesName||e.Album,n=a,a=e.SeriesId?{Id:e.SeriesId,Name:e.SeriesName,Type:"Series",IsFolder:!0}:null):e.ProductionYear&&!1!==t&&(s=e.ProductionYear);var o=[];return o.push({text:i()(r),item:a}),s&&o.push({text:i()(s),item:n}),o}}},27636:function(e,t,a){a.r(t);var n=a(44038),i=a(47005),r=a(94994),s=a(38228),o=a(18613);function l(){var e=this,t=e.getAttribute("data-id"),a=e.getAttribute("data-serverid"),n=o.Z.getApiClient(a),i=this.getAttribute("data-likes");i="true"===i||"false"!==i&&null,function(e,t,a,n,i){return t.updateFavoriteStatus(t.getCurrentUserId(),a,!i)}(0,n,t,0,"true"===this.getAttribute("data-isfavorite")).then((function(t){d(e,t.Likes,t.IsFavorite)}))}function u(e,t,a){a.ItemId===this.getAttribute("data-id")&&d(this,a.Likes,a.IsFavorite)}function d(e,t,a,n){var i=e.querySelector(".material-icons");a?(i&&(i.classList.add("favorite"),i.classList.add("ratingbutton-icon-withrating")),e.classList.add("ratingbutton-withrating")):(i&&(i.classList.add("favorite"),i.classList.remove("ratingbutton-icon-withrating")),e.classList.remove("ratingbutton-withrating")),!1!==n&&(e.setAttribute("data-isfavorite",a),e.setAttribute("data-likes",null===t?"":t)),c(e,a)}function c(e,t){e.title=t?r.ZP.translate("Favorite"):r.ZP.translate("AddToFavorites");var a=e.querySelector(".button-text");a&&(a.innerText=e.title)}function m(e){var t,a,r;e.removeEventListener("click",l),(r=(t=e)[a="UserDataChanged"])&&(i.Events.off(n.default,a,r),t[a]=null)}function p(e){var t,a,r;m(e),e.addEventListener("click",l),t=e,a="UserDataChanged",r=u.bind(t),i.Events.on(n.default,a,r),t[a]=r}var h=Object.create(s.Z);h.createdCallback=function(){s.Z.createdCallback&&s.Z.createdCallback.call(this)},h.attachedCallback=function(){s.Z.attachedCallback&&s.Z.attachedCallback.call(this);var e=this.getAttribute("data-id"),t=this.getAttribute("data-serverid");if(e&&t){var a=this.getAttribute("data-likes");d(this,a="true"===a||"false"!==a&&null,"true"===this.getAttribute("data-isfavorite"),!1),p(this)}else c(this)},h.detachedCallback=function(){s.Z.detachedCallback&&s.Z.detachedCallback.call(this),m(this)},h.setItem=function(e){if(e){this.setAttribute("data-id",e.Id),this.setAttribute("data-serverid",e.ServerId);var t=e.UserData||{};d(this,t.Likes,t.IsFavorite),p(this)}else this.removeAttribute("data-id"),this.removeAttribute("data-serverid"),this.removeAttribute("data-likes"),this.removeAttribute("data-isfavorite"),m(this)},document.registerElement("emby-ratingbutton",{prototype:h,extends:"button"})},87796:function(e,t,a){a.d(t,{J:function(){return r}}),a(63238),a(61418);var n=a(57366);function i(e){var t,a=document.createElement("textarea");if(a.value=e,document.body.appendChild(a),a.focus(),n.Z.iOS&&n.Z.iOSVersion<13.4){var i=document.createRange();i.selectNodeContents(a);var r=window.getSelection();r.removeAllRanges(),r.addRange(i),a.setSelectionRange(0,999999)}else a.select();try{t=document.execCommand("copy")?Promise.resolve():Promise.reject()}catch(e){t=Promise.reject()}return document.body.removeChild(a),t}function r(e){return void 0===navigator.clipboard?i(e):navigator.clipboard.writeText(e).catch((function(){return i(e)}))}}}]);