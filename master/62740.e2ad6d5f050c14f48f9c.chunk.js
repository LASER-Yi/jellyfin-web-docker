"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[62740,78130,16160,27636],{56229:function(e,t,n){n.r(t),n(81414),n(47134),n(63241),n(44901),n(62659);var i=n(61693),a=n(74131),r=n(57366),o=n(85432),s=n(30325),l=n(48957),u=n(69011),c=n(92811),d=n(72365),m=n(9337),f=(n(61414),n(27636),n(18613));function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,g(i.key),i)}}function g(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=p(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:String(t)}n(26031),n(95822),n(56187),n(38690),n(11908),n(33096),n(89228),n(13227),n(14011),n(11431);var h,y,b,S,I,P,T,w,k,L,A,B,C,x,Z,O,M=new(function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=((t=document.createElement("div")).classList.add("appfooter"),document.body.appendChild(t),t),this.add=function(e){this.element.appendChild(e)},this.insert=function(e){"string"==typeof e?this.element.insertAdjacentHTML("afterbegin",e):this.element.insertBefore(e,this.element.firstChild)}}var t,n;return t=e,(n=[{key:"destroy",value:function(){this.element=null}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()),E=n(61008),q=(n(42855),n(66560)),N=[],R=0,F={},D=0,U=!0;function _(){this.classList.add("hide")}function H(){l.O.playPause(h)}function j(){if(O)return O;var e,t,n=M.element;return(O=n.querySelector(".nowPlayingBar"))||(n.insertAdjacentHTML("afterbegin",(e="",e+='<div class="nowPlayingBar hide nowPlayingBar-hidden">',e+='<div class="nowPlayingBarTop">',e+='<div class="nowPlayingBarPositionContainer sliderContainer" dir="ltr">',e+='<input type="range" is="emby-slider" pin step=".01" min="0" max="100" value="0" class="slider-medium-thumb nowPlayingBarPositionSlider" data-slider-keep-progress="true"/>',e+="</div>",e+='<div class="nowPlayingBarInfoContainer">',e+='<div class="nowPlayingImage"></div>',e+='<div class="nowPlayingBarText"></div>',e+="</div>",e+='<div class="nowPlayingBarCenter" dir="ltr">',e+='<button is="paper-icon-button-light" class="previousTrackButton mediaButton"><span class="material-icons skip_previous" aria-hidden="true"></span></button>',e+='<button is="paper-icon-button-light" class="playPauseButton mediaButton"><span class="material-icons pause" aria-hidden="true"></span></button>',e+='<button is="paper-icon-button-light" class="stopButton mediaButton"><span class="material-icons stop" aria-hidden="true"></span></button>',s.Z.mobile||(e+='<button is="paper-icon-button-light" class="nextTrackButton mediaButton"><span class="material-icons skip_next" aria-hidden="true"></span></button>'),e+='<div class="nowPlayingBarCurrentTime"></div>',e+="</div>",e+='<div class="nowPlayingBarRight">',e+='<button is="paper-icon-button-light" class="muteButton mediaButton"><span class="material-icons volume_up" aria-hidden="true"></span></button>',e+='<div class="sliderContainer nowPlayingBarVolumeSliderContainer hide" style="width:9em;vertical-align:middle;display:inline-flex;">',e+='<input type="range" is="emby-slider" pin step="1" min="0" max="100" value="0" class="slider-medium-thumb nowPlayingBarVolumeSlider"/>',e+="</div>",e+='<button is="paper-icon-button-light" class="btnAirPlay mediaButton"><span class="material-icons airplay" aria-hidden="true"></span></button>',e+='<button is="paper-icon-button-light" class="toggleRepeatButton mediaButton"><span class="material-icons repeat" aria-hidden="true"></span></button>',e+='<button is="paper-icon-button-light" class="btnShuffleQueue mediaButton"><span class="material-icons shuffle" aria-hidden="true"></span></button>',e+='<div class="nowPlayingBarUserDataButtons">',e+="</div>",e+='<button is="paper-icon-button-light" class="playPauseButton mediaButton"><span class="material-icons pause" aria-hidden="true"></span></button>',s.Z.mobile?e+='<button is="paper-icon-button-light" class="nextTrackButton mediaButton"><span class="material-icons skip_next" aria-hidden="true"></span></button>':e+='<button is="paper-icon-button-light" class="btnToggleContextMenu mediaButton"><span class="material-icons more_vert" aria-hidden="true"></span></button>',e+="</div>",(e+="</div>")+"</div>")),window.CustomElements.upgradeSubtree(n),O=n.querySelector(".nowPlayingBar"),s.Z.mobile&&(V(O.querySelector(".btnShuffleQueue")),V(O.querySelector(".nowPlayingBarCenter"))),r.Z.safari&&r.Z.slow&&O.classList.add("noMediaProgress"),E.ZP.on(O),y=(t=O).querySelector(".nowPlayingBarCurrentTime"),b=t.querySelector(".nowPlayingImage"),I=t.querySelector(".nowPlayingBarText"),P=t.querySelector(".nowPlayingBarUserDataButtons"),A=t.querySelector(".nowPlayingBarPositionSlider"),T=t.querySelector(".muteButton"),L=t.querySelectorAll(".playPauseButton"),C=t.querySelector(".toggleRepeatButton"),w=t.querySelector(".nowPlayingBarVolumeSlider"),k=t.querySelector(".nowPlayingBarVolumeSliderContainer"),T.addEventListener("click",(function(){h&&l.O.toggleMute(h)})),t.querySelector(".stopButton").addEventListener("click",(function(){h&&l.O.stop(h)})),L.forEach((function(e){e.addEventListener("click",H)})),t.querySelector(".nextTrackButton").addEventListener("click",(function(){h&&l.O.nextTrack(h)})),t.querySelector(".previousTrackButton").addEventListener("click",(function(e){if(h){if(l.O.isPlayingAudio(h)){if(e.detail>1)return;if(l.O.currentTime(h)>=5e3||l.O.getCurrentPlaylistIndex(h)<=0)return l.O.seekPercent(0,h),void(A.value=0)}l.O.previousTrack(h)}})),t.querySelector(".previousTrackButton").addEventListener("dblclick",(function(){h&&l.O.previousTrack(h)})),(B=t.querySelector(".btnAirPlay")).addEventListener("click",(function(){h&&l.O.toggleAirPlay(h)})),t.querySelector(".btnShuffleQueue").addEventListener("click",(function(){h&&l.O.toggleQueueShuffleMode()})),(C=t.querySelector(".toggleRepeatButton")).addEventListener("click",(function(){switch(l.O.getRepeatMode()){case"RepeatAll":l.O.setRepeatMode("RepeatOne");break;case"RepeatOne":l.O.setRepeatMode("RepeatNone");break;case"RepeatNone":l.O.setRepeatMode("RepeatAll")}})),x=C.querySelector(".material-icons"),k.classList.toggle("hide",c.M.supports("physicalvolumecontrol")),w.addEventListener("input",(function(e){h&&h.setVolume(e.target.value)})),A.addEventListener("change",(function(){if(h){var e=parseFloat(this.value);l.O.seekPercent(e,h)}})),A.getBubbleText=function(e){if(null==F||!F.NowPlayingItem||!D)return"--:--";var t=D;return t/=100,t*=e,i.ZP.getDisplayRunningTime(t)},t.addEventListener("click",(function(e){d.ZP.parentWithTag(e.target,["BUTTON","INPUT"])||q.appRouter.showNowPlaying()}))),O}function V(e){e.classList.add("hide")}function W(e){L&&L.forEach((function(t){var n=t.querySelector(".material-icons");n.classList.remove("play_arrow","pause"),n.classList.add(e?"play_arrow":"pause")}))}function Y(e){x.classList.remove("repeat","repeat_one");var t="buttonActive";switch(e){case"RepeatAll":x.classList.add("repeat"),C.classList.add(t);break;case"RepeatOne":x.classList.add("repeat_one"),C.classList.add(t);break;default:x.classList.add("repeat"),C.classList.remove(t)}}function Q(e,t,n){if(A&&!A.dragging)if(t){var a=e/t;a*=100,A.value=a}else A.value=0;if(A&&A.setBufferedRanges(n,t,e),y){var r=null==e?"--:--":i.ZP.getDisplayRunningTime(e);t&&(r+=" / "+i.ZP.getDisplayRunningTime(t)),y.innerHTML=r}}function z(e,t){var n=N,i=!0,a=!0;-1===n.indexOf("ToggleMute")&&(i=!1);var r=T.querySelector(".material-icons");r.classList.remove("volume_off","volume_up"),r.classList.add(e?"volume_off":"volume_up"),-1===n.indexOf("SetVolume")&&(a=!1),h.isLocalPlayer&&c.M.supports("physicalvolumecontrol")&&(i=!1,a=!1),i?T.classList.remove("hide"):V(T),w&&(k.classList.toggle("hide",!a),w.dragging||(w.value=t||0))}function G(e,t){console.debug("nowplaying event: "+e.type),te.call(this,e,t)}function J(){Z&&Y(l.O.getRepeatMode())}function K(){if(Z){var e=l.O.getQueueShuffleMode(),t="buttonActive",n=O.querySelector(".btnShuffleQueue");"Shuffle"===e?n.classList.add(t):n.classList.remove(t)}}function X(){Z=!1;var e=document.getElementsByClassName("nowPlayingBar")[0];e&&function(e){e.offsetWidth,e.classList.add("nowPlayingBar-hidden"),d.ZP.addEventListener(e,d.ZP.whichTransitionEvent(),_,{once:!0})}(e)}function $(e,t){console.debug("[nowPlayingBar:onPlaybackStopped] event: "+e.type),this.isLocalPlayer?"Audio"!==t.NextMediaType&&X():t.NextMediaType||X()}function ee(){Z&&W(this.paused())}function te(e,t){if("init"!==e.type){console.debug("[nowPlayingBar:onStateChanged] event: "+e.type);t.NowPlayingItem&&!s.Z.tv&&!1!==t.IsFullscreen?this.isLocalPlayer&&t.NowPlayingItem&&"Video"===t.NowPlayingItem.MediaType?X():(Z=!0,O||j(),function(e,t,n){var i;U?(i=j(),d.ZP.removeEventListener(i,d.ZP.whichTransitionEvent(),_,{once:!0}),i.classList.remove("hide"),i.offsetWidth,i.classList.remove("nowPlayingBar-hidden")):X(),F=t;var a=l.O.getPlayerInfo(),r=t.PlayState||{};W(r.IsPaused);var c=a.supportedCommands;N=c,-1===c.indexOf("SetRepeatMode")?C.classList.add("hide"):C.classList.remove("hide");var p=-1===c.indexOf("AirPlay");if(B.classList.toggle("hide",p),Y(l.O.getRepeatMode()),K(),z(r.IsMuted,r.VolumeLevel),A&&!A.dragging){A.disabled=!r.CanSeek;var v=t.MediaSource&&null==t.MediaSource.RunTimeTicks;A.setIsClear(v)}var g=t.NowPlayingItem||{};Q(r.PositionTicks,g.RunTimeTicks,l.O.getBufferedRanges(n)),function(e){var t=e.NowPlayingItem,n=t?u.Z.getNowPlayingNames(t):[];if(I.innerHTML="",n){var i=document.createElement("div"),a=document.createElement("div");if(a.classList.add("nowPlayingBarSecondaryText"),n.length>1&&(n[1].secondary=!0,n[1].text)){var r=document.createElement("a");r.innerText=n[1].text,a.appendChild(r)}if(n[0].text){var l=document.createElement("a");l.innerText=n[0].text,i.appendChild(l)}I.appendChild(i),I.appendChild(a)}var c=t?function(e,t){if(!e)throw new Error("item cannot be null!");if("Episode"!==e.Type)return null;if((t=t||{}).type=t.type||"Primary","Primary"===t.type&&e.SeriesPrimaryImageTag)return t.tag=e.SeriesPrimaryImageTag,f.Z.getApiClient(e.ServerId).getScaledImageUrl(e.SeriesId,t);if("Thumb"===t.type){if(e.SeriesThumbImageTag)return t.tag=e.SeriesThumbImageTag,f.Z.getApiClient(e.ServerId).getScaledImageUrl(e.SeriesId,t);if(e.ParentThumbImageTag)return t.tag=e.ParentThumbImageTag,f.Z.getApiClient(e.ServerId).getScaledImageUrl(e.ParentThumbItemId,t)}return null}(t,{height:70})||function(e,t){var n;if(!e)throw new Error("item cannot be null!");return(t=t||{}).type=t.type||"Primary",null!==(n=e.ImageTags)&&void 0!==n&&n[t.type]?(t.tag=e.ImageTags[t.type],f.Z.getApiClient(e.ServerId).getScaledImageUrl(e.PrimaryImageItemId||e.Id,t)):e.AlbumId&&e.AlbumPrimaryImageTag?(t.tag=e.AlbumPrimaryImageTag,f.Z.getApiClient(e.ServerId).getScaledImageUrl(e.AlbumId,t)):null}(t,{height:70}):null;if(c!==S&&(c?(S=c,o.default.lazyImage(b,S),b.style.display=null,I.style.marginLeft=null):(S=null,b.style.backgroundImage="",b.style.display="none",I.style.marginLeft="1em")),t.Id){var d=f.Z.getApiClient(t.ServerId);d.getItem(d.getCurrentUserId(),t.Id).then((function(e){var t=e.UserData||{},n=null==t.Likes?"":t.Likes;if(!s.Z.mobile){var i=O.querySelector(".btnToggleContextMenu"),a=i.cloneNode(!0);i.parentNode.replaceChild(a,i);var r={play:!1,queue:!1,stopPlayback:!0,clearQueue:!0,positionTo:i=O.querySelector(".btnToggleContextMenu")};d.getCurrentUser().then((function(t){i.addEventListener("click",(function(){m.default.show(Object.assign({item:e,user:t},r)).catch((function(){}))}))}))}P.innerHTML='<button is="emby-ratingbutton" type="button" class="listItemButton mediaButton paper-icon-button-light" data-id="'+e.Id+'" data-serverid="'+e.ServerId+'" data-itemtype="'+e.Type+'" data-likes="'+n+'" data-isfavorite="'+t.IsFavorite+'"><span class="material-icons favorite" aria-hidden="true"></span></button>'}))}else P.innerHTML=""}(t)}(0,t,this)):X()}}function ne(){if(Z){var e=(new Date).getTime();if(!(e-R<700)){R=e;var t=this;D=l.O.duration(t),Q(1e4*l.O.currentTime(t),D,l.O.getBufferedRanges(t))}}}function ie(){Z&&z(this.isMuted(),this.getVolume())}function ae(e,t){var n=l.O.getPlayerState(e);te.call(e,{type:t},n)}function re(e){e!==h&&(function(){var e=h;e&&(a.Z.off(e,"playbackstart",G),a.Z.off(e,"statechange",G),a.Z.off(e,"repeatmodechange",J),a.Z.off(e,"shufflequeuemodechange",K),a.Z.off(e,"playbackstop",$),a.Z.off(e,"volumechange",ie),a.Z.off(e,"pause",ee),a.Z.off(e,"unpause",ee),a.Z.off(e,"timeupdate",ne),h=null,X())}(),h=e,e&&(ae(e,"init"),a.Z.on(e,"playbackstart",G),a.Z.on(e,"statechange",G),a.Z.on(e,"repeatmodechange",J),a.Z.on(e,"shufflequeuemodechange",K),a.Z.on(e,"playbackstop",$),a.Z.on(e,"volumechange",ie),a.Z.on(e,"pause",ee),a.Z.on(e,"unpause",ee),a.Z.on(e,"timeupdate",ne)))}a.Z.on(l.O,"playerchange",(function(){re(l.O.getCurrentPlayer())})),re(l.O.getCurrentPlayer()),document.addEventListener("viewbeforeshow",(function(e){e.detail.options.enableMediaControl?U||(U=!0,h?ae(h,"refresh"):X()):U&&(U=!1,X())}))},69011:function(e,t,n){n(96626),t.Z={getNowPlayingNames:function(e,t){var n,i,a=e,r=null,o=e.Name;e.AlbumId&&"Audio"===e.MediaType&&(a={Id:e.AlbumId,Name:e.Album,Type:"MusicAlbum",IsFolder:!0}),"Video"===e.MediaType&&(null!=e.IndexNumber&&(o=e.IndexNumber+" - "+o),null!=e.ParentIndexNumber&&(o=e.ParentIndexNumber+"."+o));var s="";null!==(n=e.ArtistItems)&&void 0!==n&&n.length?(r={Id:e.ArtistItems[0].Id,Name:e.ArtistItems[0].Name,Type:"MusicArtist",IsFolder:!0},s=e.ArtistItems.map((function(e){return e.Name})).join(", ")):null!==(i=e.Artists)&&void 0!==i&&i.length?s=e.Artists.join(", "):e.SeriesName||e.Album?(s=o,o=e.SeriesName||e.Album,r=a,a=e.SeriesId?{Id:e.SeriesId,Name:e.SeriesName,Type:"Series",IsFolder:!0}:null):e.ProductionYear&&!1!==t&&(s=e.ProductionYear);var l=[];return l.push({text:o,item:a}),s&&l.push({text:s,item:r}),l}}},27636:function(e,t,n){n.r(t);var i=n(44038),a=n(94994),r=n(74131),o=n(38228),s=n(18613);function l(){var e=this,t=e.getAttribute("data-id"),n=e.getAttribute("data-serverid"),i=s.Z.getApiClient(n),a=this.getAttribute("data-likes");a="true"===a||"false"!==a&&null,function(e,t,n,i,a){return t.updateFavoriteStatus(t.getCurrentUserId(),n,!a)}(0,i,t,0,"true"===this.getAttribute("data-isfavorite")).then((function(t){c(e,t.Likes,t.IsFavorite)}))}function u(e,t,n){n.ItemId===this.getAttribute("data-id")&&c(this,n.Likes,n.IsFavorite)}function c(e,t,n,i){var a=e.querySelector(".material-icons");n?(a&&(a.classList.add("favorite"),a.classList.add("ratingbutton-icon-withrating")),e.classList.add("ratingbutton-withrating")):(a&&(a.classList.add("favorite"),a.classList.remove("ratingbutton-icon-withrating")),e.classList.remove("ratingbutton-withrating")),!1!==i&&(e.setAttribute("data-isfavorite",n),e.setAttribute("data-likes",null===t?"":t)),d(e,n)}function d(e,t){e.title=t?a.ZP.translate("Favorite"):a.ZP.translate("AddToFavorites");var n=e.querySelector(".button-text");n&&(n.innerText=e.title)}function m(e){var t,n,a;e.removeEventListener("click",l),(a=(t=e)[n="UserDataChanged"])&&(r.Z.off(i.default,n,a),t[n]=null)}function f(e){var t,n,a;m(e),e.addEventListener("click",l),t=e,n="UserDataChanged",a=u.bind(t),r.Z.on(i.default,n,a),t[n]=a}var p=Object.create(o.Z);p.createdCallback=function(){o.Z.createdCallback&&o.Z.createdCallback.call(this)},p.attachedCallback=function(){o.Z.attachedCallback&&o.Z.attachedCallback.call(this);var e=this.getAttribute("data-id"),t=this.getAttribute("data-serverid");if(e&&t){var n=this.getAttribute("data-likes");c(this,n="true"===n||"false"!==n&&null,"true"===this.getAttribute("data-isfavorite"),!1),f(this)}else d(this)},p.detachedCallback=function(){o.Z.detachedCallback&&o.Z.detachedCallback.call(this),m(this)},p.setItem=function(e){if(e){this.setAttribute("data-id",e.Id),this.setAttribute("data-serverid",e.ServerId);var t=e.UserData||{};c(this,t.Likes,t.IsFavorite),f(this)}else this.removeAttribute("data-id"),this.removeAttribute("data-serverid"),this.removeAttribute("data-likes"),this.removeAttribute("data-isfavorite"),m(this)},document.registerElement("emby-ratingbutton",{prototype:p,extends:"button"})},78130:function(e,t,n){n.r(t),n.d(t,{show:function(){return d}});var i=n(65009),a=n.n(i),r=n(93355),o=n(30325),s=n(94994),l=n(72365),u=(n(38228),function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")});function c(e,t,i){Promise.resolve().then(n.bind(n,22652)).then((function(n){var a=i?"on":"off";n.centerFocus[a](e,t)})).catch((function(e){console.warn("Error in centerFocus",e)}))}function d(e){var t,n,i,d={removeOnClose:!0,enableHistory:e.enableHistory,scrollY:!1};o.Z.tv?(d.size="fullscreen",i=!0,d.autoFocus=!0):(d.modal=!1,d.entryAnimation=e.entryAnimation,d.exitAnimation=e.exitAnimation,d.entryAnimationDuration=e.entryAnimationDuration||140,d.exitAnimationDuration=e.exitAnimationDuration||100,d.autoFocus=!1);var m=r.default.createDialog(d);i?m.classList.add("actionsheet-fullscreen"):m.classList.add("actionsheet-not-fullscreen"),m.classList.add("actionSheet"),e.dialogClass&&m.classList.add(e.dialogClass);var f="",p=o.Z.tv?"scrollY smoothScrollY hiddenScrollY":"scrollY",v="";e.items.length>20&&(v+="min-width:"+(l.ZP.getWindowSize().innerWidth>=300?240:200)+"px;");var g,h=!1,y=[];try{for(var b=u(e.items),S=b.next();!S.done;S=b.next())(g=(k=S.value).icon||(k.selected?"check":null))&&(h=!0),y.push(g||"")}catch(e){t={error:e}}finally{try{S&&!S.done&&(n=b.return)&&n.call(b)}finally{if(t)throw t.error}}o.Z.tv&&(f+='<button is="paper-icon-button-light" class="btnCloseActionSheet hide-mouse-idle-tv" tabindex="-1" title="'.concat(s.ZP.translate("ButtonBack"),'">\n                     <span class="material-icons arrow_back" aria-hidden="true"></span>\n                 </button>'));var I=e.title&&!h;I||o.Z.tv?f+='<div class="actionSheetContent actionSheetContent-centered">':f+='<div class="actionSheetContent">',e.title&&(f+='<h1 class="actionSheetTitle">'+a()(e.title)+"</h1>"),e.text&&(f+='<p class="actionSheetText">'+a()(e.text)+"</p>");var P="actionSheetScroller";o.Z.tv&&(P+=" actionSheetScroller-tv focuscontainer-x focuscontainer-y"),f+='<div class="'+P+" "+p+'" style="'+v+'">';var T="listItem listItem-button actionSheetMenuItem";(e.border||e.shaded)&&(T+=" listItem-border"),e.menuItemClass&&(T+=" "+e.menuItemClass),o.Z.tv&&(T+=" listItem-focusscale"),o.Z.mobile&&(T+=" actionsheet-xlargeFont");for(var w=0;w<e.items.length;w++){var k;(k=e.items[w]).divider?f+='<div class="actionsheetDivider"></div>':(f+="<button"+(k.selected&&o.Z.tv?" autoFocus":"")+' is="emby-button" type="button" class="'+T+'" data-id="'+(null==k.id||""===k.id?k.value:k.id)+'">',(g=y[w])?f+='<span class="actionsheetMenuItemIcon listItemIcon listItemIcon-transparent material-icons '.concat(g,'" aria-hidden="true"></span>'):h&&!I&&(f+='<span class="actionsheetMenuItemIcon listItemIcon listItemIcon-transparent material-icons check" aria-hidden="true" style="visibility:hidden;"></span>'),f+='<div class="listItemBody actionsheetListItemBody">',f+='<div class="listItemBodyText actionSheetItemText">',f+=a()(k.name||k.textContent||k.innerText),f+="</div>",k.secondaryText&&(f+='<div class="listItemBodyText secondary">'.concat(a()(k.secondaryText),"</div>")),f+="</div>",k.asideText&&(f+='<div class="listItemAside actionSheetItemAsideText">'.concat(a()(k.asideText),"</div>")),f+="</button>")}if(e.showCancel&&(f+='<div class="buttons">',f+='<button is="emby-button" type="button" class="btnCloseActionSheet">'.concat(s.ZP.translate("ButtonCancel"),"</button>"),f+="</div>"),f+="</div>",m.innerHTML=f,o.Z.tv){var L=m.querySelector(".actionSheetScroller");L&&c(L,!1,!0)}var A=m.querySelector(".btnCloseActionSheet");A&&A.addEventListener("click",(function(){r.default.close(m)}));var B,C=null;return e.timeout&&(B=setTimeout((function(){r.default.close(m)}),e.timeout)),new Promise((function(t,n){var i=!1;m.addEventListener("click",(function(n){var a=l.ZP.parentWithClass(n.target,"actionSheetMenuItem");a&&(C=a.getAttribute("data-id"),e.resolveOnClick&&(Array.isArray(e.resolveOnClick)?-1!==e.resolveOnClick.indexOf(C)&&(t(C),i=!0):(t(C),i=!0)),r.default.close(m))})),m.addEventListener("close",(function(){if(o.Z.tv){var a=m.querySelector(".actionSheetScroller");a&&c(a,!1,!1)}B&&(clearTimeout(B),B=void 0),i||(null!=C?(e.callback&&e.callback(C),t(C)):n("ActionSheet closed without resolving"))})),r.default.open(m).catch((function(e){console.warn("DialogHelper.open error",e)}));var a=e.positionTo&&"fullscreen"!==d.size?function(e,t,n){var i=l.ZP.getWindowSize(),a=i.innerHeight,r=i.innerWidth,o=function(e){var t,n,i=[];if(!document)return i;try{for(var a=u(e),r=a.next();!r.done;r=a.next()){var o=r.value.getBoundingClientRect();i.push({top:o.top,left:o.left,width:o.width,height:o.height})}}catch(e){t={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i}([e])[0];"top"!==t.positionY&&(o.top+=(o.height||0)/2),o.left+=(o.width||0)/2;var s=n.offsetHeight||300,c=n.offsetWidth||160;o.top-=s/2,o.left-=c/2;var d=o.left+c-r,m=o.top+s-a;return d>0&&(o.left-=d+20),m>0&&(o.top-=m+20),o.top+=t.offsetTop||0,o.left+=t.offsetLeft||0,o.top=Math.max(o.top,10),o.left=Math.max(o.left,10),o}(e.positionTo,e,m):null;a&&(m.style.position="fixed",m.style.margin="0",m.style.left=a.left+"px",m.style.top=a.top+"px")}))}t.default={show:d}}}]);