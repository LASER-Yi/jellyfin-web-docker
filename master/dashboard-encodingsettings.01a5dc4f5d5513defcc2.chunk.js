/*! For license information please see dashboard-encodingsettings.01a5dc4f5d5513defcc2.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[52832,49213,73287],{4022:function(e,t,n){n.r(t),n(13227),n(81414),n(44901),n(54112),n(96626),n(2663),n(37666),n(14011),n(11431),n(72326);var o,r=n(34862),a=n(94994),c=n(72365),l=n(71487),i=n(60635),s=n(37099);function u(){r.ZP.hide(),(0,s.Z)(a.ZP.translate("FFmpegSavePathNotFound"))}function d(){var e=this,t=function(){r.ZP.show(),ApiClient.getNamedConfiguration("encoding").then((function(t){t.EnableAudioVbr=e.querySelector("#chkEnableAudioVbr").checked,t.DownMixAudioBoost=$("#txtDownMixAudioBoost",e).val(),t.DownMixStereoAlgorithm=$("#selectStereoDownmixAlgorithm",e).val()||"None",t.MaxMuxingQueueSize=e.querySelector("#txtMaxMuxingQueueSize").value,t.TranscodingTempPath=$("#txtTranscodingTempPath",e).val(),t.FallbackFontPath=e.querySelector("#txtFallbackFontPath").value,t.EnableFallbackFont=!!e.querySelector("#txtFallbackFontPath").value&&e.querySelector("#chkEnableFallbackFont").checked,t.EncodingThreadCount=$("#selectThreadCount",e).val(),t.HardwareAccelerationType=$("#selectVideoDecoder",e).val(),t.VaapiDevice=$("#txtVaapiDevice",e).val(),t.EnableTonemapping=e.querySelector("#chkTonemapping").checked,t.EnableVppTonemapping=e.querySelector("#chkVppTonemapping").checked,t.EnableVideoToolboxTonemapping=e.querySelector("#chkVideoToolboxTonemapping").checked,t.TonemappingAlgorithm=e.querySelector("#selectTonemappingAlgorithm").value,t.TonemappingMode=e.querySelector("#selectTonemappingMode").value,t.TonemappingRange=e.querySelector("#selectTonemappingRange").value,t.TonemappingDesat=e.querySelector("#txtTonemappingDesat").value,t.TonemappingPeak=e.querySelector("#txtTonemappingPeak").value,t.TonemappingParam=e.querySelector("#txtTonemappingParam").value||"0",t.VppTonemappingBrightness=e.querySelector("#txtVppTonemappingBrightness").value,t.VppTonemappingContrast=e.querySelector("#txtVppTonemappingContrast").value,t.EncoderPreset=e.querySelector("#selectEncoderPreset").value,t.H264Crf=parseInt(e.querySelector("#txtH264Crf").value||"0",10),t.H265Crf=parseInt(e.querySelector("#txtH265Crf").value||"0",10),t.DeinterlaceMethod=e.querySelector("#selectDeinterlaceMethod").value,t.DeinterlaceDoubleRate=e.querySelector("#chkDoubleRateDeinterlacing").checked,t.EnableSubtitleExtraction=e.querySelector("#chkEnableSubtitleExtraction").checked,t.EnableThrottling=e.querySelector("#chkEnableThrottling").checked,t.EnableSegmentDeletion=e.querySelector("#chkEnableSegmentDeletion").checked,t.ThrottleDelaySeconds=parseInt(e.querySelector("#txtThrottleDelaySeconds").value||"0",10),t.SegmentKeepSeconds=parseInt(e.querySelector("#txtSegmentKeepSeconds").value||"0",10),t.HardwareDecodingCodecs=Array.prototype.map.call(Array.prototype.filter.call(e.querySelectorAll(".chkDecodeCodec"),(function(e){return e.checked})),(function(e){return e.getAttribute("data-codec")})),t.EnableDecodingColorDepth10Hevc=e.querySelector("#chkDecodingColorDepth10Hevc").checked,t.EnableDecodingColorDepth10Vp9=e.querySelector("#chkDecodingColorDepth10Vp9").checked,t.EnableEnhancedNvdecDecoder=e.querySelector("#chkEnhancedNvdecDecoder").checked,t.PreferSystemNativeHwDecoder=e.querySelector("#chkSystemNativeHwDecoder").checked,t.EnableIntelLowPowerH264HwEncoder=e.querySelector("#chkIntelLpH264HwEncoder").checked,t.EnableIntelLowPowerHevcHwEncoder=e.querySelector("#chkIntelLpHevcHwEncoder").checked,t.EnableHardwareEncoding=e.querySelector("#chkHardwareEncoding").checked,t.AllowHevcEncoding=e.querySelector("#chkAllowHevcEncoding").checked,t.AllowAv1Encoding=e.querySelector("#chkAllowAv1Encoding").checked,t.AllowMjpegEncoding=e.querySelector("#chkAllowMjpegEncoding").checked,ApiClient.updateNamedConfiguration("encoding",t).then((function(){!function(e){ApiClient.getSystemInfo().then((function(){return ApiClient.ajax({url:ApiClient.getUrl("System/MediaEncoder/Path"),type:"POST",data:JSON.stringify({Path:e.querySelector(".txtEncoderPath").value,PathType:"Custom"}),contentType:"application/json"}).then(i.default.processServerConfigurationUpdateResult,u)}))}(e)}),(function(){(0,s.Z)(a.ZP.translate("ErrorDefault")),i.default.processServerConfigurationUpdateResult()}))}))};return $("#selectVideoDecoder",e).val()?(0,s.Z)({title:a.ZP.translate("TitleHardwareAcceleration"),text:a.ZP.translate("HardwareAccelerationWarning")}).then(t):t(),!1}function p(){return[{href:"#/dashboard/playback/transcoding",name:a.ZP.translate("Transcoding")},{href:"#/dashboard/playback/resume",name:a.ZP.translate("ButtonResume")},{href:"#/dashboard/playback/streaming",name:a.ZP.translate("TabStreaming")},{href:"#/dashboard/playback/trickplay",name:a.ZP.translate("Trickplay")}]}$(document).on("pageinit","#encodingSettingsPage",(function(){var e=this;o?Promise.resolve(o):ApiClient.getPublicSystemInfo().then((function(e){return o=e,e})),e.querySelector("#selectVideoDecoder").addEventListener("change",(function(){var t,n,r;"vaapi"==this.value?(e.querySelector(".fldVaapiDevice").classList.remove("hide"),e.querySelector("#txtVaapiDevice").setAttribute("required","required")):(e.querySelector(".fldVaapiDevice").classList.add("hide"),e.querySelector("#txtVaapiDevice").removeAttribute("required")),"amf"==this.value||"nvenc"==this.value||"qsv"==this.value||"vaapi"==this.value||"rkmpp"==this.value||"videotoolbox"==this.value?e.querySelector(".fld10bitHevcVp9HwDecoding").classList.remove("hide"):e.querySelector(".fld10bitHevcVp9HwDecoding").classList.add("hide"),"amf"==this.value||"nvenc"==this.value||"qsv"==this.value||"vaapi"==this.value||"rkmpp"==this.value||"videotoolbox"==this.value?e.querySelector(".tonemappingOptions").classList.remove("hide"):e.querySelector(".tonemappingOptions").classList.add("hide"),"qsv"==this.value||"vaapi"==this.value?e.querySelector(".fldIntelLp").classList.remove("hide"):e.querySelector(".fldIntelLp").classList.add("hide"),"videotoolbox"===this.value?(e.querySelector(".videoToolboxTonemappingOptions").classList.remove("hide"),e.querySelector(".allowAv1EncodingOption").classList.add("hide")):(e.querySelector(".videoToolboxTonemappingOptions").classList.add("hide"),e.querySelector(".allowAv1EncodingOption").classList.remove("hide")),"linux"!==o.OperatingSystem.toLowerCase()||"qsv"!=this.value&&"vaapi"!=this.value?e.querySelector(".vppTonemappingOptions").classList.add("hide"):e.querySelector(".vppTonemappingOptions").classList.remove("hide"),"qsv"==this.value?e.querySelector(".fldSysNativeHwDecoder").classList.remove("hide"):e.querySelector(".fldSysNativeHwDecoder").classList.add("hide"),"nvenc"==this.value?e.querySelector(".fldEnhancedNvdec").classList.remove("hide"):e.querySelector(".fldEnhancedNvdec").classList.add("hide"),this.value?e.querySelector(".hardwareAccelerationOptions").classList.remove("hide"):e.querySelector(".hardwareAccelerationOptions").classList.add("hide"),t=e,n=(n=this.value)||"",Array.prototype.forEach.call(t.querySelectorAll(".chkDecodeCodec"),(function(e){-1===e.getAttribute("data-types").split(",").indexOf(n)?c.ZP.parentWithTag(e,"LABEL").classList.add("hide"):(c.ZP.parentWithTag(e,"LABEL").classList.remove("hide"),r=!0)})),r?t.querySelector(".decodingCodecsList").classList.remove("hide"):t.querySelector(".decodingCodecsList").classList.add("hide")})),$("#btnSelectEncoderPath",e).on("click.selectDirectory",(function(){Promise.resolve().then(n.bind(n,98043)).then((function(t){var n=new(0,t.default);n.show({includeFiles:!0,callback:function(t){t&&$(".txtEncoderPath",e).val(t),n.close()}})}))})),$("#btnSelectTranscodingTempPath",e).on("click.selectDirectory",(function(){Promise.resolve().then(n.bind(n,98043)).then((function(t){var n=new(0,t.default);n.show({callback:function(t){t&&$("#txtTranscodingTempPath",e).val(t),n.close()},validateWriteable:!0,header:a.ZP.translate("HeaderSelectTranscodingPath"),instruction:a.ZP.translate("HeaderSelectTranscodingPathHelp")})}))})),$("#btnSelectFallbackFontPath",e).on("click.selectDirectory",(function(){Promise.resolve().then(n.bind(n,98043)).then((function(t){var n=new(0,t.default);n.show({includeDirectories:!0,callback:function(t){t&&(e.querySelector("#txtFallbackFontPath").value=t),n.close()},header:a.ZP.translate("HeaderSelectFallbackFontPath"),instruction:a.ZP.translate("HeaderSelectFallbackFontPathHelp")})}))})),$(".encodingSettingsForm").off("submit",d).on("submit",d)})).on("pageshow","#encodingSettingsPage",(function(){r.ZP.show(),l.default.setTabs("playback",0,p);var e=this;ApiClient.getNamedConfiguration("encoding").then((function(t){ApiClient.getSystemInfo().then((function(n){!function(e,t,n){Array.prototype.forEach.call(e.querySelectorAll(".chkDecodeCodec"),(function(e){e.checked=-1!==(t.HardwareDecodingCodecs||[]).indexOf(e.getAttribute("data-codec"))})),e.querySelector("#chkDecodingColorDepth10Hevc").checked=t.EnableDecodingColorDepth10Hevc,e.querySelector("#chkDecodingColorDepth10Vp9").checked=t.EnableDecodingColorDepth10Vp9,e.querySelector("#chkEnhancedNvdecDecoder").checked=t.EnableEnhancedNvdecDecoder,e.querySelector("#chkSystemNativeHwDecoder").checked=t.PreferSystemNativeHwDecoder,e.querySelector("#chkIntelLpH264HwEncoder").checked=t.EnableIntelLowPowerH264HwEncoder,e.querySelector("#chkIntelLpHevcHwEncoder").checked=t.EnableIntelLowPowerHevcHwEncoder,e.querySelector("#chkHardwareEncoding").checked=t.EnableHardwareEncoding,e.querySelector("#chkAllowHevcEncoding").checked=t.AllowHevcEncoding,e.querySelector("#chkAllowAv1Encoding").checked=t.AllowAv1Encoding,e.querySelector("#chkAllowMjpegEncoding").checked=t.AllowMjpegEncoding,$("#selectVideoDecoder",e).val(t.HardwareAccelerationType),$("#selectThreadCount",e).val(t.EncodingThreadCount),e.querySelector("#chkEnableAudioVbr").checked=t.EnableAudioVbr,$("#txtDownMixAudioBoost",e).val(t.DownMixAudioBoost),$("#selectStereoDownmixAlgorithm").val(t.DownMixStereoAlgorithm||"None"),e.querySelector("#txtMaxMuxingQueueSize").value=t.MaxMuxingQueueSize||"",e.querySelector(".txtEncoderPath").value=t.EncoderAppPathDisplay||"",$("#txtTranscodingTempPath",e).val(n.TranscodingTempPath||""),e.querySelector("#txtFallbackFontPath").value=t.FallbackFontPath||"",e.querySelector("#chkEnableFallbackFont").checked=t.EnableFallbackFont,$("#txtVaapiDevice",e).val(t.VaapiDevice||""),e.querySelector("#chkTonemapping").checked=t.EnableTonemapping,e.querySelector("#chkVppTonemapping").checked=t.EnableVppTonemapping,e.querySelector("#chkVideoToolboxTonemapping").checked=t.EnableVideoToolboxTonemapping,e.querySelector("#selectTonemappingAlgorithm").value=t.TonemappingAlgorithm,e.querySelector("#selectTonemappingMode").value=t.TonemappingMode,e.querySelector("#selectTonemappingRange").value=t.TonemappingRange,e.querySelector("#txtTonemappingDesat").value=t.TonemappingDesat,e.querySelector("#txtTonemappingPeak").value=t.TonemappingPeak,e.querySelector("#txtTonemappingParam").value=t.TonemappingParam||"",e.querySelector("#txtVppTonemappingBrightness").value=t.VppTonemappingBrightness,e.querySelector("#txtVppTonemappingContrast").value=t.VppTonemappingContrast,e.querySelector("#selectEncoderPreset").value=t.EncoderPreset||"",e.querySelector("#txtH264Crf").value=t.H264Crf||"",e.querySelector("#txtH265Crf").value=t.H265Crf||"",e.querySelector("#selectDeinterlaceMethod").value=t.DeinterlaceMethod||"",e.querySelector("#chkDoubleRateDeinterlacing").checked=t.DeinterlaceDoubleRate,e.querySelector("#chkEnableSubtitleExtraction").checked=t.EnableSubtitleExtraction||!1,e.querySelector("#chkEnableThrottling").checked=t.EnableThrottling||!1,e.querySelector("#chkEnableSegmentDeletion").checked=t.EnableSegmentDeletion||!1,e.querySelector("#txtThrottleDelaySeconds").value=t.ThrottleDelaySeconds||"",e.querySelector("#txtSegmentKeepSeconds").value=t.SegmentKeepSeconds||"",e.querySelector("#selectVideoDecoder").dispatchEvent(new CustomEvent("change",{bubbles:!0})),r.ZP.hide()}(e,t,n)}))}))}))},31606:function(e,t,n){var o=n(16918),r="assets/img/devices/";t.ZP={getDeviceIcon:function(e){var t;switch(e.AppName||e.Client){case"Samsung Smart TV":return r+"samsung.svg";case"Xbox One":return r+"xbox.svg";case"Sony PS4":return r+"playstation.svg";case"Kodi":case"Kodi JellyCon":return r+"kodi.svg";case"Jellyfin Android":case"AndroidTV":case"Android TV":return r+"android.svg";case"Jellyfin Mobile (iOS)":case"Jellyfin Mobile (iPadOS)":case"Jellyfin iOS":case"Infuse":return r+"apple.svg";case"Home Assistant":return r+"home-assistant.svg";case"Jellyfin Roku":return r+"roku.svg";case"Finamp":return r+"finamp.svg";case"Jellyfin Web":return function(e){switch(e){case"Opera":case"Opera TV":case"Opera Android":return r+"opera.svg";case"Chrome":case"Chrome Android":return r+"chrome.svg";case"Firefox":case"Firefox Android":return r+"firefox.svg";case"Safari":case"Safari iPad":case"Safari iPhone":return r+"safari.svg";case"Edge Chromium":case"Edge Chromium Android":case"Edge Chromium iPad":case"Edge Chromium iPhone":return r+"edgechromium.svg";case"Edge":return r+"edge.svg";case"Internet Explorer":return r+"msie.svg";default:return r+"html5.svg"}}(e.Name||e.DeviceName);default:if(null===(t=e.Capabilities)||void 0===t?void 0:t.IconUrl)try{return new URL(e.Capabilities.IconUrl).toString()}catch(t){console.error("[getDeviceIcon] device capabilities has invalid IconUrl",e,t)}return r+"other.svg"}},getLibraryIcon:function(e){switch(e){case"movies":return"video_library";case"music":return"library_music";case"photos":case"homevideos":return"photo_library";case"livetv":return"live_tv";case"tvshows":return"tv";case"trailers":return"local_movies";case"musicvideos":return"music_video";case"books":return"library_books";case"channels":return"videocam";case"playlists":return"view_list";default:return"folder"}},getItemTypeIcon:function(e){switch(e){case o.k.MusicAlbum:return"album";case o.k.MusicArtist:case o.k.Person:return"person";case o.k.Audio:return"audiotrack";case o.k.Movie:return"movie";case o.k.Episode:case o.k.Series:return"tv";case o.k.Program:return"live_tv";case o.k.Book:return"book";case o.k.Folder:return"folder";case o.k.BoxSet:return"collections";case o.k.Playlist:return"view_list";case o.k.Photo:return"photo";case o.k.PhotoAlbum:return"photo_album";default:return"folder"}}}},22482:function(e,t,n){function o(e){return e}n.d(t,{C:function(){return o}})},94047:function(e,t,n){var o=n(27378),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=o.useState,c=o.useEffect,l=o.useLayoutEffect,i=o.useDebugValue;function s(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!r(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),o=a({inst:{value:n,getSnapshot:t}}),r=o[0].inst,u=o[1];return l((function(){r.value=n,r.getSnapshot=t,s(r)&&u({inst:r})}),[e,n,t]),c((function(){return s(r)&&u({inst:r}),e((function(){s(r)&&u({inst:r})}))}),[e]),i(n),n};t.useSyncExternalStore=void 0!==o.useSyncExternalStore?o.useSyncExternalStore:u},70644:function(e,t,n){e.exports=n(94047)}}]);