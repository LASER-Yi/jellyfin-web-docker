"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[55357],{75899:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}}),s(5769),s(63238),s(61418),s(17460),s(14078);var r=s(28540),a=s(71487),n=s(94994),o=(s(38228),s(60635)),i=s(56663),l=s(3137);function d(e,t){var r=t.userId;ApiClient.getUser(r).then((function(t){o.default.getCurrentUser().then((function(r){a.Z.setTitle(t.Name),e.querySelector(".username").innerText=t.Name;var n=!0,o=!1;"Guest"==t.ConnectLinkType?(e.querySelector(".localAccessSection").classList.add("hide"),n=!1):t.HasConfiguredPassword?(e.querySelector("#btnResetPassword").classList.remove("hide"),e.querySelector("#fldCurrentPassword").classList.remove("hide"),o=!0):(e.querySelector("#btnResetPassword").classList.add("hide"),e.querySelector("#fldCurrentPassword").classList.add("hide")),n&&(r.Policy.IsAdministrator||t.Policy.EnableUserPreferenceAccess)?e.querySelector(".passwordSection").classList.remove("hide"):e.querySelector(".passwordSection").classList.add("hide"),o&&(r.Policy.IsAdministrator||t.Policy.EnableUserPreferenceAccess)?e.querySelector(".localAccessSection").classList.remove("hide"):e.querySelector(".localAccessSection").classList.add("hide");var i=e.querySelector("#txtEasyPassword");i.value="",t.HasConfiguredEasyPassword?(i.placeholder="******",e.querySelector("#btnResetEasyPassword").classList.remove("hide")):(i.removeAttribute("placeholder"),i.placeholder="",e.querySelector("#btnResetEasyPassword").classList.add("hide")),e.querySelector(".chkEnableLocalEasyPassword").checked=t.Configuration.EnableLocalPassword,Promise.resolve().then(s.bind(s,87680)).then((function(t){t.default.autoFocus(e)}))}))})),e.querySelector("#txtCurrentPassword").value="",e.querySelector("#txtNewPassword").value="",e.querySelector("#txtNewPasswordConfirm").value=""}function c(e,t){function s(s){ApiClient.getUser(s).then((function(s){s.Configuration.EnableLocalPassword=e.querySelector(".chkEnableLocalEasyPassword").checked,ApiClient.updateUserConfiguration(s.Id,s.Configuration).then((function(){r.ZP.hide(),(0,i.Z)(n.ZP.translate("SettingsSaved")),d(e,t)}))}))}e.querySelector(".updatePasswordForm").addEventListener("submit",(function(s){var a,l,c;return this.querySelector("#txtNewPassword").value!=this.querySelector("#txtNewPasswordConfirm").value?(0,i.Z)(n.ZP.translate("PasswordMatchError")):(r.ZP.show(),a=t.userId,l=e.querySelector("#txtCurrentPassword").value,c=e.querySelector("#txtNewPassword").value,e.querySelector("#fldCurrentPassword").classList.contains("hide")&&(l=""),ApiClient.updateUserPassword(a,l,c).then((function(){r.ZP.hide(),(0,i.Z)(n.ZP.translate("PasswordSaved")),d(e,t)}),(function(){r.ZP.hide(),o.default.alert({title:n.ZP.translate("HeaderLoginFailure"),message:n.ZP.translate("MessageInvalidUser")})}))),s.preventDefault(),!1})),e.querySelector(".localAccessForm").addEventListener("submit",(function(a){var n,o;return r.ZP.show(),n=t.userId,(o=e.querySelector("#txtEasyPassword").value)?ApiClient.updateEasyPassword(n,o).then((function(){s(n)})):s(n),a.preventDefault(),!1})),e.querySelector("#btnResetEasyPassword").addEventListener("click",(function(){var s=n.ZP.translate("PinCodeResetConfirmation");(0,l.Z)(s,n.ZP.translate("HeaderPinCodeReset")).then((function(){var s=t.userId;r.ZP.show(),ApiClient.resetEasyPassword(s).then((function(){r.ZP.hide(),o.default.alert({message:n.ZP.translate("PinCodeResetComplete"),title:n.ZP.translate("HeaderPinCodeReset")}),d(e,t)}))}))})),e.querySelector("#btnResetPassword").addEventListener("click",(function(){var s=n.ZP.translate("PasswordResetConfirmation");(0,l.Z)(s,n.ZP.translate("ResetPassword")).then((function(){var s=t.userId;r.ZP.show(),ApiClient.resetUserPassword(s).then((function(){r.ZP.hide(),o.default.alert({message:n.ZP.translate("PasswordResetComplete"),title:n.ZP.translate("ResetPassword")}),d(e,t)}))}))})),e.addEventListener("viewshow",(function(){d(e,t)}))}}}]);