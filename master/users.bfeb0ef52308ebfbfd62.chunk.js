"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[58809],{30658:function(e,r,t){var n=t(62540),a=(t(63696),t(85817));r.A=function(e){var r=e.SectionClassName,t=e.title,o=e.isBtnVisible,c=void 0!==o&&o,i=e.btnId,u=e.btnClassName,s=e.btnTitle,l=e.btnIcon;return(0,n.jsxs)("div",{className:"".concat(r," sectionTitleContainer flex align-items-center"),children:[(0,n.jsx)("h2",{className:"sectionTitle",children:t}),c&&(0,n.jsx)(a.A,{is:"emby-button",id:i,className:u,title:s,icon:l})]})}},33077:function(e,r,t){var n;t.d(r,{s:function(){return n}}),function(e){e.AddToPlaylist="addtoplaylist",e.Custom="custom",e.Edit="edit",e.InstantMix="instantmix",e.Link="link",e.Menu="menu",e.None="none",e.Play="play",e.PlayAllFromHere="playallfromhere",e.PlayMenu="playmenu",e.PlayTrailer="playtrailer",e.ProgramDialog="programdialog",e.Queue="queue",e.QueueAllFromHere="queueallfromhere",e.Record="record",e.Resume="resume",e.SetPlaylistIndex="setplaylistindex"}(n||(n={}))},36645:function(e,r,t){t.d(r,{QW:function(){return w},Qp:function(){return h},Rn:function(){return b},Tj:function(){return y},a_:function(){return m},hn:function(){return d},n5:function(){return f},uA:function(){return v},w:function(){return p},zo:function(){return x}});var n=t(4452),a=t.n(n),o=t(33077),c=t(76942),i=t(58953),u=2/3,s=16/9,l=1e3/185,d=function(e){return"Program"===e||"Timer"===e||"Recording"===e},f=function(e){return e.defaultAction===o.s.Play&&e.isFolder?o.s.Link:e.isPhoto?o.s.Play:e.defaultAction},p=function(e){var r=window.screen;return!!(r&&r.availWidth-e>20)},y=function(e){return null==e?c.G8.MixedSquare:e>=1.33?c.G8.MixedBackdrop:e>.8?c.G8.MixedSquare:c.G8.MixedPortrait},m=function(e){var r;return a()(((r={card:!0})["".concat(e.shape,"Card")]=e.shape,r["".concat(e.cardCssClass)]=e.cardCssClass,r["".concat(e.cardClass)]=e.cardClass,r["card-hoverable"]=e.isDesktop,r["show-focus"]=e.isTV,r["show-animation"]=e.isTV&&e.enableFocusTransform,r.groupedCard=e.showChildCountIndicator&&e.childCount,r["card-withuserdata"]=!["MusicAlbum","MusicArtist","Audio"].includes(e.itemType),r.itemAction="button"===e.tagName,r))},v=function(e){var r;return a()(((r={cardImageContainer:!0,coveredImage:e.hasCoverImage,"coveredImage-contain":e.hasCoverImage&&"TvChannel"===e.itemType})[h(e.itemName)]=!e.imgUrl,r))},b=function(e){return a()({cardBox:!0,visualCardBox:e.cardLayout,"cardBox-bottompadded":e.hasOuterCardFooter&&!e.cardLayout})},h=function(e){return"defaultCardBackground defaultCardBackground".concat(g(e))},g=function(e){if(e){for(var r=Math.floor(e.length/2),t=String(e.slice(r,r+1).charCodeAt(0)),n=0,a=0;a<t.length;a++)n+=parseInt(t.charAt(a),10);return parseInt(String(n).slice(-1),10)%5+1}return(0,i.HO)(1,5)},x=function(e){return e?-1!==(e=e.toLowerCase()).indexOf("portrait")?u:-1!==e.indexOf("backdrop")?s:-1!==e.indexOf("square")?1:-1!==e.indexOf("banner")?l:null:null},w=function(e,r,t,n){switch(e){case"portrait":return A(r,n);case"square":return j(r,n);case"banner":return S(r);case"backdrop":return C(r,n);case"smallBackdrop":return P(r);case"overflowSmallBackdrop":return O(r,t,n);case"overflowPortrait":return k(r,t,n);case"overflowSquare":return I(r,t,n);case"overflowBackdrop":return N(r,t,n);default:return 4}},A=function(e,r){switch(!0){case r:return 5.9999999988;case e>=2200:return 10;case e>=1920:return 9.000000000009;case e>=1600:return 8;case e>=1400:return 7.0000000000021;case e>=1200:return 5.9999999988;case e>=800:return 5;case e>=700:return 4;default:return 3.0000000003}},j=function(e,r){switch(!0){case r:return 5.9999999988;case e>=2200:return 10;case e>=1920:return 9.000000000009;case e>=1600:return 8;case e>=1400:return 7.0000000000021;case e>=1200:return 5.9999999988;case e>=800:return 5;case e>=700:return 4;case e>=500:return 3.0000000003;default:return 2}},S=function(e){switch(!0){case e>=2200:return 4;case e>=1200:return 3.0000000003;case e>=800:return 2;default:return 1}},C=function(e,r){switch(!0){case r:return 4;case e>=2500:return 6;case e>=1600:return 5;case e>=1200:return 4;case e>=770:return 3;case e>=420:return 2;default:return 1}},P=function(e){switch(!0){case e>=1600:return 8;case e>=1400:return 7.000000000007001;case e>=1200:return 5.9999999988;case e>=1e3:return 5;case e>=800:return 4;case e>=500:return 3.0000000003;default:return 2}},O=function(e,r,t){switch(!0){case t:return 100/18.9;case r&&e>=800:return 100/15.5;case r:return 100/23.3;case e>=540:return 100/30;default:return 100/72}},k=function(e,r,t){switch(!0){case t:return 100/15.5;case r&&e>=1700:return 100/11.6;case r:return 100/15.5;case e>=1400:return 100/15;case e>=1200:return 100/18;case e>=760:return 100/23;case e>=400:return 100/31.5;default:return 100/42}},I=function(e,r,t){switch(!0){case t:return 100/15.5;case r&&e>=1700:return 100/11.6;case r:return 100/15.5;case e>=1400:return 100/15;case e>=1200:return 100/18;case e>=760:return 100/23;case e>=540:return 100/31.5;default:return 100/42}},N=function(e,r,t){switch(!0){case t:return 100/23.3;case r&&e>=1700:return 100/18.5;case r:return 100/23.3;case e>=1800:return 100/23.5;case e>=1400:return 100/30;case e>=760:return 2.5;case e>=640:return 100/56;default:return 100/72}}},38596:function(e,r,t){t.d(r,{n:function(){return p}}),t(29305),t(32733),t(84701),t(81678),t(14382),t(69892),t(44962),t(89336),t(4754),t(94),t(33087),t(36947),t(36457),t(88908),t(83810),t(78557),t(95021),t(73687),t(83994),t(23630),t(82367);var n=t(63696),a=t(427),o=t(52672),c=t(26073),i=t(9790);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach((function(r){d(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function d(e,r,t){return(r=function(e){var r=function(e){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=u(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function f(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function p(e,r){var t,u,s=(0,i.jE)(r),d=(t=n.useState((function(){return new a._(s,e)})),u=1,function(e){if(Array.isArray(e))return e}(t)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,o,c,i=[],u=!0,s=!1;try{if(o=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=o.call(t)).done)&&(i.push(n.value),i.length!==r);u=!0);}catch(e){s=!0,a=e}finally{try{if(!u&&null!=t.return&&(c=t.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}(t,u)||function(e,r){if(e){if("string"==typeof e)return f(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?f(e,r):void 0}}(t,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];n.useEffect((function(){d.setOptions(e)}),[d,e]);var p=n.useSyncExternalStore(n.useCallback((function(e){return d.subscribe(o.jG.batchCalls(e))}),[d]),(function(){return d.getCurrentResult()}),(function(){return d.getCurrentResult()})),y=n.useCallback((function(e,r){d.mutate(e,r).catch(c.lQ)}),[d]);if(p.error&&(0,c.GU)(d.options.throwOnError,[p.error]))throw p.error;return l(l({},p),{},{mutate:y,mutateAsync:p.mutate})}},40694:function(e,r,t){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}t.d(r,{A:function(){return n}})},45228:function(e,r,t){var n=t(62540),a=t(63696),o=t(40643),c=t(75487),i=t(10301),u=function(){return u=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e},u.apply(this,arguments)};r.A=function(e){var r=(0,a.useCallback)((function(r){var t;null===(t=e.onClose)||void 0===t||t.call(e,r,"clickaway")}),[e]),t=(0,n.jsx)(c.A,{size:"small",color:"inherit",onClick:r,children:(0,n.jsx)(i.A,{fontSize:"small"})});return(0,n.jsx)(o.A,u({autoHideDuration:3300,action:t},e))}},64566:function(e,r,t){t.r(r),t.d(r,{default:function(){return S}});var n=t(62540),a=t(63696),o=t(5898),c=t(47602),i=t(80096),u=t(93721),s=t(85817),l=t(84851),d=t(36645),f=function(e){var r,t,a,c=e.user,f=void 0===c?{}:c,p="card squareCard scalableCard squareCard-scalable";(null===(r=f.Policy)||void 0===r?void 0:r.IsDisabled)&&(p+=" grayscale"),f.PrimaryImageTag&&f.Id&&(a=window.ApiClient.getUserImageUrl(f.Id,{width:300,tag:f.PrimaryImageTag,type:"Primary"}));var y="cardImage";(null===(t=f.Policy)||void 0===t?void 0:t.IsDisabled)&&(y+=" disabledUser");var m,v=(m=f.LastActivityDate)?o.Ay.translate("LastSeen",(0,i.A)(Date.parse(m),(0,u.OE)())):"",b=a?(0,n.jsx)("div",{className:y,style:{backgroundImage:"url(".concat(a,")")}}):(0,n.jsx)("div",{className:"".concat(y," ").concat((0,d.Qp)(f.Name)," flex align-items-center justify-content-center"),children:(0,n.jsx)("span",{className:"material-icons cardImageIcon person","aria-hidden":"true"})});return(0,n.jsx)("div",{"data-userid":f.Id,"data-username":f.Name,className:p,children:(0,n.jsxs)("div",{className:"cardBox visualCardBox",children:[(0,n.jsxs)("div",{className:"cardScalable visualCardBox-cardScalable",children:[(0,n.jsx)("div",{className:"cardPadder cardPadder-square"}),(0,n.jsx)(l.A,{className:"cardContent",href:"#/dashboard/users/profile?userId=".concat(f.Id),children:b})]}),(0,n.jsxs)("div",{className:"cardFooter visualCardBox-cardFooter",children:[(0,n.jsx)("div",{style:{textAlign:"right",float:"right",paddingTop:"5px"},children:(0,n.jsx)(s.A,{is:"paper-icon-button-light",className:"btnUserMenu flex-shrink-zero",icon:"more_vert"})}),(0,n.jsx)("div",{className:"cardText",children:(0,n.jsx)("span",{children:f.Name})}),(0,n.jsx)("div",{className:"cardText cardText-secondary",children:(0,n.jsx)("span",{children:""!=v?v:""})})]})]})})},p=t(30658),y=(t(10353),t(15453),t(65242)),m=t(87404),v=t(45228),b=t(92058),h=t(84849),g=t(18879),x=t(38596),w=t(69410),A=t(31297),j=t(36300),S=function(){var e,r,i=(0,m.zy)(),u=function(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,a,o=t.call(e),c=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)c.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return c}((0,a.useState)(!1),2),s=u[0],l=u[1],d=(0,a.useRef)(null),S=(0,m.Zp)(),C=(0,b.kp)(),P=C.data,O=C.isPending,k=(r=(0,w.gf)().api,(0,x.n)({mutationFn:function(e){return(0,g.q)(r).deleteUser(e)},onSuccess:function(){A.q.invalidateQueries({queryKey:[b.t5]})}})),I=(0,a.useCallback)((function(){l(!1)}),[]);return(0,a.useEffect)((function(){var e,r=d.current;if((null===(e=i.state)||void 0===e?void 0:e.openSavedToast)&&(l(!0),window.history.replaceState({},"")),r){var n=function(e){var r=j.Ay.parentWithClass(e.target,"btnUserMenu");r&&function(e){var r=j.Ay.parentWithClass(e,"card"),n=null==r?void 0:r.getAttribute("data-userid"),a=null==r?void 0:r.getAttribute("data-username");if(n){var i=[];i.push({name:o.Ay.translate("ButtonEditUser"),id:"open",icon:"mode_edit"}),i.push({name:o.Ay.translate("ButtonLibraryAccess"),id:"access",icon:"lock"}),i.push({name:o.Ay.translate("ButtonParentalControl"),id:"parentalcontrol",icon:"person"}),i.push({name:o.Ay.translate("Delete"),id:"delete",icon:"delete"}),t.e(62882).then(t.bind(t,62882)).then((function(e){e.default.show({items:i,positionTo:r,callback:function(e){switch(e){case"open":S("/dashboard/users/profile?userId=".concat(n));break;case"access":S("/dashboard/users/access?userId=".concat(n));break;case"parentalcontrol":S("/dashboard/users/parentalcontrol?userId=".concat(n));break;case"delete":!function(e,r){var t=r?o.Ay.translate("DeleteName",r):o.Ay.translate("DeleteUser"),n=o.Ay.translate("DeleteUserConfirmation");(0,c.A)({title:t,text:n,confirmText:o.Ay.translate("Delete"),primary:"delete"}).then((function(){k.mutate({userId:e})})).catch((function(){}))}(n,a)}}}).catch((function(){}))})).catch((function(e){console.error("[userprofiles] failed to load action sheet",e)}))}else console.error("Unexpected null user id")}(r)},a=function(){S("/dashboard/users/add")};return r.addEventListener("click",n),r.querySelector("#btnAddUser").addEventListener("click",a),function(){r.removeEventListener("click",n),r.querySelector("#btnAddUser").removeEventListener("click",a)}}console.error("Unexpected null reference")}),[S,k,null===(e=i.state)||void 0===e?void 0:e.openSavedToast]),O?(0,n.jsx)(h.A,{}):(0,n.jsxs)(y.A,{id:"userProfilesPage",className:"mainAnimatedPage type-interior userProfilesPage fullWidthContent",title:o.Ay.translate("HeaderUsers"),children:[(0,n.jsx)(v.A,{open:s,onClose:I,message:o.Ay.translate("SettingsSaved")}),(0,n.jsxs)("div",{ref:d,className:"content-primary",children:[(0,n.jsx)("div",{className:"verticalSection",children:(0,n.jsx)(p.A,{title:o.Ay.translate("HeaderUsers"),isBtnVisible:!0,btnId:"btnAddUser",btnClassName:"fab submit sectionTitleButton",btnTitle:"ButtonAddUser",btnIcon:"add"})}),(0,n.jsx)("div",{className:"localUsers itemsContainer vertical-wrap",children:null==P?void 0:P.map((function(e){return(0,n.jsx)(f,{user:e},e.Id)}))})]})]})}},76942:function(e,r,t){var n;function a(e){return void 0===e&&(e=!0),e?n.SquareOverflow:n.Square}function o(e){return void 0===e&&(e=!0),e?n.BackdropOverflow:n.Backdrop}function c(e){return void 0===e&&(e=!0),e?n.PortraitOverflow:n.Portrait}t.d(r,{G8:function(){return n},UI:function(){return o},xK:function(){return c},zP:function(){return a}}),function(e){e.Backdrop="backdrop",e.BackdropOverflow="overflowBackdrop",e.Banner="banner",e.Portrait="portrait",e.PortraitOverflow="overflowPortrait",e.Square="square",e.SquareOverflow="overflowSquare",e.Auto="auto",e.AutoHome="autohome",e.AutoOverflow="autooverflow",e.AutoVertical="autoVertical",e.Mixed="mixed",e.MixedSquare="mixedSquare",e.MixedBackdrop="mixedBackdrop",e.MixedPortrait="mixedPortrait"}(n||(n={}))},85817:function(e,r,t){var n=t(62540),a=(t(63696),t(5898));r.A=function(e){var r=e.is,t=e.id,o=e.className,c=e.title,i=e.icon,u=e.dataIndex,s=e.dataTag,l=e.dataProfileid,d=e.onClick,f=function(e){var r=e.id,t=e.className,n=e.title,a=e.icon,o=e.dataIndex,c=e.dataTag,i=e.dataProfileid;return{__html:'<button\n        is="'.concat(e.is,'"\n        type="button"\n        ').concat(r,'\n        class="').concat(t,'"\n        ').concat(n,"\n        ").concat(o,"\n        ").concat(c,"\n        ").concat(i,'\n    >\n        <span class="material-icons ').concat(a,'" aria-hidden="true"></span>\n    </button>')}}({is:r,id:t?'id="'.concat(t,'"'):"",className:o,title:c?'title="'.concat(a.Ay.translate(c),'"'):"",icon:i,dataIndex:u||0===u?'data-index="'.concat(u,'"'):"",dataTag:s?'data-tag="'.concat(s,'"'):"",dataProfileid:l?'data-profileid="'.concat(l,'"'):""});return void 0!==d?(0,n.jsx)("button",{style:{all:"unset"},dangerouslySetInnerHTML:f,onClick:d}):(0,n.jsx)("div",{dangerouslySetInnerHTML:f})}},92058:function(e,r,t){t.d(r,{kp:function(){return u},t5:function(){return i},yb:function(){return s}});var n=t(18879),a=t(80401),o=t(69410),c=function(){return c=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var a in r=arguments[t])Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e},c.apply(this,arguments)},i="Users",u=function(e){var r=(0,o.gf)().api;return(0,a.I)({queryKey:[i],queryFn:function(t){var a=t.signal;return function(e,r,t){return a=void 0,o=void 0,i=function(){return function(e,r){var t,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=i(0),c.throw=i(1),c.return=i(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(i){return function(u){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(o=0)),o;)try{if(t=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=r.call(e,o)}catch(e){i=[6,e],n=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(a){switch(a.label){case 0:return[4,(0,n.q)(e).getUsers(r,{signal:null==t?void 0:t.signal})];case 1:return[2,a.sent().data]}}))},new((c=void 0)||(c=Promise))((function(e,r){function t(e){try{u(i.next(e))}catch(e){r(e)}}function n(e){try{u(i.throw(e))}catch(e){r(e)}}function u(r){var a;r.done?e(r.value):(a=r.value,a instanceof c?a:new c((function(e){e(a)}))).then(t,n)}u((i=i.apply(a,o||[])).next())}));var a,o,c,i}(r,e,{signal:a})},enabled:!!r})},s=function(){var e=u(),r=e.data,t=function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]])}return t}(e,["data"]),n={},a=[];return r&&r.forEach((function(e){var r=e.Id;r&&(n[r]=e),e.Name&&a.push(e.Name)})),c({users:r,usersById:n,names:a},t)}}}]);