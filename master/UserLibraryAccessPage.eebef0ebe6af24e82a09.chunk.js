/*! For license information please see UserLibraryAccessPage.eebef0ebe6af24e82a09.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6637],{71426:function(e,n,t){t(62525);var l=t(27378),a=60103;if(n.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var c=Symbol.for;a=c("react.element"),n.Fragment=c("react.fragment")}var i=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,r={key:!0,ref:!0,__self:!0,__source:!0};function o(e,n,t){var l,c={},o=null,d=null;for(l in void 0!==t&&(o=""+t),void 0!==n.key&&(o=""+n.key),void 0!==n.ref&&(d=n.ref),n)s.call(n,l)&&!r.hasOwnProperty(l)&&(c[l]=n[l]);if(e&&e.defaultProps)for(l in n=e.defaultProps)void 0===c[l]&&(c[l]=n[l]);return{$$typeof:a,type:e,key:o,ref:d,props:c,_owner:i.current}}n.jsx=o,n.jsxs=o},24246:function(e,n,t){e.exports=t(71426)},4007:function(e,n,t){var l=t(24246),a=(t(27378),t(44614)),c=function(e){var n=e.type,t=e.className,l=e.title;return{__html:'<button\n        is="emby-button"\n        type="'.concat(n,'"\n        class="').concat(t,'"\n        >\n        <span>').concat(l,"</span>\n    </button>")}};n.Z=function(e){var n=e.type,t=e.className,i=e.title;return(0,l.jsx)("div",{dangerouslySetInnerHTML:c({type:n,className:t,title:a.ZP.translate(i)})},void 0)}},89663:function(e,n,t){var l=t(24246),a=(t(27378),t(44614)),c=function(e){var n=e.labelClassName,t=e.type,l=e.className,a=e.title;return{__html:'<label class="'.concat(n,'">\n        <input\n            is="emby-checkbox"\n            type="').concat(t,'"\n            class="').concat(l,'"\n        />\n        <span>').concat(a,"</span>\n    </label>")}};n.Z=function(e){var n=e.labelClassName,t=e.type,i=e.className,s=e.title;return(0,l.jsx)("div",{className:"sectioncheckbox",dangerouslySetInnerHTML:c({labelClassName:n||"",type:t,className:i,title:a.ZP.translate(s)})},void 0)}},56883:function(e,n,t){var l=t(24246),a=(t(27378),function(e){var n=e.className,t=e.Name,l=e.dataAttributes,a=e.AppName,c=e.checkedAttribute;return{__html:'<label>\n        <input\n            type="checkbox"\n            is="emby-checkbox"\n            class="'.concat(n,'"\n            ').concat(l," ").concat(c,"\n        />\n        <span>").concat(t," ").concat(a,"</span>\n    </label>")}});n.Z=function(e){var n=e.className,t=e.Name,c=e.Id,i=e.ItemType,s=e.AppName,r=e.checkedAttribute;return(0,l.jsx)("div",{className:"sectioncheckbox",dangerouslySetInnerHTML:a({className:n,Name:t,dataAttributes:i?"data-itemtype='".concat(i,"'"):"data-id='".concat(c,"'"),AppName:s?"- ".concat(s):"",checkedAttribute:r})},void 0)}},44243:function(e,n,t){var l=t(24246),a=(t(27378),t(44614)),c=function(e){var n=e.activeTab;return{__html:'<a href="#"\n        is="emby-linkbutton"\n        data-role="button"\n        class="'.concat("useredit"===n?"ui-btn-active":"",'"\n        onclick="Dashboard.navigate(\'useredit.html\', true);">\n        ').concat(a.ZP.translate("Profile"),'\n    </a>\n    <a href="#"\n        is="emby-linkbutton"\n        data-role="button"\n        class="').concat("userlibraryaccess"===n?"ui-btn-active":"",'"\n        onclick="Dashboard.navigate(\'userlibraryaccess.html\', true);">\n        ').concat(a.ZP.translate("TabAccess"),'\n    </a>\n    <a href="#"\n        is="emby-linkbutton"\n        data-role="button"\n        class="').concat("userparentalcontrol"===n?"ui-btn-active":"",'"\n        onclick="Dashboard.navigate(\'userparentalcontrol.html\', true);">\n        ').concat(a.ZP.translate("TabParentalControl"),'\n    </a>\n    <a href="#"\n        is="emby-linkbutton"\n        data-role="button"\n        class="').concat("userpassword"===n?"ui-btn-active":"",'"\n        onclick="Dashboard.navigate(\'userpassword.html\', true);">\n        ').concat(a.ZP.translate("HeaderPassword"),"\n    </a>")}};n.Z=function(e){var n=e.activeTab;return(0,l.jsx)("div",{"data-role":"controlgroup","data-type":"horizontal",className:"localnav",dangerouslySetInnerHTML:c({activeTab:n})},void 0)}},45754:function(e,n,t){var l=t(24246),a=(t(27378),t(44614)),c=function(e){var n=e.className,t=e.title,l=e.href;return{__html:'<a\n        is="emby-linkbutton"\n        rel="noopener noreferrer"\n        class="'.concat(n,'"\n        target="_blank"\n        href="').concat(l,'"\n        >\n        ').concat(t,"\n    </a>")}};n.Z=function(e){var n=e.className,t=e.title,i=e.url;return(0,l.jsx)("div",{dangerouslySetInnerHTML:c({className:n,title:a.ZP.translate(t),href:i})},void 0)}},9368:function(e,n,t){t.r(n);var l=t(24246),a=t(27378),c=t(56705),i=t(3319),s=t(44614),r=t(25152),o=t(86628),d=t(45754),u=t(44243),v=t(89663),h=t(56883),b=t(4007),m=function(){return m=Object.assign||function(e){for(var n,t=1,l=arguments.length;t<l;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},m.apply(this,arguments)};n.default=function(){var e=(0,a.useState)(""),n=e[0],t=e[1],p=(0,a.useState)([]),y=p[0],f=p[1],A=(0,a.useState)([]),k=A[0],N=A[1],x=(0,a.useState)([]),C=x[0],P=x[1],j=(0,a.useRef)(null),g=function(e){var n=document.createEvent("HTMLEvents");n.initEvent("change",!1,!0),e.dispatchEvent(n)},E=(0,a.useCallback)((function(e,n){for(var t=[],l=0,a=n;l<a.length;l++){var c=a[l],i=e.Policy.EnableAllFolders||-1!=e.Policy.EnabledFolders.indexOf(c.Id)?' checked="checked"':"";t.push({Id:c.Id,Name:c.Name,checkedAttribute:i})}N(t);var s=j.current.querySelector(".chkEnableAllFolders");s.checked=e.Policy.EnableAllFolders,g(s)}),[]),L=(0,a.useCallback)((function(e,n){for(var t,l,a=[],c=0,i=n;c<i.length;c++){var s=i[c],r=e.Policy.EnableAllChannels||-1!=e.Policy.EnabledChannels.indexOf(s.Id)?' checked="checked"':"";a.push({Id:s.Id,Name:s.Name,checkedAttribute:r})}f(a),n.length?null===(t=null==j?void 0:j.current)||void 0===t||t.querySelector(".channelAccessContainer").classList.remove("hide"):null===(l=null==j?void 0:j.current)||void 0===l||l.querySelector(".channelAccessContainer").classList.add("hide");var o=j.current.querySelector(".chkEnableAllChannels");o.checked=e.Policy.EnableAllChannels,g(o)}),[]),S=(0,a.useCallback)((function(e,n){for(var t,l,a=[],c=0,i=n;c<i.length;c++){var s=i[c],r=e.Policy.EnableAllDevices||-1!=e.Policy.EnabledDevices.indexOf(s.Id)?' checked="checked"':"";a.push({Id:s.Id,Name:s.Name,AppName:s.AppName,checkedAttribute:r})}P(a);var o=j.current.querySelector(".chkEnableAllDevices");o.checked=e.Policy.EnableAllDevices,g(o),e.Policy.IsAdministrator?null===(t=null==j?void 0:j.current)||void 0===t||t.querySelector(".deviceAccessContainer").classList.add("hide"):null===(l=null==j?void 0:j.current)||void 0===l||l.querySelector(".deviceAccessContainer").classList.remove("hide")}),[]),Z=(0,a.useCallback)((function(e,n,l,a){t(e.Name),i.Z.setTitle(e.Name),L(e,l),E(e,n),S(e,a),c.ZP.hide()}),[L,S,E]),I=(0,a.useCallback)((function(){c.ZP.show();var e=o.appRouter.param("userId"),n=e?window.ApiClient.getUser(e):Promise.resolve({Configuration:{}}),t=window.ApiClient.getJSON(window.ApiClient.getUrl("Library/MediaFolders",{IsHidden:!1})),l=window.ApiClient.getJSON(window.ApiClient.getUrl("Channels")),a=window.ApiClient.getJSON(window.ApiClient.getUrl("Devices"));Promise.all([n,t,l,a]).then((function(e){Z(e[0],e[1].Items,e[2].Items,e[3].Items)}))}),[Z]);return(0,a.useEffect)((function(){var e,n,t,l;I();var a=function(){c.ZP.hide(),(0,r.Z)(s.ZP.translate("SettingsSaved"))};null===(e=null==j?void 0:j.current)||void 0===e||e.querySelector(".chkEnableAllDevices").addEventListener("change",(function(){var e;null===(e=null==j?void 0:j.current)||void 0===e||e.querySelector(".deviceAccessListContainer").classList.toggle("hide",this.checked)})),null===(n=null==j?void 0:j.current)||void 0===n||n.querySelector(".chkEnableAllChannels").addEventListener("change",(function(){var e;null===(e=null==j?void 0:j.current)||void 0===e||e.querySelector(".channelAccessListContainer").classList.toggle("hide",this.checked)})),null===(t=null==j?void 0:j.current)||void 0===t||t.querySelector(".chkEnableAllFolders").addEventListener("change",(function(){var e;null===(e=null==j?void 0:j.current)||void 0===e||e.querySelector(".folderAccessListContainer").classList.toggle("hide",this.checked)})),null===(l=null==j?void 0:j.current)||void 0===l||l.querySelector(".userLibraryAccessForm").addEventListener("submit",(function(e){c.ZP.show();var n=o.appRouter.param("userId");return window.ApiClient.getUser(n).then((function(e){!function(e){var n,t,l,c,i,s;e.Policy.EnableAllFolders=null===(n=null==j?void 0:j.current)||void 0===n?void 0:n.querySelector(".chkEnableAllFolders").checked,e.Policy.EnabledFolders=e.Policy.EnableAllFolders?[]:Array.prototype.filter.call(null===(t=null==j?void 0:j.current)||void 0===t?void 0:t.querySelectorAll(".chkFolder"),(function(e){return e.checked})).map((function(e){return e.getAttribute("data-id")})),e.Policy.EnableAllChannels=null===(l=null==j?void 0:j.current)||void 0===l?void 0:l.querySelector(".chkEnableAllChannels").checked,e.Policy.EnabledChannels=e.Policy.EnableAllChannels?[]:Array.prototype.filter.call(null===(c=null==j?void 0:j.current)||void 0===c?void 0:c.querySelectorAll(".chkChannel"),(function(e){return e.checked})).map((function(e){return e.getAttribute("data-id")})),e.Policy.EnableAllDevices=null===(i=null==j?void 0:j.current)||void 0===i?void 0:i.querySelector(".chkEnableAllDevices").checked,e.Policy.EnabledDevices=e.Policy.EnableAllDevices?[]:Array.prototype.filter.call(null===(s=null==j?void 0:j.current)||void 0===s?void 0:s.querySelectorAll(".chkDevice"),(function(e){return e.checked})).map((function(e){return e.getAttribute("data-id")})),e.Policy.BlockedChannels=null,e.Policy.BlockedMediaFolders=null,window.ApiClient.updateUserPolicy(e.Id,e.Policy).then((function(){a()}))}(e)})),e.preventDefault(),e.stopPropagation(),!1}))}),[I]),(0,l.jsx)("div",m({ref:j},{children:(0,l.jsxs)("div",m({className:"content-primary"},{children:[(0,l.jsx)("div",m({className:"verticalSection"},{children:(0,l.jsxs)("div",m({className:"sectionTitleContainer flex align-items-center"},{children:[(0,l.jsx)("h2",m({className:"sectionTitle username"},{children:n}),void 0),(0,l.jsx)(d.Z,{className:"raised button-alt headerHelpButton",title:"Help",url:"https://docs.jellyfin.org/general/server/users/"},void 0)]}),void 0)}),void 0),(0,l.jsx)(u.Z,{activeTab:"userlibraryaccess"},void 0),(0,l.jsxs)("form",m({className:"userLibraryAccessForm"},{children:[(0,l.jsxs)("div",m({className:"folderAccessContainer"},{children:[(0,l.jsx)("h2",{children:s.ZP.translate("HeaderLibraryAccess")},void 0),(0,l.jsx)(v.Z,{labelClassName:"checkboxContainer",type:"checkbox",className:"chkEnableAllFolders",title:"OptionEnableAccessToAllLibraries"},void 0),(0,l.jsxs)("div",m({className:"folderAccessListContainer"},{children:[(0,l.jsxs)("div",m({className:"folderAccess"},{children:[(0,l.jsx)("h3",m({className:"checkboxListLabel"},{children:s.ZP.translate("HeaderLibraries")}),void 0),(0,l.jsx)("div",m({className:"checkboxList paperList checkboxList-paperList"},{children:k.map((function(e){return(0,l.jsx)(h.Z,{className:"chkFolder",Id:e.Id,Name:e.Name,checkedAttribute:e.checkedAttribute},e.Id)}))}),void 0)]}),void 0),(0,l.jsx)("div",m({className:"fieldDescription"},{children:s.ZP.translate("LibraryAccessHelp")}),void 0)]}),void 0)]}),void 0),(0,l.jsxs)("div",m({className:"channelAccessContainer hide"},{children:[(0,l.jsx)("h2",{children:s.ZP.translate("HeaderChannelAccess")},void 0),(0,l.jsx)(v.Z,{labelClassName:"checkboxContainer",type:"checkbox",className:"chkEnableAllChannels",title:"OptionEnableAccessToAllChannels"},void 0),(0,l.jsxs)("div",m({className:"channelAccessListContainer"},{children:[(0,l.jsxs)("div",m({className:"channelAccess"},{children:[(0,l.jsx)("h3",m({className:"checkboxListLabel"},{children:s.ZP.translate("Channels")}),void 0),(0,l.jsx)("div",m({className:"checkboxList paperList",style:{padding:".5em 1em"}},{children:y.map((function(e){return(0,l.jsx)(h.Z,{className:"chkChannel",Id:e.Id,Name:e.Name,checkedAttribute:e.checkedAttribute},e.Id)}))}),void 0)]}),void 0),(0,l.jsx)("div",m({className:"fieldDescription"},{children:s.ZP.translate("ChannelAccessHelp")}),void 0)]}),void 0)]}),void 0),(0,l.jsx)("br",{},void 0),(0,l.jsxs)("div",m({className:"deviceAccessContainer hide"},{children:[(0,l.jsx)("h2",{children:s.ZP.translate("HeaderDeviceAccess")},void 0),(0,l.jsx)(v.Z,{labelClassName:"checkboxContainer",type:"checkbox",className:"chkEnableAllDevices",title:"OptionEnableAccessFromAllDevices"},void 0),(0,l.jsxs)("div",m({className:"deviceAccessListContainer"},{children:[(0,l.jsxs)("div",m({className:"deviceAccess"},{children:[(0,l.jsx)("h3",m({className:"checkboxListLabel"},{children:s.ZP.translate("HeaderDevices")}),void 0),(0,l.jsx)("div",m({className:"checkboxList paperList",style:{padding:".5em 1em"}},{children:C.map((function(e){return(0,l.jsx)(h.Z,{className:"chkDevice",Id:e.Id,Name:e.Name,AppName:e.AppName,checkedAttribute:e.checkedAttribute},e.Id)}))}),void 0)]}),void 0),(0,l.jsx)("div",m({className:"fieldDescription"},{children:s.ZP.translate("DeviceAccessHelp")}),void 0)]}),void 0),(0,l.jsx)("br",{},void 0)]}),void 0),(0,l.jsx)("br",{},void 0),(0,l.jsx)("div",{children:(0,l.jsx)(b.Z,{type:"submit",className:"raised button-submit block",title:"Save"},void 0)},void 0)]}),void 0)]}),void 0)}),void 0)}}}]);