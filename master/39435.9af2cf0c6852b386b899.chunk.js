"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[39435,78938],{58782:function(e,t,n){n.r(t),n.d(t,{default:function(){return A},fillImage:function(){return f},fillImages:function(){return g},getPrimaryImageAspectRatio:function(){return v},lazyChildren:function(){return y},lazyImage:function(){return c},setLazyImage:function(){return p}}),n(29305),n(32733),n(84701),n(14382),n(69892),n(44962),n(89336),n(26448),n(78557),n(95021),n(73687),n(83994),n(93062),n(82367);var r=n(99891),a=n(82885);function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=new function(){return new Worker(n.p+"blurhash.worker.bundle.js")},s={};function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.getAttribute("data-src");t&&m(e,t)}function d(e,t,n,r){var a=document.createElement("canvas");a.setAttribute("aria-hidden","true"),a.width=n,a.height=r;var i=a.getContext("2d"),o=i.createImageData(n,r);o.data.set(t),i.putImageData(o,0,0),requestAnimationFrame((function(){a.classList.add("blurhash-canvas"),e.parentNode.insertBefore(a,e),e.classList.add("blurhashed"),e.removeAttribute("data-blurhash")}))}function u(e,t){try{s[t]=(s[t]||[]).filter((function(t){return t!==e})),s[t].push(e),l.postMessage({hash:t,width:20,height:20})}catch(t){return console.error(t),void e.classList.add("non-blurhashable")}}function f(e){if(!e)throw new Error("entry cannot be null");var t,n=e.target;t=n?n.getAttribute("data-src"):e,e.isIntersecting?t&&m(n,t):t||function(e){var t;e.removeEventListener("animationend",h);var n,r=e.previousSibling;"CANVAS"===(null==r?void 0:r.tagName)&&r.classList.remove("lazy-hidden"),null===(t=e.parentNode)||void 0===t||null===(t=t.querySelector(".cardPadder"))||void 0===t||t.classList.remove("lazy-hidden-children"),"IMG"!==e.tagName?(n=e.style.backgroundImage.slice(4,-1).replace(/"/g,""),e.style.backgroundImage="none"):(n=e.getAttribute("src"),e.setAttribute("src","")),e.setAttribute("data-src",n),e.classList.remove("lazy-image-fadein-fast","lazy-image-fadein"),e.classList.add("lazy-hidden")}(n)}function h(e){var t=e.target;requestAnimationFrame((function(){var e,n=t.previousSibling;t.classList.contains("blurhashed")&&"CANVAS"===(null==n?void 0:n.tagName)&&n.classList.add("lazy-hidden"),null===(e=t.parentNode)||void 0===e||null===(e=e.querySelector(".cardPadder"))||void 0===e||e.classList.add("lazy-hidden-children")})),t.removeEventListener("animationend",h)}function m(e,t){if(void 0===t)throw new TypeError("url cannot be undefined");var n=new Image;n.src=t,e.classList.add("lazy-hidden"),e.addEventListener("animationend",h),n.addEventListener("load",(function(){requestAnimationFrame((function(){"IMG"!==e.tagName?e.style.backgroundImage="url('"+t+"')":e.setAttribute("src",t),e.removeAttribute("data-src"),a.enableFastFadein()?e.classList.add("lazy-image-fadein-fast"):e.classList.add("lazy-image-fadein"),e.classList.remove("lazy-hidden")}))}))}function y(e){if(a.enableBlurhash()){var t,n=i(e.querySelectorAll(".lazy"));try{for(n.s();!(t=n.n()).done;){var o=t.value,l=o.getAttribute("data-blurhash");!o.classList.contains("blurhashed","non-blurhashable")&&l?u(o,l):l||o.classList.contains("blurhashed")||o.classList.add("non-blurhashable")}}catch(e){n.e(e)}finally{n.f()}}r.WK(e,f)}function v(e){for(var t=[],n=0,r=e.length;n<r;n++){var a=e[n].PrimaryImageAspectRatio||0;a&&(t[t.length]=a)}if(!t.length)return null;t.sort((function(e,t){return e-t}));var i,o=Math.floor(t.length/2);i=t.length%2?t[o]:(t[o-1]+t[o])/2;var l=2/3;if(Math.abs(l-i)<=.15)return l;var s=16/9;if(Math.abs(s-i)<=.2)return s;if(Math.abs(1-i)<=.15)return 1;var c=4/3;return Math.abs(c-i)<=.15?c:i}function g(e){for(var t=0,n=e.length;t<n;t++)f(e[0])}function p(e,t){e.classList.add("lazy"),e.setAttribute("data-src",t),c(e)}l.addEventListener("message",(function(e){var t=e.data,n=t.pixels,r=t.hsh,a=t.width,o=t.height,l=s[r];if(null!=l&&l.length){var c,u=i(l);try{for(u.s();!(c=u.n()).done;)d(c.value,n,a,o)}catch(e){u.e(e)}finally{u.f()}delete s[r]}}));var A={setLazyImage:p,fillImages:g,fillImage:f,lazyImage:c,lazyChildren:y,getPrimaryImageAspectRatio:v}},99891:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}n.d(t,{WK:function(){return l}}),n(29305),n(32733),n(84701),n(81678),n(69892),n(44962),n(4754),n(94),n(36947),n(78557),n(83994),n(23630),n(82367);var o=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t},(t=[{key:"createObserver",value:function(){var e=this.options.callback,t=new IntersectionObserver((function(t){t.forEach((function(t){e(t)}))}),{rootMargin:"50%",threshold:0});this.observer=t}},{key:"addElements",value:function(e){var t=this.observer;t||(this.createObserver(),t=this.observer),Array.from(e).forEach((function(e){t.observe(e)}))}},{key:"destroyObserver",value:function(){var e=this.observer;e&&(e.disconnect(),this.observer=null)}},{key:"destroy",value:function(){this.destroyObserver(),this.options=null}}])&&a(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function l(e,t){!function(e,t,n){e.length&&new o({callback:n}).addElements(e)}(e.getElementsByClassName("lazy"),0,t)}t.Ay={LazyLoader:o,lazyChildren:l}},78938:function(e,t,n){n.r(t),n(78557),n(90076);var r=n(9482),a=n(56869),i=n(86191),o=n(50764),l=n(40532),s=n(48080);function c(e,t,n,i){return a.Ay.show(),e.getItem(e.getCurrentUserId(),n).then((function(l){return l.IsSeries?e.getNewLiveTvTimerDefaults({programId:n}).then((function(t){return e.createLiveTvSeriesTimer(t).then((function(){a.Ay.hide(),(0,o.A)(r.Ay.translate("SeriesRecordingScheduled"))}))})):i?d(t,e.serverId()):u(e.serverId(),t,!0)}))}function d(e,t){return new Promise((function(n,o){(0,l.A)({text:r.Ay.translate("MessageConfirmRecordingCancellation"),primary:"delete",confirmText:r.Ay.translate("HeaderCancelRecording"),cancelText:r.Ay.translate("HeaderKeepRecording")}).then((function(){a.Ay.show(),u(i.A.getApiClient(t),e,!0).then(n,o)}),o)}))}function u(e,t,n){return a.Ay.show(),e.cancelLiveTvTimer(t).then((function(){!1!==n&&(a.Ay.hide(),(0,o.A)(r.Ay.translate("RecordingCancelled")))}))}function f(e,t,n){return a.Ay.show(),e.getNewLiveTvTimerDefaults({programId:t}).then((function(t){return(n?e.createLiveTvSeriesTimer(t):e.createLiveTvTimer(t)).then((function(){a.Ay.hide(),(0,o.A)(r.Ay.translate("RecordingScheduled"))}))}))}t.default={cancelTimer:u,createRecording:f,changeRecordingToSeries:c,toggleRecording:function(e,t,n,l,d){var h=i.A.getApiClient(e),m=n&&"Cancelled"!==l;return d&&m?function(e,t,n,l,c){return new Promise((function(t,d){var f=[];f.push({name:r.Ay.translate("HeaderKeepRecording"),id:"cancel",type:"submit"}),"InProgress"===l?f.push({name:r.Ay.translate("HeaderStopRecording"),id:"canceltimer",type:"cancel"}):f.push({name:r.Ay.translate("HeaderCancelRecording"),id:"canceltimer",type:"cancel"}),f.push({name:r.Ay.translate("HeaderCancelSeries"),id:"cancelseriestimer",type:"cancel"}),s.A.show({text:r.Ay.translate("MessageConfirmRecordingCancellation"),buttons:f}).then((function(l){var s=i.A.getApiClient(e);"canceltimer"===l?(a.Ay.show(),u(s,n,!0).then(t,d)):"cancelseriestimer"===l?(a.Ay.show(),s.cancelLiveTvSeriesTimer(c).then((function(){(0,o.A)(r.Ay.translate("SeriesCancelled")),a.Ay.hide(),t()}),d)):t()}),d)}))}(e,0,n,l,d):m&&t?c(h,n,t,!0):t?f(h,t):Promise.reject()},cancelTimerWithConfirmation:d,cancelSeriesTimerWithConfirmation:function(e,t){return new Promise((function(n,s){(0,l.A)({text:r.Ay.translate("MessageConfirmRecordingCancellation"),primary:"delete",confirmText:r.Ay.translate("HeaderCancelSeries"),cancelText:r.Ay.translate("HeaderKeepSeries")}).then((function(){a.Ay.show(),i.A.getApiClient(t).cancelLiveTvSeriesTimer(e).then((function(){(0,o.A)(r.Ay.translate("SeriesCancelled")),a.Ay.hide(),n()}),s)}),s)}))}}},22832:function(e,t,n){n(44962),n(24776),n(77575),n(78557),n(96054),n(90076),n(83994),n(82367);var r=n(80669),a=n(38490),i=n(70267),o=n(9482),l=n(47629),s=n(78938),c=n(86191),d=n(50764),u=n(82885);function f(e,t,n){for(var a,i=e.parentNode,o=e.classList.length?".".concat(e.classList[0]):"",s=i.querySelectorAll("".concat(o,"[data-id]")),c=[],d=!1,u=0,f=s.length;u<f;u++)s[u]===e&&(d=!0,a=u),!d&&n||c.push(s[u].getAttribute("data-id"));var h=l.Ay.parentWithClass(e,"itemsContainer");if(null!=h&&h.fetchData){var m=n?{StartIndex:a}:{};return h.fetchData(m).then((function(e){return n?r.f.queue({items:e.Items}):r.f.play({items:e.Items,startIndex:a})}))}if(c.length)return n?r.f.queue({ids:c,serverId:t}):r.f.play({ids:c,serverId:t,startIndex:a})}function h(e){var t=(e=l.Ay.parentWithAttribute(e,"data-id")).getAttribute("data-serverid"),n=e.getAttribute("data-id"),r=e.getAttribute("data-type"),a=c.A.getApiClient(t);return"Timer"===r?a.getLiveTvTimer(n):"SeriesTimer"===r?a.getLiveTvSeriesTimer(n):a.getItem(a.getCurrentUserId(),n)}function m(e){return{Type:e.getAttribute("data-type"),Id:e.getAttribute("data-id"),TimerId:e.getAttribute("data-timerid"),CollectionType:e.getAttribute("data-collectiontype"),ChannelId:e.getAttribute("data-channelid"),SeriesId:e.getAttribute("data-seriesid"),ServerId:e.getAttribute("data-serverid"),MediaType:e.getAttribute("data-mediatype"),Path:e.getAttribute("data-path"),IsFolder:"true"===e.getAttribute("data-isfolder"),StartDate:e.getAttribute("data-startdate"),EndDate:e.getAttribute("data-enddate"),UserData:{PlaybackPositionTicks:parseInt(e.getAttribute("data-positionticks")||"0",10)}}}function y(e,t,a){t=t||e;var p=e.getAttribute("data-id");p||(p=(e=l.Ay.parentWithAttribute(e,"data-id")).getAttribute("data-id"));var A=m(e),b=l.Ay.parentWithClass(e,"itemsContainer"),I="items-"+(A.IsFolder?A.Id:null==b?void 0:b.getAttribute("data-parentid"))+"-Folder",C=A.ServerId,S=A.Type,T="Program"===S?A.ChannelId:A.Id;if("Photo"===A.MediaType&&"link"===a&&(a="play"),"link"===a)i.appRouter.showItem(A,{context:e.getAttribute("data-context"),parentId:e.getAttribute("data-parentid")});else if("programdialog"===a)!function(e){Promise.all([n.e(10739),n.e(23346)]).then(n.bind(n,63834)).then((function(t){t.default.show(e.Id,e.ServerId)}))}(A);else if("instantmix"===a)r.f.instantMix({Id:T,ServerId:C});else if("play"===a||"resume"===a){var w=parseInt(e.getAttribute("data-positionticks")||"0",10),L=u.getSortValuesLegacy(I,"SortName");r.f.canPlay(A)?r.f.play({ids:[T],startPositionTicks:w,serverId:C,queryOptions:{SortBy:L.sortBy,SortOrder:L.sortOrder}}):console.warn("Unable to play item",A)}else if("queue"===a)r.f.isPlaying()?(r.f.queue({ids:[T],serverId:C}),(0,d.A)(o.Ay.translate("MediaQueued"))):r.f.queue({ids:[T],serverId:C});else if("playallfromhere"===a)f(e,C);else if("queueallfromhere"===a)f(e,C,!0);else if("setplaylistindex"===a)r.f.setCurrentPlaylistItem(e.getAttribute("data-playlistitemid"));else if("record"===a)!function(e,t,n,r,a){if("Program"===n||r||a){var i="Program"===n?t:null;s.default.toggleRecording(e,i,r,a)}}(C,p,S,e.getAttribute("data-timerid"),e.getAttribute("data-seriestimerid"));else if("menu"===a){var P="false"===t.getAttribute("data-playoptions")?{shuffle:!1,instantMix:!1,play:!1,playAllFromHere:!1,queue:!1,queueAllFromHere:!1}:{};P.positionTo=t,function(e,t){h(e).then((function(r){var a=e.getAttribute("data-playlistid"),i=e.getAttribute("data-collectionid");if(a){var o=l.Ay.parentWithAttribute(e,"data-playlistitemid");r.PlaylistItemId=o?o.getAttribute("data-playlistitemid"):null}Promise.all([n.e(55802),n.e(1998)]).then(n.bind(n,55802)).then((function(n){c.A.getApiClient(r.ServerId).getCurrentUser().then((function(o){n.show(Object.assign({item:r,play:!0,queue:!0,playAllFromHere:!r.IsFolder,queueAllFromHere:!r.IsFolder,playlistId:a,collectionId:i,user:o},t||{})).then((function(n){var r,a;"playallfromhere"===n.command||"queueallfromhere"===n.command?y(e,t.positionTo,n.command):(n.updated||n.deleted)&&(r=e,(a=(a=t.itemsContainer)||l.Ay.parentWithAttribute(r,"is","emby-itemscontainer"))&&a.notifyRefreshNeeded(!0))})).catch((function(){}))}))}))}))}(e,P)}else if("playmenu"===a)!function(e,t){var r=m(e);n.e(44910).then(n.bind(n,44910)).then((function(e){e.show({item:r,positionTo:t})}))}(e,t);else if("edit"===a)h(t).then((function(e){!function(e,t){var r=c.A.getApiClient(t);new Promise((function(t,a){var i=r.serverInfo().Id;"Timer"===e.Type?e.ProgramId?Promise.all([n.e(10739),n.e(23346)]).then(n.bind(n,63834)).then((function(n){n.default.show(e.ProgramId,i).then(t,a)})):n.e(59801).then(n.bind(n,59801)).then((function(n){n.default.show(e.Id,i).then(t,a)})):Promise.all([n.e(45642),n.e(26855),n.e(89058)]).then(n.bind(n,26855)).then((function(n){n.default.show(e.Id,i).then(t,a)}))}))}(e,C)}));else if("playtrailer"===a)h(t).then(g);else if("addtoplaylist"===a)h(t).then(v);else if("custom"===a){var k=t.getAttribute("data-customaction");e.dispatchEvent(new CustomEvent("action-".concat(k),{detail:{playlistItemId:e.getAttribute("data-playlistitemid")},cancelable:!1,bubbles:!0}))}}function v(e){Promise.all([n.e(45642),n.e(79689)]).then(n.bind(n,79689)).then((function(t){(new(0,t.default)).show({items:[e.Id],serverId:e.ServerId}).catch((function(){}))})).catch((function(e){console.error("[addToPlaylist] failed to load playlist editor",e)}))}function g(e){var t=c.A.getApiClient(e.ServerId);t.getLocalTrailers(t.getCurrentUserId(),e.Id).then((function(e){r.f.play({items:e})}))}function p(e){var t=l.Ay.parentWithClass(e.target,"itemAction");if(t){var n=t,r=n.getAttribute("data-action");if(r||(n=l.Ay.parentWithAttribute(n,"data-action"))&&(r=n.getAttribute("data-action")),r)return y(t,n,r),e.preventDefault(),e.stopPropagation(),!1}}function A(e){var t=e.detail.command;if("play"===t||"resume"===t||"record"===t||"menu"===t||"info"===t){var n=e.target,r=l.Ay.parentWithClass(n,"itemAction")||l.Ay.parentWithAttribute(n,"data-id");r&&(e.preventDefault(),e.stopPropagation(),y(r,r,t))}}t.Ay={on:function(e,t){!1!==(t=t||{}).click&&e.addEventListener("click",p),!1!==t.command&&a.default.on(e,A)},off:function(e,t){t=t||{},e.removeEventListener("click",p),!1!==t.command&&a.default.off(e,A)},onClick:p,getShortcutAttributesHtml:function(e,t){var n='data-id="'.concat(e.Id,'" data-serverid="').concat(t||e.ServerId,'" data-type="').concat(e.Type,'" data-mediatype="').concat(e.MediaType,'" data-channelid="').concat(e.ChannelId,'" data-isfolder="').concat(e.IsFolder,'"'),r=e.CollectionType;return r&&(n+=' data-collectiontype="'.concat(r,'"')),n}}}}]);