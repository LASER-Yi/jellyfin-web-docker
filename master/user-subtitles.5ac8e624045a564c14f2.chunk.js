"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[102,763],{10763:function(e,t,i){function n(e,t){var i=[];switch(e.textSize||""){case"smaller":i.push({name:"font-size",value:".8em"});break;case"small":i.push({name:"font-size",value:"inherit"});break;case"larger":i.push({name:"font-size",value:"2em"});break;case"extralarge":i.push({name:"font-size",value:"2.2em"});break;case"large":i.push({name:"font-size",value:"1.72em"});break;default:i.push({name:"font-size",value:"1.36em"})}switch("bold"===(e.textWeight||"")?i.push({name:"font-weight",value:"bold"}):i.push({name:"font-weight",value:"normal"}),e.dropShadow||""){case"raised":i.push({name:"text-shadow",value:"-1px -1px white, 0px -1px white, -1px 0px white, 1px 1px black, 0px 1px black, 1px 0px black"});break;case"depressed":i.push({name:"text-shadow",value:"1px 1px white, 0px 1px white, 1px 0px white, -1px -1px black, 0px -1px black, -1px 0px black"});break;case"uniform":i.push({name:"text-shadow",value:"-1px 0px #000000, 0px 1px #000000, 1px 0px #000000, 0px -1px #000000"});break;case"none":i.push({name:"text-shadow",value:"none"});break;default:i.push({name:"text-shadow",value:"#000000 0px 0px 7px"})}var n=e.textBackground||"transparent";n&&i.push({name:"background-color",value:n});var a=e.textColor||"#ffffff";switch(a&&i.push({name:"color",value:a}),e.font||""){case"typewriter":i.push({name:"font-family",value:'"Courier New",monospace'}),i.push({name:"font-variant",value:"none"});break;case"print":i.push({name:"font-family",value:"Georgia,Times New Roman,Arial,Helvetica,serif"}),i.push({name:"font-variant",value:"none"});break;case"console":i.push({name:"font-family",value:"Consolas,Lucida Console,Menlo,Monaco,monospace"}),i.push({name:"font-variant",value:"none"});break;case"cursive":i.push({name:"font-family",value:"Lucida Handwriting,Brush Script MT,Segoe Script,cursive,Quintessential,system-ui,-apple-system,BlinkMacSystemFont,sans-serif"}),i.push({name:"font-variant",value:"none"});break;case"casual":i.push({name:"font-family",value:"Gabriola,Segoe Print,Comic Sans MS,Chalkboard,Short Stack,system-ui,-apple-system,BlinkMacSystemFont,sans-serif"}),i.push({name:"font-variant",value:"none"});break;case"smallcaps":i.push({name:"font-family",value:"Copperplate Gothic,Copperplate Gothic Bold,Copperplate,system-ui,-apple-system,BlinkMacSystemFont,sans-serif"}),i.push({name:"font-variant",value:"small-caps"});break;default:i.push({name:"font-family",value:"inherit"}),i.push({name:"font-variant",value:"none"})}if(!t){var l=parseInt(e.verticalPosition,10),o=Math.abs(1.35*l);l<0?(i.push({name:"min-height",value:"".concat(o,"em")}),i.push({name:"margin-top",value:""})):(i.push({name:"min-height",value:""}),i.push({name:"margin-top",value:"".concat(o,"em")}))}return i}function a(e,t){var i=[];return t||(parseInt(e.verticalPosition,10)<0?(i.push({name:"top",value:""}),i.push({name:"bottom",value:"0"})):(i.push({name:"top",value:"0"}),i.push({name:"bottom",value:""}))),i}function l(e,t){return{text:n(e,t),window:a(e,t)}}function o(e,t){for(var i=0,n=e.length;i<n;i++){var a=e[i];t.style[a.name]=a.value}}function s(e,t){var i=l(t,!!e.preview);e.text&&o(i.text,e.text),e.window&&o(i.window,e.window)}i.r(t),i.d(t,{applyStyles:function(){return s},getStyles:function(){return l}}),i(32081),t.default={getStyles:l,applyStyles:s}},14338:function(e,t,i){i.r(t),i.d(t,{default:function(){return N}}),i(48410),i(99785);var n=i(94994),a=i(84881),l=i(59858),o=i(34643),s=i(30325),r=i(51161),u=i(10763),c=function(e,t){var i="";i+="<option value=''>"+n.ZP.translate("AnyLanguage")+"</option>";for(var a=0,l=t.length;a<l;a++){var o=t[a];i+="<option value='"+o.ThreeLetterISOLanguageName+"'>"+o.DisplayName+"</option>"}e.innerHTML=i},p=i(72365),v=i(47005),d=(i(664),i(19099),i(54725),i(33310),i(25141),i(15359),i(1892)),f=i.n(d),b=i(95760),m=i.n(b),h=i(38311),S=i.n(h),y=i(58192),g=i.n(y),w=i(38060),x=i.n(w),C=i(54865),$=i.n(C),k=i(27712),L={};L.styleTagTransform=$(),L.setAttributes=g(),L.insert=S().bind(null,"head"),L.domAPI=m(),L.insertStyleElement=x(),f()(k.Z,L),k.Z&&k.Z.locals&&k.Z.locals;var P,T=i(18613),q=i(29016);function D(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e){var t={};return t.textSize=e.querySelector("#selectTextSize").value,t.textWeight=e.querySelector("#selectTextWeight").value,t.dropShadow=e.querySelector("#selectDropShadow").value,t.font=e.querySelector("#selectFont").value,t.textBackground=e.querySelector("#inputTextBackground").value,t.textColor=s.Z.tv?e.querySelector("#selectTextColor").value:e.querySelector("#inputTextColor").value,t.verticalPosition=e.querySelector("#sliderVerticalPosition").value,t}function E(e){for(var t=p.ZP.parentWithClass(e.target,"subtitlesettings"),i=t.querySelectorAll(".subtitlesHelp"),n=0,a=i.length;n<a;n++)i[n].classList.add("hide");t.querySelector(".subtitles"+this.value+"Help").classList.remove("hide")}function H(e){var t=p.ZP.parentWithClass(e.target,"subtitlesettings"),i=A(t),n={window:t.querySelector(".subtitleappearance-preview-window"),text:t.querySelector(".subtitleappearance-preview-text"),preview:!0};u.default.applyStyles(n,i),u.default.applyStyles({window:t.querySelector(".subtitleappearance-fullpreview-window"),text:t.querySelector(".subtitleappearance-fullpreview-text")},i)}function B(e){clearTimeout(P),this._fullPreview.classList.remove("subtitleappearance-fullpreview-hide"),e&&this._refFullPreview++,0===this._refFullPreview&&(P=setTimeout(I.bind(this),1e3))}function I(e){clearTimeout(P),e&&this._refFullPreview--,0===this._refFullPreview&&this._fullPreview.classList.add("subtitleappearance-fullpreview-hide")}var Z=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,function(e,t){if(e.element.classList.add("subtitlesettings"),e.element.innerHTML=n.ZP.translateHtml('<form style="margin:0 auto"> <div class="verticalSection"> <h2 class="sectionTitle"> ${Subtitles} </h2> <div class="selectContainer"> <select is="emby-select" id="selectSubtitleLanguage" label="${LabelPreferredSubtitleLanguage}"></select> </div> <div class="selectContainer"> <select is="emby-select" id="selectSubtitlePlaybackMode" label="${LabelSubtitlePlaybackMode}"> <option value="Default">${Default}</option> <option value="Smart">${Smart}</option> <option value="OnlyForced">${OnlyForcedSubtitles}</option> <option value="Always">${AlwaysPlaySubtitles}</option> <option value="None">${None}</option> </select> <div class="fieldDescription subtitlesDefaultHelp subtitlesHelp hide">${DefaultSubtitlesHelp}</div> <div class="fieldDescription subtitlesSmartHelp subtitlesHelp hide">${SmartSubtitlesHelp}</div> <div class="fieldDescription subtitlesAlwaysHelp subtitlesHelp hide">${AlwaysPlaySubtitlesHelp}</div> <div class="fieldDescription subtitlesOnlyForcedHelp subtitlesHelp hide">${OnlyForcedSubtitlesHelp}</div> <div class="fieldDescription subtitlesNoneHelp subtitlesHelp hide">${NoSubtitlesHelp}</div> </div> <div class="selectContainer fldBurnIn hide"> <select is="emby-select" id="selectSubtitleBurnIn" label="${LabelBurnSubtitles}"> <option value="">${Auto}</option> <option value="onlyimageformats">${OnlyImageFormats}</option> <option value="allcomplexformats">${AllComplexFormats}</option> <option value="all">${All}</option> </select> <div class="fieldDescription">${BurnSubtitlesHelp}</div> </div> </div> <div class="verticalSection subtitleAppearanceSection hide"> <h2 class="sectionTitle"> ${HeaderSubtitleAppearance} </h2> <div class="subtitleappearance-fullpreview subtitleappearance-fullpreview-hide"> <div class="subtitleappearance-fullpreview-window"> <div class="subtitleappearance-fullpreview-text"> ${HeaderSubtitleAppearance} <br> ${TheseSettingsAffectSubtitlesOnThisDevice} </div> </div> </div> <div style="margin:2em 0 2em"> <div class="subtitleappearance-preview flex align-items-center justify-content-center" style="margin:2em 0;padding:1.6em;color:#000;background:linear-gradient(140deg,#aa5cc3,#00a4dc)"> <div class="subtitleappearance-preview-window flex align-items-center justify-content-center" style="width:90%;padding:.25em"> <div class="subtitleappearance-preview-text flex align-items-center justify-content-center"> ${TheseSettingsAffectSubtitlesOnThisDevice} </div> </div> </div> <div class="fieldDescription">${SubtitleAppearanceSettingsDisclaimer}</div> <div class="fieldDescription">${SubtitleAppearanceSettingsAlsoPassedToCastDevices}</div> </div> <div class="selectContainer"> <select is="emby-select" id="selectTextSize" label="${LabelTextSize}"> <option value="smaller">${Smaller}</option> <option value="small">${Small}</option> <option value="">${Normal}</option> <option value="large">${Large}</option> <option value="larger">${Larger}</option> <option value="extralarge">${ExtraLarge}</option> </select> </div> <div class="selectContainer"> <select is="emby-select" id="selectTextWeight" label="${LabelTextWeight}"> <option value="normal">${Normal}</option> <option value="bold">${Bold}</option> </select> </div> <div class="selectContainer"> <select is="emby-select" id="selectFont" label="${LabelFont}"> <option value="">${Default}</option> <option value="typewriter">${Typewriter}</option> <option value="print">${Print}</option> <option value="console">${Console}</option> <option value="cursive">${Cursive}</option> <option value="casual">${Casual}</option> <option value="smallcaps">${SmallCaps}</option> </select> </div> <div class="inputContainer hide"> <input is="emby-input" id="inputTextBackground" label="${LabelTextBackgroundColor}" type="text"/> </div> <div class="selectContainer"> <input is="emby-input" id="inputTextColor" label="${LabelTextColor}" type="color"/> </div> <div class="selectContainer hide"> <select is="emby-select" id="selectTextColor" label="${LabelTextColor}"> <option value="#ffffff">${White}</option> <option value="#ffff00">${Yellow}</option> <option value="#008000">${Green}</option> <option value="#00ffff">${Cyan}</option> <option value="#0000ff">${Blue}</option> <option value="#ff00ff">${Magenta}</option> <option value="#ff0000">${Red}</option> <option value="#000000">${Black}</option> </select> </div> <div class="selectContainer"> <select is="emby-select" id="selectDropShadow" label="${LabelDropShadow}"> <option value="none">${None}</option> <option value="raised">${Raised}</option> <option value="depressed">${Depressed}</option> <option value="uniform">${Uniform}</option> <option value="">${DropShadow}</option> </select> </div> <div class="sliderContainer-settings"> <div class="sliderContainer"> <input is="emby-slider" id="sliderVerticalPosition" label="${LabelSubtitleVerticalPosition}" type="range" min="-16" max="16"/> </div> <div class="fieldDescription">${SubtitleVerticalPositionHelp}</div> </div> <div class="checkboxContainer"> <label> <input is="emby-checkbox" type="checkbox" class="chkPreview"/> <span>${Preview}</span> </label> </div> </div> <button is="emby-button" type="submit" class="raised button-submit block btnSave hide"> <span>${Save}</span> </button> </form> ',"core"),e.element.querySelector("form").addEventListener("submit",t.onSubmit.bind(t)),e.element.querySelector("#selectSubtitlePlaybackMode").addEventListener("change",E),e.element.querySelector("#selectTextSize").addEventListener("change",H),e.element.querySelector("#selectTextWeight").addEventListener("change",H),e.element.querySelector("#selectDropShadow").addEventListener("change",H),e.element.querySelector("#selectFont").addEventListener("change",H),e.element.querySelector("#selectTextColor").addEventListener("change",H),e.element.querySelector("#inputTextColor").addEventListener("change",H),e.element.querySelector("#inputTextBackground").addEventListener("change",H),e.enableSaveButton&&e.element.querySelector(".btnSave").classList.remove("hide"),a.M.supports("subtitleappearancesettings")){e.element.querySelector(".subtitleAppearanceSection").classList.remove("hide"),t._fullPreview=e.element.querySelector(".subtitleappearance-fullpreview"),t._refFullPreview=0;var i=e.element.querySelector("#sliderVerticalPosition");i.addEventListener("input",H),i.addEventListener("input",(function(){return B.call(t)}));var l=window.PointerEvent?"pointer":"mouse";i.addEventListener("".concat(l,"enter"),(function(){return B.call(t,!0)})),i.addEventListener("".concat(l,"leave"),(function(){return I.call(t,!0)})),s.Z.tv&&(i.addEventListener("focus",(function(){return B.call(t,!0)})),i.addEventListener("blur",(function(){return I.call(t,!0)})),setTimeout((function(){i.classList.add("focusable"),i.enableKeyboardDragging()}),0),p.ZP.parentWithTag(e.element.querySelector("#inputTextColor"),"DIV").classList.add("hide"),p.ZP.parentWithTag(e.element.querySelector("#selectTextColor"),"DIV").classList.remove("hide")),e.element.querySelector(".chkPreview").addEventListener("change",(function(e){e.target.checked?B.call(t,!0):I.call(t,!0)}))}t.loadData(),e.autoFocus&&o.Z.autoFocus(e.element)}(t,this)}var t,i;return t=e,i=[{key:"loadData",value:function(){var e=this,t=e.options.element;r.ZP.show();var i=e.options.userId,n=T.Z.getApiClient(e.options.serverId),o=e.options.userSettings;n.getUser(i).then((function(s){o.setUserInfo(i,n).then((function(){e.dataLoaded=!0;var i=o.getSubtitleAppearanceSettings(e.options.appearanceKey);!function(e,t,i,n,o){o.getCultures().then((function(i){a.M.supports("subtitleburnsettings")&&t.Policy.EnableVideoPlaybackTranscoding&&e.querySelector(".fldBurnIn").classList.remove("hide");var o=e.querySelector("#selectSubtitleLanguage");c(o,i),o.value=t.Configuration.SubtitleLanguagePreference||"",e.querySelector("#selectSubtitlePlaybackMode").value=t.Configuration.SubtitleMode||"",e.querySelector("#selectSubtitlePlaybackMode").dispatchEvent(new CustomEvent("change",{})),e.querySelector("#selectTextSize").value=n.textSize||"",e.querySelector("#selectTextWeight").value=n.textWeight||"normal",e.querySelector("#selectDropShadow").value=n.dropShadow||"",e.querySelector("#inputTextBackground").value=n.textBackground||"transparent",e.querySelector("#selectTextColor").value=n.textColor||"#ffffff",e.querySelector("#inputTextColor").value=n.textColor||"#ffffff",e.querySelector("#selectFont").value=n.font||"",e.querySelector("#sliderVerticalPosition").value=n.verticalPosition,e.querySelector("#selectSubtitleBurnIn").value=l.Z.get("subtitleburnin")||"",H({target:e.querySelector("#selectTextSize")}),r.ZP.hide()}))}(t,s,0,i,n)}))}))}},{key:"submit",value:function(){this.onSubmit(null)}},{key:"destroy",value:function(){this.options=null}},{key:"onSubmit",value:function(e){var t=this,i=T.Z.getApiClient(t.options.serverId),a=t.options.userId,o=t.options.userSettings;return o.setUserInfo(a,i).then((function(){var e=t.options.enableSaveConfirmation;!function(e,t,i,a,o,s){r.ZP.show(),l.Z.set("subtitleburnin",t.querySelector("#selectSubtitleBurnIn").value),o.getUser(i).then((function(i){(function(e,t,i,n,a){var l=i.getSubtitleAppearanceSettings(n);return l=Object.assign(l,A(e)),i.setSubtitleAppearanceSettings(l,n),t.Configuration.SubtitleLanguagePreference=e.querySelector("#selectSubtitleLanguage").value,t.Configuration.SubtitleMode=e.querySelector("#selectSubtitlePlaybackMode").value,a.updateUserConfiguration(t.Id,t.Configuration)})(t,i,a,e.appearanceKey,o).then((function(){r.ZP.hide(),s&&(0,q.Z)(n.ZP.translate("SettingsSaved")),v.Events.trigger(e,"saved")}),(function(){r.ZP.hide()}))}))}(t,t.options.element,a,o,i,e)})),e&&e.preventDefault(),!1}}],i&&D(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),F=Z,M=i(60934),z=i(87680),W=M.UserSettings;function N(e,t){var i,n=t.userId||ApiClient.getCurrentUserId(),a=n===ApiClient.getCurrentUserId()?M:new W;e.addEventListener("viewshow",(function(){i?i.loadData():i=new F({serverId:ApiClient.serverId(),userId:n,element:e.querySelector(".settingsContainer"),userSettings:a,enableSaveButton:!0,enableSaveConfirmation:!0,autoFocus:z.default.isEnabled()})})),e.addEventListener("viewdestroy",(function(){i&&(i.destroy(),i=null)}))}},27712:function(e,t,i){var n=i(54933),a=i.n(n),l=i(93476),o=i.n(l)()(a());o.push([e.id,".subtitleappearance-fullpreview{height:100%;left:0;pointer-events:none;position:fixed;top:0;transition:.2s;width:100%;z-index:1000}.subtitleappearance-fullpreview-hide{opacity:0}.subtitleappearance-fullpreview-window{font-size:170%;position:absolute;text-align:center;width:100%}.subtitleappearance-fullpreview-text{display:inline-block;max-width:70%}",""]),t.Z=o}}]);