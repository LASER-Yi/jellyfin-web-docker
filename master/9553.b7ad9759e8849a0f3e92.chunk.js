"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9553,9656],{70350:function(e,t,r){r(23938),r(61013),r(76056),r(98010),r(63238);var i=r(65009),n=r.n(i),a=r(61693),o=r(94994),s=r(52050),d=r(21776),c=r(24102);function l(e){var t,r,i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l="",f=[],p="MusicAlbum"===e.Type||"MusicArtist"===e.MediaType||"Playlist"===e.Type||"Playlist"===e.MediaType||"MusicGenre"===e.MediaType;if(p?((i=e.SongCount||e.ChildCount)&&f.push(o.ZP.translate("TrackCount",i)),e.RunTimeTicks&&f.push(a.ZP.getDisplayDuration(e.RunTimeTicks))):"PhotoAlbum"!==e.Type&&"BoxSet"!==e.Type||(i=e.ChildCount)&&f.push(o.ZP.translate("ItemCount",i)),("Episode"===e.Type||"Photo"===e.MediaType)&&!1!==s.originalAirDate&&e.PremiereDate)try{r=a.ZP.parseISO8601Date(e.PremiereDate,"Episode"!==e.Type),t=a.ZP.toLocaleDateString(r),f.push(t)}catch(t){console.error("error parsing date:",e.PremiereDate)}if("SeriesTimer"===e.Type&&(e.RecordAnyTime?f.push(o.ZP.translate("Anytime")):f.push(a.ZP.getDisplayTime(e.StartDate)),e.RecordAnyChannel?f.push(o.ZP.translate("AllChannels")):f.push(e.ChannelName||o.ZP.translate("OneChannel"))),e.StartDate&&"Program"!==e.Type&&"SeriesTimer"!==e.Type)try{r=a.ZP.parseISO8601Date(e.StartDate),t=a.ZP.toLocaleDateString(r),f.push(t),"Recording"!==e.Type&&(t=a.ZP.getDisplayTime(r),f.push(t))}catch(t){console.error("error parsing date:",e.StartDate)}if(!1!==s.year&&e.ProductionYear&&"Series"===e.Type)if("Continuing"===e.Status)f.push(o.ZP.translate("SeriesYearToPresent",e.ProductionYear));else if(e.ProductionYear){if(t=e.ProductionYear,e.EndDate)try{var h=a.ZP.parseISO8601Date(e.EndDate).getFullYear();h!==e.ProductionYear&&(t+="-".concat(a.ZP.parseISO8601Date(e.EndDate).getFullYear()))}catch(t){console.error("error parsing date:",e.EndDate)}f.push(t)}if("Program"===e.Type)if(!1!==s.programIndicator&&(e.IsLive?f.push({html:'<div class="mediaInfoProgramAttribute mediaInfoItem liveTvProgram">'.concat(o.ZP.translate("Live"),"</div>")}):e.IsPremiere?f.push({html:'<div class="mediaInfoProgramAttribute mediaInfoItem premiereTvProgram">'.concat(o.ZP.translate("Premiere"),"</div>")}):e.IsSeries&&!e.IsRepeat?f.push({html:'<div class="mediaInfoProgramAttribute mediaInfoItem newTvProgram">'.concat(o.ZP.translate("New"),"</div>")}):e.IsSeries&&e.IsRepeat&&f.push({html:'<div class="mediaInfoProgramAttribute mediaInfoItem repeatTvProgram">'.concat(o.ZP.translate("Repeat"),"</div>")})),(e.IsSeries||e.EpisodeTitle)&&!1!==s.episodeTitle)(t=d.ZP.getDisplayName(e,{includeIndexNumber:s.episodeTitleIndexNumber}))&&f.push(n()(t));else if(e.IsMovie&&e.ProductionYear&&!1!==s.originalAirDate)f.push(e.ProductionYear);else if(e.PremiereDate&&!1!==s.originalAirDate)try{r=a.ZP.parseISO8601Date(e.PremiereDate),t=o.ZP.translate("OriginalAirDateValue",a.ZP.toLocaleDateString(r)),f.push(t)}catch(t){console.error("error parsing date:",e.PremiereDate)}else e.ProductionYear&&f.push(e.ProductionYear);if(!1!==s.year&&"Series"!==e.Type&&"Episode"!==e.Type&&"Person"!==e.Type&&"Photo"!==e.MediaType&&"Program"!==e.Type&&"Season"!==e.Type)if(e.ProductionYear)f.push(e.ProductionYear);else if(e.PremiereDate)try{t=a.ZP.parseISO8601Date(e.PremiereDate).getFullYear(),f.push(t)}catch(t){console.error("error parsing date:",e.PremiereDate)}if(e.RunTimeTicks&&"Series"!==e.Type&&"Program"!==e.Type&&"Book"!==e.Type&&!p&&!1!==s.runtime&&("Audio"===e.Type?f.push(a.ZP.getDisplayRunningTime(e.RunTimeTicks)):f.push(a.ZP.getDisplayDuration(e.RunTimeTicks))),e.OfficialRating&&"Season"!==e.Type&&"Episode"!==e.Type&&f.push({text:e.OfficialRating,cssClass:"mediaInfoOfficialRating"}),e.Video3DFormat&&f.push("3D"),"Photo"===e.MediaType&&e.Width&&e.Height&&f.push("".concat(e.Width,"x").concat(e.Height)),!1!==s.container&&"Audio"===e.Type&&e.Container&&f.push(e.Container),l+=f.map((function(e){return m(e)})).join(""),!1!==s.starRating&&(l+=g(e)),e.HasSubtitles&&!1!==s.subtitles&&(l+='<div class="mediaInfoItem mediaInfoText closedCaptionMediaInfoText">CC</div>'),e.CriticRating&&!1!==s.criticRating&&(e.CriticRating>=60?l+='<div class="mediaInfoItem mediaInfoCriticRating mediaInfoCriticRatingFresh">'.concat(e.CriticRating,"</div>"):l+='<div class="mediaInfoItem mediaInfoCriticRating mediaInfoCriticRatingRotten">'.concat(e.CriticRating,"</div>")),!1!==s.endsAt){var v=u(e);v&&(l+=m(v,"endsAt"))}return l+c.ZP.getMissingIndicator(e)}function u(e){if("Video"===e.MediaType&&e.RunTimeTicks&&!e.StartDate){var t=(new Date).getTime()+e.RunTimeTicks/1e4;t=new Date(t);var r=a.ZP.getDisplayTime(t);return o.ZP.translate("EndsAtValue",r)}return null}function m(e,t){t=t?"".concat(t," mediaInfoItem"):"mediaInfoItem";var r=e;if("string"!=typeof e&&"number"!=typeof e){if(e.html)return e.html;r=e.text,t+=" ".concat(e.cssClass)}return'<div class="'.concat(t,'">').concat(r,"</div>")}function g(e){var t="";return e.CommunityRating&&(t+='<div class="starRatingContainer mediaInfoItem">',t+='<span class="material-icons starIcon star" aria-hidden="true"></span>',t+=e.CommunityRating.toFixed(1),t+="</div>"),t}function f(e,t,r){if(!1!==r.endsAt){var i=e.querySelector(".endsAt");i&&function(e,t){var r=setInterval((function(){document.body.contains(e)?e.innerHTML=u(t):clearInterval(r)}),6e4)}(i,t)}var n=e.querySelector(".lnkChannel");n&&n.addEventListener("click",p)}function p(e){var t=this.getAttribute("data-id"),r=this.getAttribute("data-serverid");return s.appRouter.showItem(t,r),e.preventDefault(),!1}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===t.interactive&&(t.interactive=!1),l(e,t)}function v(e,t){return null==(t=t||{}).interactive&&(t.interactive=!1),"Program"===e.Type?function(e,t){var r,i,o=[];if(e.StartDate&&!1!==t.programTime)try{r="",i=a.ZP.parseISO8601Date(e.StartDate),!1!==t.startDate&&(r+=a.ZP.toLocaleDateString(i,{weekday:"short",month:"short",day:"numeric"})),r+=" ".concat(a.ZP.getDisplayTime(i)),e.EndDate&&(i=a.ZP.parseISO8601Date(e.EndDate),r+=" - ".concat(a.ZP.getDisplayTime(i))),o.push(r)}catch(t){console.error("error parsing date:",e.StartDate)}if(e.ChannelNumber&&o.push("CH ".concat(e.ChannelNumber)),e.ChannelName&&(t.interactive&&e.ChannelId?o.push({html:'<a is="emby-linkbutton" class="button-flat mediaInfoItem" href="'.concat(s.appRouter.getRouteUrl({ServerId:e.ServerId,Type:"TvChannel",Name:e.ChannelName,Id:e.ChannelId}),'">').concat(n()(e.ChannelName),"</a>")}):o.push(n()(e.ChannelName))),!1!==t.timerIndicator){var d=function(e){var t;if("SeriesTimer"===e.Type)return'<span class="material-icons mediaInfoItem mediaInfoIconItem mediaInfoTimerIcon fiber_smart_record" aria-hidden="true"></span>';if(e.TimerId||e.SeriesTimerId)t=e.Status||"Cancelled";else{if("Timer"!==e.Type)return"";t=e.Status}return e.SeriesTimerId?"Cancelled"!==t?'<span class="material-icons mediaInfoItem mediaInfoIconItem mediaInfoTimerIcon fiber_smart_record" aria-hidden="true"></span>':'<span class="material-icons mediaInfoItem mediaInfoIconItem fiber_smart_record" aria-hidden="true"></span>':'<span class="material-icons mediaInfoItem mediaInfoIconItem mediaInfoTimerIcon fiber_manual_record" aria-hidden="true"></span>'}(e);d&&o.push({html:d})}return""+o.map((function(e){return m(e)})).join("")}(e,t):""}function I(e){var t=e.Width,r=e.Height;if(t&&r){if(t>=3800||r>=2e3)return"4K";if(t>=2500||r>=1400)return e.IsInterlaced?"1440i":"1440p";if(t>=1800||r>=1e3)return e.IsInterlaced?"1080i":"1080p";if(t>=1200||r>=700)return e.IsInterlaced?"720i":"720p";if(t>=700||r>=400)return e.IsInterlaced?"480i":"480p"}return null}r(38228),t.ZP={getMediaInfoHtml:h,getEndsAt:u,getEndsAtFromPosition:function(e,t,r,i){var n=(new Date).getTime()+1/r*((e-(t||0))/1e4);n=new Date(n);var s=a.ZP.getDisplayTime(n);return!1===i?s:o.ZP.translate("EndsAtValue",s)},getPrimaryMediaInfoHtml:h,getSecondaryMediaInfoHtml:v,fillPrimaryMediaInfo:function(e,t,r){var i=h(t,r);e.innerHTML=i,f(e,t,r)},fillSecondaryMediaInfo:function(e,t,r){var i=v(t,r);e.innerHTML=i,f(e,t,r)},getMediaInfoStats:function(e){var t=[],r=(((e.MediaSources||[])[0]||{}).MediaStreams||[]).filter((function(e){return"Video"===e.Type}))[0]||{},i=function(e){if(!e.MediaSources)return null;var t=e.MediaSources[0];return t?(t.MediaStreams||[]).filter((function(e){return"Audio"===e.Type&&(e.Index===t.DefaultAudioStreamIndex||null==t.DefaultAudioStreamIndex)}))[0]:null}(e)||{};"Dvd"===e.VideoType&&t.push({type:"mediainfo",text:"Dvd"}),"BluRay"===e.VideoType&&t.push({type:"mediainfo",text:"BluRay"});var n=I(r);n&&t.push({type:"mediainfo",text:n}),r.Codec&&t.push({type:"mediainfo",text:r.Codec});var s,c=i.Channels;8===c?s="7.1":7===c?s="6.1":6===c?s="5.1":2===c&&(s="2.0"),s&&t.push({type:"mediainfo",text:s});var l=(i.Codec||"").toLowerCase();if("dca"!==l&&"dts"!==l||!i.Profile?i.Codec&&t.push({type:"mediainfo",text:i.Codec}):t.push({type:"mediainfo",text:i.Profile}),e.DateCreated&&d.ZP.enableDateAddedDisplay(e)){var u=a.ZP.parseISO8601Date(e.DateCreated);t.push({type:"added",text:o.ZP.translate("AddedOnValue","".concat(a.ZP.toLocaleDateString(u)," ").concat(a.ZP.getDisplayTime(u)))})}return t},getResolutionText:I}},45012:function(e,t,r){r.r(t),r.d(t,{default:function(){return S}}),r(23938),r(5769),r(63238),r(61418),r(17460),r(14078);var i,n,a,o=r(93355),s=r(94994),d=r(30325),c=r(70350),l=r(28540),u=r(54517),m=r(61693),g=r(98301),f=r(9656),p=r(47005),h=(r(38228),r(61414),r(12291),r(85500),r(62033),r(18613)),v=r(48957),I=r.p+"6de874568a98308c4a74.png";function T(){o.default.close(i)}function y(e,t,r,i){l.ZP.show();var n=h.Z.getApiClient(r),a=n.getNewLiveTvTimerDefaults({programId:t}),o=n.getLiveTvProgram(t,n.getCurrentUserId());Promise.all([a,o]).then((function(t){t[0];var r=t[1];!function(e,t,r,i,n){if(!n){var a=function(e,t,r){var i=e.ImageTags||{};return e.PrimaryImageTag&&(i.Primary=e.PrimaryImageTag),i.Primary?t.getScaledImageUrl(e.Id,{type:"Primary",maxHeight:200,tag:e.ImageTags.Primary}):i.Thumb?t.getScaledImageUrl(e.Id,{type:"Thumb",maxHeight:200,tag:e.ImageTags.Thumb}):null}(r,i),o=e.querySelector(".recordingDialog-imageContainer");a?(o.innerHTML='<img src="'.concat(I,'" data-src="').concat(a,'" class="recordingDialog-img lazy" />'),o.classList.remove("hide"),g.default.lazyChildren(o)):(o.innerHTML="",o.classList.add("hide")),e.querySelector(".recordingDialog-itemName").innerText=r.Name,e.querySelector(".formDialogHeaderTitle").innerText=r.Name,e.querySelector(".itemGenres").innerText=(r.Genres||[]).join(" / "),e.querySelector(".itemOverview").innerText=r.Overview||"";var s=e.querySelector(".formDialogFooter"),d=new Date;d>=m.ZP.parseISO8601Date(r.StartDate,!0)&&d<m.ZP.parseISO8601Date(r.EndDate,!0)?s.classList.remove("hide"):s.classList.add("hide"),e.querySelector(".itemMiscInfoPrimary").innerHTML=c.ZP.getPrimaryMediaInfoHtml(r)}e.querySelector(".itemMiscInfoSecondary").innerHTML=c.ZP.getSecondaryMediaInfoHtml(r,{}),l.ZP.hide()}(e,0,r,n,i)}))}var S={show:function(e,t){return new Promise((function(r,c){n=null,l.ZP.show();var m={removeOnClose:!0,scrollY:!1};d.Z.tv?m.size="fullscreen":m.size="small";var g=o.default.createDialog(m);g.classList.add("formDialog"),g.classList.add("recordingDialog");var I,S="";function P(){y(g,e,t,!0)}S+=s.ZP.translateHtml('<div class="formDialogHeader"> <button is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1" title="${ButtonBack}"><span class="material-icons arrow_back" aria-hidden="true"></span></button> <h3 class="formDialogHeaderTitle"></h3> </div> <div class="formDialogContent smoothScrollY"> <form class="dialogContentInner dialog-content-centered"> <div class="recordingDetailsContainer"> <div class="recordingDialog-imageContainer"> </div> <div class="recordingDetails"> <h1 class="programDialog-itemName recordingDialog-itemName dialogContentTitle"></h1> <p class="itemMiscInfoPrimary recordingDetailText"></p> <p class="itemMiscInfoSecondary recordingDetailText secondaryText"></p> <p class="itemGenres secondaryText"></p> <div style="margin:.5em 0 1em" class="recordingFields"> </div> </div> </div> <p class="itemOverview"></p> <br/> <div class="formDialogFooter hide"> <button is="emby-button" type="button" class="raised btnPlay block formDialogFooterItem button-submit"> <span>${Play}</span> </button> </div> </form> </div> ',"core"),g.innerHTML=S,i=g,g.addEventListener("close",(function(){p.Events.off(a,"recordingchanged",P),function(e,t,r){if("play"!==e);else{var i=h.Z.getApiClient(r);i.getLiveTvProgram(t,i.getCurrentUserId()).then((function(e){v.O.play({ids:[e.ChannelId],serverId:r})}))}}(n,e,t),a&&a.hasChanged()?r():c()})),d.Z.tv&&u.default.centerFocus.on(g.querySelector(".formDialogContent"),!1),(I=g).querySelector(".btnPlay").addEventListener("click",(function(){n="play",T()})),I.querySelector(".btnCancel").addEventListener("click",(function(){n=null,T()})),y(g,e,t),a=new f.default({parent:g.querySelector(".recordingFields"),programId:e,serverId:t}),p.Events.on(a,"recordingchanged",P),o.default.open(g)}))}}},9656:function(e,t,r){r.r(t),r.d(t,{default:function(){return T}}),r(5769),r(63238),r(61418),r(99785),r(17460),r(14078);var i=r(94994),n=r(47005),a=r(44038),o=r(28540),s=r(72365),d=r(30531),c=(r(38228),r(61414),r(18613)),l=r(56663);function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e){var t=e.options,r=c.Z.getApiClient(t.serverId);return t.parent.querySelector(".recordingFields").classList.remove("hide"),r.getLiveTvProgram(t.programId,r.getCurrentUserId()).then((function(r){e.TimerId=r.TimerId,e.Status=r.Status,e.SeriesTimerId=r.SeriesTimerId,function(e,t){t.IsSeries?e.querySelector(".recordSeriesContainer").classList.remove("hide"):e.querySelector(".recordSeriesContainer").classList.add("hide"),t.SeriesTimerId?(e.querySelector(".btnManageSeriesRecording").classList.remove("hide"),e.querySelector(".seriesRecordingButton .recordingIcon").classList.add("recordingIcon-active"),e.querySelector(".seriesRecordingButton .buttonText").innerHTML=i.ZP.translate("CancelSeries")):(e.querySelector(".btnManageSeriesRecording").classList.add("hide"),e.querySelector(".seriesRecordingButton .recordingIcon").classList.remove("recordingIcon-active"),e.querySelector(".seriesRecordingButton .buttonText").innerHTML=i.ZP.translate("RecordSeries")),t.TimerId&&"Cancelled"!==t.Status?(e.querySelector(".btnManageRecording").classList.remove("hide"),e.querySelector(".singleRecordingButton .recordingIcon").classList.add("recordingIcon-active"),"InProgress"===t.Status?e.querySelector(".singleRecordingButton .buttonText").innerHTML=i.ZP.translate("StopRecording"):e.querySelector(".singleRecordingButton .buttonText").innerHTML=i.ZP.translate("DoNotRecord")):(e.querySelector(".btnManageRecording").classList.add("hide"),e.querySelector(".singleRecordingButton .recordingIcon").classList.remove("recordingIcon-active"),e.querySelector(".singleRecordingButton .buttonText").innerHTML=i.ZP.translate("Record"))}(t.parent,r)}))}function g(e,t,r){var i=this.options,n=!1;r.Id&&this.TimerId===r.Id&&(n=!0),r.ProgramId&&i&&i.programId===r.ProgramId&&(n=!0),n&&this.refresh()}function f(e,t,r){var i=this.options,n=!1;r.Id&&this.SeriesTimerId===r.Id&&(n=!0),r.ProgramId&&i&&i.programId===r.ProgramId&&(n=!0),n&&this.refresh()}function p(){var e=this.options;if(this.TimerId&&"Cancelled"!==this.Status){var t=this;r.e(1341).then(r.bind(r,21341)).then((function(r){r.default.show(t.TimerId,e.serverId,{enableCancel:!1}).then((function(){t.changed=!0}))}))}}function h(){var e=this.options;if(this.SeriesTimerId){var t=this;r.e(4896).then(r.bind(r,4896)).then((function(r){r.default.show(t.SeriesTimerId,e.serverId,{enableCancel:!1}).then((function(){t.changed=!0}))}))}}function v(e){this.changed=!0;var t=this,r=this.options,i=c.Z.getApiClient(r.serverId),a=!s.ZP.parentWithTag(e.target,"BUTTON").querySelector(".material-icons").classList.contains("recordingIcon-active"),l=this.TimerId&&"Cancelled"!==this.Status;a?l||(o.ZP.show(),d.default.createRecording(i,r.programId,!1).then((function(){n.Events.trigger(t,"recordingchanged"),m(t),o.ZP.hide()}))):l&&(o.ZP.show(),d.default.cancelTimer(i,this.TimerId,!0).then((function(){n.Events.trigger(t,"recordingchanged"),m(t),o.ZP.hide()})))}function I(e){this.changed=!0;var t=this,r=this.options,n=c.Z.getApiClient(r.serverId);s.ZP.parentWithTag(e.target,"BUTTON").querySelector(".material-icons").classList.contains("recordingIcon-active")?this.SeriesTimerId&&n.cancelLiveTvSeriesTimer(this.SeriesTimerId).then((function(){(0,l.Z)(i.ZP.translate("RecordingCancelled")),m(t)})):(r.parent.querySelector(".recordSeriesContainer").classList.remove("hide"),this.SeriesTimerId||(this.TimerId?d.default.changeRecordingToSeries(n,this.TimerId,r.programId):d.default.createRecording(n,r.programId,!0)).then((function(){m(t)})))}var T=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.embed();var r=g.bind(this);this.timerChangedHandler=r,n.Events.on(a.default,"TimerCreated",r),n.Events.on(a.default,"TimerCancelled",r);var i=f.bind(this);this.seriesTimerChangedHandler=i,n.Events.on(a.default,"SeriesTimerCreated",i),n.Events.on(a.default,"SeriesTimerCancelled",i)}var t,r;return t=e,(r=[{key:"embed",value:function(){var e=this;return new Promise((function(t){var r=e.options.parent;r.innerHTML=i.ZP.translateHtml('<div class="recordingFields hide"> <div class="recordSeriesContainer recordingFields-buttons flex align-items-center hide"> <div> <button is="emby-button" type="button" class="raised recordingButton seriesRecordingButton"> <span class="material-icons recordingIcon fiber_smart_record" aria-hidden="true"></span> <span class="buttonText">${RecordSeries}</span> </button> </div> <button is="emby-button" type="button" class="button-flat secondaryText manageRecordingButton btnManageSeriesRecording hide"> <span class="manageButtonText">${SeriesSettings}</span> </button> </div> <div class="recordingFields-buttons flex align-items-center"> <div> <button is="emby-button" type="button" class="raised recordingButton singleRecordingButton"> <span class="material-icons recordingIcon fiber_manual_record" aria-hidden="true"></span> <span class="buttonText">${Record}</span> </button> </div> <button is="emby-button" type="button" class="button-flat secondaryText manageRecordingButton btnManageRecording hide"> <span class="manageButtonText">${Settings}</span> </button> </div> </div> ',"core"),r.querySelector(".singleRecordingButton").addEventListener("click",v.bind(e)),r.querySelector(".seriesRecordingButton").addEventListener("click",I.bind(e)),r.querySelector(".btnManageRecording").addEventListener("click",p.bind(e)),r.querySelector(".btnManageSeriesRecording").addEventListener("click",h.bind(e)),m(e).then(t)}))}},{key:"hasChanged",value:function(){return this.changed}},{key:"refresh",value:function(){m(this)}},{key:"destroy",value:function(){var e=this.timerChangedHandler;this.timerChangedHandler=null,n.Events.off(a.default,"TimerCreated",e),n.Events.off(a.default,"TimerCancelled",e);var t=this.seriesTimerChangedHandler;this.seriesTimerChangedHandler=null,n.Events.off(a.default,"SeriesTimerCreated",t),n.Events.off(a.default,"SeriesTimerCancelled",t)}}])&&u(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()}}]);