"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[20945,66884],{1177:function(e,t,n){n(84734),n(44962),n(78557),n(96054),n(90076),n(83994),n(82367),n(69177);var r=n(65210),i=n(22832),a=n(38490),o=n(39738),s=n(76542),l=n(46782),c=n(34789),d=n(47629),u=n(8566),f=n(9164),h=n(67430),y=n(10736),g=n(44797),m=Object.create(HTMLDivElement.prototype);function v(e){var t=this,n=t.multiSelect;!1!==(null==n?void 0:n.onContainerClick.call(t,e))&&i.Ay.onClick.call(t,e)}function p(e){return e.preventDefault(),e.stopPropagation(),!1}function b(e){var t=e.target,n=d.Ay.parentWithAttribute(t,"data-id");if(null!=n&&n.getAttribute("data-serverid"))return a.default.handleCommand("menu",{sourceElement:n}),e.preventDefault(),e.stopPropagation(),!1}function S(e,t,r){var i=this;Promise.all([n.e(45642),n.e(24468),n.e(66884)]).then(n.bind(n,24468)).then((function(e){e.onUserDataChanged(r,i)}));var a=I(i);-1===a.indexOf("markfavorite")&&-1===a.indexOf("markplayed")||i.notifyRefreshNeeded()}function I(e){var t=e.getAttribute("data-monitor");return t?t.split(","):[]}function A(e,t,r){var i=this;if(-1===I(i).indexOf("timers")){var a=r.ProgramId,o=r.Id;Promise.all([n.e(45642),n.e(24468),n.e(66884)]).then(n.bind(n,24468)).then((function(e){e.onTimerCreated(a,o,i)}))}else i.notifyRefreshNeeded()}function T(){-1!==I(this).indexOf("seriestimers")&&this.notifyRefreshNeeded()}function x(e,t,r){var i=this;-1===I(i).indexOf("timers")?Promise.all([n.e(45642),n.e(24468),n.e(66884)]).then(n.bind(n,24468)).then((function(e){e.onTimerCancelled(r.Id,i)})):i.notifyRefreshNeeded()}function C(e,t,r){var i=this;-1===I(i).indexOf("seriestimers")?Promise.all([n.e(45642),n.e(24468),n.e(66884)]).then(n.bind(n,24468)).then((function(e){e.onSeriesTimerCancelled(r.Id,i)})):i.notifyRefreshNeeded()}function P(e,t,n){var r=this,i=I(r);if(-1===i.indexOf("seriestimers")&&-1===i.indexOf("timers")){var a=n.ItemsAdded||[],o=n.ItemsRemoved||[];if(a.length||o.length){var s=r.getAttribute("data-parentid");if(s){var l=n.FoldersAddedTo||[],c=n.FoldersRemovedFrom||[],d=n.CollectionFolders||[];if(-1===l.indexOf(s)&&-1===c.indexOf(s)&&-1===d.indexOf(s))return}r.notifyRefreshNeeded()}}}function w(e,t){var n,r=this,i=t.state,a=I(r);if(i.NowPlayingItem&&"Video"===i.NowPlayingItem.MediaType){if(-1!==a.indexOf("videoplayback"))return void r.notifyRefreshNeeded(!0)}else if("Audio"===(null===(n=i.NowPlayingItem)||void 0===n?void 0:n.MediaType)&&-1!==a.indexOf("audioplayback"))return void r.notifyRefreshNeeded(!0)}function k(e,t,n,r){var i=n.bind(e);r=r||y.default,g.A.on(r,t,i),e["event_"+t]=i}function L(e,t,n){var r=e["event_"+t];r&&(n=n||y.default,g.A.off(n,t,r),e["event_"+t]=null)}function R(e,t){e.refreshInterval&&(clearInterval(e.refreshInterval),e.refreshInterval=null,t||(e.refreshIntervalEndTime=null))}function j(e,t){R(e),t||(t=parseInt(e.getAttribute("data-refreshinterval")||"0",10)),t&&(e.refreshInterval=setInterval(e.notifyRefreshNeeded.bind(e),t),e.refreshIntervalEndTime=(new Date).getTime()+t)}function M(e){var t=e.Items||e,n=this.parentContainer;n&&(t.length?n.classList.remove("hide"):n.classList.add("hide"));var r,i,a=document.activeElement;this.contains(a)&&(i=!0,r=a.getAttribute("data-id")),this.innerHTML=this.getItemsHtml(t),s.default.lazyChildren(this),i&&function(e,t){if(t){var n=e.querySelector('[data-id="'+t+'"]');if(n)try{return void f.A.focus(n)}catch(e){console.error(e)}}f.A.autoFocus(e)}(this,r),j(this),this.afterRefresh&&this.afterRefresh(e)}m.enableMultiSelect=function(e){var t=this.multiSelect;if(e){if(!t){var r=this;n.e(35308).then(n.bind(n,35308)).then((function(e){var t=e.default;r.multiSelect=new t({container:r,bindOnClick:!1})}))}}else t&&(t.destroy(),this.multiSelect=null)},m.enableDragReordering=function(e){var t=this.sortable;if(e){if(!t){var n=this;n.sortable=new r.Ay(n,{draggable:".listItem",handle:".listViewDragHandle",onEnd:function(e){return function(e,t){var n=e.item,r=e.newIndex,i=n.getAttribute("data-playlistitemid"),a=n.getAttribute("data-playlistid");if(a){var o=n.getAttribute("data-serverid"),s=h.tF.getApiClient(o);u.Ay.show(),s.ajax({url:s.getUrl("Playlists/"+a+"/Items/"+i+"/Move/"+r),type:"POST"}).then((function(){u.Ay.hide()}),(function(){u.Ay.hide(),t.refreshItems()}))}else{var l=e.oldIndex;n.dispatchEvent(new CustomEvent("itemdrop",{detail:{oldIndex:l,newIndex:r,playlistItemId:i},bubbles:!0,cancelable:!1}))}}(e,n)}})}}else t&&(t.destroy(),this.sortable=null)},m.createdCallback=function(){this.classList.add("itemsContainer")},m.attachedCallback=function(){this.addEventListener("click",v),c.A.touch?this.addEventListener("contextmenu",p):"false"!==this.getAttribute("data-contextmenu")&&this.addEventListener("contextmenu",b),(l.A.desktop||l.A.mobile&&"false"!==this.getAttribute("data-multiselect"))&&this.enableMultiSelect(!0),l.A.tv&&this.classList.add("itemsContainer-tv"),i.Ay.on(this,{click:!1}),k(this,"UserDataChanged",S),k(this,"TimerCreated",A),k(this,"SeriesTimerCreated",T),k(this,"TimerCancelled",x),k(this,"SeriesTimerCancelled",C),k(this,"LibraryChanged",P),k(this,"playbackstop",w,o.f),"true"===this.getAttribute("data-dragreorder")&&this.enableDragReordering(!0)},m.detachedCallback=function(){R(this),this.enableMultiSelect(!1),this.enableDragReordering(!1),this.removeEventListener("click",v),this.removeEventListener("contextmenu",b),this.removeEventListener("contextmenu",p),i.Ay.off(this,{click:!1}),L(this,"UserDataChanged"),L(this,"TimerCreated"),L(this,"SeriesTimerCreated"),L(this,"TimerCancelled"),L(this,"SeriesTimerCancelled"),L(this,"LibraryChanged"),L(this,"playbackstop",o.f),this.fetchData=null,this.getItemsHtml=null,this.parentContainer=null},m.pause=function(){R(this,!0),this.paused=!0},m.resume=function(e){this.paused=!1;var t=this.refreshIntervalEndTime;if(t){var n=t-(new Date).getTime();n>0&&!this.needsRefresh?j(this,n):(this.needsRefresh=!0,this.refreshIntervalEndTime=null)}return this.needsRefresh||null!=e&&e.refresh?this.refreshItems():Promise.resolve()},m.refreshItems=function(){return this.fetchData?this.paused?(this.needsRefresh=!0,Promise.resolve()):(this.needsRefresh=!1,this.fetchData().then(M.bind(this))):Promise.resolve()},m.notifyRefreshNeeded=function(e){if(this.paused)this.needsRefresh=!0;else{var t=this.refreshTimeout;t&&clearTimeout(t),!0===e?this.refreshItems():this.refreshTimeout=setTimeout(this.refreshItems.bind(this),1e4)}},document.registerElement("emby-itemscontainer",{prototype:m,extends:"div"})},4838:function(e,t,n){t.A={getDisplayPlayMethod:function(e){var t,n,r,i;return e.NowPlayingItem?(null!==(t=e.TranscodingInfo)&&void 0!==t&&t.IsVideoDirect||null===(n=e.TranscodingInfo)||void 0===n||!n.VideoCodec)&&null!==(r=e.TranscodingInfo)&&void 0!==r&&r.IsAudioDirect?"Remux":null!==(i=e.TranscodingInfo)&&void 0!==i&&i.IsVideoDirect?"DirectStream":"Transcode"===e.PlayState.PlayMethod?"Transcode":"DirectStream"===e.PlayState.PlayMethod||"DirectPlay"===e.PlayState.PlayMethod?"DirectPlay":void 0:null}}},40694:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:function(){return r}})},41906:function(e,t,n){n.d(t,{Y:function(){return u}});var r=n(62864),i=n(63696),a=n(5898),o=n(93721),s=n(28626),l=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},c=function(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},d=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};function u(){var e=this,t=(0,s.Q)(),n=t.dateTimeLocale,u=t.language,f=d((0,i.useState)(r.A),2),h=f[0],y=f[1],g=(0,i.useMemo)((function(){return(0,a.Tl)(u||(0,a.i5)())}),[u]),m=(0,i.useMemo)((function(){return n?(0,a.Tl)(n):g}),[n,g]);return(0,i.useEffect)((function(){l(e,void 0,void 0,(function(){var e,t;return c(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,o.Fq)((0,o.QC)(m))];case 1:return e=n.sent(),y(e),[3,3];case 2:return t=n.sent(),console.warn("[useLocale] failed to fetch dateFns locale",t),[3,3];case 3:return[2]}}))}))}),[m]),{locale:g,dateTimeLocale:m,dateFnsLocale:h}}},42305:function(e,t,n){n.d(t,{C:function(){return s},L:function(){return l}});var r=n(8280),i=n(80401),a=n(48272),o=n(69410),s=function(e){return(0,r.j)({queryKey:["SystemInfo"],queryFn:function(t){var n=t.signal;return function(e,t){return n=void 0,r=void 0,o=function(){return function(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(n){switch(n.label){case 0:return[4,(0,a.c)(e).getSystemInfo(t)];case 1:return[2,n.sent().data]}}))},new((i=void 0)||(i=Promise))((function(e,t){function a(e){try{l(o.next(e))}catch(e){t(e)}}function s(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(a,s)}l((o=o.apply(n,r||[])).next())}));var n,r,i,o}(e,{signal:n,headers:{"Cache-Control":"no-cache"}})},staleTime:1e3,enabled:!!e})},l=function(){var e=(0,o.gf)().api;return(0,i.I)(s(e))}},76562:function(e,t,n){function r(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){var n,r,i,a=null===(i=null===(r=null===(n=e.target)||void 0===n?void 0:n.result)||void 0===r?void 0:r.split)||void 0===i?void 0:i.call(r,",")[1];t(a)},r.onerror=n,r.readAsDataURL(e)}))}function i(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){var n,r=null===(n=e.target)||void 0===n?void 0:n.result;t(r)},r.onerror=n,r.readAsText(e)}))}function a(e,t){void 0===t&&(t=1);var n=Math.log(e)/Math.log(1024)|0;return(e/Math.pow(1024,n)).toFixed(t)+" "+(n?"KMGTPEZY"[--n]+"iB":"Bytes")}n.d(t,{Qv:function(){return i},We:function(){return r},iJ:function(){return a}})},76916:function(e,t,n){n.r(t),n.d(t,{default:function(){return _e}}),n(24776),n(14382),n(84734),n(44962),n(9698),n(78557),n(90076),n(83994),n(23630),n(82367);var r,i=n(22696),a=n.n(i),o=n(62540),s=n(65090),l=n(63703),c=n(28335),d=n(89348),u=n(63696),f=n(48272),h=n(8280),y=n(80401),g=n(69410),m=function(e){return(0,h.j)({queryKey:["SystemStorage"],queryFn:function(t){var n=t.signal;return function(e,t){return n=void 0,r=void 0,a=function(){return function(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(n){switch(n.label){case 0:return[4,(0,f.c)(e).getSystemStorage(t)];case 1:return[2,n.sent().data]}}))},new((i=void 0)||(i=Promise))((function(e,t){function o(e){try{l(a.next(e))}catch(e){t(e)}}function s(e){try{l(a.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,s)}l((a=a.apply(n,r||[])).next())}));var n,r,i,a}(e,{signal:n})},enabled:!!e})},v=n(10822),p=n(35117),b=n(44790),S=n(60434),I=n(90158),A=n(5898),T=n(76562);!function(e){e.CDRom="CDRom",e.Fixed="Fixed",e.Network="Network",e.NoRootDirectory="NoRootDirectory",e.Ram="Ram",e.Removable="Removable",e.Unknown="Unknown"}(r||(r={}));var x=function(e){return void 0===(null==e?void 0:e.UsedSpace)||e.UsedSpace<0?-1:Math.max(0,e.FreeSpace||0)+Math.max(0,e.UsedSpace)},C=n(95326),P=n(48066),w=n(22802),k=n(13960),L=n(49107),R=function(e){switch(e.type){case r.CDRom:return(0,o.jsx)(C.A,{});case r.Network:return(0,o.jsx)(P.A,{});case r.Ram:return(0,o.jsx)(w.A,{});case r.Removable:return(0,o.jsx)(L.A,{});default:return(0,o.jsx)(k.A,{})}},j=function(e){if(e)return Object.keys(r).includes(e)?A.Ay.translate("StorageType.".concat(e)):e},M=function(e){var t,n=e.label,r=e.folder,i=void 0===(null==r?void 0:r.UsedSpace)||r.UsedSpace<0?"?":(0,T.iJ)(r.UsedSpace),a=x(r),s=a<0?"?":(0,T.iJ)(a),l=function(e){var t=x(e);if(t<=0)return 0;var n=(null==e?void 0:e.UsedSpace)||0;return Math.min(100,n/t*100)}(r),c=r?(t=l)>=90?"error":t>=80?"warning":"success":"primary";return(0,o.jsxs)(p.Ay,{children:[(0,o.jsx)(b.A,{title:j(null==r?void 0:r.StorageType),children:(0,o.jsx)(R,{type:null==r?void 0:r.StorageType})}),(0,o.jsx)(S.A,{primary:(0,o.jsx)(d.A,{component:"span",variant:"body2",children:n}),secondary:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(d.A,{color:"textPrimary",sx:{paddingBottom:.5},children:r?r.Path:(0,o.jsx)(I.A,{})}),(0,o.jsx)(v.A,{variant:r?"determinate":"indeterminate",color:c,value:l}),(0,o.jsx)(d.A,{variant:"body2",color:"textSecondary",sx:{textAlign:"end"},children:"".concat(i," / ").concat(s)})]}),slots:{secondary:"div"}})]})},N=function(){var e,t=(e=(0,g.gf)().api,(0,y.I)(m(e))).data;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.A,{variant:"text",color:"inherit",endIcon:(0,o.jsx)(s.A,{}),sx:{marginTop:1,marginBottom:1},href:"#/dashboard/settings",children:(0,o.jsx)(d.A,{variant:"h3",component:"span",children:A.Ay.translate("HeaderPaths")})}),(0,o.jsxs)(c.A,{sx:{bgcolor:"background.paper"},children:[(0,o.jsx)(M,{label:A.Ay.translate("LabelCache"),folder:null==t?void 0:t.CacheFolder}),(0,o.jsx)(M,{label:A.Ay.translate("LabelImageCache"),folder:null==t?void 0:t.ImageCacheFolder}),(0,o.jsx)(M,{label:A.Ay.translate("LabelProgramData"),folder:null==t?void 0:t.ProgramDataFolder}),(0,o.jsx)(M,{label:A.Ay.translate("LabelLogs"),folder:null==t?void 0:t.LogFolder}),(0,o.jsx)(M,{label:A.Ay.translate("LabelMetadata"),folder:null==t?void 0:t.InternalMetadataFolder}),(0,o.jsx)(M,{label:A.Ay.translate("LabelTranscodes"),folder:null==t?void 0:t.TranscodingTempFolder}),(0,o.jsx)(M,{label:A.Ay.translate("LabelWeb"),folder:null==t?void 0:t.WebFolder})]})]})},D=(n(29305),n(32733),n(84701),n(81678),n(86584),n(4754),n(94),n(36947),n(96054),n(73687),n(44797)),U=n(67430),q=n(47629),E=n(20558),F=n(10736),B=(n(10353),n(41177)),O=n(93721),W=n(44305);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K(r.key),r)}}function K(e){var t=function(e){if("object"!=H(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=H(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==H(t)?t:t+""}function Q(e,t,n,r,i){null==r&&(r=parseInt(t.getAttribute("data-activitystartindex")||"0",10)),i=i||parseInt(t.getAttribute("data-activitylimit")||"7",10);var o=new Date,s=(0,W.G4)(t.getAttribute("data-useractivity"),!0);s?o.setTime(o.getTime()-864e5):o.setTime(o.getTime()-6048e5),ApiClient.getJSON(ApiClient.getUrl("System/ActivityLog/Entries",{startIndex:r,limit:i,minDate:o.toISOString(),hasUserId:s})).then((function(o){if(t.setAttribute("data-activitystartindex",r),t.setAttribute("data-activitylimit",i),!r){var s=q.Ay.parentWithClass(t,"activityContainer");s&&(o.Items.length?s.classList.remove("hide"):s.classList.add("hide"))}e.items=o.Items,function(e,t,n){e.innerHTML=n.Items.map((function(e){return function(e,t){var n="";n+='<div class="listItem listItem-border">';var r="#00a4dc",i="notifications";return"Error"!=e.Severity&&"Fatal"!=e.Severity&&"Warn"!=e.Severity||(r="#cc0000",i="notification_important"),e.UserId&&e.UserPrimaryImageTag?n+='<span class="listItemIcon material-icons dvr" aria-hidden="true" style="width:2em!important;height:2em!important;padding:0;color:transparent;background-color:'+r+";background-image:url('"+t.getUserImageUrl(e.UserId,{type:"Primary",tag:e.UserPrimaryImageTag})+"');background-repeat:no-repeat;background-position:center center;background-size: cover;\"></span>":n+='<span class="listItemIcon material-icons '+i+'" aria-hidden="true" style="background-color:'+r+'"></span>',n+='<div class="listItemBody three-line">',n+='<div class="listItemBodyText">',n+=a()(e.Name),n+="</div>",n+='<div class="listItemBodyText secondary">',n+=(0,E.A)(Date.parse(e.Date),Date.now(),{locale:(0,O.JK)()}),n+="</div>",n+='<div class="listItemBodyText secondary listItemBodyText-nowrap">',n+=a()(e.ShortOverview||""),n+="</div>",n+="</div>",e.Overview&&(n+='<button type="button" is="paper-icon-button-light" class="btnEntryInfo" data-id="'.concat(e.Id,'" title="').concat(A.Ay.translate("Info"),'">\n                       <span class="material-icons info" aria-hidden="true"></span>\n                    </button>')),n+"</div>"}(e,t)})).join("")}(t,n,o)}))}function _(e,t){var n=this.options;n&&n.serverId===t.serverId()&&Q(this,n.element,t)}function z(e){var t=q.Ay.parentWithClass(e.target,"btnEntryInfo");if(t){var n=t.getAttribute("data-id"),r=this.items;if(r){var i=r.filter((function(e){return e.Id.toString()===n}))[0];i&&function(e){(0,B.A)({text:e.Overview})}(i)}}}var G=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t;var n=t.element;n.classList.add("activityLogListWidget"),n.addEventListener("click",z.bind(this));var r=U.tF.getApiClient(t.serverId);Q(this,n,r);var i=_.bind(this);this.updateFn=i,D.A.on(F.default,"ActivityLogEntry",i),r.sendMessage("ActivityLogEntryStart","0,1500")},(t=[{key:"destroy",value:function(){var e=this.options;e&&(e.element.classList.remove("activityLogListWidget"),U.tF.getApiClient(e.serverId).sendMessage("ActivityLogEntryStop","0,1500"));var t=this.updateFn;t&&D.A.off(F.default,"ActivityLogEntry",t),this.items=null,this.options=null}}])&&V(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),J=n(24468),Y=n(36645),Z=n(47602),X=n(76542),$=n(51938),ee=n(23648),te=n(8566),ne=n(4838),re=n(80096),ie=n(42305),ae=n(98320),oe=n(54048),se=n(89100),le=n(32203),ce=n(75384),de=n(31297),ue=n(4556),fe=n(9790),he=n(7470),ye=n(28626),ge=n(60182),me=n(73012),ve=function(){return ve=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ve.apply(this,arguments)},pe=function(e,t,n){var r=(0,he.H)(n);return r.render((0,o.jsx)(be,{children:(0,o.jsx)(e,ve({},t))})),function(){return setTimeout((function(){return r.unmount()}))}},be=function(e){var t=e.children;return(0,o.jsx)(fe.Ht,{client:de.q,children:(0,o.jsx)(g.Kv,{children:(0,o.jsx)(ye.w,{children:(0,o.jsx)(ge.AQ,{children:(0,o.jsx)(ue.A,{theme:me.A,defaultMode:"dark",children:t})})})})})},Se=(n(1177),n(94200)),Ie=n(3889),Ae=n(46550),Te=n(66563),xe=n(42663),Ce=n(53455),Pe=n(39156),we=n(71857),ke=function(e,t){return(0,h.j)({queryKey:["ItemCounts",t],queryFn:function(n){var r=n.signal;return function(e,t,n){return r=void 0,i=void 0,o=function(){return function(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(r){switch(r.label){case 0:return[4,(0,we.Q)(e).getItemCounts(t,n)];case 1:return[2,r.sent().data]}}))},new((a=void 0)||(a=Promise))((function(e,t){function n(e){try{l(o.next(e))}catch(e){t(e)}}function s(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof a?r:new a((function(e){e(r)}))).then(n,s)}l((o=o.apply(r,i||[])).next())}));var r,i,a,o}(e,t,{signal:r})},enabled:!!e})},Le=n(92779),Re=n(13786),je=n(70140),Me=n(41906),Ne=n(58953),De=function(e){var t=e.metrics,n=e.Icon,r=(0,Me.Y)().dateTimeLocale;return(0,o.jsx)(Re.A,{sx:{display:"flex",alignItems:"center",height:"100%"},children:(0,o.jsxs)(je.A,{direction:"row",sx:{width:"100%",padding:2,justifyContent:"space-between",alignItems:"center"},children:[t.map((function(e){var t=e.label,n=e.value;return(0,o.jsxs)(Le.A,{children:[(0,o.jsx)(d.A,{variant:"body2",color:"text.secondary",children:t}),(0,o.jsx)(d.A,{variant:"h5",component:"div",children:void 0!==n?(0,Ne.WZ)(n,r):(0,o.jsx)(I.A,{})})]},t)})),(0,o.jsx)(n,{fontSize:"large"})]})})},Ue=function(){return Ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ue.apply(this,arguments)},qe=[{Icon:Ie.A,metrics:[{key:"MovieCount",i18n:"Movies"}]},{Icon:xe.A,metrics:[{key:"SeriesCount",i18n:"Series"},{key:"EpisodeCount",i18n:"Episodes"}]},{Icon:Ae.A,metrics:[{key:"AlbumCount",i18n:"Albums"},{key:"SongCount",i18n:"Songs"}]},{Icon:Te.A,metrics:[{key:"MusicVideoCount",i18n:"MusicVideos"}]},{Icon:Se.A,metrics:[{key:"BookCount",i18n:"Books"}]},{Icon:Ce.A,metrics:[{key:"BoxSetCount",i18n:"Collections"}]}],Ee=function(){var e,t=(e=(0,g.gf)().api,(0,y.I)(ke(e,undefined))),n=t.data,r=t.isPending,i=(0,u.useMemo)((function(){return qe.filter((function(e){return r||e.metrics.some((function(e){var t=e.key;return null==n?void 0:n[t]}))})).map((function(e){return{Icon:e.Icon,metrics:e.metrics.map((function(e){var t=e.i18n,r=e.key;return{label:A.Ay.translate(t),value:null==n?void 0:n[r]}}))}}))}),[n,r]);return(0,o.jsx)(Pe.A,{container:!0,spacing:2,sx:{alignItems:"stretch",marginTop:2},children:i.map((function(e){return(0,o.jsx)(Pe.A,{size:{xs:12,sm:6,lg:4},children:(0,o.jsx)(De,Ue({},e))},e.metrics.map((function(e){return e.label})).join("-"))}))})};function Fe(e,t){var n,r=[],i=ne.A.getDisplayPlayMethod(t);if("Remux"===i)n=A.Ay.translate("Remuxing"),r.push(A.Ay.translate("RemuxHelp1")),r.push("<br/>"),r.push(A.Ay.translate("RemuxHelp2"));else if("DirectStream"===i)n=A.Ay.translate("DirectStreaming"),r.push(A.Ay.translate("DirectStreamHelp1")),r.push("<br/>"),r.push(A.Ay.translate("DirectStreamHelp2"));else if("DirectPlay"===i)n=A.Ay.translate("DirectPlaying"),r.push(A.Ay.translate("DirectPlayHelp"));else if("Transcode"===i){var a;n=A.Ay.translate("Transcoding"),r.push(A.Ay.translate("MediaIsBeingConverted")),r.push(Qe.getSessionNowPlayingStreamInfo(t)),null!==(a=t.TranscodingInfo)&&void 0!==a&&null!==(a=a.TranscodeReasons)&&void 0!==a&&a.length&&(r.push("<br/>"),r.push(A.Ay.translate("LabelReasonForTranscoding")),t.TranscodingInfo.TranscodeReasons.forEach((function(e){r.push(A.Ay.translate(e))})))}(0,B.A)({text:r.join("<br/>"),title:n})}function Be(e,t){n.e(72521).then(n.bind(n,72521)).then((function(e){(0,e.default)({title:A.Ay.translate("HeaderSendMessage"),label:A.Ay.translate("LabelMessageText"),confirmText:A.Ay.translate("ButtonSend")}).then((function(e){e&&U.tF.getApiClient(t.ServerId).sendMessageCommand(t.Id,{Text:e,TimeoutMs:5e3})}))}))}function Oe(e){var t=q.Ay.parentWithClass(e.target,"sessionCardButton");if(t){var r=q.Ay.parentWithClass(t,"card");if(r){var i=r.id,a=(Qe.sessionsList||[]).filter((function(e){return"session"+e.Id===i}))[0];a&&(t.classList.contains("btnCardOptions")?function(e,t){n.e(62882).then(n.bind(n,62882)).then((function(n){var r,i=n.default,a=[];return t.ServerId&&t.DeviceId!==U.tF.deviceId()&&a.push({name:A.Ay.translate("SendMessage"),id:"sendmessage"}),null!==(r=t.TranscodingInfo)&&void 0!==r&&null!==(r=r.TranscodeReasons)&&void 0!==r&&r.length&&a.push({name:A.Ay.translate("ViewPlaybackInfo"),id:"transcodinginfo"}),i.show({items:a,positionTo:e}).then((function(e){switch(e){case"sendmessage":Be(0,t);break;case"transcodinginfo":Fe(0,t)}}))}))}(t,a):t.classList.contains("btnSessionInfo")?Fe(0,a):t.classList.contains("btnSessionSendMessage")?Be(0,a):t.classList.contains("btnSessionStop")?U.tF.getApiClient(a.ServerId).sendPlayStateCommand(a.Id,"Stop"):t.classList.contains("btnSessionPlayPause")&&a.PlayState&&U.tF.getApiClient(a.ServerId).sendPlayStateCommand(a.Id,"PlayPause"))}}}function We(e,t){e.querySelector("#buildVersion").innerText="Release";var n="10.11.0";n+=" (".concat("7cabe79",")"),e.querySelector("#webVersion").innerText=n,de.q.fetchQuery((0,ie.C)((0,ce.C)(t))).then((function(t){e.querySelector("#serverName").innerText=t.ServerName,e.querySelector("#versionNumber").innerText=t.Version}))}function He(e,t){(function(e,t){var n="";Qe.sessionsList=t;var r=e.querySelector(".activeDevices"),i=r.querySelector(".card");i&&i.classList.add("deadSession");for(var o=0,s=t.length;o<s;o++){var l=t[o],c="session"+l.Id,d=e.querySelector("#"+c);if(d)Qe.updateSession(d,l);else{var u,f,h=l.NowPlayingItem,y=Qe.getNowPlayingImageUrl(h);n+='<div class="scalableCard card activeSession backdropCard backdropCard-scalable" id="'+c+'">',n+='<div class="cardBox visualCardBox">',n+='<div class="cardScalable visualCardBox-cardScalable">',n+='<div class="cardPadder cardPadder-backdrop"></div>',n+='<div class="cardContent '.concat((0,Y.Qp)(),'">'),y?(n+='<div class="sessionNowPlayingContent sessionNowPlayingContent-withbackground"',n+=' data-src="'+y+'" style="display:inline-block;background-image:url(\''+y+"');\"></div>"):n+='<div class="sessionNowPlayingContent"></div>',n+='<div class="sessionNowPlayingInnerContent '.concat(y?"darkenContent":"",'">'),n+='<div class="sessionAppInfo">';var g=Qe.getClientImage(l);g&&(n+=g),n+='<div class="sessionAppName" style="display:inline-block; text-align:left;"  dir="ltr" >',n+='<div class="sessionDeviceName">'+a()(l.DeviceName)+"</div>",n+='<div class="sessionAppSecondaryText">'+a()(Qe.getAppSecondaryText(l))+"</div>",n+="</div>",n+="</div>",n+='<div class="sessionNowPlayingDetails">';var m=Qe.getNowPlayingName(l);n+='<div class="sessionNowPlayingInfo" data-imgsrc="'+m.image+'">',n+='<span class="sessionNowPlayingName">'+m.html+"</span>",n+="</div>",n+='<div class="sessionNowPlayingTime">'+a()(Qe.getSessionNowPlayingTime(l))+"</div>",n+="</div>";var v=100*(null==l||null===(u=l.PlayState)||void 0===u?void 0:u.PositionTicks)/(null==h?void 0:h.RunTimeTicks);n+=$.Ay.getProgressHtml(v||0,{containerClass:"playbackProgress"}),v=null==l||null===(f=l.TranscodingInfo)||void 0===f||null===(f=f.CompletionPercentage)||void 0===f?void 0:f.toFixed(1),n+=$.Ay.getProgressHtml(v||0,{containerClass:"transcodingProgress"}),n+=$.Ay.getProgressHtml(100,{containerClass:"backgroundProgress"}),n+="</div>",n+="</div>",n+="</div>",n+='<div class="sessionCardFooter cardFooter">',n+='<div class="sessionCardButtons flex align-items-center justify-content-center">';var p=l.ServerId&&l.NowPlayingItem&&l.SupportsRemoteControl?"":" hide";n+='<button is="paper-icon-button-light" class="sessionCardButton btnSessionPlayPause paper-icon-button-light '+p+'"><span class="material-icons '+(l.PlayState.IsPaused?"play_arrow":"pause")+'" aria-hidden="true"></span></button>',n+='<button is="paper-icon-button-light" class="sessionCardButton btnSessionStop paper-icon-button-light '+p+'"><span class="material-icons stop" aria-hidden="true"></span></button>',n+='<button is="paper-icon-button-light" class="sessionCardButton btnSessionInfo paper-icon-button-light '+p+'" title="'+A.Ay.translate("ViewPlaybackInfo")+'"><span class="material-icons info" aria-hidden="true"></span></button>',n+='<button is="paper-icon-button-light" class="sessionCardButton btnSessionSendMessage paper-icon-button-light '+(p=l.ServerId&&-1!==l.SupportedCommands.indexOf("DisplayMessage")&&l.DeviceId!==U.tF.deviceId()?"":" hide")+'" title="'+A.Ay.translate("SendMessage")+'"><span class="material-icons message" aria-hidden="true"></span></button>',n+="</div>",n+='<div class="flex align-items-center justify-content-center">';var b=Qe.getUserImage(l);n+=b?'<div class="activitylogUserPhoto" style="background-image:url(\''+b+"');\"></div>":'<div style="height:1.71em;"></div>',n+='<div class="sessionUserName">',n+=Qe.getUsersHtml(l),n+="</div>",n+="</div>",n+="</div>",n+="</div>",n+="</div>"}}r.insertAdjacentHTML("beforeend",n);var S=r.querySelector(".deadSession");S&&S.parentNode.removeChild(S)})(e,t=function(e){for(var t=[],n=(new Date).getTime()-9e5,r=0,i=e.length;r<i;r++){var a=e[r];(a.NowPlayingItem||a.UserId)&&ae.Ay.parseISO8601Date(a.LastActivityDate,!0).getTime()>=n&&t.push(a)}return t}(t)),te.Ay.hide()}function Ve(e,t){t.getSessions({ActiveWithinSeconds:960}).then((function(t){He(e,t)})),t.getScheduledTasks().then((function(t){Ke(e,t)}))}function Ke(e,t){var n="";t=t.filter((function(e){return"Idle"!=e.State&&!e.IsHidden})),t.length?e.querySelector(".runningTasksContainer").classList.remove("hide"):e.querySelector(".runningTasksContainer").classList.add("hide");for(var r=0,i=t.length;r<i;r++){var a=t[r];if(n+="<p>",n+=a.Name+"<br/>","Running"===a.State){var o=(a.CurrentProgressPercentage||0).toFixed(1);n+='<progress max="100" value="'+o+'" title="'+o+'%">',n+=o+"%",n+="</progress>",n+="<span style='color:#00a4dc;margin-left:5px;margin-right:5px;'>"+o+"%</span>",n+='<button type="button" is="paper-icon-button-light" title="'+A.Ay.translate("ButtonStop")+'" data-task-id="'+a.Id+'" class="autoSize btnTaskCancel"><span class="material-icons cancel" aria-hidden="true"></span></button>'}else"Cancelling"===a.State&&(n+='<span style="color:#cc0000;">'+A.Ay.translate("LabelStopping")+"</span>");n+="</p>"}var s=e.querySelector("#divRunningTasks");s.innerHTML=n,s.querySelectorAll(".btnTaskCancel").forEach((function(e){e.addEventListener("click",(function(){return Qe.stopTask(e,e.dataset.taskId)}))}))}var Qe={startInterval:function(e){e.sendMessage("SessionsStart","0,1500"),e.sendMessage("ScheduledTasksInfoStart","0,1000")},stopInterval:function(e){e.sendMessage("SessionsStop"),e.sendMessage("ScheduledTasksInfoStop")},getSessionNowPlayingStreamInfo:function(e){var t="",n=!1,r=ne.A.getDisplayPlayMethod(e);if("DirectPlay"===r)t+=A.Ay.translate("DirectPlaying");else if("Remux"===r)t+=A.Ay.translate("Remuxing");else if("DirectStream"===r)t+=A.Ay.translate("DirectStreaming");else if("Transcode"===r){var i;null!==(i=e.TranscodingInfo)&&void 0!==i&&i.Framerate&&(t+="".concat(A.Ay.translate("Framerate"),": ").concat(e.TranscodingInfo.Framerate,"fps")),n=!0}if(n){var a=[];e.TranscodingInfo&&(e.TranscodingInfo.Bitrate&&(e.TranscodingInfo.Bitrate>1e6?a.push((e.TranscodingInfo.Bitrate/1e6).toFixed(1)+" Mbps"):a.push(Math.floor(e.TranscodingInfo.Bitrate/1e3)+" Kbps")),e.TranscodingInfo.Container&&a.push(e.TranscodingInfo.Container.toUpperCase()),e.TranscodingInfo.VideoCodec&&a.push(e.TranscodingInfo.VideoCodec.toUpperCase()),e.TranscodingInfo.AudioCodec&&e.TranscodingInfo.AudioCodec!=e.TranscodingInfo.Container&&a.push(e.TranscodingInfo.AudioCodec.toUpperCase())),a.length&&(t+="<br/><br/>"+a.join(" "))}return t},getSessionNowPlayingTime:function(e){var t=e.NowPlayingItem,n="";return t&&(e.PlayState.PositionTicks?n+=ae.Ay.getDisplayRunningTime(e.PlayState.PositionTicks):n+="0:00",n+=" / ",t.RunTimeTicks?n+=ae.Ay.getDisplayRunningTime(t.RunTimeTicks):n+="0:00"),n},getAppSecondaryText:function(e){return e.Client+" "+e.ApplicationVersion},getNowPlayingName:function(e){var t,n,r="",i=e.NowPlayingItem;if(!i)return{html:A.Ay.translate("LastSeen",(0,re.A)(Date.parse(e.LastActivityDate),(0,O.OE)())),image:r};var o=a()(ee.Ay.getDisplayName(i)),s="";return null!==(t=i.Artists)&&void 0!==t&&t.length?(s=o,o=a()(i.Artists[0])):i.SeriesName||i.Album?(s=o,o=a()(i.SeriesName||i.Album)):i.ProductionYear&&(s=i.ProductionYear),null!==(n=i.ImageTags)&&void 0!==n&&n.Logo?r=ApiClient.getScaledImageUrl(i.Id,{tag:i.ImageTags.Logo,maxHeight:24,maxWidth:130,type:"Logo"}):i.ParentLogoImageTag&&(r=ApiClient.getScaledImageUrl(i.ParentLogoItemId,{tag:i.ParentLogoImageTag,maxHeight:24,maxWidth:130,type:"Logo"})),r&&(o='<img src="'+r+'" style="max-height:24px;max-width:130px;" />'),{html:s?o+"<br/>"+s:o,image:r}},getUsersHtml:function(e){var t=[];e.UserId&&t.push(a()(e.UserName));for(var n=0,r=e.AdditionalUsers.length;n<r;n++)t.push(a()(e.AdditionalUsers[n].UserName));return t.join(", ")},getUserImage:function(e){return e.UserId&&e.UserPrimaryImageTag?ApiClient.getUserImageUrl(e.UserId,{tag:e.UserPrimaryImageTag,type:"Primary"}):null},updateSession:function(e,t){var n,r,i;e.classList.remove("deadSession");var a=t.NowPlayingItem;a?(e.classList.add("playingSession"),e.querySelector(".btnSessionInfo").classList.remove("hide")):(e.classList.remove("playingSession"),e.querySelector(".btnSessionInfo").classList.add("hide")),t.ServerId&&-1!==t.SupportedCommands.indexOf("DisplayMessage")?e.querySelector(".btnSessionSendMessage").classList.remove("hide"):e.querySelector(".btnSessionSendMessage").classList.add("hide");var o=e.querySelector(".btnSessionPlayPause");t.ServerId&&a&&t.SupportsRemoteControl?(o.classList.remove("hide"),e.querySelector(".btnSessionStop").classList.remove("hide")):(o.classList.add("hide"),e.querySelector(".btnSessionStop").classList.add("hide"));var s=o.querySelector(".material-icons");s.classList.remove("play_arrow","pause"),s.classList.add(null!==(n=t.PlayState)&&void 0!==n&&n.IsPaused?"play_arrow":"pause"),e.querySelector(".sessionNowPlayingTime").innerText=Qe.getSessionNowPlayingTime(t),e.querySelector(".sessionUserName").innerHTML=Qe.getUsersHtml(t),e.querySelector(".sessionAppSecondaryText").innerText=Qe.getAppSecondaryText(t);var l=Qe.getNowPlayingName(t),c=e.querySelector(".sessionNowPlayingInfo");l.image&&l.image==c.getAttribute("data-imgsrc")||(c.innerHTML=l.html,c.setAttribute("data-imgsrc",l.image||""));var d=e.querySelector(".playbackProgress"),u=e.querySelector(".transcodingProgress"),f=100*(null==t||null===(r=t.PlayState)||void 0===r?void 0:r.PositionTicks)/(null==a?void 0:a.RunTimeTicks);d.outerHTML=$.Ay.getProgressHtml(f||0,{containerClass:"playbackProgress"}),f=null==t||null===(i=t.TranscodingInfo)||void 0===i||null===(i=i.CompletionPercentage)||void 0===i?void 0:i.toFixed(1),u.outerHTML=$.Ay.getProgressHtml(f||0,{containerClass:"transcodingProgress"});var h=Qe.getNowPlayingImageUrl(a)||"",y=e.querySelector(".sessionNowPlayingContent");h!=y.getAttribute("data-src")&&(y.style.backgroundImage=h?"url('"+h+"')":"",y.setAttribute("data-src",h),h?(y.classList.add("sessionNowPlayingContent-withbackground"),e.querySelector(".sessionNowPlayingInnerContent").classList.add("darkenContent")):(y.classList.remove("sessionNowPlayingContent-withbackground"),e.querySelector(".sessionNowPlayingInnerContent").classList.remove("darkenContent")))},getClientImage:function(e){return"<img src='"+le.Ay.getDeviceIcon(e)+"' />"},getNowPlayingImageUrl:function(e){var t,n;if(null!=e&&null!==(t=e.BackdropImageTags)&&void 0!==t&&t.length)return ApiClient.getScaledImageUrl(e.Id,{maxWidth:Math.round(.2*q.Ay.getScreenWidth()),type:"Backdrop",tag:e.BackdropImageTags[0]});if(null!=e&&null!==(n=e.ParentBackdropImageTags)&&void 0!==n&&n.length)return ApiClient.getScaledImageUrl(e.ParentBackdropItemId,{maxWidth:Math.round(.2*q.Ay.getScreenWidth()),type:"Backdrop",tag:e.ParentBackdropImageTags[0]});if(null!=e&&e.BackdropImageTag)return ApiClient.getScaledImageUrl(e.BackdropItemId,{maxWidth:Math.round(.2*q.Ay.getScreenWidth()),type:"Backdrop",tag:e.BackdropImageTag});var r=(null==e?void 0:e.ImageTags)||{};return e&&r.Thumb?ApiClient.getScaledImageUrl(e.Id,{maxWidth:Math.round(.2*q.Ay.getScreenWidth()),type:"Thumb",tag:r.Thumb}):null!=e&&e.ParentThumbImageTag?ApiClient.getScaledImageUrl(e.ParentThumbItemId,{maxWidth:Math.round(.2*q.Ay.getScreenWidth()),type:"Thumb",tag:e.ParentThumbImageTag}):null!=e&&e.ThumbImageTag?ApiClient.getScaledImageUrl(e.ThumbItemId,{maxWidth:Math.round(.2*q.Ay.getScreenWidth()),type:"Thumb",tag:e.ThumbImageTag}):e&&r.Primary?ApiClient.getScaledImageUrl(e.Id,{maxWidth:Math.round(.2*q.Ay.getScreenWidth()),type:"Primary",tag:r.Primary}):null!=e&&e.PrimaryImageTag?ApiClient.getScaledImageUrl(e.PrimaryImageItemId,{maxWidth:Math.round(.2*q.Ay.getScreenWidth()),type:"Primary",tag:e.PrimaryImageTag}):null!=e&&e.AlbumPrimaryImageTag?ApiClient.getScaledImageUrl(e.AlbumId,{maxWidth:Math.round(.2*q.Ay.getScreenWidth()),type:"Primary",tag:e.AlbumPrimaryImageTag}):null},systemUpdateTaskKey:"SystemUpdateTask",stopTask:function(e,t){var n=q.Ay.parentWithClass(e,"page");ApiClient.stopScheduledTask(t).then((function(){Ve(n,ApiClient)}))},restart:function(e){(0,Z.A)({title:A.Ay.translate("Restart"),text:A.Ay.translate("MessageConfirmRestart"),confirmText:A.Ay.translate("Restart"),primary:"delete"}).then((function(){var t=q.Ay.parentWithClass(e.target,"page");t.querySelector("#btnRestartServer").disabled=!0,t.querySelector("#btnShutdown").disabled=!0,ApiClient.restartServer()})).catch((function(){}))},shutdown:function(e){(0,Z.A)({title:A.Ay.translate("ButtonShutdown"),text:A.Ay.translate("MessageConfirmShutdown"),confirmText:A.Ay.translate("ButtonShutdown"),primary:"delete"}).then((function(){var t=q.Ay.parentWithClass(e.target,"page");t.querySelector("#btnRestartServer").disabled=!0,t.querySelector("#btnShutdown").disabled=!0,ApiClient.shutdownServer()})).catch((function(){}))}};function _e(e){var t=ApiClient.serverId(),n=[];function r(e,t){console.debug("onRestartRequired not implemented",e,t)}function i(e,t){console.debug("onServerShuttingDown not implemented",e,t)}function a(e,t){console.debug("onServerRestarting not implemented",e,t)}function o(n,r){r.serverId()===t&&(Ve(e,r),We(e,r))}function s(n,r,i){r.serverId()===t&&He(e,i)}function l(n,r,i){r.serverId()===t&&Ke(e,i)}e.querySelector(".activeDevices").addEventListener("click",Oe),e.addEventListener("viewshow",(function(){var t=this,c=ApiClient;c&&(te.Ay.show(),Ve(t,c),Qe.startInterval(c),D.A.on(F.default,"RestartRequired",r),D.A.on(F.default,"ServerShuttingDown",i),D.A.on(F.default,"ServerRestarting",a),D.A.on(F.default,"PackageInstalling",o),D.A.on(F.default,"PackageInstallationCompleted",o),D.A.on(F.default,"Sessions",s),D.A.on(F.default,"ScheduledTasksInfo",l),Qe.lastAppUpdateCheck=null,We(t,ApiClient),t.userActivityLog||(t.userActivityLog=new G({serverId:ApiClient.serverId(),element:t.querySelector(".userActivityItems")})),t.serverActivityLog||(t.serverActivityLog=new G({serverId:ApiClient.serverId(),element:t.querySelector(".serverActivityItems")})),function(e,t){t.getLiveTvRecordings({UserId:se.default.getCurrentUserId(),IsInProgress:!0,Fields:"CanDelete,PrimaryImageAspectRatio",EnableTotalRecordCount:!1,EnableImageTypes:"Primary,Thumb,Backdrop"}).then((function(t){var n=e.querySelector(".activeRecordingItems");if(!t.Items.length)return e.querySelector(".activeRecordingsSection").classList.add("hide"),void(n.innerHTML="");e.querySelector(".activeRecordingsSection").classList.remove("hide"),n.innerHTML=J.default.getCardsHtml({items:t.Items,shape:"auto",defaultShape:"backdrop",showTitle:!0,showParentTitle:!0,coverImage:!0,cardLayout:!1,centerText:!0,preferThumb:"auto",overlayText:!1,overlayMoreButton:!0,action:"none",centerPlayButton:!0}),X.default.lazyChildren(n)}))}(e,c),te.Ay.hide()),(0,oe.A)({mode:"on",taskKey:"RefreshLibrary",button:t.querySelector(".btnRefresh")}),n.push(pe(Ee,{},t.querySelector("#itemCounts"))),n.push(pe(N,{},t.querySelector("#serverPaths"))),t.querySelector("#btnRestartServer").addEventListener("click",Qe.restart),t.querySelector("#btnShutdown").addEventListener("click",Qe.shutdown)})),e.addEventListener("viewbeforehide",(function(){var e=ApiClient,t=this;D.A.off(F.default,"RestartRequired",r),D.A.off(F.default,"ServerShuttingDown",i),D.A.off(F.default,"ServerRestarting",a),D.A.off(F.default,"PackageInstalling",o),D.A.off(F.default,"PackageInstallationCompleted",o),D.A.off(F.default,"Sessions",s),D.A.off(F.default,"ScheduledTasksInfo",l),e&&Qe.stopInterval(e),(0,oe.A)({mode:"off",taskKey:"RefreshLibrary",button:t.querySelector(".btnRefresh")}),n.forEach((function(e){e()})),n=[],t.querySelector("#btnRestartServer").removeEventListener("click",Qe.restart),t.querySelector("#btnShutdown").removeEventListener("click",Qe.shutdown)})),e.addEventListener("viewdestroy",(function(){var e=this.userActivityLog;e&&e.destroy();var t=this.serverActivityLog;t&&t.destroy()}))}}}]);