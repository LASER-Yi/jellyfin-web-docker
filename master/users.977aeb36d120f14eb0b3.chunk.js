/*! For license information please see users.977aeb36d120f14eb0b3.chunk.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[22681],{60042:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var s=typeof r;if("string"===s||"number"===s)e.push(r);else if(Array.isArray(r)){if(r.length){var c=a.apply(null,r);c&&e.push(c)}}else if("object"===s){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var i in r)n.call(r,i)&&r[i]&&e.push(i)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},13528:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var n=r(24246),a=r(27378),s=r(60635),c=r(94994),i=r(28540),o=r(72365),u=r(3137),l=r(20990),d=r(49365),f=r(56285),p=r(65009),h=r.n(p),v=r(26059),m=function(){return m=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},m.apply(this,arguments)},g=function(e){var t=e.user,r=e.renderImgUrl;return{__html:'<a\n        is="emby-linkbutton"\n        class="cardContent"\n        href="#/dashboard/users/profile?userId='.concat(t.Id,'"\n        >\n        ').concat(r,"\n    </a>")}},b=function(e){var t,r,a,s=e.user,i=void 0===s?{}:s,o="card squareCard scalableCard squareCard-scalable";(null===(t=i.Policy)||void 0===t?void 0:t.IsDisabled)&&(o+=" grayscale"),i.PrimaryImageTag&&i.Id&&(a=window.ApiClient.getUserImageUrl(i.Id,{width:300,tag:i.PrimaryImageTag,type:"Primary"}));var u="cardImage";(null===(r=i.Policy)||void 0===r?void 0:r.IsDisabled)&&(u+=" disabledUser");var p,b=(p=i.LastActivityDate)?c.ZP.translate("LastSeen",(0,l.Z)(Date.parse(p),(0,d.LP)())):"",y=a?"<div class='".concat(u,"' style='background-image:url(").concat(a,")'></div>"):"<div class='".concat(u," ").concat((0,v.Rk)(i.Name)," flex align-items-center justify-content-center'>\n            <span class='material-icons cardImageIcon person' aria-hidden='true'></span>\n        </div>");return(0,n.jsx)("div",m({"data-userid":i.Id,className:o},{children:(0,n.jsxs)("div",m({className:"cardBox visualCardBox"},{children:[(0,n.jsxs)("div",m({className:"cardScalable visualCardBox-cardScalable"},{children:[(0,n.jsx)("div",{className:"cardPadder cardPadder-square"}),(0,n.jsx)("div",{dangerouslySetInnerHTML:g({user:i,renderImgUrl:y})})]})),(0,n.jsxs)("div",m({className:"cardFooter visualCardBox-cardFooter"},{children:[(0,n.jsx)("div",m({style:{textAlign:"right",float:"right",paddingTop:"5px"}},{children:(0,n.jsx)(f.Z,{is:"paper-icon-button-light",className:"btnUserMenu flex-shrink-zero",icon:"more_vert"})})),(0,n.jsx)("div",m({className:"cardText"},{children:(0,n.jsx)("span",{children:h()(i.Name)})})),(0,n.jsx)("div",m({className:"cardText cardText-secondary"},{children:(0,n.jsx)("span",{children:""!=b?b:""})}))]}))]}))}))},y=r(87926),x=(r(38228),r(61414),r(87143)),w=function(){return w=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},w.apply(this,arguments)},C=function(){var e=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,s=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)c.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(a)throw a.error}}return c}((0,a.useState)([]),2),t=e[0],l=e[1],d=(0,a.useRef)(null),f=function(){i.ZP.show(),window.ApiClient.getUsers().then((function(e){l(e),i.ZP.hide()})).catch((function(e){console.error("[userprofiles] failed to fetch users",e)}))};return(0,a.useEffect)((function(){var e=d.current;if(e){f();e.addEventListener("click",(function(e){var t=o.ZP.parentWithClass(e.target,"btnUserMenu");t&&function(e){var t=o.ZP.parentWithClass(e,"card"),n=null==t?void 0:t.getAttribute("data-userid");if(n){var a=[];a.push({name:c.ZP.translate("ButtonOpen"),id:"open",icon:"mode_edit"}),a.push({name:c.ZP.translate("ButtonLibraryAccess"),id:"access",icon:"lock"}),a.push({name:c.ZP.translate("ButtonParentalControl"),id:"parentalcontrol",icon:"person"}),a.push({name:c.ZP.translate("Delete"),id:"delete",icon:"delete"}),r.e(12801).then(r.bind(r,12801)).then((function(e){e.default.show({items:a,positionTo:t,callback:function(e){switch(e){case"open":s.default.navigate("/dashboard/users/profile?userId="+n).catch((function(e){console.error("[userprofiles] failed to navigate to user edit page",e)}));break;case"access":s.default.navigate("/dashboard/users/access?userId="+n).catch((function(e){console.error("[userprofiles] failed to navigate to user library page",e)}));break;case"parentalcontrol":s.default.navigate("/dashboard/users/parentalcontrol?userId="+n).catch((function(e){console.error("[userprofiles] failed to navigate to parental control page",e)}));break;case"delete":!function(e){var t=c.ZP.translate("DeleteUserConfirmation");(0,u.Z)({title:c.ZP.translate("DeleteUser"),text:t,confirmText:c.ZP.translate("Delete"),primary:"delete"}).then((function(){i.ZP.show(),window.ApiClient.deleteUser(e).then((function(){f()})).catch((function(e){console.error("[userprofiles] failed to delete user",e)}))})).catch((function(){}))}(n)}}}).catch((function(){}))})).catch((function(e){console.error("[userprofiles] failed to load action sheet",e)}))}else console.error("Unexpected null user id")}(t)})),e.querySelector("#btnAddUser").addEventListener("click",(function(){s.default.navigate("/dashboard/users/add").catch((function(e){console.error("[userprofiles] failed to navigate to new user page",e)}))}))}else console.error("Unexpected null reference")}),[]),(0,n.jsx)(x.Z,w({id:"userProfilesPage",className:"mainAnimatedPage type-interior userProfilesPage fullWidthContent"},{children:(0,n.jsxs)("div",w({ref:d,className:"content-primary"},{children:[(0,n.jsx)("div",w({className:"verticalSection"},{children:(0,n.jsx)(y.Z,{title:c.ZP.translate("HeaderUsers"),isBtnVisible:!0,btnId:"btnAddUser",btnClassName:"fab submit sectionTitleButton",btnTitle:"ButtonAddUser",btnIcon:"add",url:"https://jellyfin.org/docs/general/server/users/adding-managing-users"})})),(0,n.jsx)("div",w({className:"localUsers itemsContainer vertical-wrap"},{children:t.map((function(e){return(0,n.jsx)(b,{user:e},e.Id)}))}))]}))}))}},87143:function(e,t,r){"use strict";var n=r(24246),a=r(27378),s=r(93110),c=function(){return c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},c.apply(this,arguments)};t.Z=function(e){var t=e.children,r=e.id,i=e.className,o=void 0===i?"":i,u=e.title,l=e.isBackButtonEnabled,d=void 0===l||l,f=e.isMenuButtonEnabled,p=void 0!==f&&f,h=e.isNowPlayingBarEnabled,v=void 0===h||h,m=e.isThemeMediaSupported,g=void 0!==m&&m,b=e.backDropType,y=(0,a.useRef)(null);return(0,a.useEffect)((function(){s.Z.hideView()}),[]),(0,a.useEffect)((function(){var e,t,r,n,a={bubbles:!0,cancelable:!1,detail:{isRestored:!1,options:{enableMediaControl:v,supportsThemeMedia:g}}};null===(e=y.current)||void 0===e||e.dispatchEvent(new CustomEvent("viewbeforeshow",a)),null===(t=y.current)||void 0===t||t.dispatchEvent(new CustomEvent("pagebeforeshow",a)),null===(r=y.current)||void 0===r||r.dispatchEvent(new CustomEvent("viewshow",a)),null===(n=y.current)||void 0===n||n.dispatchEvent(new CustomEvent("pageshow",a))}),[y,v,g]),(0,n.jsx)("div",c({ref:y,id:r,"data-role":"page",className:"page ".concat(o),"data-title":u,"data-backbutton":d,"data-menubutton":p,"data-backdroptype":b},{children:t}))}},26059:function(e,t,r){"use strict";r.d(t,{IH:function(){return f},Qi:function(){return d},Rk:function(){return p},XE:function(){return v},Yg:function(){return i},aI:function(){return m},aQ:function(){return c},gG:function(){return o},jL:function(){return l},nm:function(){return u}});var n=r(34706),a=r(60042),s=r.n(a),c=function(e){return"Program"===e||"Timer"===e||"Recording"===e},i=function(e){return"play"===e.defaultAction&&e.isFolder?"link":e.isPhoto?"play":e.defaultAction},o=function(e){var t=window.screen;return!!(t&&t.availWidth-e>20)},u=function(e){return null==e?"mixedSquare":e>=1.33?"mixedBackdrop":e>.71?"mixedSquare":"mixedPortrait"},l=function(e){var t;return s()(((t={card:!0})["".concat(e.shape,"Card")]=e.shape,t["".concat(e.cardCssClass)]=e.cardCssClass,t["".concat(e.cardClass)]=e.cardClass,t["card-hoverable"]=e.isDesktop,t["show-focus"]=e.isTV,t["show-animation"]=e.isTV&&e.enableFocusTransform,t.groupedCard=e.showChildCountIndicator&&e.childCount,t["card-withuserdata"]=!["MusicAlbum","MusicArtist","Audio"].includes(e.itemType),t.itemAction="button"===e.tagName,t))},d=function(e){var t;return s()(((t={cardImageContainer:!0,coveredImage:e.hasCoverImage,"coveredImage-contain":e.hasCoverImage&&"TvChannel"===e.itemType})[p(e.itemName)]=!e.imgUrl,t))},f=function(e){return s()({cardBox:!0,visualCardBox:e.cardLayout,"cardBox-bottompadded":e.hasOuterCardFooter&&!e.cardLayout})},p=function(e){return"defaultCardBackground defaultCardBackground".concat(h(e))},h=function(e){if(e){for(var t=Math.floor(e.length/2),r=String(e.slice(t,t+1).charCodeAt(0)),a=0,s=0;s<r.length;s++)a+=parseInt(r.charAt(s),10);return parseInt(String(a).slice(-1),10)%5+1}return(0,n.Iy)(1,5)},v=function(e){return e?-1!==(e=e.toLowerCase()).indexOf("portrait")?.6666666666666666:-1!==e.indexOf("backdrop")?1.7777777777777777:-1!==e.indexOf("square")?1:-1!==e.indexOf("banner")?5.405405405405405:null:null},m=function(e,t,r,n){switch(e){case"portrait":return g(t,n);case"square":return b(t,n);case"banner":return y(t);case"backdrop":return x(t,n);case"smallBackdrop":return w(t);case"overflowSmallBackdrop":return C(t,r,n);case"overflowPortrait":return P(t,r,n);case"overflowSquare":return I(t,r,n);case"overflowBackdrop":return j(t,r,n);default:return 4}},g=function(e,t){switch(!0){case t:return 5.9999999988;case e>=2200:return 10;case e>=1920:return 9.000000000009;case e>=1600:return 8;case e>=1400:return 7.0000000000021;case e>=1200:return 5.9999999988;case e>=800:return 5;case e>=700:return 4;default:return 3.0000000003}},b=function(e,t){switch(!0){case t:return 5.9999999988;case e>=2200:return 10;case e>=1920:return 9.000000000009;case e>=1600:return 8;case e>=1400:return 7.0000000000021;case e>=1200:return 5.9999999988;case e>=800:return 5;case e>=700:return 4;case e>=500:return 3.0000000003;default:return 2}},y=function(e){switch(!0){case e>=2200:return 4;case e>=1200:return 3.0000000003;case e>=800:return 2;default:return 1}},x=function(e,t){switch(!0){case t:return 4;case e>=2500:return 6;case e>=1600:return 5;case e>=1200:return 4;case e>=770:return 3;case e>=420:return 2;default:return 1}},w=function(e){switch(!0){case e>=1600:return 8;case e>=1400:return 7.000000000007001;case e>=1200:return 5.9999999988;case e>=1e3:return 5;case e>=800:return 4;case e>=500:return 3.0000000003;default:return 2}},C=function(e,t,r){switch(!0){case r:return 100/18.9;case t&&e>=800:return 100/15.5;case t:return 100/23.3;case e>=540:return 100/30;default:return 100/72}},P=function(e,t,r){switch(!0){case r:return 100/15.5;case t&&e>=1700:return 100/11.6;case t:return 100/15.5;case e>=1400:return 100/15;case e>=1200:return 100/18;case e>=760:return 100/23;case e>=400:return 100/31.5;default:return 100/42}},I=function(e,t,r){switch(!0){case r:return 100/15.5;case t&&e>=1700:return 100/11.6;case t:return 100/15.5;case e>=1400:return 100/15;case e>=1200:return 100/18;case e>=760:return 100/23;case e>=540:return 100/31.5;default:return 100/42}},j=function(e,t,r){switch(!0){case r:return 100/23.3;case t&&e>=1700:return 100/18.5;case t:return 100/23.3;case e>=1800:return 100/23.5;case e>=1400:return 100/30;case e>=760:return 2.5;case e>=640:return 100/56;default:return 100/72}}},56285:function(e,t,r){"use strict";var n=r(24246),a=(r(27378),r(94994)),s=function(e){var t=e.is,r=e.id,n=e.className,a=e.title,s=e.icon,c=e.dataIndex,i=e.dataTag,o=e.dataProfileid;return{__html:'<button\n        is="'.concat(t,'"\n        type="button"\n        ').concat(r,'\n        class="').concat(n,'"\n        ').concat(a,"\n        ").concat(c,"\n        ").concat(i,"\n        ").concat(o,'\n    >\n        <span class="material-icons ').concat(s,'" aria-hidden="true"></span>\n    </button>')}};t.Z=function(e){var t=e.is,r=e.id,c=e.className,i=e.title,o=e.icon,u=e.dataIndex,l=e.dataTag,d=e.dataProfileid;return(0,n.jsx)("div",{dangerouslySetInnerHTML:s({is:t,id:r?'id="'.concat(r,'"'):"",className:c,title:i?'title="'.concat(a.ZP.translate(i),'"'):"",icon:o,dataIndex:u?'data-index="'.concat(u,'"'):"",dataTag:l?'data-tag="'.concat(l,'"'):"",dataProfileid:d?'data-profileid="'.concat(d,'"'):""})})}},87926:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(24246),a=(r(27378),r(56285)),s=r(94994),c=function(e){var t=e.className,r=e.title,n=e.href;return{__html:'<a\n        is="emby-linkbutton"\n        rel="noopener noreferrer"\n        class="'.concat(t,'"\n        target="_blank"\n        href="').concat(n,'"\n        >\n        ').concat(r,"\n    </a>")}},i=function(e){var t=e.className,r=e.title,a=e.url;return(0,n.jsx)("div",{dangerouslySetInnerHTML:c({className:t,title:s.ZP.translate(r),href:a})})},o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o.apply(this,arguments)},u=function(e){var t=e.SectionClassName,r=e.title,s=e.isBtnVisible,c=void 0!==s&&s,u=e.btnId,l=e.btnClassName,d=e.btnTitle,f=e.btnIcon,p=e.isLinkVisible,h=void 0===p||p,v=e.url;return(0,n.jsxs)("div",o({className:"".concat(t," sectionTitleContainer flex align-items-center")},{children:[(0,n.jsx)("h2",o({className:"sectionTitle"},{children:r})),c&&(0,n.jsx)(a.Z,{is:"emby-button",id:u,className:l,title:d,icon:f}),h&&(0,n.jsx)(i,{className:"raised button-alt headerHelpButton",title:"Help",url:v})]}))}}}]);