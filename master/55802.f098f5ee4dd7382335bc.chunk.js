/*! For license information please see 55802.f098f5ee4dd7382335bc.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[55802],{27351:function(e,t,n){n.d(t,{C:function(){return i}}),n(78557),n(90076);var a=n(34789);function r(e){var t,n=document.createElement("textarea");if(n.value=e,document.body.appendChild(n),n.focus(),a.A.iOS&&a.A.iOSVersion<13.4){var r=document.createRange();r.selectNodeContents(n);var i=window.getSelection();i.removeAllRanges(),i.addRange(r),n.setSelectionRange(0,999999)}else n.select();try{t=document.execCommand("copy")?Promise.resolve():Promise.reject()}catch(e){t=Promise.reject()}return document.body.removeChild(n),t}function i(e){return void 0===navigator.clipboard?r(e):navigator.clipboard.writeText(e).catch((function(){return r(e)}))}},55802:function(e,t,n){n.r(t),n.d(t,{getCommands:function(){return T},show:function(){return D}}),n(29305),n(32733),n(84701),n(2623),n(24776),n(14382),n(64771),n(76281),n(44962),n(86584),n(25352),n(10849),n(70389),n(36947),n(26437),n(52697),n(78557),n(90076),n(95021),n(99425),n(83994),n(93062),n(82367);var a=n(11444),r=n(34789),i=n(27351),o=n(36300),s=n(5898),l=n(67430),c=n(62882),u=n(22622),d=n(70267),m=n(23648),y=n(39738),p=n(71866),h=n(82885),f=n(97339);function b(){var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function i(n,a,r,i){var l=a&&a.prototype instanceof s?a:s,c=Object.create(l.prototype);return v(c,"_invoke",function(n,a,r){var i,s,l,c=0,u=r||[],d=!1,m={p:0,n:0,v:e,a:y,f:y.bind(e,4),d:function(t,n){return i=t,s=0,l=e,m.n=n,o}};function y(n,a){for(s=n,l=a,t=0;!d&&c&&!r&&t<u.length;t++){var r,i=u[t],y=m.p,p=i[2];n>3?(r=p===a)&&(l=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=y&&((r=n<2&&y<i[1])?(s=0,m.v=a,m.n=i[1]):y<p&&(r=n<3||i[0]>a||a>p)&&(i[4]=n,i[5]=a,m.n=p,s=0))}if(r||n>1)return o;throw d=!0,a}return function(r,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&y(u,p),s=u,l=p;(t=s<2?e:l)||!d;){i||(s?s<3?(s>1&&(m.n=-1),y(s,l)):m.n=l:m.v=l);try{if(c=2,i){if(s||(r="next"),t=i[r]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),s=1);i=e}else if((t=(d=m.n<0)?l:n.call(a,m))!==o)break}catch(t){i=e,s=1,l=t}finally{c=1}}return{value:t,done:d}}}(n,r,i),!0),c}var o={};function s(){}function l(){}function c(){}t=Object.getPrototypeOf;var u=[][a]?t(t([][a]())):(v(t={},a,(function(){return this})),t),d=c.prototype=s.prototype=Object.create(u);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,v(e,r,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=c,v(d,"constructor",c),v(c,"constructor",l),l.displayName="GeneratorFunction",v(c,r,"GeneratorFunction"),v(d),v(d,r,"Generator"),v(d,a,(function(){return this})),v(d,"toString",(function(){return"[object Generator]"})),(b=function(){return{w:i,m:m}})()}function v(e,t,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}v=function(e,t,n,a){if(t)r?r(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n;else{var i=function(t,n){v(e,t,(function(e){return this._invoke(t,n,e)}))};i("next",0),i("throw",1),i("return",2)}},v(e,t,n,a)}function I(e,t,n,a,r,i,o){try{var s=e[i](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,r)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function o(e){I(i,a,r,o,s,"next",e)}function s(e){I(i,a,r,o,s,"throw",e)}o(void 0)}))}}var w=[a.D.BoxSet,a.D.MusicAlbum,a.D.Season,a.D.Series];function P(e){switch(e){case a.D.Series:return s.Ay.translate("DeleteSeries");case a.D.Episode:return s.Ay.translate("DeleteEpisode");case a.D.Playlist:case a.D.BoxSet:return s.Ay.translate("Delete");default:return s.Ay.translate("DeleteMedia")}}function T(e){return g.apply(this,arguments)}function g(){return(g=A(b().m((function e(t){var n,i,l,c,d,p;return b().w((function(e){for(;;)switch(e.n){case 0:if(i=t.item,l=t.user,c=y.f.canPlay(i),d=[],c&&"Photo"!==i.MediaType&&(!1!==t.play&&d.push({name:s.Ay.translate("Play"),id:"resume",icon:"play_arrow"}),t.playAllFromHere&&"Program"!==i.Type&&"TvChannel"!==i.Type&&d.push({name:s.Ay.translate("PlayAllFromHere"),id:"playallfromhere",icon:"play_arrow"})),null!==y.f.getCurrentPlayer()&&(t.stopPlayback&&d.push({name:s.Ay.translate("StopPlayback"),id:"stopPlayback",icon:"stop"}),t.clearQueue&&d.push({name:s.Ay.translate("ClearQueue"),id:"clearQueue",icon:"clear_all"})),y.f.canQueue(i)&&(!1!==t.queue&&d.push({name:s.Ay.translate("AddToPlayQueue"),id:"queue",icon:"playlist_add"}),!1!==t.queue&&d.push({name:s.Ay.translate("PlayNext"),id:"queuenext",icon:"playlist_add"})),!i.IsFolder&&"MusicArtist"!==i.Type&&"MusicGenre"!==i.Type||"livetv"===i.CollectionType||!1===t.shuffle||d.push({name:s.Ay.translate("Shuffle"),id:"shuffle",icon:"shuffle"}),"Audio"!==i.MediaType&&"MusicAlbum"!==i.Type&&"MusicArtist"!==i.Type&&"MusicGenre"!==i.Type||!1===t.instantMix||m.Ay.isLocalItem(i)||d.push({name:s.Ay.translate("InstantMix"),id:"instantmix",icon:"explore"}),d.length&&d.push({divider:!0}),r.A.tv||(t.positionTo&&null!==o.Ay.parentWithClass(t.positionTo,"card")&&d.push({name:s.Ay.translate("Select"),id:"multiSelect",icon:"library_add_check"}),m.Ay.supportsAddingToCollection(i)&&(l.Policy.IsAdministrator||l.Policy.EnableCollectionManagement)&&d.push({name:s.Ay.translate("AddToCollection"),id:"addtocollection",icon:"playlist_add"}),m.Ay.supportsAddingToPlaylist(i)&&!1!==t.playlist&&d.push({name:s.Ay.translate("AddToPlaylist"),id:"addtoplaylist",icon:"playlist_add"})),"Timer"===i.Type&&l.Policy.EnableLiveTvManagement&&!1!==t.cancelTimer&&d.push({name:s.Ay.translate("CancelRecording"),id:"canceltimer",icon:"cancel"}),"Recording"===i.Type&&"InProgress"===i.Status&&l.Policy.EnableLiveTvManagement&&!1!==t.cancelTimer&&d.push({name:s.Ay.translate("CancelRecording"),id:"canceltimer",icon:"cancel"}),"SeriesTimer"===i.Type&&l.Policy.EnableLiveTvManagement&&!1!==t.cancelTimer&&d.push({name:s.Ay.translate("CancelSeries"),id:"cancelseriestimer",icon:"cancel"}),u.g.supports(f.Y.FileDownload)&&(l.Policy.EnableContentDownloading&&w.includes(i.Type)&&d.push({name:s.Ay.translate("DownloadAll"),id:"downloadall",icon:"file_download"}),i.CanDownload&&"Book"!==i.Type&&(d.push({name:s.Ay.translate("Download"),id:"download",icon:"file_download"}),d.push({name:s.Ay.translate("CopyStreamURL"),id:"copy-stream",icon:"content_copy"}))),i.CanDelete&&!1!==t.deleteItem&&d.push({name:P(i.Type),id:"delete",icon:"delete"}),d.length&&d.push({divider:!0}),i.Type!==a.D.Playlist){e.n=2;break}return e.n=1,(0,m.Hc)(l,i);case 1:e.v&&d.push({name:s.Ay.translate("Edit"),id:"editplaylist",icon:"edit"});case 2:return m.Ay.canEdit(l,i)&&!1!==t.edit&&"SeriesTimer"!==i.Type&&(p="Timer"===i.Type||"SeriesTimer"===i.Type?s.Ay.translate("Edit"):s.Ay.translate("EditMetadata"),d.push({name:p,id:"edit",icon:"edit"})),m.Ay.canEditImages(l,i)&&!1!==t.editImages&&d.push({name:s.Ay.translate("EditImages"),id:"editimages",icon:"image"}),m.Ay.canEditSubtitles(l,i)&&!1!==t.editSubtitles&&d.push({name:s.Ay.translate("EditSubtitles"),id:"editsubtitles",icon:"closed_caption"}),m.Ay.canEditLyrics(l,i)&&d.push({name:s.Ay.translate("EditLyrics"),id:"editlyrics",icon:"lyrics"}),!1!==t.identify&&m.Ay.canIdentify(l,i)&&d.push({name:s.Ay.translate("Identify"),id:"identify",icon:"edit"}),i.MediaSources&&!1!==t.moremediainfo&&d.push({name:s.Ay.translate("MoreMediaInfo"),id:"moremediainfo",icon:"info"}),"Program"===i.Type&&!1!==t.record&&(i.TimerId?d.push({name:s.Ay.translate("ManageRecording"),id:"record",icon:"fiber_manual_record"}):d.push({name:s.Ay.translate("Record"),id:"record",icon:"fiber_manual_record"})),m.Ay.canRefreshMetadata(i,l)&&d.push({name:s.Ay.translate("RefreshMetadata"),id:"refresh",icon:"refresh"}),i.PlaylistItemId&&t.playlistId&&t.canEditPlaylist&&d.push({name:s.Ay.translate("RemoveFromPlaylist"),id:"removefromplaylist",icon:"playlist_remove"}),i.PlaylistItemId&&t.playlistId&&i.PlaylistIndex>0&&d.push({name:s.Ay.translate("MoveToTop"),id:"movetotop",icon:"vertical_align_top"}),i.PlaylistItemId&&t.playlistId&&i.PlaylistIndex<i.PlaylistItemCount-1&&d.push({name:s.Ay.translate("MoveToBottom"),id:"movetobottom",icon:"vertical_align_bottom"}),t.collectionId&&d.push({name:s.Ay.translate("RemoveFromCollection"),id:"removefromcollection",icon:"playlist_remove"}),!r.A.tv&&!0===t.share&&m.Ay.canShare(i,l)&&d.push({name:s.Ay.translate("Share"),id:"share",icon:"share"}),!1!==t.openAlbum&&i.AlbumId&&"Photo"!==i.MediaType&&d.push({name:s.Ay.translate("ViewAlbum"),id:"album",icon:"album"}),!1!==t.openArtist&&null!==(n=i.AlbumArtists)&&void 0!==n&&n.length&&d.push({name:s.Ay.translate("ViewAlbumArtist"),id:"artist",icon:"person"}),i.HasLyrics&&d.push({name:s.Ay.translate("ViewLyrics"),id:"lyrics",icon:"lyrics"}),e.a(2,d)}}),e)})))).apply(this,arguments)}function k(e,t,n,a,r){return function(){e({command:t,updated:n,deleted:a,itemId:r})}}function S(e,t,r){var c=e.Id,u=e.ServerId,m=l.tF.getApiClient(u);return new Promise((function(l,h){switch(t){case"addtocollection":n.e(80999).then(n.bind(n,3380)).then((function(e){(new(0,e.default)).show({items:[c],serverId:u}).then(k(l,t,!0),k(l,t))}));break;case"addtoplaylist":Promise.all([n.e(45642),n.e(26711)]).then(n.bind(n,4330)).then((function(e){(new(0,e.default)).show({items:[c],serverId:u}).then(k(l,t,!0),k(l,t))}));break;case"download":n.e(23717).then(n.bind(n,23717)).then((function(n){var a=m.getItemDownloadUrl(c);n.download([{url:a,item:e,itemId:c,serverId:u,title:e.Name,filename:e.Path.replace(/^.*[\\/]/,"")}]),k(k(l,t),t)()}));break;case"downloadall":var f=function(e){n.e(23717).then(n.bind(n,23717)).then((function(t){var n=e.filter((function(e){return e.CanDownload})).map((function(e){return{url:m.getItemDownloadUrl(e.Id),item:e,itemId:e.Id,serverId:u,title:e.Name,filename:e.Path.replace(/^.*[\\/]/,"")}}));t.download(n)}))},b=function(e){Promise.all(e.map((function(e){return m.getEpisodes(e.SeriesId,{seasonId:e.Id,userId:r.user.Id,Fields:"CanDownload,Path"})}))).then((function(e){f(e.map((function(e){return e.Items})).flat())}))};switch(e.Type){case a.D.BoxSet:case a.D.MusicAlbum:m.getItems(r.user.Id,{ParentId:e.Id,Fields:"CanDownload,Path"}).then((function(e){var t=e.Items;return f(t)}));break;case a.D.Season:b([e]);break;case a.D.Series:m.getSeasons(e.Id,{userId:r.user.Id,Fields:"ItemCounts"}).then((function(e){return b(e.Items)}))}k(k(l,t),t)();break;case"copy-stream":var v=m.getItemDownloadUrl(c);(0,i.C)(v).then((function(){(0,p.A)(s.Ay.translate("CopyStreamURLSuccess"))})).catch((function(){prompt(s.Ay.translate("CopyStreamURL"),v)})),k(l,t)();break;case"editsubtitles":n.e(39345).then(n.bind(n,39345)).then((function(e){e.default.show(c,u).then(k(l,t,!0),k(l,t))}));break;case"editlyrics":Promise.all([n.e(45642),n.e(69729)]).then(n.bind(n,69729)).then((function(e){e.default.show(c,u).then(k(l,t,!0),k(l,t))}));break;case"edit":(function(e,t){return new Promise((function(a,r){var i=e.serverInfo().Id;"Timer"===t.Type?n.e(59801).then(n.bind(n,59801)).then((function(e){e.default.show(t.Id,i).then(a,r)})):"SeriesTimer"===t.Type?n.e(95062).then(n.bind(n,72681)).then((function(e){e.default.show(t.Id,i).then(a,r)})):Promise.all([n.e(45642),n.e(26855),n.e(86376)]).then(n.bind(n,26855)).then((function(e){e.default.show(t.Id,i).then(a,r)}))}))})(m,e).then(k(l,t,!0),k(l,t));break;case"editplaylist":Promise.all([n.e(45642),n.e(26711)]).then(n.bind(n,4330)).then((function(e){(new(0,e.default)).show({id:c,serverId:u}).then(k(l,t,!0),k(l,t))}));break;case"editimages":n.e(4350).then(n.bind(n,4350)).then((function(e){e.show({itemId:c,serverId:u}).then(k(l,t,!0),k(l,t))}));break;case"identify":Promise.resolve().then(n.bind(n,92305)).then((function(e){e.show(c,u).then(k(l,t,!0),k(l,t))}));break;case"moremediainfo":n.e(20963).then(n.bind(n,20963)).then((function(e){e.show(c,u).then(k(l,t),k(l,t))}));break;case"multiSelect":n.e(35308).then(n.bind(n,35308)).then((function(e){(0,e.startMultiSelect)(o.Ay.parentWithClass(r.positionTo,"card"))}));break;case"refresh":!function(e,t){n.e(54623).then(n.bind(n,77004)).then((function(n){new(0,n.default)({itemIds:[t.Id],serverId:e.serverInfo().Id,mode:"CollectionFolder"===t.Type?"scan":null}).show()}))}(m,e),k(l,t)();break;case"open":d.appRouter.showItem(e),k(l,t)();break;case"play":C(e,!1),k(l,t)();break;case"resume":C(e,!0),k(l,t)();break;case"queue":C(e,!1,!0),k(l,t)();break;case"queuenext":C(e,!1,!0,!0),k(l,t)();break;case"stopPlayback":y.f.stop();break;case"clearQueue":y.f.clearQueue();break;case"record":Promise.all([n.e(10739),n.e(72044)]).then(n.bind(n,63834)).then((function(e){e.default.show(c,u).then(k(l,t,!0),k(l,t))}));break;case"shuffle":y.f.shuffle(e),k(l,t)();break;case"instantmix":y.f.instantMix(e),k(l,t)();break;case"delete":(function(e,t){return new Promise((function(e,a){n.e(46634).then(n.bind(n,46634)).then((function(n){n.deleteItem({item:t,navigate:!1}).then((function(){e(!0)}),a)}))}))})(0,e).then(k(l,t,!0,!0,c),k(l,t));break;case"share":navigator.share({title:e.Name,text:e.Overview,url:"".concat(m.serverAddress(),"/web/").concat(d.appRouter.getRouteUrl(e))});break;case"album":d.appRouter.showItem(e.AlbumId,e.ServerId),k(l,t)();break;case"artist":d.appRouter.showItem(e.AlbumArtists[0].Id,e.ServerId),k(l,t)();break;case"lyrics":r.isMobile?d.appRouter.show("lyrics"):d.appRouter.showItem(e.Id,e.ServerId),k(l,t)();break;case"playallfromhere":case"queueallfromhere":k(l,t)();break;case"removefromplaylist":m.ajax({url:m.getUrl("Playlists/"+r.playlistId+"/Items",{EntryIds:[e.PlaylistItemId].join(",")}),type:"DELETE"}).then((function(){k(l,t,!0)()}));break;case"movetotop":m.ajax({url:m.getUrl("Playlists/"+r.playlistId+"/Items/"+e.PlaylistItemId+"/Move/0"),type:"POST"}).then((function(){k(l,t,!0)()}));break;case"movetobottom":m.ajax({url:m.getUrl("Playlists/"+r.playlistId+"/Items/"+e.PlaylistItemId+"/Move/"+(e.PlaylistItemCount-1)),type:"POST"}).then((function(){k(l,t,!0)()}));break;case"removefromcollection":m.ajax({type:"DELETE",url:m.getUrl("Collections/"+r.collectionId+"/Items",{Ids:[e.Id].join(",")})}).then((function(){k(l,t,!0)()}));break;case"canceltimer":!function(e,t,a,r){n.e(78938).then(n.bind(n,78938)).then((function(e){var n=e.default,i=t.TimerId||t.Id;n.cancelTimerWithConfirmation(i,t.ServerId).then((function(){k(a,r,!0)()}))}))}(0,e,l,t);break;case"cancelseriestimer":!function(e,t,a,r){n.e(78938).then(n.bind(n,78938)).then((function(e){e.default.cancelSeriesTimerWithConfirmation(t.Id,t.ServerId).then((function(){k(a,r,!0)()}))}))}(0,e,l,t);break;default:h()}}))}function C(e,t,n,a){var r,i="play";n&&(i=a?"queueNext":"queue");var o=0;if(t&&null!==(r=e.UserData)&&void 0!==r&&r.PlaybackPositionTicks&&(o=e.UserData.PlaybackPositionTicks),"Program"===e.Type)y.f[i]({ids:[e.ChannelId],startPositionTicks:o,serverId:e.ServerId});else{var s="items-"+(e.IsFolder?e.Id:e.ParentId)+"-Folder",l=h.getSortValuesLegacy(s);y.f[i]({items:[e],startPositionTicks:o,queryOptions:{SortBy:l.sortBy,SortOrder:l.sortOrder}})}}function D(e){return E.apply(this,arguments)}function E(){return(E=A(b().m((function e(t){var n,a;return b().w((function(e){for(;;)switch(e.n){case 0:return e.n=1,T(t);case 1:if((n=e.v).length){e.n=2;break}throw new Error("No item commands present");case 2:return e.n=3,c.default.show({items:n,positionTo:t.positionTo,resolveOnClick:["share"]});case 3:return a=e.v,e.a(2,S(t.item,a,t))}}),e)})))).apply(this,arguments)}t.default={getCommands:T,show:D}}}]);