"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[97636,96084,47027],{61726:function(e,a,n){n.r(a);var t=n(62540),r=n(63696),c=n(9055),s=n(8566),l=n(73233),i=n(5898),o=n(50764),d=n(58702),u=n(86068),h=n(30658),v=n(76116),m=n(91281),f=n(65242),b=function(e,a){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var t,r,c=n.call(e),s=[];try{for(;(void 0===a||a-- >0)&&!(t=c.next()).done;)s.push(t.value)}catch(e){r={error:e}}finally{try{t&&!t.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return s},y=function(e){var a="function"==typeof Symbol&&Symbol.iterator,n=a&&e[a],t=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};a.default=function(){var e=b((0,c.ok)(),1)[0].get("userId"),a=b((0,r.useState)(""),2),n=a[0],p=a[1],A=b((0,r.useState)([]),2),C=A[0],g=A[1],k=b((0,r.useState)([]),2),N=k[0],x=k[1],I=b((0,r.useState)([]),2),S=I[0],E=I[1],P=(0,r.useRef)(null),w=function(e){var a=new Event("change",{bubbles:!1,cancelable:!0});e.dispatchEvent(a)},j=(0,r.useCallback)((function(e,a){var n,t,r,c,s,l,i=P.current;if(i){var o=[];try{for(var d=y(a),u=d.next();!u.done;u=d.next()){var h=u.value,v=(null===(r=e.Policy)||void 0===r?void 0:r.EnableAllFolders)||-1!=(null===(s=null===(c=e.Policy)||void 0===c?void 0:c.EnabledFolders)||void 0===s?void 0:s.indexOf(h.Id||""))?' checked="checked"':"";o.push({Id:h.Id,Name:h.Name,checkedAttribute:v})}}catch(e){n={error:e}}finally{try{u&&!u.done&&(t=d.return)&&t.call(d)}finally{if(n)throw n.error}}x(o);var m=i.querySelector(".chkEnableAllFolders");m.checked=Boolean(null===(l=e.Policy)||void 0===l?void 0:l.EnableAllFolders),w(m)}else console.error("[userlibraryaccess] Unexpected null page reference")}),[]),D=(0,r.useCallback)((function(e,a){var n,t,r,c,s,l,i=P.current;if(i){var o=[];try{for(var d=y(a),u=d.next();!u.done;u=d.next()){var h=u.value,v=(null===(r=e.Policy)||void 0===r?void 0:r.EnableAllChannels)||-1!=(null===(s=null===(c=e.Policy)||void 0===c?void 0:c.EnabledChannels)||void 0===s?void 0:s.indexOf(h.Id||""))?' checked="checked"':"";o.push({Id:h.Id,Name:h.Name,checkedAttribute:v})}}catch(e){n={error:e}}finally{try{u&&!u.done&&(t=d.return)&&t.call(d)}finally{if(n)throw n.error}}g(o),a.length?i.querySelector(".channelAccessContainer").classList.remove("hide"):i.querySelector(".channelAccessContainer").classList.add("hide");var m=i.querySelector(".chkEnableAllChannels");m.checked=Boolean(null===(l=e.Policy)||void 0===l?void 0:l.EnableAllChannels),w(m)}else console.error("[userlibraryaccess] Unexpected null page reference")}),[]),T=(0,r.useCallback)((function(e,a){var n,t,r,c,s,l,i,o=P.current;if(o){var d=[];try{for(var u=y(a),h=u.next();!h.done;h=u.next()){var v=h.value,m=(null===(r=e.Policy)||void 0===r?void 0:r.EnableAllDevices)||-1!=(null===(s=null===(c=e.Policy)||void 0===c?void 0:c.EnabledDevices)||void 0===s?void 0:s.indexOf(v.Id||""))?' checked="checked"':"";d.push({Id:v.Id,Name:v.Name,AppName:v.AppName,CustomName:v.CustomName,checkedAttribute:m})}}catch(e){n={error:e}}finally{try{h&&!h.done&&(t=u.return)&&t.call(u)}finally{if(n)throw n.error}}E(d);var f=o.querySelector(".chkEnableAllDevices");f.checked=Boolean(null===(l=e.Policy)||void 0===l?void 0:l.EnableAllDevices),w(f),(null===(i=e.Policy)||void 0===i?void 0:i.IsAdministrator)?o.querySelector(".deviceAccessContainer").classList.add("hide"):o.querySelector(".deviceAccessContainer").classList.remove("hide")}else console.error("[userlibraryaccess] Unexpected null page reference")}),[]),L=(0,r.useCallback)((function(e,a,n,t){p(e.Name||""),l.default.setTitle(e.Name),D(e,n),j(e,a),T(e,t),s.Ay.hide()}),[D,T,j]),O=(0,r.useCallback)((function(){s.Ay.show();var a=e?window.ApiClient.getUser(e):Promise.resolve({Configuration:{}}),n=window.ApiClient.getJSON(window.ApiClient.getUrl("Library/MediaFolders",{IsHidden:!1})),t=window.ApiClient.getJSON(window.ApiClient.getUrl("Channels")),r=window.ApiClient.getJSON(window.ApiClient.getUrl("Devices"));Promise.all([a,n,t,r]).then((function(e){L(e[0],e[1].Items,e[2].Items,e[3].Items)})).catch((function(e){console.error("[userlibraryaccess] failed to load data",e)}))}),[L,e]);return(0,r.useEffect)((function(){var a=P.current;if(a){O();var n=function(){s.Ay.hide(),(0,o.A)(i.Ay.translate("SettingsSaved"))};a.querySelector(".chkEnableAllDevices").addEventListener("change",(function(){a.querySelector(".deviceAccessListContainer").classList.toggle("hide",this.checked)})),a.querySelector(".chkEnableAllChannels").addEventListener("change",(function(){a.querySelector(".channelAccessListContainer").classList.toggle("hide",this.checked)})),a.querySelector(".chkEnableAllFolders").addEventListener("change",(function(){a.querySelector(".folderAccessListContainer").classList.toggle("hide",this.checked)})),a.querySelector(".userLibraryAccessForm").addEventListener("submit",(function(t){if(e)return s.Ay.show(),window.ApiClient.getUser(e).then((function(e){!function(e){if(!e.Id)throw new Error("Unexpected null user.Id");if(!e.Policy)throw new Error("Unexpected null user.Policy");e.Policy.EnableAllFolders=a.querySelector(".chkEnableAllFolders").checked,e.Policy.EnabledFolders=e.Policy.EnableAllFolders?[]:Array.prototype.filter.call(a.querySelectorAll(".chkFolder"),(function(e){return e.checked})).map((function(e){return e.getAttribute("data-id")})),e.Policy.EnableAllChannels=a.querySelector(".chkEnableAllChannels").checked,e.Policy.EnabledChannels=e.Policy.EnableAllChannels?[]:Array.prototype.filter.call(a.querySelectorAll(".chkChannel"),(function(e){return e.checked})).map((function(e){return e.getAttribute("data-id")})),e.Policy.EnableAllDevices=a.querySelector(".chkEnableAllDevices").checked,e.Policy.EnabledDevices=e.Policy.EnableAllDevices?[]:Array.prototype.filter.call(a.querySelectorAll(".chkDevice"),(function(e){return e.checked})).map((function(e){return e.getAttribute("data-id")})),e.Policy.BlockedChannels=null,e.Policy.BlockedMediaFolders=null,window.ApiClient.updateUserPolicy(e.Id,e.Policy).then((function(){n()})).catch((function(e){console.error("[userlibraryaccess] failed to update user policy",e)}))}(e)})).catch((function(e){console.error("[userlibraryaccess] failed to fetch user",e)})),t.preventDefault(),t.stopPropagation(),!1;console.error("[userlibraryaccess] missing user id")}))}else console.error("[userlibraryaccess] Unexpected null page reference")}),[O]),(0,t.jsx)(f.A,{id:"userLibraryAccessPage",className:"mainAnimatedPage type-interior",children:(0,t.jsxs)("div",{ref:P,className:"content-primary",children:[(0,t.jsx)("div",{className:"verticalSection",children:(0,t.jsx)(h.A,{title:n,url:"https://jellyfin.org/docs/general/server/users/"})}),(0,t.jsx)(d.A,{activeTab:"userlibraryaccess"}),(0,t.jsxs)("form",{className:"userLibraryAccessForm",children:[(0,t.jsx)(v.A,{containerClassName:"folderAccessContainer",headerTitle:"HeaderLibraryAccess",checkBoxClassName:"chkEnableAllFolders",checkBoxTitle:"OptionEnableAccessToAllLibraries",listContainerClassName:"folderAccessListContainer",accessClassName:"folderAccess",listTitle:"HeaderLibraries",description:"LibraryAccessHelp",children:N.map((function(e){return(0,t.jsx)(m.A,{className:"chkFolder",itemId:e.Id,itemName:e.Name,itemCheckedAttribute:e.checkedAttribute},e.Id)}))}),(0,t.jsx)(v.A,{containerClassName:"channelAccessContainer hide",headerTitle:"HeaderChannelAccess",checkBoxClassName:"chkEnableAllChannels",checkBoxTitle:"OptionEnableAccessToAllChannels",listContainerClassName:"channelAccessListContainer",accessClassName:"channelAccess",listTitle:"Channels",description:"ChannelAccessHelp",children:C.map((function(e){return(0,t.jsx)(m.A,{className:"chkChannel",itemId:e.Id,itemName:e.Name,itemCheckedAttribute:e.checkedAttribute},e.Id)}))}),(0,t.jsx)(v.A,{containerClassName:"deviceAccessContainer hide",headerTitle:"HeaderDeviceAccess",checkBoxClassName:"chkEnableAllDevices",checkBoxTitle:"OptionEnableAccessFromAllDevices",listContainerClassName:"deviceAccessListContainer",accessClassName:"deviceAccess",listTitle:"HeaderDevices",description:"DeviceAccessHelp",children:S.map((function(e){return(0,t.jsx)(m.A,{className:"chkDevice",itemId:e.Id,itemName:e.CustomName||e.Name,itemAppName:e.AppName,itemCheckedAttribute:e.checkedAttribute},e.Id)}))}),(0,t.jsx)("br",{}),(0,t.jsx)("div",{children:(0,t.jsx)(u.A,{type:"submit",className:"raised button-submit block",title:"Save"})})]})]})})}},76116:function(e,a,n){var t=n(62540),r=(n(63696),n(5898)),c=n(91281);a.A=function(e){var a=e.containerClassName,n=e.headerTitle,s=e.checkBoxClassName,l=e.checkBoxTitle,i=e.listContainerClassName,o=e.accessClassName,d=e.listTitle,u=e.description,h=e.children;return(0,t.jsxs)("div",{className:a,children:[(0,t.jsx)("h2",{children:r.Ay.translate(n)}),(0,t.jsx)(c.A,{labelClassName:"checkboxContainer",className:s,title:l}),(0,t.jsxs)("div",{className:i,children:[(0,t.jsxs)("div",{className:o,children:[(0,t.jsx)("h3",{className:"checkboxListLabel",children:r.Ay.translate(d)}),(0,t.jsx)("div",{className:"checkboxList paperList",style:{padding:".5em 1em"},children:h})]}),(0,t.jsx)("div",{className:"fieldDescription",children:r.Ay.translate(u)})]})]})}},58702:function(e,a,n){var t=n(62540),r=n(63696),c=n(5898),s=n(89100),l=n(84851);function i(e){return r.useCallback((function(){(0,s.navigate)(e,!0).catch((function(e){console.warn("Error navigating to dashboard url",e)}))}),[e])}a.A=function(e){var a=e.activeTab,n=i("/dashboard/users/profile"),r=i("/dashboard/users/access"),s=i("/dashboard/users/parentalcontrol"),o=i("/dashboard/users/password");return(0,t.jsxs)("div",{"data-role":"controlgroup","data-type":"horizontal",className:"localnav",children:[(0,t.jsx)(l.A,{href:"#","data-role":"button",className:"useredit"===a?"ui-btn-active":"",onClick:n,children:c.Ay.translate("Profile")}),(0,t.jsx)(l.A,{href:"#","data-role":"button",className:"userlibraryaccess"===a?"ui-btn-active":"",onClick:r,children:c.Ay.translate("TabAccess")}),(0,t.jsx)(l.A,{href:"#","data-role":"button",className:"userparentalcontrol"===a?"ui-btn-active":"",onClick:s,children:c.Ay.translate("TabParentalControl")}),(0,t.jsx)(l.A,{href:"#","data-role":"button",className:"userpassword"===a?"ui-btn-active":"",onClick:o,children:c.Ay.translate("HeaderPassword")})]})}},86068:function(e,a,n){var t=n(62540),r=(n(63696),n(5898)),c=function(e){var a=e.type,n=e.id,t=e.className,r=e.title,c=e.leftIcon,s=e.rightIcon;return{__html:'<button\n        is="emby-button"\n        type="'.concat(a,'"\n        ').concat(n,'\n        class="').concat(t,'"\n        >\n        ').concat(c,"\n        <span>").concat(r,"</span>\n        ").concat(s,"\n    </button>")}};a.A=function(e){var a=e.type,n=e.id,s=e.className,l=e.title,i=e.leftIcon,o=e.rightIcon;return(0,t.jsx)("div",{dangerouslySetInnerHTML:c({type:a,id:n?'id="'.concat(n,'"'):"",className:s,title:r.Ay.translate(l),leftIcon:i?'<span class="material-icons '.concat(i,'" aria-hidden="true"></span>'):"",rightIcon:o?'<span class="material-icons '.concat(o,'" aria-hidden="true"></span>'):""})})}},91281:function(e,a,n){var t=n(62540),r=n(22696),c=n.n(r),s=(n(63696),n(5898)),l=function(e){var a=e.labelClassName,n=e.className,t=e.id,r=e.dataFilter,c=e.dataItemType,s=e.dataId,l=e.checkedAttribute,i=e.renderContent;return{__html:"<label ".concat(a,'>\n        <input\n            is="emby-checkbox"\n            type="checkbox"\n            class="').concat(n,'"\n            ').concat(t,"\n            ").concat(r,"\n            ").concat(c,"\n            ").concat(s,"\n            ").concat(l,"\n        />\n        ").concat(i,"\n    </label>")}};a.A=function(e){var a=e.labelClassName,n=e.className,r=e.elementId,i=e.dataFilter,o=e.itemType,d=e.itemId,u=e.itemAppName,h=e.itemCheckedAttribute,v=e.itemName,m=e.title,f=u?"- ".concat(u):"",b=v?"<span>".concat(c()(v||"")," ").concat(f,"</span>"):"<span>".concat(s.Ay.translate(m),"</span>");return(0,t.jsx)("div",{className:"sectioncheckbox",dangerouslySetInnerHTML:l({labelClassName:a?"class='".concat(a,"'"):"",className:n,id:r?"id='".concat(r,"'"):"",dataFilter:i?"data-filter='".concat(i,"'"):"",dataItemType:o?"data-itemtype='".concat(o,"'"):"",dataId:d?"data-id='".concat(d,"'"):"",checkedAttribute:h||"",renderContent:b})})}},85817:function(e,a,n){var t=n(62540),r=(n(63696),n(5898)),c=function(e){var a=e.is,n=e.id,t=e.className,r=e.title,c=e.icon,s=e.dataIndex,l=e.dataTag,i=e.dataProfileid;return{__html:'<button\n        is="'.concat(a,'"\n        type="button"\n        ').concat(n,'\n        class="').concat(t,'"\n        ').concat(r,"\n        ").concat(s,"\n        ").concat(l,"\n        ").concat(i,'\n    >\n        <span class="material-icons ').concat(c,'" aria-hidden="true"></span>\n    </button>')}};a.A=function(e){var a=e.is,n=e.id,s=e.className,l=e.title,i=e.icon,o=e.dataIndex,d=e.dataTag,u=e.dataProfileid;return(0,t.jsx)("div",{dangerouslySetInnerHTML:c({is:a,id:n?'id="'.concat(n,'"'):"",className:s,title:l?'title="'.concat(r.Ay.translate(l),'"'):"",icon:i,dataIndex:o?'data-index="'.concat(o,'"'):"",dataTag:d?'data-tag="'.concat(d,'"'):"",dataProfileid:u?'data-profileid="'.concat(u,'"'):""})})}},30658:function(e,a,n){var t=n(62540),r=(n(63696),n(85817)),c=n(84851),s=n(5898);a.A=function(e){var a=e.SectionClassName,n=e.title,l=e.isBtnVisible,i=void 0!==l&&l,o=e.btnId,d=e.btnClassName,u=e.btnTitle,h=e.btnIcon,v=e.isLinkVisible,m=void 0===v||v,f=e.url;return(0,t.jsxs)("div",{className:"".concat(a," sectionTitleContainer flex align-items-center"),children:[(0,t.jsx)("h2",{className:"sectionTitle",children:n}),i&&(0,t.jsx)(r.A,{is:"emby-button",id:o,className:d,title:u,icon:h}),m&&(0,t.jsx)(c.A,{className:"raised button-alt headerHelpButton",target:"_blank",rel:"noopener noreferrer",href:f,children:s.Ay.translate("Help")})]})}},84851:function(e,a,n){var t=n(62540),r=n(63696),c=n(4452),s=n.n(c),l=n(46782),i=n(13615),o=n(70267),d=n(22622),u=function(){return u=Object.assign||function(e){for(var a,n=1,t=arguments.length;n<t;n++)for(var r in a=arguments[n])Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);return e},u.apply(this,arguments)};a.A=function(e){var a=e.className,n=e.isAutoHideEnabled,c=e.href,h=e.target,v=e.onClick,m=e.children,f=function(e,a){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(t=Object.getOwnPropertySymbols(e);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(n[t[r]]=e[t[r]])}return n}(e,["className","isAutoHideEnabled","href","target","onClick","children"]),b=(0,r.useCallback)((function(e){var a=c||"";"#"!==a?h?d.g.supports("targetblank")||(e.preventDefault(),i.A.openUrl(a)):(e.preventDefault(),o.appRouter.show(a).catch((function(e){console.error("[LinkButton] failed to show url",a,e)}))):e.preventDefault(),null==v||v(e)}),[c,h,v]);if(!0===n&&!d.g.supports("externallinks"))return null;var y=s()("emby-button",a,{"show-focus":l.A.tv});return(0,t.jsx)("a",u({className:y,href:c,target:h,onClick:b},f,{children:m}))}},32203:function(e,a,n){n.d(a,{Bq:function(){return l},Jd:function(){return s}});var t=n(65369),r=n(11444),c="assets/img/devices/";function s(e){switch(e){case t.X.Movies:return"movie";case t.X.Music:return"music_note";case t.X.Homevideos:case t.X.Photos:return"photo";case t.X.Livetv:return"live_tv";case t.X.Tvshows:return"tv";case t.X.Trailers:return"theaters";case t.X.Musicvideos:return"music_video";case t.X.Books:return"book";case t.X.Boxsets:return"video_library";case t.X.Playlists:return"queue";case"channels":return"videocam";case void 0:return"quiz";default:return"folder"}}function l(e,a){switch(e){case r.D.MusicAlbum:return"album";case r.D.MusicArtist:case r.D.Person:return"person";case r.D.Audio:return"audiotrack";case r.D.Movie:return"movie";case r.D.Episode:case r.D.Series:return"tv";case r.D.Program:return"live_tv";case r.D.Book:return"book";case r.D.Folder:return"folder";case r.D.BoxSet:return"video_library";case r.D.Playlist:return"queue";case r.D.Photo:return"photo";case r.D.PhotoAlbum:return"photo_album";default:return a}}a.Ay={getDeviceIcon:function(e){var a;switch(e.AppName||e.Client){case"Samsung Smart TV":return c+"samsung.svg";case"Xbox One":return c+"xbox.svg";case"Sony PS4":return c+"playstation.svg";case"Kodi":case"Kodi JellyCon":return c+"kodi.svg";case"Jellyfin Android":case"AndroidTV":case"Android TV":return c+"android.svg";case"Jellyfin Mobile (iOS)":case"Jellyfin Mobile (iPadOS)":case"Jellyfin iOS":case"Infuse":return c+"apple.svg";case"Home Assistant":return c+"home-assistant.svg";case"Jellyfin Roku":return c+"roku.svg";case"Finamp":return c+"finamp.svg";case"Jellyfin Web":return function(e){switch(e){case"Opera":case"Opera TV":case"Opera Android":return c+"opera.svg";case"Chrome":case"Chrome Android":return c+"chrome.svg";case"Firefox":case"Firefox Android":return c+"firefox.svg";case"Safari":case"Safari iPad":case"Safari iPhone":return c+"safari.svg";case"Edge Chromium":case"Edge Chromium Android":case"Edge Chromium iPad":case"Edge Chromium iPhone":return c+"edgechromium.svg";case"Edge":return c+"edge.svg";case"Internet Explorer":return c+"msie.svg";default:return c+"html5.svg"}}(e.Name||e.DeviceName);default:if(null===(a=e.Capabilities)||void 0===a?void 0:a.IconUrl)try{return new URL(e.Capabilities.IconUrl).toString()}catch(a){console.error("[getDeviceIcon] device capabilities has invalid IconUrl",e,a)}return c+"other.svg"}},getLibraryIcon:s,getItemTypeIcon:l}}}]);