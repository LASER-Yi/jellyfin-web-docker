"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[98743,96084],{84826:function(t,e,i){i.r(e),i.d(e,{MediaLibraryCreator:function(){return P},default:function(){return x}}),i(29305),i(32733),i(84701),i(81678),i(24776),i(14382),i(69703),i(44962),i(86584),i(4754),i(94),i(36947),i(78557),i(96054),i(90076),i(95021),i(83994),i(93062),i(97747),i(82367);var r=i(22696),n=i.n(r),a=i(8566),o=i(79754),l=i(47629),s=(i(96244),i(9938)),c=i(5898),d=(i(10353),i(15453),i(98959),i(63001),i(84501),i(50764)),u=i(41177);function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function f(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b(r.key),r)}}function p(t,e,i){return e&&f(t.prototype,e),i&&f(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function b(t){var e=function(t,e){if("object"!=y(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==y(e)?e:e+""}function v(t){if(t.preventDefault(),T)return!1;if(0==k.length)return(0,u.A)({text:c.Ay.translate("PleaseAddAtLeastOneFolder"),type:"error"}),!1;T=!0,a.Ay.show();var e=l.Ay.parentWithClass(this,"dlg-librarycreator"),i=$("#txtValue",e).val(),r=$("#selectCollectionType",e).val();"mixed"==r&&(r=null);var n=s.Ay.getLibraryOptions(e.querySelector(".libraryOptions"));n.PathInfos=k,ApiClient.addVirtualFolder(i,r,w.refresh,n).then((function(){S=!0,T=!1,a.Ay.hide(),o.default.close(e)}),(function(){(0,d.A)(c.Ay.translate("ErrorAddingMediaPathToVirtualFolder")),T=!1,a.Ay.hide()}))}function m(){var t=l.Ay.parentWithClass(this,"dlg-librarycreator");Promise.resolve().then(i.bind(i,21840)).then((function(e){var i=new(0,e.default);i.show({callback:function(e,r){e&&function(t,e,i){var r=e.toLowerCase();if(!k.filter((function(t){return t.Path.toLowerCase()==r})).length){var n={Path:e};i&&(n.NetworkPath=i),k.push(n),g(t)}}(t,e,r),i.close()}})}))}function h(t,e){var i="";return i+='<div class="listItem listItem-border lnkPath">',i+='<div class="'.concat(t.NetworkPath?"listItemBody two-line":"listItemBody",'">'),i+='<div class="listItemBodyText" dir="ltr">'.concat(n()(t.Path),"</div>"),t.NetworkPath&&(i+='<div class="listItemBodyText secondary" dir="ltr">'.concat(n()(t.NetworkPath),"</div>")),i+="</div>",(i+='<button type="button" is="paper-icon-button-light"" class="listItemButton btnRemovePath" data-index="'.concat(e,'"><span class="material-icons remove_circle" aria-hidden="true"></span></button>'))+"</div>"}function g(t){var e=k.map(h).join(""),i=t.querySelector(".folderList");i.innerHTML=e,e?i.classList.remove("hide"):i.classList.add("hide")}function L(t){var e=l.Ay.parentWithClass(t.target,"btnRemovePath"),i=parseInt(e.getAttribute("data-index"),10),r=k[i].Path.toLowerCase();k=k.filter((function(t){return t.Path.toLowerCase()!=r})),g(l.Ay.parentWithClass(e,"dlg-librarycreator"))}function C(){A(S)}var A,w,P=p((function t(e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),new Promise((function(t){w=e,A=t,S=!1;var i,r,n=o.default.createDialog({size:"small",modal:!1,removeOnClose:!0,scrollY:!1});n.classList.add("ui-body-a"),n.classList.add("background-theme-a"),n.classList.add("dlg-librarycreator"),n.classList.add("formDialog"),n.innerHTML=c.Ay.translateHtml('<div class="formDialogHeader"> <button type="button" is="paper-icon-button-light" class="btnCancel autoSize" tabindex="-1" title="${ButtonBack}"><span class="material-icons arrow_back" aria-hidden="true"></span></button> <h3 class="formDialogHeaderTitle">${ButtonAddMediaLibrary}</h3> </div> <div class="formDialogContent scrollY" style="padding-top:2em"> <div class="dialogContentInner dialog-content-centered"> <form class="addLibraryForm" style="max-width:100%"> <div id="fldCollectionType" class="selectContainer"> <select is="emby-select" id="selectCollectionType" data-mini="true" required="required" label="${LabelContentType}"></select> <div class="collectionTypeFieldDescription fieldDescription"> </div> </div> <div class="inputContainer"> <input is="emby-input" type="text" id="txtValue" required="required" label="${LabelDisplayName}"/> </div> <div class="folders"> <div style="display:flex;align-items:center"> <h1 style="margin:.5em 0">${Folders}</h1> <button is="emby-button" type="button" class="fab btnAddFolder submit" title="${Add}"> <span class="material-icons add" aria-hidden="true"></span> </button> </div> <div class="paperList folderList hide" style="margin-bottom:2em"></div> </div> <div class="libraryOptions"></div> <div class="formDialogFooter"> <button is="emby-button" type="submit" class="raised btnSubmit button-submit block formDialogFooterItem"> <span>${ButtonOk}</span> </button> </div> </form> </div> </div> '),i=n,r=e.collectionTypeOptions,$("#selectCollectionType",i).html(function(t){return t.map((function(t){return'<option value="'.concat(t.value,'">').concat(t.name,"</option>")})).join("")}(r)).val("").on("change",(function(){var t=this.value,e=$(this).parents(".dialog")[0];if(s.Ay.setContentType(e.querySelector(".libraryOptions"),t),t?e.querySelector(".libraryOptions").classList.remove("hide"):e.querySelector(".libraryOptions").classList.add("hide"),"mixed"!=t){var i=this.selectedIndex;if(-1!=i){var n=this.options[i].innerHTML.replaceAll("*","").replaceAll("&amp;","&");$("#txtValue",e).val(n)}}var a=r.find((function(e){return e.value===t}));$(".collectionTypeFieldDescription",e).html((null==a?void 0:a.message)||"")})),i.querySelector(".btnAddFolder").addEventListener("click",m),i.querySelector(".addLibraryForm").addEventListener("submit",v),i.querySelector(".folderList").addEventListener("click",L),n.addEventListener("close",C),o.default.open(n),n.querySelector(".btnCancel").addEventListener("click",(function(){o.default.close(n)})),k=[],g(n),function(t){s.Ay.embed(t.querySelector(".libraryOptions")).then((function(){$("#selectCollectionType",t).trigger("change")}))}(n)}))})),k=[],S=!1,T=!1,x=P}}]);