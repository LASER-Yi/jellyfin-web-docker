"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3736],{79849:function(e,t,i){var a=i(84881),o=i(94994),n=i(59858);t.ZP={getVideoQualityOptions:function(e){var t,i=e.currentMaxBitrate,l=e.videoWidth,r=e.videoHeight;l/r<16/9&&(l=r*(16/9));var c=null==e.maxVideoWidth?n.Z.maxVideoWidth():e.maxVideoWidth,s=(c<0?null===(t=a.M.screen())||void 0===t?void 0:t.maxAllowedWidth:c)||4096,u=l||4096,d=[],b={name:o.ZP.translate("Auto"),bitrate:0,selected:e.isAutomaticBitrateEnabled};if(e.enableAuto&&d.push(b),u>=3800&&s>=1930&&(d.push({name:"4K - 120 Mbps",maxHeight:2160,bitrate:12e7}),d.push({name:"4K - 80 Mbps",maxHeight:2160,bitrate:8e7})),u>=1900&&s>=1290&&(d.push({name:"1080p - 60 Mbps",maxHeight:1080,bitrate:6e7}),d.push({name:"1080p - 40 Mbps",maxHeight:1080,bitrate:4e7}),d.push({name:"1080p - 20 Mbps",maxHeight:1080,bitrate:2e7}),d.push({name:"1080p - 15 Mbps",maxHeight:1080,bitrate:15e6}),d.push({name:"1080p - 10 Mbps",maxHeight:1080,bitrate:1e7})),u>=1260&&s>=650&&(d.push({name:"720p - 8 Mbps",maxHeight:720,bitrate:8e6}),d.push({name:"720p - 6 Mbps",maxHeight:720,bitrate:6e6}),d.push({name:"720p - 4 Mbps",maxHeight:720,bitrate:4e6})),u>=620&&(d.push({name:"480p - 3 Mbps",maxHeight:480,bitrate:3e6}),d.push({name:"480p - 1.5 Mbps",maxHeight:480,bitrate:15e5}),d.push({name:"480p - 720 kbps",maxHeight:480,bitrate:72e4})),d.push({name:"360p - 420 kbps",maxHeight:360,bitrate:42e4}),i){for(var p=d.length-1,h=0,m=d.length;h<m;h++){var y=d[h];if(y.bitrate>0&&y.bitrate<=i){p=h;break}}var v=d[p];e.isAutomaticBitrateEnabled?b.autoText=v.name:v.selected=!0}return d},getAudioQualityOptions:function(e){var t=e.currentMaxBitrate,i=[],a={name:o.ZP.translate("Auto"),bitrate:0,selected:e.isAutomaticBitrateEnabled};if(e.enableAuto&&i.push(a),i.push({name:"2 Mbps",bitrate:2e6}),i.push({name:"1.5 Mbps",bitrate:15e5}),i.push({name:"1 Mbps",bitrate:1e6}),i.push({name:"320 kbps",bitrate:32e4}),i.push({name:"256 kbps",bitrate:256e3}),i.push({name:"192 kbps",bitrate:192e3}),i.push({name:"128 kbps",bitrate:128e3}),i.push({name:"96 kbps",bitrate:96e3}),i.push({name:"64 kbps",bitrate:64e3}),t){for(var n=i.length-1,l=0,r=i.length;l<r;l++){var c=i[l];if(c.bitrate>0&&c.bitrate<=t){n=l;break}}var s=i[n];e.isAutomaticBitrateEnabled?a.autoText=s.name:s.selected=!0}return i}}},62088:function(e,t,i){i.r(t),i.d(t,{default:function(){return E}}),i(61013),i(23938),i(32081),i(19068),i(87211),i(25901),i(92189),i(63238),i(95163),i(99785),i(91047),i(5769),i(17460),i(14078);var a=i(57366),o=i(59858),n=i(84881),l=i(34643),r=i(79849),c=i(94994),s=i(28540),u=i(81643),d=(i(15856),i(12291),i(18613)),b=i(56663);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t);if("object"!==p(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(a.key,"string"),"symbol"===p(o)?o:String(o)),a)}var o}function m(e){e.innerHTML=[5,10,15,20,25,30].map((function(e){return{name:c.ZP.translate("ValueSeconds",e),value:1e3*e}})).map((function(e){return'<option value="'.concat(e.value,'">').concat(e.name,"</option>")})).join("")}function y(e,t,i,a){var n="Audio"===i?r.ZP.getAudioQualityOptions({currentMaxBitrate:o.Z.maxStreamingBitrate(t,i),isAutomaticBitrateEnabled:o.Z.enableAutomaticBitrateDetection(t,i),enableAuto:!0}):r.ZP.getVideoQualityOptions({currentMaxBitrate:o.Z.maxStreamingBitrate(t,i),isAutomaticBitrateEnabled:o.Z.enableAutomaticBitrateDetection(t,i),enableAuto:!0,maxVideoWidth:a});e.innerHTML=n.map((function(e){return'<option value="'.concat(e.bitrate||"",'">').concat(e.name,"</option>")})).join("")}function v(e,t,i){y(e,t,i),o.Z.enableAutomaticBitrateDetection(t,i)?e.value="":e.value=o.Z.maxStreamingBitrate(t,i)}function S(e,t){var i=r.ZP.getVideoQualityOptions({currentMaxBitrate:o.Z.maxChromecastBitrate(),isAutomaticBitrateEnabled:!o.Z.maxChromecastBitrate(),enableAuto:!0,maxVideoWidth:t});e.innerHTML=i.map((function(e){return'<option value="'.concat(e.bitrate||"",'">').concat(e.name,"</option>")})).join(""),e.value=o.Z.maxChromecastBitrate()||""}function f(e,t,i){e.value?(o.Z.maxStreamingBitrate(t,i,e.value),o.Z.enableAutomaticBitrateDetection(t,i,!1)):o.Z.enableAutomaticBitrateDetection(t,i,!0)}function k(e,t,i){e.value=t,e.selectedIndex<0&&(e.value=i)}function g(e){var t=this.options.element,i=t.querySelector(".selectVideoInNetworkQuality"),a=t.querySelector(".selectVideoInternetQuality"),o=t.querySelector(".selectChromecastVideoQuality"),n=i.value,l=a.value,r=o.value,c=parseInt(e.target.value||"0",10)||0;y(i,!0,"Video",c),y(a,!1,"Video",c),S(o,c),k(i,n,""),k(a,l,""),k(o,r,"")}function x(e){var t=this,i=d.Z.getApiClient(t.options.serverId),a=t.options.userId,n=t.options.userSettings;return n.setUserInfo(a,i).then((function(){var e=t.options.enableSaveConfirmation;!function(e,t,i,a,n,l){s.ZP.show(),n.getUser(i).then((function(i){(function(e,t,i,a){return o.Z.enableSystemExternalPlayers(e.querySelector(".chkExternalVideoPlayer").checked),o.Z.maxChromecastBitrate(e.querySelector(".selectChromecastVideoQuality").value),o.Z.maxVideoWidth(e.querySelector(".selectLabelMaxVideoWidth").value),f(e.querySelector(".selectVideoInNetworkQuality"),!0,"Video"),f(e.querySelector(".selectVideoInternetQuality"),!1,"Video"),f(e.querySelector(".selectMusicInternetQuality"),!1,"Audio"),i.allowedAudioChannels(e.querySelector("#selectAllowedAudioChannels").value),t.Configuration.AudioLanguagePreference=e.querySelector("#selectAudioLanguage").value,t.Configuration.PlayDefaultAudioTrack=e.querySelector(".chkPlayDefaultAudioTrack").checked,t.Configuration.EnableNextEpisodeAutoPlay=e.querySelector(".chkEpisodeAutoPlay").checked,i.preferFmp4HlsContainer(e.querySelector(".chkPreferFmp4HlsContainer").checked),i.enableCinemaMode(e.querySelector(".chkEnableCinemaMode").checked),i.enableNextVideoInfoOverlay(e.querySelector(".chkEnableNextVideoOverlay").checked),t.Configuration.RememberAudioSelections=e.querySelector(".chkRememberAudioSelections").checked,t.Configuration.RememberSubtitleSelections=e.querySelector(".chkRememberSubtitleSelections").checked,i.chromecastVersion(e.querySelector(".selectChromecastVersion").value),i.skipForwardLength(e.querySelector(".selectSkipForwardLength").value),i.skipBackLength(e.querySelector(".selectSkipBackLength").value),a.updateUserConfiguration(t.Id,t.Configuration)})(t,i,a,n).then((function(){s.ZP.hide(),l&&(0,b.Z)(c.ZP.translate("SettingsSaved")),u.Z.trigger(e,"saved")}),(function(){s.ZP.hide()}))}))}(t,t.options.element,a,n,i,e)})),e&&e.preventDefault(),!1}function C(e,t){e.element.innerHTML=c.ZP.translateHtml('<form style="margin:0 auto"> <div class="verticalSection verticalSection-extrabottompadding"> <h2 class="sectionTitle"> ${HeaderAudioSettings} </h2> <div class="selectContainer"> <select is="emby-select" id="selectAllowedAudioChannels" label="${LabelAllowedAudioChannels}"> <option value="-1">${Auto}</option> <option value="1">${LabelSelectMono}</option> <option value="2">${LabelSelectStereo}</option> <option value="6">5.1 ${LabelSelectAudioChannels}</option> <option value="8">7.1 ${LabelSelectAudioChannels}</option> </select> </div> <div class="selectContainer"> <select is="emby-select" id="selectAudioLanguage" label="${LabelAudioLanguagePreference}"></select> </div> <label class="checkboxContainer"> <input type="checkbox" is="emby-checkbox" class="chkPlayDefaultAudioTrack"/> <span>${LabelPlayDefaultAudioTrack}</span> </label> </div> <div class="qualitySections hide"> <div class="verticalSection verticalSection-extrabottompadding videoQualitySection hide"> <h2 class="sectionTitle"> ${HeaderVideoQuality} </h2> <div class="selectContainer fldVideoInNetworkQuality hide"> <select is="emby-select" class="selectVideoInNetworkQuality" label="${LabelHomeNetworkQuality}"></select> </div> <div class="selectContainer fldVideoInternetQuality hide"> <select is="emby-select" class="selectVideoInternetQuality" label="${LabelInternetQuality}"></select> </div> <div class="selectContainer fldChromecastQuality hide"> <select is="emby-select" class="selectChromecastVideoQuality" label="${LabelMaxChromecastBitrate}"></select> </div> <div class="selectContainer"> <select is="emby-select" class="selectLabelMaxVideoWidth" label="${LabelMaxVideoResolution}"> <option value="0">${Auto}</option> <option value="-1">${ScreenResolution}</option> <option value="640">360p</option> <option value="852">480p</option> <option value="1280">720p</option> <option value="1920">1080p</option> <option value="3840">4K</option> <option value="7680">8K</option> </select> </div> </div> <div class="verticalSection verticalSection-extrabottompadding musicQualitySection hide"> <h2> ${HeaderMusicQuality} </h2> <div class="selectContainer"> <select is="emby-select" class="selectMusicInternetQuality" label="${LabelInternetQuality}"></select> </div> </div> </div> <div class="verticalSection verticalSection-extrabottompadding"> <h2 class="sectionTitle"> ${TabAdvanced} </h2> <div class="checkboxContainer checkboxContainer-withDescription"> <label> <input type="checkbox" is="emby-checkbox" class="chkPreferFmp4HlsContainer"/> <span>${PreferFmp4HlsContainer}</span> </label> <div class="fieldDescription checkboxFieldDescription">${PreferFmp4HlsContainerHelp}</div> </div> <div class="checkboxContainer checkboxContainer-withDescription cinemaModeOptions"> <label> <input type="checkbox" is="emby-checkbox" class="chkEnableCinemaMode"/> <span>${EnableCinemaMode}</span> </label> <div class="fieldDescription checkboxFieldDescription">${CinemaModeConfigurationHelp}</div> </div> <div class="checkboxContainer fldEpisodeAutoPlay hide"> <label> <input type="checkbox" is="emby-checkbox" class="chkEpisodeAutoPlay"/> <span>${PlayNextEpisodeAutomatically}</span> </label> </div> <div class="checkboxContainer checkboxContainer-withDescription"> <label> <input type="checkbox" is="emby-checkbox" class="chkRememberAudioSelections"/> <span>${RememberAudioSelections}</span> </label> <div class="fieldDescription checkboxFieldDescription">${RememberAudioSelectionsHelp}</div> </div> <div class="checkboxContainer checkboxContainer-withDescription"> <label> <input type="checkbox" is="emby-checkbox" class="chkRememberSubtitleSelections"/> <span>${RememberSubtitleSelections}</span> </label> <div class="fieldDescription checkboxFieldDescription">${RememberSubtitleSelectionsHelp}</div> </div> <div class="checkboxContainer checkboxContainer-withDescription fldEnableNextVideoOverlay"> <label> <input type="checkbox" is="emby-checkbox" class="chkEnableNextVideoOverlay"/> <span>${EnableNextVideoInfoOverlay}</span> </label> <div class="fieldDescription checkboxFieldDescription">${EnableNextVideoInfoOverlayHelp}</div> </div> <div class="checkboxContainer fldExternalPlayer checkboxContainer-withDescription hide"> <label> <input type="checkbox" is="emby-checkbox" class="chkExternalVideoPlayer"/> <span>${EnableExternalVideoPlayers}</span> </label> <div class="fieldDescription checkboxFieldDescription"> <div class="labelNativeExternalPlayers">${EnableExternalVideoPlayersHelp}</div> </div> </div> <div class="selectContainer"> <select is="emby-select" class="selectChromecastVersion" label="${LabelChromecastVersion}"> <option value="stable">${LabelStable}</option> <option value="unstable">${LabelUnstable}</option> </select> </div> <div class="selectContainer"> <select is="emby-select" class="selectSkipForwardLength" label="${LabelSkipForwardLength}"></select> </div> <div class="selectContainer"> <select is="emby-select" class="selectSkipBackLength" label="${LabelSkipBackLength}"></select> </div> </div> <button is="emby-button" type="submit" class="raised button-submit block btnSave hide"> <span>${Save}</span> </button> </form> ',"core"),e.element.querySelector("form").addEventListener("submit",x.bind(t)),e.enableSaveButton&&e.element.querySelector(".btnSave").classList.remove("hide"),e.element.querySelector(".selectLabelMaxVideoWidth").addEventListener("change",g.bind(t)),t.loadData(),e.autoFocus&&l.Z.autoFocus(e.element)}var A=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,C(t,this)}var t,i;return t=e,i=[{key:"loadData",value:function(){var e=this,t=e.options.element;s.ZP.show();var i=e.options.userId,l=d.Z.getApiClient(e.options.serverId),r=e.options.userSettings;l.getUser(i).then((function(u){r.setUserInfo(i,l).then((function(){e.dataLoaded=!0,function(e,t,i,l){var r=l.getCurrentUserId(),u=t.Id;!function(e,t,i){if(t.Policy.EnableVideoPlaybackTranscoding?e.querySelector(".videoQualitySection").classList.remove("hide"):e.querySelector(".videoQualitySection").classList.add("hide"),n.M.supports("multiserver"))return e.querySelector(".fldVideoInNetworkQuality").classList.remove("hide"),e.querySelector(".fldVideoInternetQuality").classList.remove("hide"),void(t.Policy.EnableAudioPlaybackTranscoding?e.querySelector(".musicQualitySection").classList.remove("hide"):e.querySelector(".musicQualitySection").classList.add("hide"));i.getEndpointInfo().then((function(i){i.IsInNetwork?(e.querySelector(".fldVideoInNetworkQuality").classList.remove("hide"),e.querySelector(".fldVideoInternetQuality").classList.add("hide"),e.querySelector(".musicQualitySection").classList.add("hide")):(e.querySelector(".fldVideoInNetworkQuality").classList.add("hide"),e.querySelector(".fldVideoInternetQuality").classList.remove("hide"),t.Policy.EnableAudioPlaybackTranscoding?e.querySelector(".musicQualitySection").classList.remove("hide"):e.querySelector(".musicQualitySection").classList.add("hide"))}))}(e,t,l),e.querySelector("#selectAllowedAudioChannels").value=i.allowedAudioChannels(),l.getCultures().then((function(i){!function(e,t){var i="";i+="<option value=''>".concat(c.ZP.translate("AnyLanguage"),"</option>");for(var a=0,o=t.length;a<o;a++){var n=t[a];i+="<option value='".concat(n.ThreeLetterISOLanguageName,"'>").concat(n.DisplayName,"</option>")}e.innerHTML=i}(e.querySelector("#selectAudioLanguage"),i),e.querySelector("#selectAudioLanguage",e).value=t.Configuration.AudioLanguagePreference||"",e.querySelector(".chkEpisodeAutoPlay").checked=t.Configuration.EnableNextEpisodeAutoPlay||!1})),n.M.supports("externalplayerintent")&&u===r?e.querySelector(".fldExternalPlayer").classList.remove("hide"):e.querySelector(".fldExternalPlayer").classList.add("hide"),u===r&&(t.Policy.EnableVideoPlaybackTranscoding||t.Policy.EnableAudioPlaybackTranscoding)?(e.querySelector(".qualitySections").classList.remove("hide"),n.M.supports("chromecast")&&t.Policy.EnableVideoPlaybackTranscoding?e.querySelector(".fldChromecastQuality").classList.remove("hide"):e.querySelector(".fldChromecastQuality").classList.add("hide")):(e.querySelector(".qualitySections").classList.add("hide"),e.querySelector(".fldChromecastQuality").classList.add("hide")),e.querySelector(".chkPlayDefaultAudioTrack").checked=t.Configuration.PlayDefaultAudioTrack||!1,e.querySelector(".chkPreferFmp4HlsContainer").checked=i.preferFmp4HlsContainer(),e.querySelector(".chkEnableCinemaMode").checked=i.enableCinemaMode(),e.querySelector(".chkEnableNextVideoOverlay").checked=i.enableNextVideoInfoOverlay(),e.querySelector(".chkRememberAudioSelections").checked=t.Configuration.RememberAudioSelections||!1,e.querySelector(".chkRememberSubtitleSelections").checked=t.Configuration.RememberSubtitleSelections||!1,e.querySelector(".chkExternalVideoPlayer").checked=o.Z.enableSystemExternalPlayers(),v(e.querySelector(".selectVideoInNetworkQuality"),!0,"Video"),v(e.querySelector(".selectVideoInternetQuality"),!1,"Video"),v(e.querySelector(".selectMusicInternetQuality"),!1,"Audio"),S(e.querySelector(".selectChromecastVideoQuality")),e.querySelector(".selectChromecastVersion").value=i.chromecastVersion(),e.querySelector(".selectLabelMaxVideoWidth").value=o.Z.maxVideoWidth();var d=e.querySelector(".selectSkipForwardLength");m(d),d.value=i.skipForwardLength();var b=e.querySelector(".selectSkipBackLength");m(b),b.value=i.skipBackLength(),function(e){a.Z.tizen||a.Z.web0s?e.querySelector(".fldEpisodeAutoPlay").classList.add("hide"):e.querySelector(".fldEpisodeAutoPlay").classList.remove("hide")}(e),s.ZP.hide()}(t,u,r,l)}))}))}},{key:"submit",value:function(){x.call(this)}},{key:"destroy",value:function(){this.options=null}}],i&&h(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),L=A,q=i(60934),P=i(87680),V=q.UserSettings;function E(e,t){var i,a=t.userId||ApiClient.getCurrentUserId(),o=a===ApiClient.getCurrentUserId()?q:new V;e.addEventListener("viewshow",(function(){i?i.loadData():i=new L({serverId:ApiClient.serverId(),userId:a,element:e.querySelector(".settingsContainer"),userSettings:o,enableSaveButton:!0,enableSaveConfirmation:!0,autoFocus:P.default.isEnabled()})})),e.addEventListener("viewdestroy",(function(){i&&(i.destroy(),i=null)}))}}}]);