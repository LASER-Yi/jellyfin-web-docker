"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[42562],{12658:function(e,t,n){n.d(t,{w:function(){return h}}),n(23938),n(61013),n(27471),n(19068),n(87211),n(25901),n(92189),n(63238),n(95163),n(99785),n(91047),n(5769),n(17460),n(14078);var i=n(34643),r=n(30325),a=n(72365),s=n(94994);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===o(r)?r:String(r)),i)}var r}n(61414);var c="alphaPickerButton-selected";function u(){var e=this.querySelector(".".concat(c));e?i.Z.focus(e):i.Z.autoFocus(this,!0)}function d(e){var t="alphaPickerButton";return r.Z.tv&&(t+=" alphaPickerButton-tv"),e&&(t+=" alphaPickerButton-vertical"),t}function f(e,t){return e.map((function(e){return function(e,t){return'<button data-value="'.concat(e,'" class="').concat(d(t),'">').concat(e,"</button>")}(e,t)}))}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;this.options=t;var i,o,l,c,h=t.element,v=t.itemsContainer,m=t.itemClass;function p(){o=null,n.value(i)}function y(){if(c=null,document.activeElement===l){var e=l.getAttribute("data-value");n.value(e,!0)}}function g(e){var t=a.ZP.parentWithClass(e.target,"alphaPickerButton");if(t){var n=t.getAttribute("data-value");h.dispatchEvent(new CustomEvent("alphavalueclicked",{cancelable:!1,detail:{value:n}}))}}function b(e){var t=a.ZP.parentWithClass(e.target,"alphaPickerButton");if(t){var n=t.getAttribute("data-value");(this._currentValue||"").toUpperCase()===n.toUpperCase()?this.value(null,!0):this.value(n,!0)}}function S(e){c&&(clearTimeout(c),c=null);var t=a.ZP.parentWithClass(e.target,"alphaPickerButton");t&&(l=t,c=setTimeout(y,600))}function I(e){var t=a.ZP.parentWithClass(e.target,m);if(t){var n=t.getAttribute("data-prefix");null!=n&&n.length&&(i=n[0],o&&clearTimeout(o),o=setTimeout(p,100))}}this.enabled=function(e){e?(v&&v.addEventListener("focus",I,!0),"keyboard"===t.mode&&h.addEventListener("click",g),"click"!==t.valueChangeEvent?h.addEventListener("focus",S,!0):h.addEventListener("click",b.bind(this))):(v&&v.removeEventListener("focus",I,!0),h.removeEventListener("click",g),h.removeEventListener("focus",S,!0),h.removeEventListener("click",b.bind(this)))},function(e,t){e.classList.add("alphaPicker"),r.Z.tv&&e.classList.add("alphaPicker-tv");var n=e.classList.contains("alphaPicker-vertical");n||e.classList.add("focuscontainer-x");var i,a="",o=d(n),l="alphaPickerRow";n&&(l+=" alphaPickerRow-vertical"),a+='<div class="'.concat(l,'">'),"keyboard"===t.mode?a+='<button data-value=" " is="paper-icon-button-light" class="'.concat(o,'" aria-label="').concat(s.ZP.translate("ButtonSpace"),'"><span class="material-icons alphaPickerButtonIcon space_bar" aria-hidden="true"></span></button>'):a+=f(i=["#"],n).join(""),a+=f(i=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n).join(""),"keyboard"===t.mode?(a+='<button data-value="backspace" is="paper-icon-button-light" class="'.concat(o,'" aria-label="').concat(s.ZP.translate("ButtonBackspace"),'"><span class="material-icons alphaPickerButtonIcon backspace" aria-hidden="true"></span></button>'),a+="</div>",i=["0","1","2","3","4","5","6","7","8","9"],a+='<div class="'.concat(l,'">'),a+="<br/>",a+=f(i,n).join(""),a+="</div>"):a+="</div>",e.innerHTML=a,e.classList.add("focusable"),e.focus=u}(h,t),this.enabled(!0),this.visible(!0)}var t,n;return t=e,(n=[{key:"value",value:function(e,t){var n,i,r=this.options.element;if(void 0!==e)if(null!=e){if(e=e.toUpperCase(),this._currentValue=e,"keyboard"!==this.options.mode){i=r.querySelector(".".concat(c));try{n=r.querySelector(".alphaPickerButton[data-value='".concat(e,"']"))}catch(e){console.error("error in querySelector:",e)}n&&n!==i&&n.classList.add(c),i&&i!==n&&i.classList.remove(c)}}else this._currentValue=e,(i=r.querySelector(".".concat(c)))&&i.classList.remove(c);return t&&r.dispatchEvent(new CustomEvent("alphavaluechanged",{cancelable:!1,detail:{value:e}})),this._currentValue}},{key:"on",value:function(e,t){this.options.element.addEventListener(e,t)}},{key:"off",value:function(e,t){this.options.element.removeEventListener(e,t)}},{key:"updateControls",value:function(e){e.NameLessThan?this.value("#"):this.value(e.NameStartsWith),this.visible(-1!==e.SortBy.indexOf("SortName"))}},{key:"visible",value:function(e){this.options.element.style.visibility=e?"visible":"hidden"}},{key:"values",value:function(){for(var e=this.options.element.querySelectorAll(".alphaPickerButton"),t=[],n=0,i=e.length;n<i;n++)t.push(e[n].getAttribute("data-value"));return t}},{key:"focus",value:function(){var e=this.options.element;i.Z.autoFocus(e,!0)}},{key:"destroy",value:function(){var e=this.options.element;this.enabled(!1),e.classList.remove("focuscontainer-x"),this.options=null}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Z=h},82427:function(e,t,n){n(5769),n(63238),n(61418),n(17460),n(14078),n(27471),n(32081);var i=n(61008),r=n(58517),a=n(48957),s=n(98301),o=n(30325),l=n(57366),c=n(72365),u=n(28540),d=n(34643),f=n(44038),h=n(81643),v=(n(67752),n(18613)),m=n(28172),p=Object.create(HTMLDivElement.prototype);function y(e){var t=this,n=t.multiSelect;!1!==(null==n?void 0:n.onContainerClick.call(t,e))&&i.ZP.onClick.call(t,e)}function g(e){return e.preventDefault(),e.stopPropagation(),!1}function b(e){var t=e.target,n=c.ZP.parentWithAttribute(t,"data-id");if(null!=n&&n.getAttribute("data-serverid"))return r.default.handleCommand("menu",{sourceElement:n}),e.preventDefault(),e.stopPropagation(),!1}function S(e,t,i){var r=this;Promise.all([n.e(61570),n.e(83264)]).then(n.bind(n,61570)).then((function(e){e.onUserDataChanged(i,r)}));var a=I(r);-1===a.indexOf("markfavorite")&&-1===a.indexOf("markplayed")||r.notifyRefreshNeeded()}function I(e){var t=e.getAttribute("data-monitor");return t?t.split(","):[]}function P(e,t,i){var r=this;if(-1===I(r).indexOf("timers")){var a=i.ProgramId,s=i.Id;Promise.all([n.e(61570),n.e(83264)]).then(n.bind(n,61570)).then((function(e){e.onTimerCreated(a,s,r)}))}else r.notifyRefreshNeeded()}function w(){-1!==I(this).indexOf("seriestimers")&&this.notifyRefreshNeeded()}function k(e,t,i){var r=this;-1===I(r).indexOf("timers")?Promise.all([n.e(61570),n.e(83264)]).then(n.bind(n,61570)).then((function(e){e.onTimerCancelled(i.Id,r)})):r.notifyRefreshNeeded()}function x(e,t,i){var r=this;-1===I(r).indexOf("seriestimers")?Promise.all([n.e(61570),n.e(83264)]).then(n.bind(n,61570)).then((function(e){e.onSeriesTimerCancelled(i.Id,r)})):r.notifyRefreshNeeded()}function T(e,t,n){var i=this,r=I(i);if(-1===r.indexOf("seriestimers")&&-1===r.indexOf("timers")){var a=n.ItemsAdded||[],s=n.ItemsRemoved||[];if(a.length||s.length){var o=i.getAttribute("data-parentid");if(o){var l=n.FoldersAddedTo||[],c=n.FoldersRemovedFrom||[],u=n.CollectionFolders||[];if(-1===l.indexOf(o)&&-1===c.indexOf(o)&&-1===u.indexOf(o))return}i.notifyRefreshNeeded()}}}function C(e,t){var n,i=this,r=t.state,a=I(i);if(r.NowPlayingItem&&"Video"===r.NowPlayingItem.MediaType){if(-1!==a.indexOf("videoplayback"))return void i.notifyRefreshNeeded(!0)}else if("Audio"===(null===(n=r.NowPlayingItem)||void 0===n?void 0:n.MediaType)&&-1!==a.indexOf("audioplayback"))return void i.notifyRefreshNeeded(!0)}function O(e,t,n,i){var r=n.bind(e);i=i||f.default,h.Z.on(i,t,r),e["event_"+t]=r}function E(e,t,n){var i=e["event_"+t];i&&(n=n||f.default,h.Z.off(n,t,i),e["event_"+t]=null)}function L(e,t){e.refreshInterval&&(clearInterval(e.refreshInterval),e.refreshInterval=null,t||(e.refreshIntervalEndTime=null))}function j(e,t){L(e),t||(t=parseInt(e.getAttribute("data-refreshinterval")||"0",10)),t&&(e.refreshInterval=setInterval(e.notifyRefreshNeeded.bind(e),t),e.refreshIntervalEndTime=(new Date).getTime()+t)}function N(e){var t=e.Items||e,n=this.parentContainer;n&&(t.length?n.classList.remove("hide"):n.classList.add("hide"));var i,r,a=document.activeElement;this.contains(a)&&(r=!0,i=a.getAttribute("data-id")),this.innerHTML=this.getItemsHtml(t),s.default.lazyChildren(this),r&&function(e,t){if(t){var n=e.querySelector('[data-id="'+t+'"]');if(n)try{return void d.Z.focus(n)}catch(e){console.error(e)}}d.Z.autoFocus(e)}(this,i),j(this),this.afterRefresh&&this.afterRefresh(e)}p.enableMultiSelect=function(e){var t=this.multiSelect;if(e){if(!t){var i=this;Promise.all([n.e(52943),n.e(9245)]).then(n.bind(n,52943)).then((function(e){var t=e.default;i.multiSelect=new t({container:i,bindOnClick:!1})}))}}else t&&(t.destroy(),this.multiSelect=null)},p.enableDragReordering=function(e){var t=this.sortable;if(e){if(!t){var n=this;n.sortable=new m.ZP(n,{draggable:".listItem",handle:".listViewDragHandle",onEnd:function(e){return function(e,t){var n=e.item,i=e.newIndex,r=n.getAttribute("data-playlistitemid"),a=n.getAttribute("data-playlistid");if(a){var s=n.getAttribute("data-serverid"),o=v.Z.getApiClient(s);u.ZP.show(),o.ajax({url:o.getUrl("Playlists/"+a+"/Items/"+r+"/Move/"+i),type:"POST"}).then((function(){u.ZP.hide()}),(function(){u.ZP.hide(),t.refreshItems()}))}else{var l=e.oldIndex;n.dispatchEvent(new CustomEvent("itemdrop",{detail:{oldIndex:l,newIndex:i,playlistItemId:r},bubbles:!0,cancelable:!1}))}}(e,n)}})}}else t&&(t.destroy(),this.sortable=null)},p.createdCallback=function(){this.classList.add("itemsContainer")},p.attachedCallback=function(){this.addEventListener("click",y),l.Z.touch?this.addEventListener("contextmenu",g):"false"!==this.getAttribute("data-contextmenu")&&this.addEventListener("contextmenu",b),(o.Z.desktop||o.Z.mobile&&"false"!==this.getAttribute("data-multiselect"))&&this.enableMultiSelect(!0),o.Z.tv&&this.classList.add("itemsContainer-tv"),i.ZP.on(this,{click:!1}),O(this,"UserDataChanged",S),O(this,"TimerCreated",P),O(this,"SeriesTimerCreated",w),O(this,"TimerCancelled",k),O(this,"SeriesTimerCancelled",x),O(this,"LibraryChanged",T),O(this,"playbackstop",C,a.O),"true"===this.getAttribute("data-dragreorder")&&this.enableDragReordering(!0)},p.detachedCallback=function(){L(this),this.enableMultiSelect(!1),this.enableDragReordering(!1),this.removeEventListener("click",y),this.removeEventListener("contextmenu",b),this.removeEventListener("contextmenu",g),i.ZP.off(this,{click:!1}),E(this,"UserDataChanged"),E(this,"TimerCreated"),E(this,"SeriesTimerCreated"),E(this,"TimerCancelled"),E(this,"SeriesTimerCancelled"),E(this,"LibraryChanged"),E(this,"playbackstop",a.O),this.fetchData=null,this.getItemsHtml=null,this.parentContainer=null},p.pause=function(){L(this,!0),this.paused=!0},p.resume=function(e){this.paused=!1;var t=this.refreshIntervalEndTime;if(t){var n=t-(new Date).getTime();n>0&&!this.needsRefresh?j(this,n):(this.needsRefresh=!0,this.refreshIntervalEndTime=null)}return this.needsRefresh||null!=e&&e.refresh?this.refreshItems():Promise.resolve()},p.refreshItems=function(){return this.fetchData?this.paused?(this.needsRefresh=!0,Promise.resolve()):(this.needsRefresh=!1,this.fetchData().then(N.bind(this))):Promise.resolve()},p.notifyRefreshNeeded=function(e){if(this.paused)this.needsRefresh=!0;else{var t=this.refreshTimeout;t&&clearTimeout(t),!0===e?this.refreshItems():this.refreshTimeout=setTimeout(this.refreshItems.bind(this),1e4)}},document.registerElement("emby-itemscontainer",{prototype:p,extends:"div"})},42562:function(e,t,n){n.d(t,{Z:function(){return Q}});var i=n(24246),r=n(78914),a=n(27378),s=n(28540),o=n(60934),l=n(12658),c=function(){return c=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},c.apply(this,arguments)},u=function(e){var t=e.viewQuerySettings,n=e.setViewQuerySettings,r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return s}((0,a.useState)(),2),s=r[0],o=r[1],u=(0,a.useRef)(null);null==s||s.updateControls(t);var d=(0,a.useCallback)((function(e){var t,i=e.detail.value;t="#"===i?{NameLessThan:"A",NameStartsWith:void 0}:{NameLessThan:void 0,NameStartsWith:i},n((function(e){return c(c(c({},e),{StartIndex:0}),t)}))}),[n]);return(0,a.useEffect)((function(){var e=u.current;return o(new l.Z({element:e,valueChangeEvent:"click"})),e&&e.addEventListener("alphavaluechanged",d),function(){null==e||e.removeEventListener("alphavaluechanged",d)}}),[d]),(0,i.jsx)("div",{ref:u,className:"alphaPicker alphaPicker-fixed alphaPicker-fixed-right alphaPicker-vertical alphabetPicker-right"})},d=n(43771),f=function(){return f=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},f.apply(this,arguments)},h=function(e){var t=e.topParentId,r=e.getItemTypes,s=e.getVisibleFilters,o=e.getFilterMenuOptions,l=e.viewQuerySettings,c=e.setViewQuerySettings,u=(0,a.useRef)(null),h=(0,a.useCallback)((function(){n.e(77611).then(n.bind(n,77611)).then((function(e){(new(0,e.default)).show({settings:l,visibleSettings:s(),parentId:t,itemTypes:r(),serverId:window.ApiClient.serverId(),filterMenuOptions:o(),setfilters:c}).catch((function(){}))})).catch((function(e){console.error("[Filter] failed to load filter menu",e)}))}),[l,s,t,r,o,c]);return(0,a.useEffect)((function(){var e,t=null===(e=u.current)||void 0===e?void 0:e.querySelector(".btnFilter");return null==t||t.addEventListener("click",h),function(){null==t||t.removeEventListener("click",h)}}),[h]),(0,i.jsx)("div",f({ref:u},{children:(0,i.jsx)(d.Z,{is:"paper-icon-button-light",className:"btnFilter autoSize",title:"Filter",icon:"material-icons filter_list"})}))},v=n(96398),m=n(98301),p=(n(82427),function(){return p=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},p.apply(this,arguments)}),y=function(e){var t=e.viewQuerySettings,n=e.getItemsHtml,r=(0,a.useRef)(null);(0,a.useEffect)((function(){var e,t=null===(e=r.current)||void 0===e?void 0:e.querySelector(".itemsContainer");t.innerHTML=n(),m.default.lazyChildren(t)}),[n]);var s="list"==t.imageType?"vertical-list":"vertical-wrap";return(0,i.jsx)("div",p({ref:r},{children:(0,i.jsx)(v.Z,{className:"itemsContainer ".concat(s," centered padded-left padded-right padded-right-withalphapicker")})}))},g=n(94994),b=function(){return b=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},b.apply(this,arguments)},S=function(e){var t=e.viewQuerySettings,n=e.setViewQuerySettings,r=e.itemsResult,s=void 0===r?{}:r,l=o.libraryPageSize(void 0),c=s.TotalRecordCount||0,u=t.StartIndex||0,f=c?u+1:0,h=l?Math.min(u+l,c):c,v=l>0&&l<c,m=(0,a.useRef)(null),p=(0,a.useCallback)((function(){if(l>0){var e=u+l;n((function(t){return b(b({},t),{StartIndex:e})}))}}),[l,n,u]),y=(0,a.useCallback)((function(){if(l>0){var e=Math.max(0,u-l);n((function(t){return b(b({},t),{StartIndex:e})}))}}),[l,n,u]);return(0,a.useEffect)((function(){var e,t,n=null===(e=m.current)||void 0===e?void 0:e.querySelector(".btnNextPage");n&&(n.disabled=u+l>=c,n.addEventListener("click",p));var i=null===(t=m.current)||void 0===t?void 0:t.querySelector(".btnPreviousPage");return i&&(i.disabled=!u,i.addEventListener("click",y)),function(){null==n||n.removeEventListener("click",p),null==i||i.removeEventListener("click",y)}}),[c,p,y,l,u]),(0,i.jsx)("div",b({ref:m},{children:(0,i.jsx)("div",b({className:"paging"},{children:(0,i.jsxs)("div",b({className:"listPaging",style:{display:"flex",alignItems:"center"}},{children:[(0,i.jsx)("span",{children:g.ZP.translate("ListPaging",f,h,c)}),v&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Z,{is:"paper-icon-button-light",className:"btnPreviousPage autoSize",icon:"material-icons arrow_back"}),(0,i.jsx)(d.Z,{is:"paper-icon-button-light",className:"btnNextPage autoSize",icon:"material-icons arrow_forward"})]})]}))}))}))},I=function(){return I=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},I.apply(this,arguments)},P=function(e){var t=e.getVisibleViewSettings,r=e.viewQuerySettings,s=e.setViewQuerySettings,o=(0,a.useRef)(null),l=(0,a.useCallback)((function(){n.e(49906).then(n.bind(n,49906)).then((function(e){(new(0,e.default)).show({settings:r,visibleSettings:t(),setviewsettings:s}).catch((function(){}))})).catch((function(e){console.error("[SelectView] failed to load view settings",e)}))}),[t,r,s]);return(0,a.useEffect)((function(){var e,t=null===(e=o.current)||void 0===e?void 0:e.querySelector(".btnSelectView");return null==t||t.addEventListener("click",l),function(){null==t||t.removeEventListener("click",l)}}),[l]),(0,i.jsx)("div",I({ref:o},{children:(0,i.jsx)(d.Z,{is:"paper-icon-button-light",className:"btnSelectView autoSize",title:"ButtonSelectView",icon:"material-icons view_comfy"})}))},w=n(48957),k=function(){return k=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},k.apply(this,arguments)},x=function(e){var t=e.itemsResult,n=void 0===t?{}:t,r=e.topParentId,s=(0,a.useRef)(null),o=(0,a.useCallback)((function(){window.ApiClient.getItem(window.ApiClient.getCurrentUserId(),r).then((function(e){w.O.shuffle(e)})).catch((function(e){console.error("[Shuffle] failed to fetch items",e)}))}),[r]);return(0,a.useEffect)((function(){var e,t=null===(e=s.current)||void 0===e?void 0:e.querySelector(".btnShuffle");t&&t.addEventListener("click",o)}),[n.TotalRecordCount,o]),(0,i.jsx)("div",k({ref:s},{children:(0,i.jsx)(d.Z,{is:"paper-icon-button-light",className:"btnShuffle autoSize",title:"Shuffle",icon:"material-icons shuffle"})}))},T=function(){return T=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},T.apply(this,arguments)},C=function(e){var t=e.getSortMenuOptions,r=e.viewQuerySettings,s=e.setViewQuerySettings,o=(0,a.useRef)(null),l=(0,a.useCallback)((function(){n.e(82059).then(n.bind(n,82059)).then((function(e){(new(0,e.default)).show({settings:r,sortOptions:t(),setSortValues:s}).catch((function(){}))})).catch((function(e){console.error("[Sort] failed to load sort menu",e)}))}),[t,r,s]);return(0,a.useEffect)((function(){var e,t=null===(e=o.current)||void 0===e?void 0:e.querySelector(".btnSort");return null==t||t.addEventListener("click",l),function(){null==t||t.removeEventListener("click",l)}}),[l]),(0,i.jsx)("div",T({ref:o},{children:(0,i.jsx)(d.Z,{is:"paper-icon-button-light",className:"btnSort autoSize",title:"Sort",icon:"material-icons sort_by_alpha"})}))},O=function(){return O=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},O.apply(this,arguments)},E=function(){var e=(0,a.useRef)(null),t=(0,a.useCallback)((function(){n.e(19449).then(n.bind(n,19449)).then((function(e){var t=e.default,n=window.ApiClient.serverId();(new t).show({items:[],serverId:n}).catch((function(){}))})).catch((function(e){console.error("[NewCollection] failed to load collection editor",e)}))}),[]);return(0,a.useEffect)((function(){var n,i=null===(n=e.current)||void 0===n?void 0:n.querySelector(".btnNewCollection");i&&i.addEventListener("click",t)}),[t]),(0,i.jsx)("div",O({ref:e},{children:(0,i.jsx)(d.Z,{is:"paper-icon-button-light",className:"btnNewCollection autoSize",title:"Add",icon:"material-icons add"})}))},L=n(18613),j=n(37386),N=n(63873),R=n(61570),Z=function(){return Z=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Z.apply(this,arguments)},V=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return s},H=function(e){var t=[r.hEf.BasicSyncInfo,r.hEf.MediaSourceCount];return"primary"===e.imageType&&t.push(r.hEf.PrimaryImageAspectRatio),t.join(",")},A=function(){return["showTitle","showYear","imageType","cardLayout"]},D=function(){return{}},B=function(){return["IsUnplayed","IsPlayed","IsFavorite","IsResumable","VideoType","HasSubtitles","HasTrailer","HasSpecialFeature","HasThemeSong","HasThemeVideo"]},F=function(){return[{name:g.ZP.translate("Name"),value:"SortName,ProductionYear"},{name:g.ZP.translate("OptionRandom"),value:"Random"},{name:g.ZP.translate("OptionImdbRating"),value:"CommunityRating,SortName,ProductionYear"},{name:g.ZP.translate("OptionCriticRating"),value:"CriticRating,SortName,ProductionYear"},{name:g.ZP.translate("OptionDateAdded"),value:"DateCreated,SortName,ProductionYear"},{name:g.ZP.translate("OptionDatePlayed"),value:"DatePlayed,SortName,ProductionYear"},{name:g.ZP.translate("OptionParentalRating"),value:"OfficialRating,SortName,ProductionYear"},{name:g.ZP.translate("OptionPlayCount"),value:"PlayCount,SortName,ProductionYear"},{name:g.ZP.translate("OptionReleaseDate"),value:"PremiereDate,SortName,ProductionYear"},{name:g.ZP.translate("Runtime"),value:"Runtime,SortName,ProductionYear"}]},M={showTitle:!0,showYear:!0,imageType:"primary",viewType:"",cardLayout:!1,SortBy:"SortName",SortOrder:"Ascending",IsPlayed:!1,IsUnplayed:!1,IsFavorite:!1,IsResumable:!1,Is4K:null,IsHD:null,IsSD:null,Is3D:null,VideoTypes:"",SeriesStatus:"",HasSubtitles:null,HasTrailer:null,HasSpecialFeature:null,HasThemeSong:null,HasThemeVideo:null,GenreIds:"",StartIndex:0},Q=function(e){var t=e.topParentId,l=e.isBtnShuffleEnabled,c=void 0!==l&&l,d=e.isBtnFilterEnabled,f=void 0===d||d,v=e.isBtnNewCollectionEnabled,m=void 0!==v&&v,p=e.isAlphaPickerEnabled,b=void 0===p||p,I=e.getBasekey,w=e.getItemTypes,k=e.getNoItemsMessage,T=(0,a.useCallback)((function(){return"".concat(t," - ").concat(I())}),[I,t]),O=V((0,a.useState)(!1),2),Q=O[0],_=O[1],q=V((0,j._)("viewQuerySettings - ".concat(T()),M),2),U=q[0],Y=q[1],z=V((0,a.useState)({}),2),W=z[0],G=z[1],K=(0,a.useRef)(null),J=(0,a.useCallback)((function(){var e=w().join(",");return"Movie"===e||"BoxSet"===e?"movies":null}),[w]),X=(0,a.useCallback)((function(){var e,t,n,i;"banner"===U.imageType?e="banner":"disc"===U.imageType?(e="square",n=!0):"logo"===U.imageType?(e="backdrop",i=!0):"thumb"===U.imageType?(e="backdrop",t=!0):e="autoVertical";var r={shape:e,showTitle:U.showTitle,showYear:U.showYear,cardLayout:U.cardLayout,centerText:!0,context:J(),coverImage:!0,preferThumb:t,preferDisc:n,preferLogo:i,overlayPlayButton:!1,overlayMoreButton:!0,overlayText:!U.showTitle};return r.items=W.Items||[],r}),[J,W.Items,U.cardLayout,U.imageType,U.showTitle,U.showYear]),$=(0,a.useCallback)((function(){var e,t="";return t="list"===U.imageType?N.Z.getListViewHtml({items:W.Items||[],context:J()}):R.default.getCardsHtml(W.Items||[],X()),(null===(e=W.Items)||void 0===e?void 0:e.length)||(t+='<div class="noItemsMessage centerMessage">',t+="<h1>"+g.ZP.translate("MessageNothingHere")+"</h1>",t+="<p>"+g.ZP.translate(k())+"</p>",t+="</div>"),t}),[X,J,W.Items,k,U.imageType]),ee=(0,a.useCallback)((function(){var e,n=function(e){var t=[];return e.IsPlayed&&t.push(r.yrR.IsPlayed),e.IsUnplayed&&t.push(r.yrR.IsUnplayed),e.IsFavorite&&t.push(r.yrR.IsFavorite),e.IsResumable&&t.push(r.yrR.IsResumable),t}(U);return U.IsHD&&(e=!0),U.IsSD&&(e=!1),{SortBy:U.SortBy,SortOrder:U.SortOrder,IncludeItemTypes:w().join(","),Recursive:!0,Fields:H(U),ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Banner,Thumb,Disc,Logo",Limit:o.libraryPageSize(void 0)||void 0,IsFavorite:"favorites"===I()||null,VideoTypes:U.VideoTypes,GenreIds:U.GenreIds,Is4K:!!U.Is4K||null,IsHD:e,Is3D:!!U.Is3D||null,HasSubtitles:!!U.HasSubtitles||null,HasTrailer:!!U.HasTrailer||null,HasSpecialFeature:!!U.HasSpecialFeature||null,HasThemeSong:!!U.HasThemeSong||null,HasThemeVideo:!!U.HasThemeVideo||null,Filters:n.length?n.join(","):null,StartIndex:U.StartIndex,NameLessThan:U.NameLessThan,NameStartsWith:U.NameStartsWith,ParentId:t}}),[U,w,I,t]),te=(0,a.useCallback)((function(){s.ZP.show();var e=L.Z.getApiClient(window.ApiClient.serverId());return e.getItems(e.getCurrentUserId(),Z({},ee()))}),[ee]),ne=(0,a.useCallback)((function(){var e=K.current;e?(_(!1),te().then((function(t){G(t),window.scrollTo(0,0),Promise.resolve().then(n.bind(n,87680)).then((function(t){t.default.autoFocus(e)})).catch((function(e){console.error("[ViewItemsContainer] failed to load autofocuser",e)})),s.ZP.hide(),_(!0)})).catch((function(e){console.error("[ViewItemsContainer] failed to fetch data",e)}))):console.error("Unexpected null reference")}),[te]);return(0,a.useEffect)((function(){ne()}),[ne]),(0,i.jsxs)("div",Z({ref:K},{children:[(0,i.jsxs)("div",Z({className:"flex align-items-center justify-content-center flex-wrap-wrap padded-top padded-left padded-right padded-bottom focuscontainer-x"},{children:[(0,i.jsx)(S,{itemsResult:W,viewQuerySettings:U,setViewQuerySettings:Y}),c&&(0,i.jsx)(x,{itemsResult:W,topParentId:t}),(0,i.jsx)(P,{getVisibleViewSettings:A,viewQuerySettings:U,setViewQuerySettings:Y}),(0,i.jsx)(C,{getSortMenuOptions:F,viewQuerySettings:U,setViewQuerySettings:Y}),f&&(0,i.jsx)(h,{topParentId:t,getItemTypes:w,getVisibleFilters:B,getFilterMenuOptions:D,viewQuerySettings:U,setViewQuerySettings:Y}),m&&(0,i.jsx)(E,{})]})),b&&(0,i.jsx)(u,{viewQuerySettings:U,setViewQuerySettings:Y}),Q&&(0,i.jsx)(y,{viewQuerySettings:U,getItemsHtml:$}),(0,i.jsx)("div",Z({className:"flex align-items-center justify-content-center flex-wrap-wrap padded-top padded-left padded-right padded-bottom focuscontainer-x"},{children:(0,i.jsx)(S,{itemsResult:W,viewQuerySettings:U,setViewQuerySettings:Y})}))]}))}},43771:function(e,t,n){var i=n(24246),r=n(94994),a=function(e){var t=e.is,n=e.id,i=e.className,r=e.title,a=e.icon,s=e.dataIndex,o=e.dataTag,l=e.dataProfileid;return{__html:'<button\n        is="'.concat(t,'"\n        type="button"\n        ').concat(n,'\n        class="').concat(i,'"\n        ').concat(r,"\n        ").concat(s,"\n        ").concat(o,"\n        ").concat(l,'\n    >\n        <span class="material-icons ').concat(a,'" aria-hidden="true"></span>\n    </button>')}};t.Z=function(e){var t=e.is,n=e.id,s=e.className,o=e.title,l=e.icon,c=e.dataIndex,u=e.dataTag,d=e.dataProfileid;return(0,i.jsx)("div",{dangerouslySetInnerHTML:a({is:t,id:n?'id="'.concat(n,'"'):"",className:s,title:o?'title="'.concat(r.ZP.translate(o),'"'):"",icon:l,dataIndex:c?'data-index="'.concat(c,'"'):"",dataTag:u?'data-tag="'.concat(u,'"'):"",dataProfileid:d?'data-profileid="'.concat(d,'"'):""})})}},96398:function(e,t,n){var i=n(24246),r=function(e){var t=e.className,n=e.dataId;return{__html:'<div\n        is="emby-itemscontainer"\n        class="'.concat(t,'"\n        ').concat(n,"\n    >\n    </div>")}};t.Z=function(e){var t=e.className,n=e.dataId;return(0,i.jsx)("div",{dangerouslySetInnerHTML:r({className:t,dataId:n?'data-id="'.concat(n,'"'):""})})}},37386:function(e,t,n){n.d(t,{_:function(){return a}});var i=n(27378),r=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return s};function a(e,t){var n=r((0,i.useState)((function(){var n=localStorage.getItem(e);return null!=n?JSON.parse(n):"function"==typeof t?t():t})),2),a=n[0],s=n[1];return(0,i.useEffect)((function(){localStorage.setItem(e,JSON.stringify(a))}),[e,a]),[a,s]}}}]);