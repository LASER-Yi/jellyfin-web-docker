"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2016],{70350:function(e,t,a){a(23938),a(61013),a(76056),a(98010),a(63238);var n=a(65009),i=a.n(n),r=a(61693),s=a(94994),o=a(52050),c=a(21776),l=a(24102);function u(e){var t,a,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u="",m=[],v="MusicAlbum"===e.Type||"MusicArtist"===e.MediaType||"Playlist"===e.Type||"Playlist"===e.MediaType||"MusicGenre"===e.MediaType;if(v?((n=e.SongCount||e.ChildCount)&&m.push(s.ZP.translate("TrackCount",n)),e.RunTimeTicks&&m.push(r.ZP.getDisplayDuration(e.RunTimeTicks))):"PhotoAlbum"!==e.Type&&"BoxSet"!==e.Type||(n=e.ChildCount)&&m.push(s.ZP.translate("ItemCount",n)),("Episode"===e.Type||"Photo"===e.MediaType)&&!1!==o.originalAirDate&&e.PremiereDate)try{a=r.ZP.parseISO8601Date(e.PremiereDate,"Episode"!==e.Type),t=r.ZP.toLocaleDateString(a),m.push(t)}catch(t){console.error("error parsing date:",e.PremiereDate)}if("SeriesTimer"===e.Type&&(e.RecordAnyTime?m.push(s.ZP.translate("Anytime")):m.push(r.ZP.getDisplayTime(e.StartDate)),e.RecordAnyChannel?m.push(s.ZP.translate("AllChannels")):m.push(e.ChannelName||s.ZP.translate("OneChannel"))),e.StartDate&&"Program"!==e.Type&&"SeriesTimer"!==e.Type)try{a=r.ZP.parseISO8601Date(e.StartDate),t=r.ZP.toLocaleDateString(a),m.push(t),"Recording"!==e.Type&&(t=r.ZP.getDisplayTime(a),m.push(t))}catch(t){console.error("error parsing date:",e.StartDate)}if(!1!==o.year&&e.ProductionYear&&"Series"===e.Type)if("Continuing"===e.Status)m.push(s.ZP.translate("SeriesYearToPresent",e.ProductionYear));else if(e.ProductionYear){if(t=e.ProductionYear,e.EndDate)try{var h=r.ZP.parseISO8601Date(e.EndDate).getFullYear();h!==e.ProductionYear&&(t+="-".concat(r.ZP.parseISO8601Date(e.EndDate).getFullYear()))}catch(t){console.error("error parsing date:",e.EndDate)}m.push(t)}if("Program"===e.Type)if(!1!==o.programIndicator&&(e.IsLive?m.push({html:'<div class="mediaInfoProgramAttribute mediaInfoItem liveTvProgram">'.concat(s.ZP.translate("Live"),"</div>")}):e.IsPremiere?m.push({html:'<div class="mediaInfoProgramAttribute mediaInfoItem premiereTvProgram">'.concat(s.ZP.translate("Premiere"),"</div>")}):e.IsSeries&&!e.IsRepeat?m.push({html:'<div class="mediaInfoProgramAttribute mediaInfoItem newTvProgram">'.concat(s.ZP.translate("New"),"</div>")}):e.IsSeries&&e.IsRepeat&&m.push({html:'<div class="mediaInfoProgramAttribute mediaInfoItem repeatTvProgram">'.concat(s.ZP.translate("Repeat"),"</div>")})),(e.IsSeries||e.EpisodeTitle)&&!1!==o.episodeTitle)(t=c.ZP.getDisplayName(e,{includeIndexNumber:o.episodeTitleIndexNumber}))&&m.push(i()(t));else if(e.IsMovie&&e.ProductionYear&&!1!==o.originalAirDate)m.push(e.ProductionYear);else if(e.PremiereDate&&!1!==o.originalAirDate)try{a=r.ZP.parseISO8601Date(e.PremiereDate),t=s.ZP.translate("OriginalAirDateValue",r.ZP.toLocaleDateString(a)),m.push(t)}catch(t){console.error("error parsing date:",e.PremiereDate)}else e.ProductionYear&&m.push(e.ProductionYear);if(!1!==o.year&&"Series"!==e.Type&&"Episode"!==e.Type&&"Person"!==e.Type&&"Photo"!==e.MediaType&&"Program"!==e.Type&&"Season"!==e.Type)if(e.ProductionYear)m.push(e.ProductionYear);else if(e.PremiereDate)try{t=r.ZP.parseISO8601Date(e.PremiereDate).getFullYear(),m.push(t)}catch(t){console.error("error parsing date:",e.PremiereDate)}if(e.RunTimeTicks&&"Series"!==e.Type&&"Program"!==e.Type&&"Book"!==e.Type&&!v&&!1!==o.runtime&&("Audio"===e.Type?m.push(r.ZP.getDisplayRunningTime(e.RunTimeTicks)):m.push(r.ZP.getDisplayDuration(e.RunTimeTicks))),e.OfficialRating&&"Season"!==e.Type&&"Episode"!==e.Type&&m.push({text:e.OfficialRating,cssClass:"mediaInfoOfficialRating"}),e.Video3DFormat&&m.push("3D"),"Photo"===e.MediaType&&e.Width&&e.Height&&m.push("".concat(e.Width,"x").concat(e.Height)),!1!==o.container&&"Audio"===e.Type&&e.Container&&m.push(e.Container),u+=m.map((function(e){return f(e)})).join(""),!1!==o.starRating&&(u+=p(e)),e.HasSubtitles&&!1!==o.subtitles&&(u+='<div class="mediaInfoItem mediaInfoText closedCaptionMediaInfoText">CC</div>'),e.CriticRating&&!1!==o.criticRating&&(e.CriticRating>=60?u+='<div class="mediaInfoItem mediaInfoCriticRating mediaInfoCriticRatingFresh">'.concat(e.CriticRating,"</div>"):u+='<div class="mediaInfoItem mediaInfoCriticRating mediaInfoCriticRatingRotten">'.concat(e.CriticRating,"</div>")),!1!==o.endsAt){var y=d(e);y&&(u+=f(y,"endsAt"))}return u+l.ZP.getMissingIndicator(e)}function d(e){if("Video"===e.MediaType&&e.RunTimeTicks&&!e.StartDate){var t=(new Date).getTime()+e.RunTimeTicks/1e4;t=new Date(t);var a=r.ZP.getDisplayTime(t);return s.ZP.translate("EndsAtValue",a)}return null}function f(e,t){t=t?"".concat(t," mediaInfoItem"):"mediaInfoItem";var a=e;if("string"!=typeof e&&"number"!=typeof e){if(e.html)return e.html;a=e.text,t+=" ".concat(e.cssClass)}return'<div class="'.concat(t,'">').concat(a,"</div>")}function p(e){var t="";return e.CommunityRating&&(t+='<div class="starRatingContainer mediaInfoItem">',t+='<span class="material-icons starIcon star" aria-hidden="true"></span>',t+=e.CommunityRating.toFixed(1),t+="</div>"),t}function m(e,t,a){if(!1!==a.endsAt){var n=e.querySelector(".endsAt");n&&function(e,t){var a=setInterval((function(){document.body.contains(e)?e.innerHTML=d(t):clearInterval(a)}),6e4)}(n,t)}var i=e.querySelector(".lnkChannel");i&&i.addEventListener("click",v)}function v(e){var t=this.getAttribute("data-id"),a=this.getAttribute("data-serverid");return o.appRouter.showItem(t,a),e.preventDefault(),!1}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===t.interactive&&(t.interactive=!1),u(e,t)}function y(e,t){return null==(t=t||{}).interactive&&(t.interactive=!1),"Program"===e.Type?function(e,t){var a,n,s=[];if(e.StartDate&&!1!==t.programTime)try{a="",n=r.ZP.parseISO8601Date(e.StartDate),!1!==t.startDate&&(a+=r.ZP.toLocaleDateString(n,{weekday:"short",month:"short",day:"numeric"})),a+=" ".concat(r.ZP.getDisplayTime(n)),e.EndDate&&(n=r.ZP.parseISO8601Date(e.EndDate),a+=" - ".concat(r.ZP.getDisplayTime(n))),s.push(a)}catch(t){console.error("error parsing date:",e.StartDate)}if(e.ChannelNumber&&s.push("CH ".concat(e.ChannelNumber)),e.ChannelName&&(t.interactive&&e.ChannelId?s.push({html:'<a is="emby-linkbutton" class="button-flat mediaInfoItem" href="'.concat(o.appRouter.getRouteUrl({ServerId:e.ServerId,Type:"TvChannel",Name:e.ChannelName,Id:e.ChannelId}),'">').concat(i()(e.ChannelName),"</a>")}):s.push(i()(e.ChannelName))),!1!==t.timerIndicator){var c=function(e){var t;if("SeriesTimer"===e.Type)return'<span class="material-icons mediaInfoItem mediaInfoIconItem mediaInfoTimerIcon fiber_smart_record" aria-hidden="true"></span>';if(e.TimerId||e.SeriesTimerId)t=e.Status||"Cancelled";else{if("Timer"!==e.Type)return"";t=e.Status}return e.SeriesTimerId?"Cancelled"!==t?'<span class="material-icons mediaInfoItem mediaInfoIconItem mediaInfoTimerIcon fiber_smart_record" aria-hidden="true"></span>':'<span class="material-icons mediaInfoItem mediaInfoIconItem fiber_smart_record" aria-hidden="true"></span>':'<span class="material-icons mediaInfoItem mediaInfoIconItem mediaInfoTimerIcon fiber_manual_record" aria-hidden="true"></span>'}(e);c&&s.push({html:c})}return""+s.map((function(e){return f(e)})).join("")}(e,t):""}function g(e){var t=e.Width,a=e.Height;if(t&&a){if(t>=3800||a>=2e3)return"4K";if(t>=2500||a>=1400)return e.IsInterlaced?"1440i":"1440p";if(t>=1800||a>=1e3)return e.IsInterlaced?"1080i":"1080p";if(t>=1200||a>=700)return e.IsInterlaced?"720i":"720p";if(t>=700||a>=400)return e.IsInterlaced?"480i":"480p"}return null}a(38228),t.ZP={getMediaInfoHtml:h,getEndsAt:d,getEndsAtFromPosition:function(e,t,a,n){var i=(new Date).getTime()+1/a*((e-(t||0))/1e4);i=new Date(i);var o=r.ZP.getDisplayTime(i);return!1===n?o:s.ZP.translate("EndsAtValue",o)},getPrimaryMediaInfoHtml:h,getSecondaryMediaInfoHtml:y,fillPrimaryMediaInfo:function(e,t,a){var n=h(t,a);e.innerHTML=n,m(e,t,a)},fillSecondaryMediaInfo:function(e,t,a){var n=y(t,a);e.innerHTML=n,m(e,t,a)},getMediaInfoStats:function(e){var t=[],a=(((e.MediaSources||[])[0]||{}).MediaStreams||[]).filter((function(e){return"Video"===e.Type}))[0]||{},n=function(e){if(!e.MediaSources)return null;var t=e.MediaSources[0];return t?(t.MediaStreams||[]).filter((function(e){return"Audio"===e.Type&&(e.Index===t.DefaultAudioStreamIndex||null==t.DefaultAudioStreamIndex)}))[0]:null}(e)||{};"Dvd"===e.VideoType&&t.push({type:"mediainfo",text:"Dvd"}),"BluRay"===e.VideoType&&t.push({type:"mediainfo",text:"BluRay"});var i=g(a);i&&t.push({type:"mediainfo",text:i}),a.Codec&&t.push({type:"mediainfo",text:a.Codec});var o,l=n.Channels;8===l?o="7.1":7===l?o="6.1":6===l?o="5.1":2===l&&(o="2.0"),o&&t.push({type:"mediainfo",text:o});var u=(n.Codec||"").toLowerCase();if("dca"!==u&&"dts"!==u||!n.Profile?n.Codec&&t.push({type:"mediainfo",text:n.Codec}):t.push({type:"mediainfo",text:n.Profile}),e.DateCreated&&c.ZP.enableDateAddedDisplay(e)){var d=r.ZP.parseISO8601Date(e.DateCreated);t.push({type:"added",text:s.ZP.translate("AddedOnValue","".concat(r.ZP.toLocaleDateString(d)," ").concat(r.ZP.getDisplayTime(d)))})}return t},getResolutionText:g}},78042:function(e,t,a){a.r(t),a.d(t,{default:function(){return F}}),a(5769),a(63238),a(61418),a(17460),a(14078),a(20266),a(52077),a(911),a(23938),a(27471),a(61370),a(61013),a(32081),a(43512),a(55849);var n,i,r,s,o,c=a(65009),l=a.n(c),u=a(48957),d=a(17031),f=a(57366),p=a(72365),m=a(58517),v=a(21844),h=a(61693),y=a(21776),g=a(70350),b=a(34643),P=a(81643),T=a(94994),S=a(84881),I=a(30325),L=a(60934),k=a(84280),O=(a(42855),a(61414),a(18613)),Z=a(92581);function w(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e){var t=document.createElement("div");document.body.appendChild(t),t.innerHTML='<div class="subtitleSync"> <div class="subtitleSyncContainer"> <button type="button" is="paper-icon-button-light" class="subtitleSync-closeButton"><span class="material-icons close" aria-hidden="true"></span></button> <div class="subtitleSyncTextField" contenteditable="true" spellcheck="false">0s</div> <div class="sliderContainer subtitleSyncSliderContainer"> <input is="emby-slider" type="range" step=".1" min="0" max="100" value="50" class="subtitleSyncSlider" data-slider-keep-progress="true"/> </div> </div> </div> ',i=t.querySelector(".subtitleSyncSlider"),r=t.querySelector(".subtitleSyncTextField"),s=t.querySelector(".subtitleSync-closeButton"),o=t.querySelector(".subtitleSyncContainer"),I.Z.tv&&(i.classList.add("focusable"),setTimeout((function(){i.enableKeyboardDragging()}),0)),o.classList.add("hide"),r.updateOffset=function(e){this.textContent=e+"s"},r.addEventListener("click",(function(){this.hasFocus=!0})),r.addEventListener("keydown",(function(e){if("Enter"===e.key){var t=/[-+]?\d+\.?\d*/g.exec(this.textContent);t?(t=t[0],t=parseFloat(t),t=Math.min(30,Math.max(-30,t)),this.textContent=t+"s",u.O.setSubtitleOffset(t,n),i.updateOffset((a=t/30,a*=50,a+=50,Math.min(100,Math.max(0,a.toFixed(1)))))):this.textContent=(u.O.getPlayerSubtitleOffset(n)||0)+"s",this.hasFocus=!1,e.preventDefault()}else this.hasFocus=!0,null===e.key.match(/[+-\d.s]/)&&e.preventDefault();var a;e.stopPropagation()})),r.blur=function(){!this.hasFocus&&this.prototype&&this.prototype.blur()},i.updateOffset=function(e){this.value=void 0===e?50:e},i.addEventListener("change",(function(){u.O.setSubtitleOffset(D(this.value),n),r.updateOffset(D(this.value))})),i.getBubbleHtml=function(e){var t=D(e);return'<h1 class="sliderBubbleText">'+(t>0?"+":"")+parseFloat(t)+"s</h1>"},s.addEventListener("click",(function(){u.O.disableShowingSubtitleOffset(n),E.prototype.toggle("forceToHide")})),e.element=t}function D(e){var t=(e-50)/50;return(t*=30).toFixed(1)}a(1203),a(76056),a(95623),a(99785);var E=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=t,C(this)}var t,a;return t=e,(a=[{key:"destroy",value:function(){e.prototype.toggle("forceToHide"),n&&(u.O.disableShowingSubtitleOffset(n),u.O.setSubtitleOffset(0,n));var t=this.element;t&&(t.parentNode.removeChild(t),this.element=null)}},{key:"toggle",value:function(e){if(!e||["hide","forceToHide"].includes(e)){if(n&&u.O.supportSubtitleOffset(n)){if(e){if("hide"===e&&r.hasFocus)return}else if(u.O.isShowingSubtitleOffsetEnabled(n)&&u.O.canHandleOffsetOnCurrentSubtitle(n))return u.O.getPlayerSubtitleOffset(n)||r.hasFocus||(i.value="50",r.textContent="0s",u.O.setSubtitleOffset(0,n)),void o.classList.remove("hide");o.classList.add("hide")}}else console.warn("SubtitleSync.toggle called with invalid action",e)}}])&&w(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),x=E,R=a(52050),q=a(71487),M=a(57084);function A(){return document.querySelector(".dialogContainer .dialog.opened")}function F(e){function t(t){if(!t||"Program"!==t.Type)return F&&(F.destroy(),F=null),void e.querySelector(".btnRecord").classList.add("hide");O.Z.getApiClient(t.ServerId).getCurrentUser().then((function(n){n.Policy.EnableLiveTvManagement&&a.e(3679).then(a.bind(a,3679)).then((function(a){var n=a.default;F?F.refreshItem(t):(F=new n({item:t,button:e.querySelector(".btnRecord")}),e.querySelector(".btnRecord").classList.remove("hide"))}))}))}function n(a){var n=a.originalItem;E=n;var i=a.displayItem||n;t(i);var s=i.SeriesName||i.Album;(i.EpisodeTitle||i.IsSeries)&&(s=i.Name),function(e,t){var a=y.ZP.getDisplayName(e,{includeParentInfo:"Program"!==e.Type,includeIndexNumber:"Program"!==e.Type});a&&t&&(a="".concat(t," - ").concat(a)),a||(a=t||"");var n=a;if(e.PremiereDate)try{var i=h.ZP.parseISO8601Date(e.PremiereDate).getFullYear();n+=" (".concat(i,")")}catch(e){console.error(e)}q.Z.setTitle(n);var r=t||(e?e.Name:null);r&&(document.title=r)}(i,s);var o=e.querySelector(".osdSecondaryMediaInfo"),c=g.ZP.getSecondaryMediaInfoHtml(i,{startDate:!1,programTime:!1});o.innerHTML=c,c?o.classList.remove("hide"):o.classList.add("hide"),H?(r(Ye,i.StartDate),r(Ke,i.EndDate),Ye.classList.remove("hide"),Ke.classList.remove("hide"),Me=i.StartDate?h.ZP.parseISO8601Date(i.StartDate).getTime():0,Ae=i.EndDate?h.ZP.parseISO8601Date(i.EndDate).getTime():0):(Ye.classList.add("hide"),Ke.classList.add("hide"),Ye.innerHTML="",Ke.innerHTML="",Me=0,Ae=0)}function i(e,t){return t?h.ZP.toLocaleTimeString(e,{hour:"numeric",minute:"2-digit",second:"2-digit"}).toLowerCase().replace("am","").replace("pm","").trim():h.ZP.getDisplayTime(e).toLowerCase().replace("am","").replace("pm","").trim()}function r(e,t){var a;t&&(a=i(t=h.ZP.parseISO8601Date(t))),e.innerHTML=a||""}var s,o,c,w,C,D,E,F,H,N,B,_,V,Y=!1;function K(){Xe.classList.remove("osdHeader-hidden"),function(){if(!N){var e=ze;N="osd",G(e),e.classList.remove("hide"),e.classList.remove("videoOsdBottom-hidden"),I.Z.mobile||setTimeout((function(){b.Z.focus(e.querySelector(".btnPause"))}),50),Te()}}(),X()}function U(){Xe.classList.add("osdHeader-hidden"),function(){if("osd"===N){var e=ze;G(e),e.classList.add("videoOsdBottom-hidden"),p.ZP.addEventListener(e,je,j,{once:!0}),N=null,Te("hide"),document.activeElement&&document.activeElement.blur()}}(),v.ZP.hideCursor()}function W(){_&&(clearTimeout(_),_=null)}function G(e){p.ZP.removeEventListener(e,je,j,{once:!0})}function j(e){var t=e.target;t==ze&&(t.classList.add("hide"),p.ZP.removeEventListener(t,je,j,{once:!0}))}function X(){!N||Y||A()?W():(W(),_=setTimeout(U,3e3))}function z(e){if("mouse"===(e.pointerType||(I.Z.mobile?"touch":"mouse"))){var t=e.screenX||e.clientX||0,a=e.screenY||e.clientY||0,n=V;if(!n)return void(V={x:t,y:a});if(Math.abs(t-n.x)<10&&Math.abs(a-n.y)<10)return;n.x=t,n.y=a,K()}}function J(t){var a,n=c;switch(t.detail.command){case"left":"osd"===N?K():N||(t.preventDefault(),u.O.rewind(n));break;case"right":"osd"===N?K():N||(t.preventDefault(),u.O.fastForward(n));break;case"pageup":u.O.nextChapter(n);break;case"pagedown":u.O.previousChapter(n);break;case"up":case"down":case"select":case"menu":case"info":case"play":case"playpause":case"pause":case"fastforward":case"rewind":case"next":case"previous":K();break;case"record":(a=e.querySelector(".btnRecord")).classList.contains("hide")||a.click(),K();break;case"togglestats":be();break;case"back":"osd"!==N||A()||(U(),t.preventDefault())}}function Q(){var t,a;!c.forcedFullscreen||u.O.isFullscreen(c)?((a=(t=e.querySelector(".btnFullscreen")).querySelector(".material-icons")).classList.remove("fullscreen_exit","fullscreen"),u.O.isFullscreen(c)?(t.setAttribute("title",T.ZP.translate("ExitFullscreen")+" (f)"),a.classList.add("fullscreen_exit")):(t.setAttribute("title",T.ZP.translate("Fullscreen")+" (f)"),a.classList.add("fullscreen"))):R.appRouter.back()}function $(){le(u.O.getCurrentPlayer())}function ee(a,i){var r,s;i.NowPlayingItem&&(D=!0,function(a,i,r){var s=r.PlayState||{};pe(s.IsPaused);var o=u.O.getSupportedCommands(i);xe=o,he(i,s.IsMuted,s.VolumeLevel),Be&&!Be.dragging&&(Be.disabled=!s.CanSeek),Ge.disabled=!s.CanSeek,We.disabled=!s.CanSeek;var c=r.NowPlayingItem||{};Fe=s.PlaybackStartTimeTicks,ve(s.PositionTicks,c.RunTimeTicks,s.PlaybackStartTimeTicks,s.PlaybackRate,s.BufferedRanges||[]),function(a,i){var r,s=i.NowPlayingItem;if(E=s,!s)return t(null),q.Z.setTitle(""),He.disabled=!0,Be.disabled=!0,Ge.disabled=!0,We.disabled=!0,e.querySelector(".btnSubtitles").classList.add("hide"),e.querySelector(".btnAudio").classList.add("hide"),e.querySelector(".osdTitle").innerHTML="",void(e.querySelector(".osdMediaInfo").innerHTML="");H=function(e){return!("TvChannel"!==e.Type||!e.CurrentProgram)}(s),function(e){if("TvChannel"===e.Type){var t=O.Z.getApiClient(e.ServerId);return t.getItem(t.getCurrentUserId(),e.Id).then((function(e){return{originalItem:e,displayItem:e.CurrentProgram}}))}return Promise.resolve({originalItem:e})}(s).then(n),He.disabled=!1,Be.disabled=!1,Ge.disabled=!1,We.disabled=!1,u.O.subtitleTracks(a).length?(e.querySelector(".btnSubtitles").classList.remove("hide"),Te()):(e.querySelector(".btnSubtitles").classList.add("hide"),Te("forceToHide")),u.O.audioTracks(a).length>1?e.querySelector(".btnAudio").classList.remove("hide"):e.querySelector(".btnAudio").classList.add("hide"),(null===(r=E.Chapters)||void 0===r?void 0:r.length)>1?(e.querySelector(".btnPreviousChapter").classList.remove("hide"),e.querySelector(".btnNextChapter").classList.remove("hide")):(e.querySelector(".btnPreviousChapter").classList.add("hide"),e.querySelector(".btnNextChapter").classList.add("hide"))}(i,r);var l=r.MediaSource&&null==r.MediaSource.RunTimeTicks;Be.setIsClear(l),c.RunTimeTicks&&Be.setKeyboardSteps(1e6*L.skipBackLength()/c.RunTimeTicks,1e6*L.skipForwardLength()/c.RunTimeTicks),-1===o.indexOf("ToggleFullscreen")||i.isLocalPlayer&&I.Z.tv&&u.O.isFullscreen(i)?e.querySelector(".btnFullscreen").classList.add("hide"):e.querySelector(".btnFullscreen").classList.remove("hide"),-1===o.indexOf("PictureInPicture")?e.querySelector(".btnPip").classList.add("hide"):e.querySelector(".btnPip").classList.remove("hide"),-1===o.indexOf("AirPlay")?e.querySelector(".btnAirPlay").classList.add("hide"):e.querySelector(".btnAirPlay").classList.remove("hide"),Q()}(0,this,i),r=e.querySelector(".btnPreviousTrack"),s=e.querySelector(".btnNextTrack"),r.classList.remove("hide"),s.classList.remove("hide"),s.disabled=!1,r.disabled=!1,!0,e.removeEventListener("viewbeforehide",Ce),u.O.isPlayingVideo(c)&&e.addEventListener("viewbeforehide",Ce),function(e){var t=sessionStorage.getItem("playbackRateSpeed");null!==t&&e.setPlaybackRate(t)}(this))}function te(){D&&pe(this.paused())}function ae(){if(D){var e=this;he(e,e.isMuted(),e.getVolume())}}function ne(e,t){console.debug("nowplaying event: "+e.type),ee.call(this,e,t),ie()}function ie(){w=!1,C&&(C.destroy(),C=null)}function re(t,a){Re=null,ie(),console.debug("nowplaying event: "+t.type),"Video"!==a.NextMediaType&&(e.removeEventListener("viewbeforehide",Ce),R.appRouter.back())}function se(){var e=u.O.getPlayerState(this);ee.call(this,{type:"init"},e)}function oe(){document.querySelector(".osdMediaStatus").classList.remove("hide")}function ce(){document.querySelector(".osdMediaStatus").classList.add("hide")}function le(e){if(e===c||(ue(),c=e,e)){var t=u.O.getPlayerState(e);ee.call(e,{type:"init"},t),P.Z.on(e,"playbackstart",ne),P.Z.on(e,"playbackstop",re),P.Z.on(e,"volumechange",ae),P.Z.on(e,"pause",te),P.Z.on(e,"unpause",te),P.Z.on(e,"timeupdate",de),P.Z.on(e,"fullscreenchange",Q),P.Z.on(e,"mediastreamschange",se),P.Z.on(e,"beginFetch",oe),P.Z.on(e,"endFetch",ce),ie(),e.isFetching&&oe()}}function ue(){Pe(),Se(),ie();var e=c;e&&(P.Z.off(e,"playbackstart",ne),P.Z.off(e,"playbackstop",re),P.Z.off(e,"volumechange",ae),P.Z.off(e,"pause",te),P.Z.off(e,"unpause",te),P.Z.off(e,"timeupdate",de),P.Z.off(e,"fullscreenchange",Q),P.Z.off(e,"mediastreamschange",se),c=null)}function de(){if(D&&E){var t=(new Date).getTime();if(!(t-qe<700)){qe=t;var n=this;Re=u.O.duration(n);var i=1e4*u.O.currentTime(n);ve(i,Re,u.O.playbackStartTime(n),u.O.getPlaybackRate(n),u.O.getBufferedRanges(n));var r=E;!function(e,t){if("TvChannel"===t.Type){var a=t.CurrentProgram;if(a&&a.EndDate)try{var n=h.ZP.parseISO8601Date(a.EndDate);if((new Date).getTime()>=n.getTime()){console.debug("program info needs to be refreshed");var i=u.O.getPlayerState(e);ee.call(e,{type:"init"},i)}}catch(e){console.error("error parsing date: "+a.EndDate)}}}(n,r),function(t,n,i,r){if(r&&i&&!w&&!N&&"Episode"===n.Type&&L.enableNextVideoInfoOverlay()){var s=30;r>=3e10?s=40:r>=24e9&&(s=35),i>=r-1e7*s&&r>=6e9&&r-i>=2e8&&function(t){a.e(6542).then(a.bind(a,36542)).then((function(a){var n=a.default;N||C||(N="upnext",w=!0,u.O.nextItem(t).then((function(a){C=new n({parent:e.querySelector(".upNextContainer"),player:t,nextItem:a}),P.Z.on(C,"hide",fe)}),fe))}))}(t)}}(n,r,i,Re)}}}function fe(){"upnext"===N&&(N=null)}function pe(t){var a,n,i=e.querySelector(".btnPause"),r=i.querySelector(".material-icons");r.classList.remove("play_arrow","pause"),t?(a="play_arrow",n=T.ZP.translate("Play")):(a="pause",n=T.ZP.translate("ButtonPause")),r.classList.add(a),p.ZP.setElementTitle(i,n+" (k)",n)}function me(e,t,a){return(a-e)/t*100}function ve(e,t,a,n,i){if(H){if(Be&&!Be.dragging)if(Me&&Ae){var r=(a+(e||0))/1e4,s=Ae-Me;if(Be.value=me(Me,s,r),i.length){var o=me(Me,s,(a+(i[0].start||0))/1e4),c=me(Me,s,(a+(i[0].end||0))/1e4);Be.setBufferedRanges([{start:o,end:c}])}else Be.setBufferedRanges([])}else Be.value=0,Be.setBufferedRanges([]);_e.innerHTML="",Ve.innerHTML=""}else{if(Be&&!Be.dragging){if(t){var l=e/t;l*=100,Be.value=l}else Be.value=0;t&&null!=e&&Re&&!H&&E.RunTimeTicks&&"Recording"!==E.Type&&null!==n?Ue.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;"+g.ZP.getEndsAtFromPosition(t,e,n,!0):Ue.innerHTML=""}Be&&Be.setBufferedRanges(i,t,e),e>=0?(ye(_e,e),_e.classList.remove("hide")):_e.classList.add("hide");var u=t-e;u>=0?(ye(Ve,u),Ve.classList.remove("hide")):_e.classList.add("hide")}}function he(t,a,n){var i=xe,r=!0,s=!0;-1===i.indexOf("Mute")&&(r=!1),-1===i.indexOf("SetVolume")&&(s=!1),t.isLocalPlayer&&S.M.supports("physicalvolumecontrol")&&(r=!1,s=!1);var o=e.querySelector(".buttonMute"),c=o.querySelector(".material-icons");c.classList.remove("volume_off","volume_up"),a?(o.setAttribute("title",T.ZP.translate("Unmute")+" (m)"),c.classList.add("volume_off")):(o.setAttribute("title",T.ZP.translate("Mute")+" (m)"),c.classList.add("volume_up")),r?o.classList.remove("hide"):o.classList.add("hide"),He&&(s?Ne.classList.remove("hide"):Ne.classList.add("hide"),He.dragging||(He.value=n||0))}function ye(e,t,a){if(null!=t){var n=h.ZP.getDisplayRunningTime(t);a&&(n="&nbsp;/&nbsp;"+n),e.innerHTML=n}else e.innerHTML=""}function ge(e){if("stats"===e)be();else if("suboffset"===e){var t=c;t&&(u.O.enableShowingSubtitleOffset(t),Te())}}function be(){a.e(8074).then(a.bind(a,68074)).then((function(e){var t=e.default,a=c;a&&(B?B.toggle():B=new t({player:a}))}))}function Pe(){B&&(B.destroy(),B=null)}function Te(e){var t=c;De?De.toggle(e):t&&(De=new x(t))}function Se(){De&&(De.destroy(),De=null)}function Ie(e){if(!e.target.contains(s))return e.preventDefault(),e.stopPropagation(),!1}function Le(e){s=e.target;var t=k.ZP.getKeyName(e),a=e.ctrlKey||e.altKey||e.metaKey;if(32===e.keyCode)return"BUTTON"===e.target.tagName&&I.Z.tv||(u.O.playPause(c),e.preventDefault(),e.stopPropagation(),s=null),void K();if(I.Z.tv&&k.ZP.isNavigationKey(t))K();else switch(t){case"Enter":K();break;case"Escape":case"Back":"osd"!==N||A()||(U(),e.stopPropagation());break;case"k":u.O.playPause(c),K();break;case"ArrowUp":case"Up":u.O.volumeUp(c);break;case"ArrowDown":case"Down":u.O.volumeDown(c);break;case"l":case"ArrowRight":case"Right":u.O.fastForward(c),K();break;case"j":case"ArrowLeft":case"Left":u.O.rewind(c),K();break;case"f":e.ctrlKey||e.metaKey||(u.O.toggleFullscreen(c),K());break;case"m":u.O.toggleMute(c),K();break;case"p":case"P":e.shiftKey&&u.O.previousTrack(c);break;case"n":case"N":e.shiftKey&&u.O.nextTrack(c);break;case"NavigationLeft":case"GamepadDPadLeft":case"GamepadLeftThumbstickLeft":document.hasFocus()&&(u.O.rewind(c),K());break;case"NavigationRight":case"GamepadDPadRight":case"GamepadLeftThumbstickRight":document.hasFocus()&&(u.O.fastForward(c),K());break;case"Home":u.O.seekPercent(0,c);break;case"End":u.O.seekPercent(100,c);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(!a){var n=10*parseInt(t,10);u.O.seekPercent(n,c)}break;case">":u.O.increasePlaybackRate(c);break;case"<":u.O.decreasePlaybackRate(c);break;case"PageUp":u.O.nextChapter(c);break;case"PageDown":u.O.previousChapter(c)}}function ke(){X()}function Oe(e){s=e.target,Y=!0,X()}function Ze(){Y=!1,X()}function we(){Y=!1,X()}function Ce(){if(u.O.isPlayingVideo()){Z.Z.disableFullscreen(),clearTimeout(o);var t=c;e.removeEventListener("viewbeforehide",Ce),ue(),u.O.stop(t)}}Z.Z.enableFullscreen();var De,Ee=this,xe=[],Re=0,qe=0,Me=0,Ae=0,Fe=0,He=e.querySelector(".osdVolumeSlider"),Ne=e.querySelector(".osdVolumeSliderContainer"),Be=e.querySelector(".osdPositionSlider"),_e=e.querySelector(".osdPositionText"),Ve=e.querySelector(".osdDurationText"),Ye=e.querySelector(".startTimeText"),Ke=e.querySelector(".endTimeText"),Ue=e.querySelector(".endsAtText"),We=e.querySelector(".btnRewind"),Ge=e.querySelector(".btnFastForward"),je=p.ZP.whichTransitionEvent(),Xe=document.querySelector(".skinHeader"),ze=document.querySelector(".videoOsdBottom-maincontrols");Be.enableKeyboardDragging(),He.enableKeyboardDragging(),I.Z.tv&&Be.classList.add("focusable"),e.addEventListener("viewbeforeshow",(function(){Xe.classList.add("osdHeader"),(0,M.G2)(M.q3.Full)})),e.addEventListener("viewshow",(function(){try{P.Z.on(u.O,"playerchange",$),le(u.O.getCurrentPlayer()),p.ZP.addEventListener(document,window.PointerEvent?"pointermove":"mousemove",z,{passive:!0}),K(),m.default.on(window,J),document.addEventListener("keydown",Le),p.ZP.addEventListener(document,"keydown",ke,{capture:!0,passive:!0}),p.ZP.addEventListener(window,window.PointerEvent?"pointerdown":"mousedown",Oe,{capture:!0,passive:!0}),p.ZP.addEventListener(window,window.PointerEvent?"pointerup":"mouseup",Ze,{capture:!0,passive:!0}),p.ZP.addEventListener(window,"touchstart",Oe,{capture:!0,passive:!0}),["touchend","touchcancel"].forEach((function(e){p.ZP.addEventListener(window,e,Ze,{capture:!0,passive:!0})})),p.ZP.addEventListener(window,"dragend",we,{capture:!0,passive:!0}),(f.Z.firefox||f.Z.edge)&&p.ZP.addEventListener(document,"click",Ie,{capture:!0})}catch(e){R.appRouter.goHome()}})),e.addEventListener("viewbeforehide",(function(){B&&B.enabled(!1),document.removeEventListener("keydown",Le),p.ZP.removeEventListener(document,"keydown",ke,{capture:!0,passive:!0}),p.ZP.removeEventListener(window,window.PointerEvent?"pointerdown":"mousedown",Oe,{capture:!0,passive:!0}),p.ZP.removeEventListener(window,window.PointerEvent?"pointerup":"mouseup",Ze,{capture:!0,passive:!0}),p.ZP.removeEventListener(window,"touchstart",Oe,{capture:!0,passive:!0}),["touchend","touchcancel"].forEach((function(e){p.ZP.removeEventListener(window,e,Ze,{capture:!0,passive:!0})})),p.ZP.removeEventListener(window,"dragend",we,{capture:!0,passive:!0}),(f.Z.firefox||f.Z.edge)&&p.ZP.removeEventListener(document,"click",Ie,{capture:!0}),W(),Xe.classList.remove("osdHeader"),Xe.classList.remove("osdHeader-hidden"),p.ZP.removeEventListener(document,window.PointerEvent?"pointermove":"mousemove",z,{passive:!0}),m.default.off(window,J),P.Z.off(u.O,"playerchange",$),ue()})),e.querySelector(".btnFullscreen").addEventListener("click",(function(){u.O.toggleFullscreen(c)})),e.querySelector(".btnPip").addEventListener("click",(function(){u.O.togglePictureInPicture(c)})),e.querySelector(".btnAirPlay").addEventListener("click",(function(){u.O.toggleAirPlay(c)})),e.querySelector(".btnVideoOsdSettings").addEventListener("click",(function(){var e=this;a.e(9078).then(a.bind(a,29078)).then((function(t){var a=c;if(a){var n,i=u.O.getPlayerState(a),r=u.O.supportSubtitleOffset(a)&&u.O.canHandleOffsetOnCurrentSubtitle(a);t.show({mediaType:"Video",player:a,positionTo:e,quality:null===(n=i.MediaSource)||void 0===n?void 0:n.SupportsTranscoding,stats:!0,suboffset:r,onOption:ge}).finally((function(){X()})),setTimeout(X,0)}}))})),e.addEventListener("viewhide",(function(){Xe.classList.remove("hide")})),e.addEventListener("viewdestroy",(function(){Ee.touchHelper&&(Ee.touchHelper.destroy(),Ee.touchHelper=null),F&&(F.destroy(),F=null),Pe(),Se()}));var Je=0;p.ZP.addEventListener(e,window.PointerEvent?"pointerdown":"click",(function(e){if(p.ZP.parentWithClass(e.target,["videoOsdBottom","upNextContainer"]))K();else{var t=e.pointerType||(I.Z.mobile?"touch":"mouse"),a=(new Date).getTime();switch(t){case"touch":a-Je>300&&(Je=a,"osd"===N?U():N||K());break;case"mouse":e.button||(o?(clearTimeout(o),o=0):o=setTimeout((function(){u.O.playPause(c),K(),o=0}),300));break;default:u.O.playPause(c),K()}}}),{passive:!0}),p.ZP.addEventListener(e,"dblclick",(function(t){t.target===e&&u.O.toggleFullscreen(c)})),e.querySelector(".buttonMute").addEventListener("click",(function(){u.O.toggleMute(c)})),He.addEventListener("input",(function(e){u.O.setVolume(e.target.value,c)})),Be.addEventListener("change",(function(){var e=c;if(e){var t=parseFloat(this.value);if(H){var a=t/100*(Ae-Me)*1e4;a+=1e4*Me,a-=Fe,u.O.seek(a,e)}else u.O.seekPercent(t,e)}})),Be.getBubbleHtml=function(e){if(K(),H){if(Me&&Ae){var t=Ae-Me;return t/=100,t*=e,t+=Me,'<h1 class="sliderBubbleText">'+i(new Date(parseInt(t)),!0)+"</h1>"}return"--:--"}if(!Re)return"--:--";var a=Re;a/=100,a*=e;var n=E;if(n&&n.Chapters&&n.Chapters.length&&n.Chapters[0].ImageTag){var r=function(e,t,a,n){for(var i,r=-1,s=0,o=a.length;s<o;s++){var c=a[s];n>=c.StartPositionTicks&&(i=c,r=s)}if(!i)return null;var u=function(e,t,a,n,i){return t.ImageTag?i.getScaledImageUrl(e.Id,{maxWidth:400,tag:t.ImageTag,type:"Chapter",index:a}):null}(t,i,r,0,e);if(u){var d='<div class="chapterThumbContainer">';return d+='<img class="chapterThumb" src="'+u+'" />',d+='<div class="chapterThumbTextContainer">',d+='<div class="chapterThumbText chapterThumbText-dim">',d+=l()(i.Name),d+="</div>",d+='<h2 class="chapterThumbText">',d+=h.ZP.getDisplayRunningTime(n),d+="</h2>",(d+="</div>")+"</div>"}return null}(O.Z.getApiClient(n.ServerId),n,n.Chapters,a);if(r)return r}return'<h1 class="sliderBubbleText">'+h.ZP.getDisplayRunningTime(a)+"</h1>"},Be.getMarkerInfo=function(){var e,t=[],a=E;return null!=a&&null!==(e=a.Chapters)&&void 0!==e&&e.length&&a.Chapters.forEach((function(e){t.push({className:"chapterMarker",name:e.Name,progress:e.StartPositionTicks/a.RunTimeTicks})})),t},e.querySelector(".btnPreviousTrack").addEventListener("click",(function(){u.O.previousTrack(c)})),e.querySelector(".btnPreviousChapter").addEventListener("click",(function(){u.O.previousChapter(c)})),e.querySelector(".btnPause").addEventListener("click",(function(){u.O.playPause(c)})),e.querySelector(".btnNextChapter").addEventListener("click",(function(){u.O.nextChapter(c)})),e.querySelector(".btnNextTrack").addEventListener("click",(function(){u.O.nextTrack(c)})),We.addEventListener("click",(function(){u.O.rewind(c)})),Ge.addEventListener("click",(function(){u.O.fastForward(c)})),e.querySelector(".btnAudio").addEventListener("click",(function(){var e=c,t=u.O.audioTracks(e),n=u.O.getAudioStreamIndex(e),i=t.map((function(e){var t={name:e.DisplayTitle,id:e.Index};return e.Index===n&&(t.selected=!0),t})),r=this;Promise.resolve().then(a.bind(a,12801)).then((function(t){t.default.show({items:i,title:T.ZP.translate("Audio"),positionTo:r}).then((function(t){var a=parseInt(t);a!==n&&u.O.setAudioStreamIndex(a,e)})).finally((function(){X()})),setTimeout(X,0)}))})),e.querySelector(".btnSubtitles").addEventListener("click",(function(){var e=c,t=u.O.subtitleTracks(e),n=u.O.getSubtitleStreamIndex(e);null==n&&(n=-1),t.unshift({Index:-1,DisplayTitle:T.ZP.translate("Off")});var i=t.map((function(e){var t={name:e.DisplayTitle,id:e.Index};return e.Index===n&&(t.selected=!0),t})),r=this;Promise.resolve().then(a.bind(a,12801)).then((function(t){t.default.show({title:T.ZP.translate("Subtitles"),items:i,positionTo:r}).then((function(t){var a=parseInt(t);a!==n&&u.O.setSubtitleStreamIndex(a,e),Te()})).finally((function(){X()})),setTimeout(X,0)}))}));var Qe=function(t){var a="",n="",i="oneShotPulse",r=1500,s=e.querySelector("#syncPlayIcon");switch(t){case"schedule-play":a="sync spin",n="play_arrow centered",i="infinitePulse",r=-1,U();break;case"unpause":a="play_circle_outline";break;case"pause":a="pause_circle_outline",K();break;case"seek":a="update",i="infinitePulse",r=-1;break;case"buffering":a="schedule",i="infinitePulse",r=-1;break;case"wait-pause":a="schedule",n="pause shifted",i="infinitePulse",r=-1;break;case"wait-unpause":a="schedule",n="play_arrow shifted",i="infinitePulse",r=-1;break;default:return void(s.style.visibility="hidden")}s.setAttribute("class","syncPlayIconCircle "+i),s.querySelector(".primary-icon").setAttribute("class","primary-icon material-icons "+a),s.querySelector(".secondary-icon").setAttribute("class","secondary-icon material-icons "+n);var o=s.cloneNode(!0);o.style.visibility="visible",s.parentNode.replaceChild(o,s),r<0||setTimeout((function(){o.style.visibility="hidden"}),r)};P.Z.on(d.default.Manager,"enabled",(function(t,a){a||(e.querySelector("#syncPlayIcon").style.visibility="hidden")})),P.Z.on(d.default.Manager,"notify-osd",(function(e,t){Qe(t)})),P.Z.on(d.default.Manager,"group-state-update",(function(e,t,a){"Playing"===t&&"Unpause"===a||"Playing"===t&&"Ready"===a?Qe("schedule-play"):"Paused"===t&&"Pause"===a?Qe("pause"):"Paused"===t&&"Ready"===a?Qe("clear"):"Waiting"===t&&"Seek"===a?Qe("seek"):"Waiting"===t&&"Buffer"===a?Qe("buffering"):"Waiting"===t&&"Pause"===a?Qe("wait-pause"):"Waiting"===t&&"Unpause"===a&&Qe("wait-unpause")}))}}}]);