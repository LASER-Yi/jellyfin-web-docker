"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[94153],{17094:function(e,t,n){n.d(t,{Z:function(){return l}}),n(27378);var r=n(10043),i=n(24246);function l(e){var t=e.styles,n=e.defaultTheme,l=void 0===n?{}:n,a="function"==typeof t?function(e){return t(null==(n=e)||0===Object.keys(n).length?l:e);var n}:t;return(0,i.jsx)(r.xB,{styles:a})}},12801:function(e,t,n){n.r(t),n.d(t,{show:function(){return f}}),n(5769),n(63238),n(61418),n(17460),n(14078),n(27471),n(72410),n(15610),n(52077),n(25901),n(92189),n(91047);var r=n(65009),i=n.n(r),l=n(93355),a=n(30325),o=n(94994),s=n(72365);function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,l=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw l}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t,r){Promise.resolve().then(n.bind(n,54517)).then((function(n){var i=r?"on":"off";n.centerFocus[i](e,t)}))}function f(e){var t,n={removeOnClose:!0,enableHistory:e.enableHistory,scrollY:!1};a.Z.tv?(n.size="fullscreen",t=!0,n.autoFocus=!0):(n.modal=!1,n.entryAnimation=e.entryAnimation,n.exitAnimation=e.exitAnimation,n.entryAnimationDuration=e.entryAnimationDuration||140,n.exitAnimationDuration=e.exitAnimationDuration||100,n.autoFocus=!1);var r=l.default.createDialog(n);t?r.classList.add("actionsheet-fullscreen"):r.classList.add("actionsheet-not-fullscreen"),r.classList.add("actionSheet"),e.dialogClass&&r.classList.add(e.dialogClass);var c="",f=a.Z.tv?"scrollY smoothScrollY hiddenScrollY":"scrollY",v="";e.items.length>20&&(v+="min-width:"+(s.ZP.getWindowSize().innerWidth>=300?240:200)+"px;");var h,p,y=!1,b=[],g=u(e.items);try{for(g.s();!(p=g.n()).done;){var m=p.value;(h=m.icon||(m.selected?"check":null))&&(y=!0),b.push(h||"")}}catch(e){g.e(e)}finally{g.f()}a.Z.tv&&(c+='<button is="paper-icon-button-light" class="btnCloseActionSheet hide-mouse-idle-tv" tabindex="-1" title="'.concat(o.ZP.translate("ButtonBack"),'">\n                     <span class="material-icons arrow_back" aria-hidden="true"></span>\n                 </button>'));var x=e.title&&!y;x||a.Z.tv?c+='<div class="actionSheetContent actionSheetContent-centered">':c+='<div class="actionSheetContent">',e.title&&(c+='<h1 class="actionSheetTitle">'+i()(e.title)+"</h1>"),e.text&&(c+='<p class="actionSheetText">'+i()(e.text)+"</p>");var S="actionSheetScroller";a.Z.tv&&(S+=" actionSheetScroller-tv focuscontainer-x focuscontainer-y"),c+='<div class="'+S+" "+f+'" style="'+v+'">';var w="listItem listItem-button actionSheetMenuItem";(e.border||e.shaded)&&(w+=" listItem-border"),e.menuItemClass&&(w+=" "+e.menuItemClass),a.Z.tv&&(w+=" listItem-focusscale"),a.Z.mobile&&(w+=" actionsheet-xlargeFont");for(var j=0;j<e.items.length;j++){var Z=e.items[j];Z.divider?c+='<div class="actionsheetDivider"></div>':(c+="<button"+(Z.selected&&a.Z.tv?" autoFocus":"")+' is="emby-button" type="button" class="'+w+'" data-id="'+(null==Z.id||""===Z.id?Z.value:Z.id)+'">',(h=b[j])?c+='<span class="actionsheetMenuItemIcon listItemIcon listItemIcon-transparent material-icons '.concat(h,'" aria-hidden="true"></span>'):y&&!x&&(c+='<span class="actionsheetMenuItemIcon listItemIcon listItemIcon-transparent material-icons check" aria-hidden="true" style="visibility:hidden;"></span>'),c+='<div class="listItemBody actionsheetListItemBody">',c+='<div class="listItemBodyText actionSheetItemText">',c+=i()(Z.name||Z.textContent||Z.innerText),c+="</div>",Z.secondaryText&&(c+='<div class="listItemBodyText secondary">'.concat(i()(Z.secondaryText),"</div>")),c+="</div>",Z.asideText&&(c+='<div class="listItemAside actionSheetItemAsideText">'.concat(i()(Z.asideText),"</div>")),c+="</button>")}e.showCancel&&(c+='<div class="buttons">',c+='<button is="emby-button" type="button" class="btnCloseActionSheet">'.concat(o.ZP.translate("ButtonCancel"),"</button>"),c+="</div>"),c+="</div>",r.innerHTML=c,a.Z.tv&&d(r.querySelector(".actionSheetScroller"),!1,!0);var C,O,P=r.querySelector(".btnCloseActionSheet");return P&&P.addEventListener("click",(function(){l.default.close(r)})),e.timeout&&(O=setTimeout((function(){l.default.close(r)}),e.timeout)),new Promise((function(t,i){var o;r.addEventListener("click",(function(n){var i=s.ZP.parentWithClass(n.target,"actionSheetMenuItem");i&&(C=i.getAttribute("data-id"),e.resolveOnClick&&(e.resolveOnClick.indexOf?-1!==e.resolveOnClick.indexOf(C)&&(t(C),o=!0):(t(C),o=!0)),l.default.close(r))})),r.addEventListener("close",(function(){a.Z.tv&&d(r.querySelector(".actionSheetScroller"),!1,!1),O&&(clearTimeout(O),O=null),o||(null!=C?(e.callback&&e.callback(C),t(C)):i("ActionSheet closed without resolving"))})),l.default.open(r);var c=e.positionTo&&"fullscreen"!==n.size?function(e,t){var n=s.ZP.getWindowSize(),r=n.innerHeight,i=n.innerWidth,l=function(e){var t=[];if(!document)return t;var n,r=u(e);try{for(r.s();!(n=r.n()).done;){var i=n.value.getBoundingClientRect();t.push({top:i.top,left:i.left,width:i.width,height:i.height})}}catch(e){r.e(e)}finally{r.f()}return t}([e.positionTo])[0];"top"!==e.positionY&&(l.top+=(l.height||0)/2),l.left+=(l.width||0)/2;var a=t.offsetHeight||300,o=t.offsetWidth||160;l.top-=a/2,l.left-=o/2;var c=l.left+o-i,d=l.top+a-r;return c>0&&(l.left-=c+20),d>0&&(l.top-=d+20),l.top+=e.offsetTop||0,l.left+=e.offsetLeft||0,l.top=Math.max(l.top,10),l.left=Math.max(l.left,10),l}(e,r):null;c&&(r.style.position="fixed",r.style.margin=0,r.style.left=c.left+"px",r.style.top=c.top+"px")}))}n(38228),t.default={show:f}},50155:function(e,t,n){n.d(t,{Z:function(){return Zt}});var r=n(24246),i=n(49255),l=n(4877),a=n(27378),o=n(16677),s=n(12058),u=n(7995),c=n(694),d=n(22030),f=n(63873),v=n(61570),h=n(48957),p=n(94994),y=n(60042),b=n.n(y),g=n(28172),m=n(67561),x=n(44038),S=n(58517),w=n(72365),j=n(57366),Z=n(81038),C=n(30325),O=n(61008),P=n(52943),I=n(28540),T=n(34643),k=n(24658),V=function(){return V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},V.apply(this,arguments)};function F(e){return e.preventDefault(),e.stopPropagation(),!1}var L=function(e){var t=e.className,i=e.libraryViewSettings,l=e.isContextMenuEnabled,s=e.isMultiSelectEnabled,c=e.isDragreOrderEnabled,d=e.dataMonitor,f=e.parentId,v=e.reloadItems,p=e.getItemsHtml,y=e.children,L=(0,u.Ei)().mutateAsync,A=(0,a.useRef)(null),E=(0,a.useRef)(null),D=(0,a.useRef)(null),M=(0,a.useRef)(null),R=(0,a.useCallback)((function(e){var t=A.current,n=E.current;n&&!1===n.onContainerClick.call(t,e)||O.ZP.onClick.call(t,e)}),[]),B=(0,a.useCallback)((function(e){var t=e.target,n=w.ZP.parentWithAttribute(t,"data-id");if(null==n?void 0:n.getAttribute("data-serverid"))return S.default.handleCommand("menu",{sourceElement:n}),e.preventDefault(),e.stopPropagation(),!1}),[]),N=(0,a.useCallback)((function(e){E.current=new P.default({container:e,bindOnClick:!1})}),[]),$=(0,a.useCallback)((function(){E.current&&(E.current.destroy(),E.current=null)}),[]),H=(0,a.useCallback)((function(e){return t=void 0,n=void 0,i=function(){var t,n,r,i,l;return function(e,t){var n,r,i,l,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function o(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,o[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,(function(a){switch(a.label){case 0:if(t=e.item,n=e.newIndex,r=t.getAttribute("data-playlistitemid"),!(i=t.getAttribute("data-playlistid")))return l=e.oldIndex,t.dispatchEvent(new CustomEvent("itemdrop",{detail:{oldIndex:l,newIndex:n,playlistItemId:r},bubbles:!0,cancelable:!1})),[2];if(!r)throw new Error("null itemId");if(!n)throw new Error("null newIndex");a.label=1;case 1:return a.trys.push([1,3,,4]),I.ZP.show(),[4,L({playlistId:i,itemId:r,newIndex:n})];case 2:return a.sent(),I.ZP.hide(),[3,4];case 3:return a.sent(),I.ZP.hide(),v(),[3,4];case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,l){function a(e){try{s(i.next(e))}catch(e){l(e)}}function o(e){try{s(i.throw(e))}catch(e){l(e)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(a,o)}s((i=i.apply(t,n||[])).next())}));var t,n,r,i}),[L,v]),_=(0,a.useCallback)((function(e){D.current=g.ZP.create(e,{draggable:".listItem",handle:".listViewDragHandle",onEnd:function(e){return H(e)}})}),[H]),z=(0,a.useCallback)((function(){D.current&&(D.current.destroy(),D.current=null)}),[]),Y=(0,a.useCallback)((function(e){!0===e?v():M.current=setTimeout((function(){return v()}),1e4)}),[v]),X=(0,a.useCallback)((function(){return d?d.split(","):[]}),[d]),G=(0,a.useCallback)((function(e,t){var r=A.current;Promise.resolve().then(n.bind(n,61570)).then((function(e){e.onUserDataChanged(t,r)})).catch((function(e){console.error("[onUserDataChanged] failed to load onUserData Changed",e)}));var i=X();-1===i.indexOf("markfavorite")&&-1===i.indexOf("markplayed")||Y(!1)}),[X,Y]),U=(0,a.useCallback)((function(e,t){var r=A.current;if(-1===X().indexOf("timers")){var i=t.ProgramId,l=t.Id;i&&l&&Promise.resolve().then(n.bind(n,61570)).then((function(e){e.onTimerCreated(i,l,r)})).catch((function(e){console.error("[onTimerCreated] failed to load onTimer Created",e)}))}else Y(!1)}),[X,Y]),q=(0,a.useCallback)((function(){-1!==X().indexOf("seriestimers")&&Y(!1)}),[X,Y]),W=(0,a.useCallback)((function(e,t){var r=A.current;if(-1===X().indexOf("timers")){var i=t.Id;i&&Promise.resolve().then(n.bind(n,61570)).then((function(e){e.onTimerCancelled(i,r)})).catch((function(e){console.error("[onTimerCancelled] failed to load onTimer Cancelled",e)}))}else Y(!1)}),[X,Y]),Q=(0,a.useCallback)((function(e,t){var r=A.current;if(-1===X().indexOf("seriestimers")){var i=t.Id;i&&Promise.resolve().then(n.bind(n,61570)).then((function(e){e.onSeriesTimerCancelled(i,r)})).catch((function(e){console.error("[onSeriesTimerCancelled] failed to load onSeriesTimer Cancelled",e)}))}else Y(!1)}),[X,Y]),K=(0,a.useCallback)((function(e,t){var n,r,i,l,a,o=X();if(-1===o.indexOf("seriestimers")&&-1===o.indexOf("timers")){var s=null!==(n=t.ItemsAdded)&&void 0!==n?n:[],u=null!==(r=t.ItemsRemoved)&&void 0!==r?r:[];if(s.length||u.length){if(f){var c=null!==(i=t.FoldersAddedTo)&&void 0!==i?i:[],d=null!==(l=t.FoldersRemovedFrom)&&void 0!==l?l:[],v=null!==(a=t.CollectionFolders)&&void 0!==a?a:[];if(-1===c.indexOf(f)&&-1===d.indexOf(f)&&-1===v.indexOf(f))return}Y(!1)}}}),[X,Y,f]),J=(0,a.useCallback)((function(e,t){var n=t.state,r=X();if(n.NowPlayingItem&&"Video"===n.NowPlayingItem.MediaType){if(-1!==r.indexOf("videoplayback"))return void Y(!0)}else if(n.NowPlayingItem&&"Audio"===n.NowPlayingItem.MediaType&&-1!==r.indexOf("audioplayback"))return void Y(!0)}),[X,Y]),ee=(0,a.useCallback)((function(e,t){if(t){var n=e.querySelector('[data-id="'+t+'"]');if(n)try{return void T.Z.focus(n)}catch(e){console.error(e)}}T.Z.autoFocus(e)}),[]);(0,a.useEffect)((function(){var e=A.current;if(e){var t,n,r=document.activeElement;(null==e?void 0:e.contains(r))&&(n=!0,t=null==r?void 0:r.getAttribute("data-id")),p&&(e.innerHTML=p()),Z.default.lazyChildren(e),n&&ee(e,t)}else console.error("Unexpected null reference")}),[p,ee]),(0,a.useEffect)((function(){var e=A.current;if(e)return(C.Z.desktop||C.Z.mobile&&!1!==s)&&N(e),!0===c&&_(e),e.addEventListener("click",R),j.Z.touch?e.addEventListener("contextmenu",F):!1!==l&&e.addEventListener("contextmenu",B),O.ZP.on(e,{click:!1}),m.Z.on(x.default,"UserDataChanged",G),m.Z.on(x.default,"TimerCreated",U),m.Z.on(x.default,"TimerCancelled",W),m.Z.on(x.default,"SeriesTimerCreated",q),m.Z.on(x.default,"SeriesTimerCancelled",Q),m.Z.on(x.default,"LibraryChanged",K),m.Z.on(h.O,"playbackstop",J),function(){M.current&&clearTimeout(M.current),$(),z(),e.removeEventListener("click",R),e.removeEventListener("contextmenu",B),e.removeEventListener("contextmenu",F),O.ZP.off(e,{click:!1}),m.Z.off(x.default,"UserDataChanged",G),m.Z.off(x.default,"TimerCreated",U),m.Z.off(x.default,"TimerCancelled",W),m.Z.off(x.default,"SeriesTimerCreated",q),m.Z.off(x.default,"SeriesTimerCancelled",Q),m.Z.off(x.default,"LibraryChanged",K),m.Z.off(h.O,"playbackstop",J)};console.error("Unexpected null reference")}),[z,$,_,N,l,c,s,R,B,K,J,Q,q,W,U,G]);var te=b()("itemsContainer",{"itemsContainer-tv":C.Z.tv},i.ViewMode===k.wO.ListView?"vertical-list":"vertical-wrap",t);return(0,r.jsx)(o.Z,V({ref:A,className:te},{children:y}))},A=n(77901),E=n(84320),D=function(){return D=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},D.apply(this,arguments)},M=function(e){var t=e.className,n=e.libraryViewSettings,i=e.setLibraryViewSettings,l=(0,a.useCallback)((function(e,t){i((function(e){return D(D({},e),{StartIndex:0,Alphabet:t})}))}),[i]),s=b()("alphaPicker",t,"alphaPicker-fixed-right"),u=b()("paper-icon-button-light","alphaPickerButton");return(0,r.jsx)(o.Z,D({className:s,sx:{position:"fixed",bottom:"1.5em",fontSize:{xs:"80%",lg:"88%"}}},{children:(0,r.jsx)(E.Z,D({orientation:"vertical",value:n.Alphabet,exclusive:!0,color:"primary",size:"small",onChange:l},{children:["#","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"].map((function(e){return(0,r.jsx)(A.Z,D({value:e,className:u},{children:e}),e)}))}))}))},R=n(41854),B=n(9082),N=n(87673),$=n(60549),H=n(57876),_=n(50131),z=n(12192),Y=n(36058),X=n(37914),G=n(87891),U=n(12026),q=n(53298),W=n(88388),Q=function(){return Q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Q.apply(this,arguments)},K=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,l=t.length;i<l;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},J=[{label:"Subtitles",value:k.wH.HasSubtitles},{label:"Trailers",value:k.wH.HasTrailer},{label:"Extras",value:k.wH.HasSpecialFeature},{label:"ThemeSongs",value:k.wH.HasThemeSong},{label:"ThemeVideos",value:k.wH.HasThemeVideo}],ee=function(e){var t,n=e.libraryViewSettings,i=e.setLibraryViewSettings,l=(0,a.useCallback)((function(e){var t,r;e.preventDefault();var l=e.target.value,a=null!==(r=null===(t=null==n?void 0:n.Filters)||void 0===t?void 0:t.Features)&&void 0!==r?r:[],o=a.includes(l)?a.filter((function(e){return e!==l})):K(K([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,l=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=l.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}return a}(a),!1),[l],!1);i((function(e){return Q(Q({},e),{StartIndex:0,Filters:Q(Q({},e.Filters),{Features:o.length?o:void 0})})}))}),[i,null===(t=null==n?void 0:n.Filters)||void 0===t?void 0:t.Features]);return(0,r.jsx)(U.Z,{children:J.map((function(e){var t,i;return(0,r.jsx)(q.Z,{control:(0,r.jsx)(W.Z,{checked:!!(null===(i=null===(t=null==n?void 0:n.Filters)||void 0===t?void 0:t.Features)||void 0===i?void 0:i.includes(e.value)),onChange:l,value:e.value}),label:p.ZP.translate(e.label)},e.value)}))})},te=function(){return te=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},te.apply(this,arguments)},ne=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,l=t.length;i<l;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},re=function(e){var t,n,i=e.filters,l=e.libraryViewSettings,o=e.setLibraryViewSettings,s=(0,a.useCallback)((function(e){var t,n;e.preventDefault();var r=e.target.value,i=null!==(n=null===(t=null==l?void 0:l.Filters)||void 0===t?void 0:t.Genres)&&void 0!==n?n:[],a=i.includes(r)?i.filter((function(e){return e!==r})):ne(ne([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,l=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=l.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}return a}(i),!1),[r],!1);o((function(e){return te(te({},e),{StartIndex:0,Filters:te(te({},e.Filters),{Genres:a.length?a:void 0})})}))}),[o,null===(t=null==l?void 0:l.Filters)||void 0===t?void 0:t.Genres]);return(0,r.jsx)(U.Z,{children:null===(n=null==i?void 0:i.Genres)||void 0===n?void 0:n.map((function(e){var t,n;return(0,r.jsx)(q.Z,{control:(0,r.jsx)(W.Z,{checked:!!(null===(n=null===(t=null==l?void 0:l.Filters)||void 0===t?void 0:t.Genres)||void 0===n?void 0:n.includes(String(e))),onChange:s,value:String(e)}),label:e},e)}))})},ie=function(){return ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ie.apply(this,arguments)},le=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,l=t.length;i<l;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},ae=function(e){var t,n,i=e.filters,l=e.libraryViewSettings,o=e.setLibraryViewSettings,s=(0,a.useCallback)((function(e){var t,n;e.preventDefault();var r=e.target.value,i=null!==(n=null===(t=null==l?void 0:l.Filters)||void 0===t?void 0:t.OfficialRatings)&&void 0!==n?n:[],a=i.includes(r)?i.filter((function(e){return e!==r})):le(le([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,l=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=l.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}return a}(i),!1),[r],!1);o((function(e){return ie(ie({},e),{StartIndex:0,Filters:ie(ie({},e.Filters),{OfficialRatings:a.length?a:void 0})})}))}),[o,null===(t=null==l?void 0:l.Filters)||void 0===t?void 0:t.OfficialRatings]);return(0,r.jsx)(U.Z,{children:null===(n=null==i?void 0:i.OfficialRatings)||void 0===n?void 0:n.map((function(e){var t,n;return(0,r.jsx)(q.Z,{control:(0,r.jsx)(W.Z,{checked:!!(null===(n=null===(t=null==l?void 0:l.Filters)||void 0===t?void 0:t.OfficialRatings)||void 0===n?void 0:n.includes(String(e))),onChange:s,value:String(e)}),label:e},e)}))})},oe=function(){return oe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},oe.apply(this,arguments)},se=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,l=t.length;i<l;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},ue=[{label:"OptionSpecialEpisode",value:k.bs.ParentIndexNumber},{label:"OptionMissingEpisode",value:k.bs.IsMissing},{label:"OptionUnairedEpisode",value:k.bs.IsUnaired}],ce=function(e){var t,n=e.libraryViewSettings,i=e.setLibraryViewSettings,l=(0,a.useCallback)((function(e){var t,r;e.preventDefault();var l=e.target.value,a=null!==(r=null===(t=null==n?void 0:n.Filters)||void 0===t?void 0:t.EpisodeFilter)&&void 0!==r?r:[],o=a.includes(l)?a.filter((function(e){return e!==l})):se(se([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,l=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=l.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}return a}(a),!1),[l],!1);i((function(e){return oe(oe({},e),{StartIndex:0,Filters:oe(oe({},e.Filters),{EpisodeFilter:o.length?o:void 0})})}))}),[i,null===(t=null==n?void 0:n.Filters)||void 0===t?void 0:t.EpisodeFilter]);return(0,r.jsx)(U.Z,{children:ue.map((function(e){var t,i;return(0,r.jsx)(q.Z,{control:(0,r.jsx)(W.Z,{checked:!!(null===(i=null===(t=null==n?void 0:n.Filters)||void 0===t?void 0:t.EpisodeFilter)||void 0===i?void 0:i.includes(e.value)),onChange:l,value:e.value}),label:p.ZP.translate(e.label)},e.value)}))})},de=function(){return de=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},de.apply(this,arguments)},fe=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,l=t.length;i<l;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},ve=[{label:"Continuing",value:i.v0p.Continuing},{label:"Ended",value:i.v0p.Ended},{label:"Unreleased",value:i.v0p.Unreleased}],he=function(e){var t,n=e.libraryViewSettings,i=e.setLibraryViewSettings,l=(0,a.useCallback)((function(e){var t,r;e.preventDefault();var l=e.target.value,a=null!==(r=null===(t=null==n?void 0:n.Filters)||void 0===t?void 0:t.SeriesStatus)&&void 0!==r?r:[],o=a.includes(l)?a.filter((function(e){return e!==l})):fe(fe([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,l=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=l.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}return a}(a),!1),[l],!1);i((function(e){return de(de({},e),{StartIndex:0,Filters:de(de({},e.Filters),{SeriesStatus:o.length?o:void 0})})}))}),[i,null===(t=null==n?void 0:n.Filters)||void 0===t?void 0:t.SeriesStatus]);return(0,r.jsx)(U.Z,{children:ve.map((function(e){var t,i;return(0,r.jsx)(q.Z,{control:(0,r.jsx)(W.Z,{checked:!!(null===(i=null===(t=null==n?void 0:n.Filters)||void 0===t?void 0:t.SeriesStatus)||void 0===i?void 0:i.includes(e.value)),onChange:l,value:e.value}),label:p.ZP.translate(e.label)},e.value)}))})},pe=n(13661),ye=function(){return ye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ye.apply(this,arguments)},be=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,l=t.length;i<l;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},ge=[{label:"Played",value:i.yrR.IsPlayed},{label:"Unplayed",value:i.yrR.IsUnplayed},{label:"Favorite",value:i.yrR.IsFavorite},{label:"ContinueWatching",value:i.yrR.IsResumable}],me=function(e){var t,n=e.viewType,l=e.libraryViewSettings,o=e.setLibraryViewSettings,s=(0,a.useCallback)((function(e){var t,n;e.preventDefault();var r=e.target.value,i=null!==(n=null===(t=null==l?void 0:l.Filters)||void 0===t?void 0:t.Status)&&void 0!==n?n:[],a=i.includes(r)?i.filter((function(e){return e!==r})):be(be([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,l=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=l.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}return a}(i),!1),[r],!1);o((function(e){return ye(ye({},e),{StartIndex:0,Filters:ye(ye({},e.Filters),{Status:a.length?a:void 0})})}))}),[o,null===(t=null==l?void 0:l.Filters)||void 0===t?void 0:t.Status]);return(0,r.jsx)(U.Z,{children:ge.filter((function(e){return(t=[i.yrR.IsFavorite],n!==pe.$.Albums&&n!==pe.$.Artists&&n!==pe.$.AlbumArtists&&n!==pe.$.Songs&&(t.push(i.yrR.IsUnplayed),t.push(i.yrR.IsPlayed),t.push(i.yrR.IsResumable)),t).includes(e.value);var t})).map((function(e){var t,n;return(0,r.jsx)(q.Z,{control:(0,r.jsx)(W.Z,{checked:!!(null===(n=null===(t=null==l?void 0:l.Filters)||void 0===t?void 0:t.Status)||void 0===n?void 0:n.includes(e.value)),onChange:s,value:e.value}),label:p.ZP.translate(e.label)},e.value)}))})},xe=function(){return xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},xe.apply(this,arguments)},Se=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,l=t.length;i<l;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},we=function(e){var t,n,i=e.filters,l=e.libraryViewSettings,o=e.setLibraryViewSettings,s=(0,a.useCallback)((function(e){var t,n;e.preventDefault();var r=e.target.value,i=null!==(n=null===(t=null==l?void 0:l.Filters)||void 0===t?void 0:t.StudioIds)&&void 0!==n?n:[],a=i.includes(r)?i.filter((function(e){return e!==r})):Se(Se([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,l=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=l.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}return a}(i),!1),[r],!1);o((function(e){return xe(xe({},e),{StartIndex:0,Filters:xe(xe({},e.Filters),{StudioIds:a.length?a:void 0})})}))}),[o,null===(t=l.Filters)||void 0===t?void 0:t.StudioIds]);return(0,r.jsx)(U.Z,{children:null===(n=null==i?void 0:i.Items)||void 0===n?void 0:n.map((function(e){var t,n;return(0,r.jsx)(q.Z,{control:(0,r.jsx)(W.Z,{checked:!!(null===(n=null===(t=null==l?void 0:l.Filters)||void 0===t?void 0:t.StudioIds)||void 0===n?void 0:n.includes(String(e.Id))),onChange:s,value:String(e.Id)}),label:e.Name},e.Id)}))})},je=function(){return je=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},je.apply(this,arguments)},Ze=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,l=t.length;i<l;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Ce=function(e){var t,n,i=e.filters,l=e.libraryViewSettings,o=e.setLibraryViewSettings,s=(0,a.useCallback)((function(e){var t,n;e.preventDefault();var r=e.target.value,i=null!==(n=null===(t=null==l?void 0:l.Filters)||void 0===t?void 0:t.Tags)&&void 0!==n?n:[],a=i.includes(r)?i.filter((function(e){return e!==r})):Ze(Ze([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,l=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=l.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}return a}(i),!1),[r],!1);o((function(e){return je(je({},e),{StartIndex:0,Filters:je(je({},e.Filters),{Tags:a.length?a:void 0})})}))}),[o,null===(t=l.Filters)||void 0===t?void 0:t.Tags]);return(0,r.jsx)(U.Z,{children:null===(n=null==i?void 0:i.Tags)||void 0===n?void 0:n.map((function(e){var t,n;return(0,r.jsx)(q.Z,{control:(0,r.jsx)(W.Z,{checked:!!(null===(n=null===(t=null==l?void 0:l.Filters)||void 0===t?void 0:t.Tags)||void 0===n?void 0:n.includes(String(e))),onChange:s,value:String(e)}),label:e},e)}))})},Oe=function(){return Oe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Oe.apply(this,arguments)},Pe=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,l=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=l.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}return a},Ie=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,l=t.length;i<l;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Te=[{label:"SD",value:k.tE.IsSD},{label:"HD",value:k.tE.IsHD},{label:"4K",value:k.tE.Is4K},{label:"3D",value:k.tE.Is3D}],ke=[{label:"DVD",value:i.ZSX.Dvd},{label:"Blu-ray",value:i.ZSX.BluRay},{label:"ISO",value:i.ZSX.Iso}],Ve=function(e){var t,n,i=e.libraryViewSettings,l=e.setLibraryViewSettings,o=(0,a.useCallback)((function(e){var t,n;e.preventDefault();var r=e.target.value,a=null!==(n=null===(t=null==i?void 0:i.Filters)||void 0===t?void 0:t.VideoBasicFilter)&&void 0!==n?n:[],o=a.includes(r)?a.filter((function(e){return e!==r})):Ie(Ie([],Pe(a),!1),[r],!1);l((function(e){return Oe(Oe({},e),{Filters:Oe(Oe({},e.Filters),{VideoBasicFilter:o.length?o:void 0})})}))}),[l,null===(t=null==i?void 0:i.Filters)||void 0===t?void 0:t.VideoBasicFilter]),s=(0,a.useCallback)((function(e){var t,n;e.preventDefault();var r=e.target.value,a=null!==(n=null===(t=null==i?void 0:i.Filters)||void 0===t?void 0:t.VideoTypes)&&void 0!==n?n:[],o=a.includes(r)?a.filter((function(e){return e!==r})):Ie(Ie([],Pe(a),!1),[r],!1);l((function(e){return Oe(Oe({},e),{StartIndex:0,Filters:Oe(Oe({},e.Filters),{VideoTypes:o.length?o:void 0})})}))}),[l,null===(n=null==i?void 0:i.Filters)||void 0===n?void 0:n.VideoTypes]);return(0,r.jsxs)(U.Z,{children:[Te.map((function(e){var t,n;return(0,r.jsx)(q.Z,{control:(0,r.jsx)(W.Z,{checked:!!(null===(n=null===(t=null==i?void 0:i.Filters)||void 0===t?void 0:t.VideoBasicFilter)||void 0===n?void 0:n.includes(e.value)),onChange:o,value:e.value}),label:e.label},e.value)})),ke.map((function(e){var t,n;return(0,r.jsx)(q.Z,{control:(0,r.jsx)(W.Z,{checked:!!(null===(n=null===(t=null==i?void 0:i.Filters)||void 0===t?void 0:t.VideoTypes)||void 0===n?void 0:n.includes(e.value)),onChange:s,value:e.value}),label:e.label},e.value)}))]})},Fe=function(){return Fe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Fe.apply(this,arguments)},Le=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,l=t.length;i<l;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Ae=function(e){var t,n,i=e.filters,l=e.libraryViewSettings,o=e.setLibraryViewSettings,s=(0,a.useCallback)((function(e){var t,n;e.preventDefault();var r=Number(e.target.value),i=null!==(n=null===(t=null==l?void 0:l.Filters)||void 0===t?void 0:t.Years)&&void 0!==n?n:[],a=i.includes(r)?i.filter((function(e){return e!==r})):Le(Le([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,l=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=l.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}return a}(i),!1),[r],!1);o((function(e){return Fe(Fe({},e),{StartIndex:0,Filters:Fe(Fe({},e.Filters),{Years:a.length?a:void 0})})}))}),[o,null===(t=null==l?void 0:l.Filters)||void 0===t?void 0:t.Years]);return(0,r.jsx)(U.Z,{children:null===(n=null==i?void 0:i.Years)||void 0===n?void 0:n.map((function(e){var t,n;return(0,r.jsx)(q.Z,{control:(0,r.jsx)(W.Z,{checked:!!(null===(n=null===(t=null==l?void 0:l.Filters)||void 0===t?void 0:t.Years)||void 0===n?void 0:n.includes(Number(e))),onChange:s,value:String(e)}),label:e},e)}))})},Ee=function(){return Ee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ee.apply(this,arguments)},De=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,l=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=l.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}return a},Me=(0,X.ZP)((function(e){return(0,r.jsx)($.Z,Ee({disableGutters:!0,elevation:0,TransitionProps:{unmountOnExit:!0},square:!0},e))}))((function(e){var t=e.theme;return{border:"1px solid ".concat(t.palette.divider),"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}}})),Re=(0,X.ZP)((function(e){return(0,r.jsx)(_.Z,Ee({expandIcon:(0,r.jsx)(R.Z,{sx:{fontSize:"0.9rem"}})},e))}))((function(e){var t=e.theme;return{backgroundColor:"dark"===t.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:t.spacing(1)}}})),Be=(0,X.ZP)(H.Z)((function(e){return{padding:e.theme.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)"}})),Ne=function(e){var t,n,i,l=e.parentId,s=e.itemType,c=e.viewType,d=e.hasFilters,f=e.libraryViewSettings,v=e.setLibraryViewSettings,h=De(a.useState(null),2),y=h[0],b=h[1],g=De(a.useState(!1),2),m=g[0],x=g[1],S=Boolean(y),w=S?"filter-popover":void 0,j=(0,u.eY)(l,s).data,Z=(0,u.FF)(l,s).data,C=function(e){return function(t,n){x(!!n&&e)}},O=(0,a.useCallback)((function(e){b(e.currentTarget)}),[]),P=(0,a.useCallback)((function(){b(null)}),[]);return(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(z.Z,Ee({title:p.ZP.translate("Filter"),sx:{ml:2},"aria-describedby":w,className:"paper-icon-button-light btnFilter autoSize",onClick:O},{children:(0,r.jsx)(Y.Z,Ee({color:"info",variant:"dot",invisible:!d},{children:(0,r.jsx)(B.Z,{})}))})),(0,r.jsxs)(N.ZP,Ee({id:w,open:S,anchorEl:y,onClose:P,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},PaperProps:{style:{maxHeight:"50%",width:250}}},{children:[(0,r.jsxs)(Me,Ee({expanded:"filtersStatus"===m,onChange:C("filtersStatus")},{children:[(0,r.jsx)(Re,Ee({"aria-controls":"filtersStatus-content",id:"filtersStatus-header"},{children:(0,r.jsx)(G.Z,{children:p.ZP.translate("Filters")})})),(0,r.jsx)(Be,{children:(0,r.jsx)(me,{viewType:c,libraryViewSettings:f,setLibraryViewSettings:v})})]})),c===pe.$.Series&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(Me,Ee({expanded:"filtersSeriesStatus"===m,onChange:C("filtersSeriesStatus")},{children:[(0,r.jsx)(Re,Ee({"aria-controls":"filtersSeriesStatus-content",id:"filtersSeriesStatus-header"},{children:(0,r.jsx)(G.Z,{children:p.ZP.translate("HeaderSeriesStatus")})})),(0,r.jsx)(Be,{children:(0,r.jsx)(he,{libraryViewSettings:f,setLibraryViewSettings:v})})]}))}),c===pe.$.Episodes&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(Me,Ee({expanded:"filtersEpisodesStatus"===m,onChange:C("filtersEpisodesStatus")},{children:[(0,r.jsx)(Re,Ee({"aria-controls":"filtersEpisodesStatus-content",id:"filtersEpisodesStatus-header"},{children:(0,r.jsx)(G.Z,{children:p.ZP.translate("HeaderEpisodesStatus")})})),(0,r.jsx)(Be,{children:(0,r.jsx)(ce,{libraryViewSettings:f,setLibraryViewSettings:v})})]}))}),(c===pe.$.Movies||c===pe.$.Series||c===pe.$.Episodes)&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(Me,Ee({expanded:"filtersFeatures"===m,onChange:C("filtersFeatures")},{children:[(0,r.jsx)(Re,Ee({"aria-controls":"filtersFeatures-content",id:"filtersFeatures-header"},{children:(0,r.jsx)(G.Z,{children:p.ZP.translate("Features")})})),(0,r.jsx)(Be,{children:(0,r.jsx)(ee,{libraryViewSettings:f,setLibraryViewSettings:v})})]}))}),(c===pe.$.Movies||c===pe.$.Episodes)&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(Me,Ee({expanded:"filtersVideoTypes"===m,onChange:C("filtersVideoTypes")},{children:[(0,r.jsx)(Re,Ee({"aria-controls":"filtersVideoTypes-content",id:"filtersVideoTypes-header"},{children:(0,r.jsx)(G.Z,{children:p.ZP.translate("HeaderVideoType")})})),(0,r.jsx)(Be,{children:(0,r.jsx)(Ve,{libraryViewSettings:f,setLibraryViewSettings:v})})]}))}),(c===pe.$.Movies||c===pe.$.Series||c===pe.$.Albums||c===pe.$.AlbumArtists||c===pe.$.Artists||c===pe.$.Songs||c===pe.$.Episodes)&&(0,r.jsxs)(r.Fragment,{children:[(null==j?void 0:j.Genres)&&(null===(t=null==j?void 0:j.Genres)||void 0===t?void 0:t.length)>0&&(0,r.jsxs)(Me,Ee({expanded:"filtersGenres"===m,onChange:C("filtersGenres")},{children:[(0,r.jsx)(Re,Ee({"aria-controls":"filtersGenres-content",id:"filtersGenres-header"},{children:(0,r.jsx)(G.Z,{children:p.ZP.translate("Genres")})})),(0,r.jsx)(Be,{children:(0,r.jsx)(re,{filters:j,libraryViewSettings:f,setLibraryViewSettings:v})})]})),(null==j?void 0:j.OfficialRatings)&&(null===(n=null==j?void 0:j.OfficialRatings)||void 0===n?void 0:n.length)>0&&(0,r.jsxs)(Me,Ee({expanded:"filtersOfficialRatings"===m,onChange:C("filtersOfficialRatings")},{children:[(0,r.jsx)(Re,Ee({"aria-controls":"filtersOfficialRatings-content",id:"filtersOfficialRatings-header"},{children:(0,r.jsx)(G.Z,{children:p.ZP.translate("HeaderParentalRatings")})})),(0,r.jsx)(Be,{children:(0,r.jsx)(ae,{filters:j,libraryViewSettings:f,setLibraryViewSettings:v})})]})),(null==j?void 0:j.Tags)&&(null==j?void 0:j.Tags.length)>0&&(0,r.jsxs)(Me,Ee({expanded:"filtersTags"===m,onChange:C("filtersTags")},{children:[(0,r.jsx)(Re,Ee({"aria-controls":"filtersTags-content",id:"filtersTags-header"},{children:(0,r.jsx)(G.Z,{children:p.ZP.translate("Tags")})})),(0,r.jsx)(Be,{children:(0,r.jsx)(Ce,{filters:j,libraryViewSettings:f,setLibraryViewSettings:v})})]})),(null==j?void 0:j.Years)&&(null===(i=null==j?void 0:j.Years)||void 0===i?void 0:i.length)>0&&(0,r.jsxs)(Me,Ee({expanded:"filtersYears"===m,onChange:C("filtersYears")},{children:[(0,r.jsx)(Re,Ee({"aria-controls":"filtersYears-content",id:"filtersYears-header"},{children:(0,r.jsx)(G.Z,{children:p.ZP.translate("HeaderYears")})})),(0,r.jsx)(Be,{children:(0,r.jsx)(Ae,{filters:j,libraryViewSettings:f,setLibraryViewSettings:v})})]}))]}),(c===pe.$.Movies||c===pe.$.Series)&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(Me,Ee({expanded:"filtersStudios"===m,onChange:C("filtersStudios")},{children:[(0,r.jsx)(Re,Ee({"aria-controls":"filtersStudios-content",id:"filtersStudios-header"},{children:(0,r.jsx)(G.Z,{children:p.ZP.translate("Studios")})})),(0,r.jsx)(Be,{children:(0,r.jsx)(we,{filters:Z,libraryViewSettings:f,setLibraryViewSettings:v})})]}))})]}))]})},$e=n(78633),He=function(){return He=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},He.apply(this,arguments)},_e=function(){var e=(0,a.useCallback)((function(){n.e(18633).then(n.bind(n,19449)).then((function(e){var t=e.default,n=window.ApiClient.serverId();(new t).show({items:[],serverId:n}).catch((function(){}))})).catch((function(e){console.error("[NewCollection] failed to load collection editor",e)}))}),[]);return(0,r.jsx)(z.Z,He({title:p.ZP.translate("Add"),className:"paper-icon-button-light btnNewCollection autoSize",onClick:e},{children:(0,r.jsx)($e.Z,{})}))},ze=n(91434),Ye=n(97210),Xe=n(38380),Ge=n(60934),Ue=function(){return Ue=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ue.apply(this,arguments)},qe=function(e){var t,n=e.libraryViewSettings,i=e.setLibraryViewSettings,l=e.totalRecordCount,s=e.isPreviousData,u=Ge.libraryPageSize(void 0),c=null!==(t=n.StartIndex)&&void 0!==t?t:0,d=l?c+1:0,f=u?Math.min(c+u,l):l,v=u>0&&u<l,h=(0,a.useCallback)((function(){var e=c+u;i((function(t){return Ue(Ue({},t),{StartIndex:e})}))}),[u,i,c]),y=(0,a.useCallback)((function(){var e=Math.max(0,c-u);i((function(t){return Ue(Ue({},t),{StartIndex:e})}))}),[u,i,c]);return(0,r.jsx)(o.Z,Ue({className:"paging"},{children:(0,r.jsxs)(o.Z,Ue({className:"listPaging",style:{display:"flex",alignItems:"center"}},{children:[(0,r.jsx)("span",{children:p.ZP.translate("ListPaging",d,f,l)}),v&&(0,r.jsxs)(Xe.Z,{children:[(0,r.jsx)(z.Z,Ue({title:p.ZP.translate("Previous"),className:"paper-icon-button-light btnPreviousPage autoSize",disabled:0==c||s,onClick:y},{children:(0,r.jsx)(ze.Z,{})})),(0,r.jsx)(z.Z,Ue({title:p.ZP.translate("Next"),className:"paper-icon-button-light btnNextPage autoSize",disabled:c+u>=l||s,onClick:h},{children:(0,r.jsx)(Ye.Z,{})}))]})]}))}))},We=n(17200),Qe=function(){return Qe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Qe.apply(this,arguments)},Ke=function(e){var t=e.item,n=e.items,i=e.viewType,l=e.hasFilters,o=e.libraryViewSettings,s=(0,a.useCallback)((function(){var e;t&&!l?h.O.play({items:[t],autoplay:!0,queryOptions:{SortBy:[o.SortBy],SortOrder:[o.SortOrder]}}):h.O.play({items:n,autoplay:!0,queryOptions:Qe(Qe({ParentId:null!==(e=null==t?void 0:t.Id)&&void 0!==e?e:void 0},(0,c.OV)(i,o)),{SortBy:[o.SortBy],SortOrder:[o.SortOrder]})})}),[l,t,n,o,i]);return(0,r.jsx)(z.Z,Qe({title:p.ZP.translate("HeaderPlayAll"),className:"paper-icon-button-light btnPlay autoSize",onClick:s},{children:(0,r.jsx)(We.Z,{})}))},Je=n(11501),et=function(){return et=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},et.apply(this,arguments)},tt=function(e){var t=e.item,n=e.items,i=e.hasFilters,l=(0,a.useCallback)((function(){t&&!i?h.O.queue({items:[t]}):h.O.queue({items:n})}),[i,t,n]);return(0,r.jsx)(z.Z,et({title:p.ZP.translate("AddToPlayQueue"),className:"paper-icon-button-light btnQueue autoSize",onClick:l},{children:(0,r.jsx)(Je.Z,{})}))},nt=n(8199),rt=function(){return rt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},rt.apply(this,arguments)},it=function(e){var t=e.item,n=e.items,i=e.viewType,o=e.hasFilters,s=e.libraryViewSettings,u=(0,a.useCallback)((function(){var e;t&&!o?h.O.shuffle(t):h.O.play({items:n,autoplay:!0,queryOptions:rt(rt({ParentId:null!==(e=null==t?void 0:t.Id)&&void 0!==e?e:void 0},(0,c.OV)(i,s)),{SortBy:[l.X.Random]})})}),[o,t,n,s,i]);return(0,r.jsx)(z.Z,rt({title:p.ZP.translate("Shuffle"),className:"paper-icon-button-light btnShuffle autoSize",onClick:u},{children:(0,r.jsx)(nt.Z,{})}))},lt=n(25825),at=n(60006),ot=n(78972),st=n(14264),ut=n(55599),ct=n(59701),dt=function(){return dt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},dt.apply(this,arguments)},ft=[{label:"Name",value:l.X.SortName},{label:"OptionRandom",value:l.X.Random},{label:"OptionImdbRating",value:l.X.CommunityRating},{label:"OptionCriticRating",value:l.X.CriticRating},{label:"OptionDateAdded",value:l.X.DateCreated},{label:"OptionDatePlayed",value:l.X.DatePlayed},{label:"OptionParentalRating",value:l.X.OfficialRating},{label:"OptionPlayCount",value:l.X.PlayCount},{label:"OptionReleaseDate",value:l.X.PremiereDate},{label:"Runtime",value:l.X.Runtime}],vt=[{label:"Ascending",value:i.Asd.Ascending},{label:"Descending",value:i.Asd.Descending}],ht=function(e){var t=e.viewType,n=e.libraryViewSettings,i=e.setLibraryViewSettings,s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,l=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=l.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}return a}(a.useState(null),2),u=s[0],c=s[1],d=Boolean(u),f=d?"sort-popover":void 0,v=(0,a.useCallback)((function(e){c(e.currentTarget)}),[]),h=(0,a.useCallback)((function(){c(null)}),[]),y=(0,a.useCallback)((function(e){var t=e.target.name;i((function(n){var r;return dt(dt({},n),((r={StartIndex:0})[t]=e.target.value,r))}))}),[i]);return(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(z.Z,dt({title:p.ZP.translate("Sort"),sx:{ml:2},"aria-describedby":f,className:"paper-icon-button-light btnSort autoSize",onClick:v},{children:(0,r.jsx)(ct.Z,{})})),(0,r.jsxs)(N.ZP,dt({id:f,open:d,anchorEl:u,onClose:h,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},sx:{"& .MuiFormControl-root":{m:1,width:200}}},{children:[(0,r.jsxs)(st.Z,dt({fullWidth:!0},{children:[(0,r.jsx)(ot.Z,dt({id:"select-sort-label"},{children:(0,r.jsx)(G.Z,dt({component:"span"},{children:p.ZP.translate("LabelSortBy")}))})),(0,r.jsx)(ut.Z,dt({labelId:"select-sort-label",id:"selectSortBy",value:n.SortBy,label:p.ZP.translate("LabelSortBy"),name:"SortBy",onChange:y},{children:ft.filter((function(e){return(n=[l.X.SortName,l.X.Random,l.X.DateCreated],t!==pe.$.Photos&&t!==pe.$.Videos&&t!==pe.$.Books&&(n.push(l.X.CommunityRating),n.push(l.X.CriticRating),n.push(l.X.DatePlayed),n.push(l.X.OfficialRating),n.push(l.X.PlayCount),n.push(l.X.PremiereDate),n.push(l.X.Runtime)),n).includes(e.value);var n})).map((function(e){return(0,r.jsx)(lt.Z,dt({value:e.value},{children:(0,r.jsx)(G.Z,dt({component:"span"},{children:p.ZP.translate(e.label)}))}),e.value)}))}))]})),(0,r.jsx)(at.Z,{}),(0,r.jsxs)(st.Z,dt({fullWidth:!0},{children:[(0,r.jsx)(ot.Z,dt({id:"select-sortorder-label"},{children:(0,r.jsx)(G.Z,dt({component:"span"},{children:p.ZP.translate("LabelSortOrder")}))})),(0,r.jsx)(ut.Z,dt({labelId:"select-sortorder-label",id:"selectSortOrder",value:n.SortOrder,label:p.ZP.translate("LabelSortOrder"),name:"SortOrder",onChange:y},{children:vt.map((function(e){return(0,r.jsx)(lt.Z,dt({value:e.value},{children:(0,r.jsx)(G.Z,dt({component:"span"},{children:e.label}))}),e.value)}))}))]}))]}))]})},pt=n(15665),yt=n(51157),bt=n(18313),gt=function(){return gt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},gt.apply(this,arguments)},mt=[{label:"Primary",value:i.__M.Primary},{label:"Banner",value:i.__M.Banner},{label:"Disc",value:i.__M.Disc},{label:"Logo",value:i.__M.Logo},{label:"Thumb",value:i.__M.Thumb}],xt=function(e){var t=e.viewType,n=e.libraryViewSettings,l=e.setLibraryViewSettings,s=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,l=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=l.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}return a}(a.useState(null),2),u=s[0],c=s[1],d=Boolean(u),f=d?"selectview-popover":void 0,v=(0,a.useCallback)((function(e){c(e.currentTarget)}),[]),h=(0,a.useCallback)((function(){c(null)}),[]),y=(0,a.useCallback)((function(e){var t=e.target.name;l((function(n){var r;return gt(gt({},n),((r={})[t]=e.target.checked,r))}))}),[l]),b=(0,a.useCallback)((function(e){l((function(t){return gt(gt({},t),{ImageType:e.target.value})}))}),[l]);return(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(z.Z,gt({title:p.ZP.translate("ButtonSelectView"),sx:{ml:2},"aria-describedby":f,className:"paper-icon-button-light btnSelectView autoSize",onClick:v},{children:(0,r.jsx)(bt.Z,{})})),(0,r.jsxs)(N.ZP,gt({id:f,open:d,anchorEl:u,onClose:h,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},sx:{"& .MuiFormControl-root":{m:1,width:220}}},{children:[(0,r.jsxs)(st.Z,{children:[(0,r.jsx)(ot.Z,gt({id:"select-sort-label"},{children:(0,r.jsx)(G.Z,gt({component:"span"},{children:p.ZP.translate("LabelImageType")}))})),(0,r.jsx)(ut.Z,gt({value:n.ImageType,label:p.ZP.translate("LabelImageType"),onChange:b},{children:mt.filter((function(e){return(n=[i.__M.Primary],t!==pe.$.Episodes&&t!==pe.$.Artists&&t!==pe.$.AlbumArtists&&t!==pe.$.Albums&&(n.push(i.__M.Banner),n.push(i.__M.Disc),n.push(i.__M.Logo),n.push(i.__M.Thumb)),n).includes(e.value);var n})).map((function(e){return(0,r.jsx)(lt.Z,gt({value:e.value},{children:(0,r.jsx)(G.Z,gt({component:"span"},{children:p.ZP.translate(e.label)}))}),e.value)}))}))]}),n.ViewMode!==k.wO.ListView&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(at.Z,{}),(0,r.jsx)(st.Z,{children:(0,r.jsxs)(U.Z,{children:[(0,r.jsx)(q.Z,{control:(0,r.jsx)(W.Z,{checked:n.ShowTitle,onChange:y,name:"ShowTitle"}),label:p.ZP.translate("ShowTitle")}),(0,r.jsx)(q.Z,{control:(0,r.jsx)(W.Z,{checked:n.ShowYear,onChange:y,name:"ShowYear"}),label:p.ZP.translate("ShowYear")}),(0,r.jsx)(q.Z,{control:(0,r.jsx)(W.Z,{checked:n.CardLayout,onChange:y,name:"CardLayout"}),label:p.ZP.translate("EnableCardLayout")})]})})]})]}))]})},St=function(){return St=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},St.apply(this,arguments)},wt=function(e){var t=e.viewType,n=e.libraryViewSettings,i=e.setLibraryViewSettings,l=(0,a.useCallback)((function(){i((function(e){return St(St({},e),{ViewMode:e.ViewMode===k.wO.ListView?k.wO.GridView:k.wO.ListView})}))}),[i]),o=n.ViewMode===k.wO.GridView;return(0,r.jsxs)(Xe.Z,{children:[o?(0,r.jsx)(xt,{viewType:t,libraryViewSettings:n,setLibraryViewSettings:i}):(0,r.jsx)(z.Z,St({title:p.ZP.translate("GridView"),className:"paper-icon-button-light autoSize",disabled:o,onClick:l},{children:(0,r.jsx)(pt.Z,{})})),(0,r.jsx)(z.Z,St({title:p.ZP.translate("ListView"),className:"paper-icon-button-light autoSize",disabled:!o,onClick:l},{children:(0,r.jsx)(yt.Z,{})}))]})},jt=function(){return jt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},jt.apply(this,arguments)},Zt=function(e){var t,n,y,b=e.viewType,g=e.parentId,m=e.collectionType,x=e.isBtnPlayAllEnabled,S=void 0!==x&&x,w=e.isBtnQueueEnabled,j=void 0!==w&&w,Z=e.isBtnShuffleEnabled,C=void 0!==Z&&Z,O=e.isBtnSortEnabled,P=void 0===O||O,I=e.isBtnFilterEnabled,T=void 0===I||I,V=e.isBtnNewCollectionEnabled,F=void 0!==V&&V,A=e.isBtnGridListEnabled,E=void 0===A||A,D=e.isAlphabetPickerEnabled,R=void 0===D||D,B=e.itemType,N=e.noItemsMessage,$=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,l=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=l.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}return a}((0,s._)((0,c.Mq)(b,g),(0,c.$K)(b)),2),H=$[0],_=$[1],z=(0,u.bz)(b,g,B,H),Y=z.isLoading,X=z.data,G=z.isPreviousData,U=z.refetch,q=(0,u.z8)(g).data,W=(0,a.useCallback)((function(){var e,t,n,r,l=H.ShowTitle?2:0;H.ImageType===i.__M.Banner?e="banner":H.ImageType===i.__M.Disc?(e="square",n=!0):H.ImageType===i.__M.Logo?(e="backdrop",r=!0):H.ImageType===i.__M.Thumb?(e="backdrop",t=!0):e="auto";var a={shape:e,showTitle:H.ShowTitle,showYear:H.ShowYear,cardLayout:H.CardLayout,centerText:!0,context:m,coverImage:!0,preferThumb:t,preferDisc:n,preferLogo:r,overlayPlayButton:!1,overlayMoreButton:!0,overlayText:!H.ShowTitle};return b===pe.$.Songs||b===pe.$.Albums||b===pe.$.Episodes?a.showParentTitle=H.ShowTitle:b===pe.$.Artists&&(a.showYear=!1,l=1),a.lines=l,a}),[H.ShowTitle,H.ImageType,H.ShowYear,H.CardLayout,m,b]),Q=(0,a.useCallback)((function(){var e,t,n,r="";return r=H.ViewMode===k.wO.ListView?f.Z.getListViewHtml({items:null!==(e=null==X?void 0:X.Items)&&void 0!==e?e:[],context:m}):v.default.getCardsHtml(null!==(t=null==X?void 0:X.Items)&&void 0!==t?t:[],W()),(null===(n=null==X?void 0:X.Items)||void 0===n?void 0:n.length)||(r+='<div class="noItemsMessage centerMessage">',r+="<h1>"+p.ZP.translate("MessageNothingHere")+"</h1>",r+="<p>"+p.ZP.translate(N)+"</p>",r+="</div>"),r}),[H.ViewMode,null==X?void 0:X.Items,m,W,N]),K=null!==(t=null==X?void 0:X.TotalRecordCount)&&void 0!==t?t:0,J=null!==(n=null==X?void 0:X.Items)&&void 0!==n?n:[],ee=Object.values(null!==(y=H.Filters)&&void 0!==y?y:{}).some((function(e){return!!e})),te=H.SortBy.includes(l.X.SortName);return(0,r.jsxs)(o.Z,{children:[(0,r.jsxs)(o.Z,jt({className:"flex align-items-center justify-content-center flex-wrap-wrap padded-top padded-left padded-right padded-bottom focuscontainer-x"},{children:[(0,r.jsx)(qe,{totalRecordCount:K,libraryViewSettings:H,isPreviousData:G,setLibraryViewSettings:_}),S&&(0,r.jsx)(Ke,{item:q,items:J,viewType:b,hasFilters:ee,libraryViewSettings:H}),j&&q&&h.O.canQueue(q)&&(0,r.jsx)(tt,{item:q,items:J,hasFilters:ee}),C&&K>1&&(0,r.jsx)(it,{item:q,items:J,viewType:b,hasFilters:ee,libraryViewSettings:H}),P&&(0,r.jsx)(ht,{viewType:b,libraryViewSettings:H,setLibraryViewSettings:_}),T&&(0,r.jsx)(Ne,{parentId:g,itemType:B,viewType:b,hasFilters:ee,libraryViewSettings:H,setLibraryViewSettings:_}),F&&(0,r.jsx)(_e,{}),E&&(0,r.jsx)(wt,{viewType:b,libraryViewSettings:H,setLibraryViewSettings:_})]})),R&&te&&(0,r.jsx)(M,{libraryViewSettings:H,setLibraryViewSettings:_}),Y?(0,r.jsx)(d.Z,{}):(0,r.jsx)(L,{className:"centered padded-left padded-right padded-right-withalphapicker",libraryViewSettings:H,parentId:g,reloadItems:U,getItemsHtml:Q}),(0,r.jsx)(o.Z,jt({className:"flex align-items-center justify-content-center flex-wrap-wrap padded-top padded-left padded-right padded-bottom focuscontainer-x"},{children:(0,r.jsx)(qe,{totalRecordCount:K,libraryViewSettings:H,isPreviousData:G,setLibraryViewSettings:_})}))]})}}}]);