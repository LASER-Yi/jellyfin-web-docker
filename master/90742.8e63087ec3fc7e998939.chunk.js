(self.webpackChunk=self.webpackChunk||[]).push([[90742,15605],{51938:function(e,t,a){"use strict";a(78557),a(73687);var r=a(98320),i=a(23648);function n(e){return"Video"===e.MediaType&&"TvChannel"!==e.Type||"AudioBook"===e.Type||"AudioPodcast"===e.Type}function s(e,t){var a="itemProgressBar";return null!=t&&t.containerClass&&(a+=" "+t.containerClass),'<div class="'+a+'"><div class="itemProgressBarForeground" style="width:'+e+'%;"></div></div>'}function o(e){return i.Ay.canMarkPlayed(e)}function c(e){return e>=100?"99+":e.toString()}a(12383),t.Ay={getProgressHtml:s,getProgressBarHtml:function(e,t){var a;if(n(e)&&"Recording"!==e.Type){var i=null!=t&&t.userData?t.userData:e.UserData;if(i&&(a=i.PlayedPercentage)&&a<100)return s(a,t)}if(("Program"===e.Type||"Timer"===e.Type||"Recording"===e.Type)&&e.StartDate&&e.EndDate){var o=0,c=1;try{o=r.Ay.parseISO8601Date(e.StartDate).getTime(),c=r.Ay.parseISO8601Date(e.EndDate).getTime()}catch(e){console.error(e)}if((a=((new Date).getTime()-o)/(c-o)*100)>0&&a<100)return function(e,t,a,r,i){var n="itemProgressBar";null!=t&&t.containerClass&&(n+=" "+t.containerClass);var s="itemProgressBarForeground";return a&&(s+=" itemProgressBarForeground-recording"),'<div is="emby-progressbar" data-automode="time" data-starttime="'+r+'" data-endtime="'+i+'" class="'+n+'"><div class="'+s+'" style="width:'+e+'%;"></div></div>'}(a,t,"Timer"===e.Type||"Recording"===e.Type||e.TimerId,o,c)}return""},getPlayedIndicatorHtml:function(e){if(o(e)){var t=e.UserData||{};if(t.UnplayedItemCount)return'<div class="countIndicator indicator">'+c(t.UnplayedItemCount)+"</div>";if(t.PlayedPercentage&&t.PlayedPercentage>=100||t.Played)return'<div class="playedIndicator indicator"><span class="material-icons indicatorIcon check" aria-hidden="true"></span></div>'}return""},getChildCountIndicatorHtml:function(e,t){var a=null!=t&&t.minCount?t.minCount:0;return e.ChildCount&&e.ChildCount>a?'<div class="countIndicator indicator">'+c(e.ChildCount)+"</div>":""},enableProgressIndicator:n,getTimerIndicator:function(e){var t;if("SeriesTimer"===e.Type)return'<span class="material-icons timerIndicator indicatorIcon fiber_smart_record" aria-hidden="true"></span>';if(e.TimerId||e.SeriesTimerId)t=e.Status||"Cancelled";else{if("Timer"!==e.Type)return"";t=e.Status}return e.SeriesTimerId?"Cancelled"!==t?'<span class="material-icons timerIndicator indicatorIcon fiber_smart_record" aria-hidden="true"></span>':'<span class="material-icons timerIndicator timerIndicator-inactive indicatorIcon fiber_smart_record" aria-hidden="true"></span>':'<span class="material-icons timerIndicator indicatorIcon fiber_manual_record" aria-hidden="true"></span>'},enablePlayedIndicator:o,getSyncIndicator:function(e){return 100===e.SyncPercent?'<div class="syncIndicator indicator fullSyncIndicator"><span class="material-icons indicatorIcon file_download" aria-hidden="true"></span></div>':null!=e.SyncPercent?'<div class="syncIndicator indicator emptySyncIndicator"><span class="material-icons indicatorIcon file_download" aria-hidden="true"></span></div>':""},getTypeIndicator:function(e){var t={Video:"videocam",Folder:"folder",PhotoAlbum:"photo_album",Photo:"photo"}[e.Type];return t?'<div class="indicator videoIndicator"><span class="material-icons indicatorIcon '+t+'" aria-hidden="true"></span></div>':""},getMissingIndicator:function(e){if("Episode"===e.Type&&"Virtual"===e.LocationType){if(e.PremiereDate)try{if(r.Ay.parseISO8601Date(e.PremiereDate).getTime()>(new Date).getTime())return'<div class="unairedIndicator">Unaired</div>'}catch(e){console.error(e)}return'<div class="missingIndicator">Missing</div>'}return""}}},82180:function(e,t,a){"use strict";a(24776),a(14382),a(86584),a(9698),a(78557);var r=a(22696),i=a.n(r),n=a(98320),s=a(5898),o=a(70267),c=a(23648),l=a(51938),u=(a(10353),a(82885));function d(e){if("Video"===e.MediaType&&e.RunTimeTicks&&!e.StartDate){var t=(new Date).getTime()+e.RunTimeTicks/1e4;t=new Date(t);var a=n.Ay.getDisplayTime(t);return s.Ay.translate("EndsAtValue",a)}return null}function f(e,t){t=t?"".concat(t," mediaInfoItem"):"mediaInfoItem";var a=e;if("string"!=typeof e&&"number"!=typeof e){if(e.html)return e.html;a=e.text,t+=" ".concat(e.cssClass)}return'<div class="'.concat(t,'">').concat(a,"</div>")}function m(e,t,a){if(!1!==a.endsAt){var r=e.querySelector(".endsAt");r&&function(e,t){var a=setInterval((function(){document.body.contains(e)?e.innerHTML=d(t):clearInterval(a)}),6e4)}(r,t)}var i=e.querySelector(".lnkChannel");i&&i.addEventListener("click",p)}function p(e){var t=this.getAttribute("data-id"),a=this.getAttribute("data-serverid");return o.appRouter.showItem(t,a),e.preventDefault(),!1}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===t.interactive&&(t.interactive=!1),function(e){var t,a,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},m="",p=[],v="MusicAlbum"===e.Type||"MusicArtist"===e.MediaType||"Playlist"===e.Type||"Playlist"===e.MediaType||"MusicGenre"===e.MediaType;if(v?((r=e.SongCount||e.ChildCount)&&p.push(s.Ay.translate("TrackCount",r)),e.RunTimeTicks&&p.push(n.Ay.getDisplayDuration(e.RunTimeTicks))):"PhotoAlbum"!==e.Type&&"BoxSet"!==e.Type||(r=e.ChildCount)&&p.push(s.Ay.translate("ItemCount",r)),("Episode"===e.Type||"Photo"===e.MediaType)&&!1!==o.originalAirDate&&e.PremiereDate)try{a=n.Ay.parseISO8601Date(e.PremiereDate,"Episode"!==e.Type),t=n.Ay.toLocaleDateString(a),p.push(t)}catch(t){console.error("error parsing date:",e.PremiereDate)}if("SeriesTimer"===e.Type&&(e.RecordAnyTime?p.push(s.Ay.translate("Anytime")):p.push(n.Ay.getDisplayTime(e.StartDate)),e.RecordAnyChannel?p.push(s.Ay.translate("AllChannels")):p.push(e.ChannelName||s.Ay.translate("OneChannel"))),e.StartDate&&"Program"!==e.Type&&"SeriesTimer"!==e.Type&&"Timer"!==e.Type)try{a=n.Ay.parseISO8601Date(e.StartDate),t=n.Ay.toLocaleDateString(a),p.push(t),"Recording"!==e.Type&&(t=n.Ay.getDisplayTime(a),p.push(t))}catch(t){console.error("error parsing date:",e.StartDate)}if(!1!==o.year&&e.ProductionYear&&"Series"===e.Type)if("Continuing"===e.Status)p.push(s.Ay.translate("SeriesYearToPresent",n.Ay.toLocaleString(e.ProductionYear,{useGrouping:!1})));else if(e.ProductionYear){if(t=n.Ay.toLocaleString(e.ProductionYear,{useGrouping:!1}),e.EndDate)try{var y=n.Ay.toLocaleString(n.Ay.parseISO8601Date(e.EndDate).getFullYear(),{useGrouping:!1});y!==t&&(t+=" - ".concat(y))}catch(t){console.error("error parsing date:",e.EndDate)}p.push(t)}if("Program"===e.Type||"Timer"===e.Type){var h=e;if("Timer"===e.Type&&(h=e.ProgramInfo),!1!==o.programIndicator&&(h.IsLive&&"true"===u.get("guide-indicator-live")?p.push({html:'<div class="mediaInfoProgramAttribute mediaInfoItem liveTvProgram">'.concat(s.Ay.translate("Live"),"</div>")}):h.IsPremiere&&"true"===u.get("guide-indicator-premiere")?p.push({html:'<div class="mediaInfoProgramAttribute mediaInfoItem premiereTvProgram">'.concat(s.Ay.translate("Premiere"),"</div>")}):h.IsSeries&&!h.IsRepeat&&"true"===u.get("guide-indicator-new")?p.push({html:'<div class="mediaInfoProgramAttribute mediaInfoItem newTvProgram">'.concat(s.Ay.translate("New"),"</div>")}):h.IsSeries&&h.IsRepeat&&"true"===u.get("guide-indicator-repeat")&&p.push({html:'<div class="mediaInfoProgramAttribute mediaInfoItem repeatTvProgram">'.concat(s.Ay.translate("Repeat"),"</div>")})),(h.IsSeries||h.EpisodeTitle)&&!1!==o.episodeTitle)(t=c.Ay.getDisplayName(h,{includeIndexNumber:o.episodeTitleIndexNumber}))&&p.push(i()(t));else if(h.IsMovie&&h.ProductionYear&&!1!==o.originalAirDate)p.push(h.ProductionYear);else if(h.PremiereDate&&!1!==o.originalAirDate)try{a=n.Ay.parseISO8601Date(h.PremiereDate),t=s.Ay.translate("OriginalAirDateValue",n.Ay.toLocaleDateString(a)),p.push(t)}catch(e){console.error("error parsing date:",h.PremiereDate)}else h.ProductionYear&&!1!==o.year&&p.push(h.ProductionYear)}if(!1!==o.year&&"Series"!==e.Type&&"Episode"!==e.Type&&"Person"!==e.Type&&"Photo"!==e.MediaType&&"Program"!==e.Type&&"Season"!==e.Type)if(e.ProductionYear)p.push(e.ProductionYear);else if(e.PremiereDate)try{t=n.Ay.toLocaleString(n.Ay.parseISO8601Date(e.PremiereDate).getFullYear(),{useGrouping:!1}),p.push(t)}catch(t){console.error("error parsing date:",e.PremiereDate)}if(e.RunTimeTicks&&"Series"!==e.Type&&"Program"!==e.Type&&"Timer"!==e.Type&&"Book"!==e.Type&&!v&&!1!==o.runtime&&("Audio"===e.Type?p.push(n.Ay.getDisplayRunningTime(e.RunTimeTicks)):p.push(n.Ay.getDisplayDuration(e.RunTimeTicks))),!1!==o.officialRating&&e.OfficialRating&&"Season"!==e.Type&&"Episode"!==e.Type&&p.push({text:e.OfficialRating,cssClass:"mediaInfoText mediaInfoOfficialRating"}),e.Video3DFormat&&p.push("3D"),"Photo"===e.MediaType&&e.Width&&e.Height&&p.push("".concat(e.Width,"x").concat(e.Height)),!1!==o.container&&"Audio"===e.Type&&e.Container&&p.push(e.Container),m+=p.map((function(e){return f(e)})).join(""),!1!==o.starRating&&(m+=function(e){var t="";return e.CommunityRating&&(t+='<div class="starRatingContainer mediaInfoItem">',t+='<span class="material-icons starIcon star" aria-hidden="true"></span>',t+=e.CommunityRating.toFixed(1),t+="</div>"),t}(e)),e.HasSubtitles&&!1!==o.subtitles&&(m+='<div class="mediaInfoItem mediaInfoText closedCaptionMediaInfoText">CC</div>'),e.CriticRating&&!1!==o.criticRating&&(e.CriticRating>=60?m+='<div class="mediaInfoItem mediaInfoCriticRating mediaInfoCriticRatingFresh">'.concat(e.CriticRating,"</div>"):m+='<div class="mediaInfoItem mediaInfoCriticRating mediaInfoCriticRatingRotten">'.concat(e.CriticRating,"</div>")),!1!==o.endsAt){var g=d(e);g&&(m+=f(g,"endsAt"))}return m+l.Ay.getMissingIndicator(e)}(e,t)}function y(e,t){return null==(t=t||{}).interactive&&(t.interactive=!1),"Program"===e.Type?function(e,t){var a,r,s=[];if(e.StartDate&&!1!==t.programTime)try{a="",r=n.Ay.parseISO8601Date(e.StartDate),!1!==t.startDate&&(a+=n.Ay.toLocaleDateString(r,{weekday:"short",month:"short",day:"numeric"})),a+=" ".concat(n.Ay.getDisplayTime(r)),e.EndDate&&(r=n.Ay.parseISO8601Date(e.EndDate),a+=" - ".concat(n.Ay.getDisplayTime(r))),s.push(a)}catch(t){console.error("error parsing date:",e.StartDate)}if(e.ChannelNumber&&s.push("CH ".concat(e.ChannelNumber)),e.ChannelName&&(t.interactive&&e.ChannelId?s.push({html:'<a is="emby-linkbutton" class="button-flat mediaInfoItem" href="'.concat(o.appRouter.getRouteUrl({ServerId:e.ServerId,Type:"TvChannel",Name:e.ChannelName,Id:e.ChannelId}),'">').concat(i()(e.ChannelName),"</a>")}):s.push(i()(e.ChannelName))),!1!==t.timerIndicator){var c=function(e){var t;if("SeriesTimer"===e.Type)return'<span class="material-icons mediaInfoItem mediaInfoIconItem mediaInfoTimerIcon fiber_smart_record" aria-hidden="true"></span>';if(e.TimerId||e.SeriesTimerId)t=e.Status||"Cancelled";else{if("Timer"!==e.Type)return"";t=e.Status}return e.SeriesTimerId?"Cancelled"!==t?'<span class="material-icons mediaInfoItem mediaInfoIconItem mediaInfoTimerIcon fiber_smart_record" aria-hidden="true"></span>':'<span class="material-icons mediaInfoItem mediaInfoIconItem fiber_smart_record" aria-hidden="true"></span>':'<span class="material-icons mediaInfoItem mediaInfoIconItem mediaInfoTimerIcon fiber_manual_record" aria-hidden="true"></span>'}(e);c&&s.push({html:c})}return""+s.map((function(e){return f(e)})).join("")}(e,t):""}function h(e){var t=e.Width,a=e.Height;if(t&&a){if(t>=3800||a>=2e3)return"4K";if(t>=2500||a>=1400)return e.IsInterlaced?"1440i":"1440p";if(t>=1800||a>=1e3)return e.IsInterlaced?"1080i":"1080p";if(t>=1200||a>=700)return e.IsInterlaced?"720i":"720p";if(t>=700||a>=400)return e.IsInterlaced?"480i":"480p"}return null}t.Ay={getMediaInfoHtml:v,getEndsAt:d,getEndsAtFromPosition:function(e,t,a,r){var i=(new Date).getTime()+1/a*((e-(t||0))/1e4);i=new Date(i);var o=n.Ay.getDisplayTime(i);return!1===r?o:s.Ay.translate("EndsAtValue",o)},getPrimaryMediaInfoHtml:v,getSecondaryMediaInfoHtml:y,fillPrimaryMediaInfo:function(e,t,a){var r=v(t,a);e.innerHTML=r,m(e,t,a)},fillSecondaryMediaInfo:function(e,t,a){var r=y(t,a);e.innerHTML=r,m(e,t,a)},getMediaInfoStats:function(e){var t=[],a=(((e.MediaSources||[])[0]||{}).MediaStreams||[]).filter((function(e){return"Video"===e.Type}))[0]||{},r=function(e){if(!e.MediaSources)return null;var t=e.MediaSources[0];return t?(t.MediaStreams||[]).filter((function(e){return"Audio"===e.Type&&(e.Index===t.DefaultAudioStreamIndex||null==t.DefaultAudioStreamIndex)}))[0]:null}(e)||{};"Dvd"===e.VideoType&&t.push({type:"mediainfo",text:"Dvd"}),"BluRay"===e.VideoType&&t.push({type:"mediainfo",text:"BluRay"});var i=h(a);i&&t.push({type:"mediainfo",text:i}),a.Codec&&t.push({type:"mediainfo",text:a.Codec});var o,l=r.Channels;8===l?o="7.1":7===l?o="6.1":6===l?o="5.1":2===l&&(o="2.0"),o&&t.push({type:"mediainfo",text:o});var u=(r.Codec||"").toLowerCase();if("dca"!==u&&"dts"!==u||!r.Profile?r.Codec&&t.push({type:"mediainfo",text:r.Codec}):t.push({type:"mediainfo",text:r.Profile}),e.DateCreated&&c.Ay.enableDateAddedDisplay(e)){var d=n.Ay.parseISO8601Date(e.DateCreated);t.push({type:"added",text:s.Ay.translate("AddedOnValue","".concat(n.Ay.toLocaleDateString(d)," ").concat(n.Ay.getDisplayTime(d)))})}return t},getResolutionText:h}},33252:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Y}}),a(29305),a(32733),a(84701),a(24776),a(69892),a(84734),a(44962),a(86584),a(89336),a(57132),a(78557),a(67593),a(96054),a(90076),a(45309),a(95021),a(73687),a(83994),a(93062),a(46968),a(82367);var r,i,n,s,o,c=a(22696),l=a.n(c),u=a(23125),d=a(21069),f=a(34789),m=a(47629),p=a(38490),v=a(40787),y=a(98320),h=a(23648),g=a(82180),b=a(9164),T=a(44797),S=a(5898),A=a(22622),I=a(46782),P=a(82885),k=a(74550),L=(a(57949),a(15453),a(15605),a(86191)),w=a(13615);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function C(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function E(e){var t=function(e,t){if("object"!=D(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,"string");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==D(t)?t:t+""}function x(e){var t=document.createElement("div");function a(){var e=parseFloat(i.value);d.f.setSubtitleOffset(e,r),n.updateOffset(e)}document.body.appendChild(t),t.innerHTML='<div class="subtitleSync"> <div class="subtitleSyncContainer"> <button type="button" is="paper-icon-button-light" class="subtitleSync-closeButton"><span class="material-icons close" aria-hidden="true"></span></button> <div class="subtitleSyncTextField" contenteditable="true" spellcheck="false">0s</div> <div class="sliderContainer subtitleSyncSliderContainer"> <input is="emby-slider" type="range" step="0.1" min="-30" max="30" value="0" class="subtitleSyncSlider" data-slider-keep-progress="true"/> </div> </div> </div> ',i=t.querySelector(".subtitleSyncSlider"),n=t.querySelector(".subtitleSyncTextField"),s=t.querySelector(".subtitleSync-closeButton"),o=t.querySelector(".subtitleSyncContainer"),I.A.tv&&(i.classList.add("focusable"),setTimeout((function(){i.enableKeyboardDragging()}),0)),o.classList.add("hide"),n.updateOffset=function(e){this.textContent=e+"s"},n.addEventListener("click",(function(){this.hasFocus=!0})),n.addEventListener("keydown",(function(e){if("Enter"===e.key){var t=/[-+]?\d+\.?\d*/g.exec(this.textContent);t?(t=t[0],t=parseFloat(t),i.updateOffset(t)):this.textContent=(d.f.getPlayerSubtitleOffset(r)||0)+"s",this.hasFocus=!1,e.preventDefault()}else this.hasFocus=!0,null===e.key.match(/[+-\d.s]/)&&e.preventDefault();e.stopPropagation()})),n.blur=function(){!this.hasFocus&&this.prototype&&this.prototype.blur()},i.updateOffset=function(e){this.value=void 0===e?0:e,a()},i.addEventListener("change",(function(){return a()})),i.getBubbleHtml=function(e,t){return'<h1 class="sliderBubbleText">'+(t>0?"+":"")+parseFloat(t)+"s</h1>"},s.addEventListener("click",(function(){d.f.disableShowingSubtitleOffset(r),R.prototype.toggle("forceToHide")})),e.element=t}a(81678),a(76281),a(4754),a(94),a(36947),a(53819);var R=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=t,x(this)}return t=e,(a=[{key:"destroy",value:function(){e.prototype.toggle("forceToHide"),r&&(d.f.disableShowingSubtitleOffset(r),d.f.setSubtitleOffset(0,r));var t=this.element;t&&(t.parentNode.removeChild(t),this.element=null)}},{key:"toggle",value:function(e){if(!e||["hide","forceToHide"].includes(e)){if(r&&d.f.supportSubtitleOffset(r)){if(e){if("hide"===e&&n.hasFocus)return}else if(d.f.isShowingSubtitleOffsetEnabled(r)&&d.f.canHandleOffsetOnCurrentSubtitle(r))return d.f.getPlayerSubtitleOffset(r)||n.hasFocus||(i.value="0",n.textContent="0s",d.f.setSubtitleOffset(0,r)),void o.classList.remove("hide");o.classList.add("hide")}}else console.warn("SubtitleSync.toggle called with invalid action",e)}},{key:"update",value:function(e){this.toggle();var t=parseFloat(i.value)+e;i.updateOffset(t)}},{key:"incrementOffset",value:function(){this.update(+i.step)}},{key:"decrementOffset",value:function(){this.update(-i.step)}}])&&C(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,a}(),M=R,q=a(70267),O=a(73233),F=a(89166),H=a(38829),N=a(38783),B=a(42538);function _(e,t){if(e){if("string"==typeof e)return K(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}var V=6e8,U=1e7;function W(){return document.querySelector(".dialogContainer .dialog.opened")}function Y(e){var t;function r(t){if(!t||"Program"!==t.Type)return z&&(z.destroy(),z=null),void e.querySelector(".btnRecord").classList.add("hide");L.A.getApiClient(t.ServerId).getCurrentUser().then((function(r){r.Policy.EnableLiveTvManagement&&a.e(60278).then(a.bind(a,60278)).then((function(a){var r=a.default;z?z.refreshItem(t):(z=new r({item:t,button:e.querySelector(".btnRecord")}),e.querySelector(".btnRecord").classList.remove("hide"))}))}))}function i(t){var a,i=t.originalItem;J=i;var n=t.displayItem||i;r(n);var o=n.SeriesName||n.Album;(n.EpisodeTitle||n.IsSeries)&&(o=n.Name),function(e,t){var a=h.Ay.getDisplayName(e,{includeParentInfo:"Program"!==e.Type,includeIndexNumber:"Program"!==e.Type});a&&t&&(a="".concat(t," - ").concat(a)),a||(a=t||"");var r=a;if("Movie"==e.Type&&e.ProductionYear)r+=" (".concat(y.Ay.toLocaleString(e.ProductionYear,{useGrouping:!1}),")");else if(e.PremiereDate)try{var i=y.Ay.toLocaleString(y.Ay.parseISO8601Date(e.PremiereDate).getFullYear(),{useGrouping:!1});r+=" (".concat(i,")")}catch(e){console.error(e)}O.default.setTitle(r);var n=t||(e?e.Name:null);n&&(document.title=n)}(n,o);var c=e.querySelector(".osdSecondaryMediaInfo"),l=g.Ay.getSecondaryMediaInfoHtml(n,{startDate:!1,programTime:!1});c.innerHTML=l,l?c.classList.remove("hide"):c.classList.add("hide"),Q?(s(Ze,n.StartDate),s(et,n.EndDate),Ze.classList.remove("hide"),et.classList.remove("hide"),We=n.StartDate?y.Ay.parseISO8601Date(n.StartDate).getTime():0,Ye=n.EndDate?y.Ay.parseISO8601Date(n.EndDate).getTime():0):(Ze.classList.add("hide"),et.classList.add("hide"),Ze.innerHTML="",et.innerHTML="",We=0,Ye=0);var u=e.querySelector(".btnUserRating");h.Ay.canRate(J)?(u.classList.remove("hide"),u.setItem(J)):(u.classList.add("hide"),u.setItem(null)),Xe=null;var d,f,m=Y.streamInfo.mediaSource.Id,p=null===(a=i.Trickplay)||void 0===a?void 0:a[m];if(p){for(var v,b=window.screen.width*window.devicePixelRatio*.2,T=0,S=Object.entries(p);T<S.length;T++){var A=(d=S[T],f=2,function(e){if(Array.isArray(e))return e}(d)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,i,n,s,o=[],c=!0,l=!1;try{if(n=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(r=n.call(a)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(d,f)||_(d,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1];(!v||A.Width<v&&v>b||A.Width>v&&A.Width<=b)&&(v=A.Width)}v&&(Xe=p[v])}}function n(e,t){return t?y.Ay.toLocaleTimeString(e,{hour:"numeric",minute:"2-digit",second:"2-digit"}).toLowerCase().replace("am","").replace("pm","").trim():y.Ay.getDisplayTime(e).toLowerCase().replace("am","").replace("pm","").trim()}function s(e,t){var a;t&&(a=n(t=y.Ay.parseISO8601Date(t))),e.innerHTML=a||""}var o=!1;function c(e){T.A.trigger(document,B.B.SHOW_VIDEO_OSD,[!0]),nt.classList.remove("osdHeader-hidden"),function(e){if($)"osd"===$&&e&&!I.A.mobile&&ae(e);else{var t=st;$="osd",E(t),t.classList.remove("hide"),t.classList.remove("videoOsdBottom-hidden"),e||(e=t.querySelector(".btnPause")),I.A.mobile||ae(e),Ce()}}(e),re()}function D(){T.A.trigger(document,B.B.SHOW_VIDEO_OSD,[!1]),nt.classList.add("osdHeader-hidden"),function(){if("osd"===$){var e=st;E(e),e.classList.add("videoOsdBottom-hidden"),e.addEventListener(it,x),$=null,Ce("hide"),document.activeElement&&document.activeElement.blur()}}(),v.Ay.hideCursor()}function C(){ee&&(clearTimeout(ee),ee=null)}function E(e){e.removeEventListener(it,x)}function x(e){var t=e.target;t==st&&(t.classList.add("hide"),t.removeEventListener(it,x))}var R,K,Y,j,X,G,J,z,Q,$,Z,ee,te,ae=(0,u.A)((function(e){return b.A.focus(e)}),50);function re(){!$||o||W()?C():(C(),ee=setTimeout(D,3e3))}function ie(e){if("mouse"===(e.pointerType||(I.A.mobile?"touch":"mouse"))){var t=e.screenX||e.clientX||0,a=e.screenY||e.clientY||0,r=te;if(!r)return void(te={x:t,y:a});if(Math.abs(t-r.x)<10&&Math.abs(a-r.y)<10)return;r.x=t,r.y=a,c()}}function ne(t){var a,r=Y;switch(t.detail.command){case"left":"osd"===$?c():$||(t.preventDefault(),d.f.rewind(r));break;case"right":"osd"===$?c():$||(t.preventDefault(),d.f.fastForward(r));break;case"pageup":d.f.nextChapter(r);break;case"pagedown":d.f.previousChapter(r);break;case"up":case"down":case"select":case"menu":case"info":case"play":case"playpause":case"pause":case"fastforward":case"rewind":case"next":case"previous":c();break;case"record":(a=e.querySelector(".btnRecord")).classList.contains("hide")||a.click(),c();break;case"togglestats":we();break;case"back":"osd"!==$||W()||(D(),t.preventDefault())}}function se(){var t,a;!Y.forcedFullscreen||d.f.isFullscreen(Y)?((a=(t=e.querySelector(".btnFullscreen")).querySelector(".material-icons")).classList.remove("fullscreen_exit","fullscreen"),d.f.isFullscreen(Y)?(t.setAttribute("title",S.Ay.translate("ExitFullscreen")+" (F)"),a.classList.add("fullscreen_exit")):(t.setAttribute("title",S.Ay.translate("Fullscreen")+" (F)"),a.classList.add("fullscreen"))):q.appRouter.back()}function oe(){he(d.f.getCurrentPlayer())}function ce(t,a){var n,s;a.NowPlayingItem&&(G=!0,function(t,a,n){var s=n.PlayState||{};Se(s.IsPaused);var o=d.f.getSupportedCommands(a);Ke=o,Pe(a,s.IsMuted,s.VolumeLevel),ze&&!ze.dragging&&(ze.disabled=!s.CanSeek),rt.disabled=!s.CanSeek,at.disabled=!s.CanSeek;var c=n.NowPlayingItem||{};je=s.PlaybackStartTimeTicks,Ie(s.PositionTicks,c.RunTimeTicks,s.PlaybackStartTimeTicks,s.PlaybackRate,s.BufferedRanges||[]),function(t,a){var n,s=a.NowPlayingItem;if(J=s,!s)return r(null),O.default.setTitle(""),Ge.disabled=!0,ze.disabled=!0,rt.disabled=!0,at.disabled=!0,e.querySelector(".btnSubtitles").classList.add("hide"),e.querySelector(".btnAudio").classList.add("hide"),e.querySelector(".osdTitle").innerHTML="",void(e.querySelector(".osdMediaInfo").innerHTML="");Q=function(e){return!("TvChannel"!==e.Type||!e.CurrentProgram)}(s),function(e){if("TvChannel"===e.Type){var t=L.A.getApiClient(e.ServerId);return t.getItem(t.getCurrentUserId(),e.Id).then((function(e){return{originalItem:e,displayItem:e.CurrentProgram}}))}return Promise.resolve({originalItem:e})}(s).then(i),Ge.disabled=!1,ze.disabled=!1,rt.disabled=!1,at.disabled=!1,d.f.subtitleTracks(t).length?(e.querySelector(".btnSubtitles").classList.remove("hide"),Ce()):(e.querySelector(".btnSubtitles").classList.add("hide"),Ce("forceToHide")),d.f.audioTracks(t).length>1?e.querySelector(".btnAudio").classList.remove("hide"):e.querySelector(".btnAudio").classList.add("hide"),(null===(n=J.Chapters)||void 0===n?void 0:n.length)>1?(e.querySelector(".btnPreviousChapter").classList.remove("hide"),e.querySelector(".btnNextChapter").classList.remove("hide")):(e.querySelector(".btnPreviousChapter").classList.add("hide"),e.querySelector(".btnNextChapter").classList.add("hide"))}(a,n);var l=n.MediaSource&&null==n.MediaSource.RunTimeTicks;ze.setIsClear(l),c.RunTimeTicks&&ze.setKeyboardSteps(1e6*P.skipBackLength()/c.RunTimeTicks,1e6*P.skipForwardLength()/c.RunTimeTicks),-1===o.indexOf("ToggleFullscreen")||a.isLocalPlayer&&I.A.tv&&d.f.isFullscreen(a)?e.querySelector(".btnFullscreen").classList.add("hide"):e.querySelector(".btnFullscreen").classList.remove("hide"),-1===o.indexOf("PictureInPicture")?e.querySelector(".btnPip").classList.add("hide"):e.querySelector(".btnPip").classList.remove("hide"),-1===o.indexOf("AirPlay")?e.querySelector(".btnAirPlay").classList.add("hide"):e.querySelector(".btnAirPlay").classList.remove("hide"),se()}(0,this,a),n=e.querySelector(".btnPreviousTrack"),s=e.querySelector(".btnNextTrack"),n.classList.remove("hide"),s.classList.remove("hide"),s.disabled=!1,n.disabled=!1,!0,e.removeEventListener("viewbeforehide",Ne),d.f.isPlayingVideo(Y)&&e.addEventListener("viewbeforehide",Ne),function(e){var t=sessionStorage.getItem("playbackRateSpeed");null!==t&&e.setPlaybackRate(t)}(this))}function le(){G&&Se(this.paused())}function ue(){if(G){var e=this;Pe(e,e.isMuted(),e.getVolume())}}function de(e,t){console.debug("nowplaying event: "+e.type),ce.call(this,e,t),fe()}function fe(){j=!1,X&&(X.destroy(),X=null)}function me(t,a){Ve=null,fe(),console.debug("nowplaying event: "+t.type),"Video"!==a.NextMediaType&&(e.removeEventListener("viewbeforehide",Ne),q.appRouter.back())}function pe(){var e=d.f.getPlayerState(this);ce.call(this,{type:"init"},e)}function ve(){e.querySelector(".osdMediaStatus").classList.remove("hide")}function ye(){e.querySelector(".osdMediaStatus").classList.add("hide")}function he(e){if(e===Y||(ge(),Y=e,e)){var t=d.f.getPlayerState(e);ce.call(e,{type:"init"},t),T.A.on(e,"playbackstart",de),T.A.on(e,"playbackstop",me),T.A.on(e,"volumechange",ue),T.A.on(e,"pause",le),T.A.on(e,"unpause",le),T.A.on(e,"timeupdate",be),T.A.on(e,"fullscreenchange",se),T.A.on(e,"mediastreamschange",pe),T.A.on(e,"beginFetch",ve),T.A.on(e,"endFetch",ye),fe(),e.isFetching&&ve()}}function ge(){De(),Ee(),fe();var e=Y;e&&(T.A.off(e,"playbackstart",de),T.A.off(e,"playbackstop",me),T.A.off(e,"volumechange",ue),T.A.off(e,"pause",le),T.A.off(e,"unpause",le),T.A.off(e,"timeupdate",be),T.A.off(e,"fullscreenchange",se),T.A.off(e,"mediastreamschange",pe),Y=null)}function be(){if(G&&J){var t=(new Date).getTime();if(t-Ue>=700){Ue=t;var r=this;Ve=d.f.duration(r);var i=1e4*d.f.currentTime(r);Ie(i,Ve,d.f.playbackStartTime(r),d.f.getPlaybackRate(r),d.f.getBufferedRanges(r));var n=J;!function(e,t){if("TvChannel"===t.Type){var a=t.CurrentProgram;if(null!=a&&a.EndDate)try{var r=y.Ay.parseISO8601Date(a.EndDate);if((new Date).getTime()>=r.getTime()){console.debug("program info needs to be refreshed");var i=d.f.getPlayerState(e);ce.call(e,{type:"init"},i)}}catch(e){console.error("error parsing date: "+a.EndDate)}}}(r,n),function(t,r,i,n){if(n&&i&&!j&&!$&&"Episode"===r.Type&&P.enableNextVideoInfoOverlay()){var s=30;n>=50*V?s=40:n>=40*V&&(s=35),i>=n-s*U&&n>=10*V&&n-i>=20*U&&function(t){a.e(47102).then(a.bind(a,47102)).then((function(a){var r=a.default;$||X||($="upnext",j=!0,d.f.nextItem(t).then((function(a){X=new r({parent:e.querySelector(".upNextContainer"),player:t,nextItem:a}),T.A.on(X,"hide",Te)}),Te))}))}(t)}}(r,n,i,Ve)}}}function Te(){"upnext"===$&&($=null)}function Se(t){var a,r,i=e.querySelector(".btnPause"),n=i.querySelector(".material-icons");n.classList.remove("play_arrow","pause"),t?(a="play_arrow",r=S.Ay.translate("Play")):(a="pause",r=S.Ay.translate("ButtonPause")),n.classList.add(a),m.Ay.setElementTitle(i,r+" (K)",r)}function Ae(e,t,a){return(a-e)/t*100}function Ie(e,t,a,r,i){if(Q){if(ze&&!ze.dragging)if(We&&Ye){var n=(a+(e||0))/1e4,s=Ye-We;if(ze.value=Ae(We,s,n),i.length){var o=Ae(We,s,(a+(i[0].start||0))/1e4),c=Ae(We,s,(a+(i[0].end||0))/1e4);ze.setBufferedRanges([{start:o,end:c}])}else ze.setBufferedRanges([])}else ze.value=0,ze.setBufferedRanges([]);Qe.innerHTML="",$e.innerHTML=""}else{if(ze&&!ze.dragging){if(t){var l=e/t;l*=100,ze.value=l}else ze.value=0;t&&null!=e&&Ve&&!Q&&J.RunTimeTicks&&"Recording"!==J.Type&&null!==r?tt.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;"+g.Ay.getEndsAtFromPosition(t,e,r,!0):tt.innerHTML=""}if(ze&&ze.setBufferedRanges(i,t,e),e>=0?(ke(Qe,e),Qe.classList.remove("hide")):Qe.classList.add("hide"),P.enableVideoRemainingTime()){var u=t-e;u>=0?(ke($e,u),$e.innerHTML="-"+$e.innerHTML,$e.classList.remove("hide")):Qe.classList.add("hide")}else ke($e,t),$e.classList.remove("hide")}}function Pe(t,a,r){var i=Ke,n=!0,s=!0;-1===i.indexOf("Mute")&&(n=!1),-1===i.indexOf("SetVolume")&&(s=!1),t.isLocalPlayer&&A.g.supports("physicalvolumecontrol")&&(n=!1,s=!1);var o=e.querySelector(".buttonMute"),c=o.querySelector(".material-icons");c.classList.remove("volume_off","volume_up"),a?(o.setAttribute("title",S.Ay.translate("Unmute")+" (M)"),c.classList.add("volume_off")):(o.setAttribute("title",S.Ay.translate("Mute")+" (M)"),c.classList.add("volume_up")),n?o.classList.remove("hide"):o.classList.add("hide"),Ge&&(s?Je.classList.remove("hide"):Je.classList.add("hide"),Ge.dragging||(Ge.value=r||0))}function ke(e,t,a){if(null!=t){var r=y.Ay.getDisplayRunningTime(t);a&&(r="&nbsp;/&nbsp;"+r),e.innerHTML=r}else e.innerHTML=""}function Le(e){if("stats"===e)we();else if("suboffset"===e){var t=Y;t&&(d.f.enableShowingSubtitleOffset(t),Ce())}}function we(){a.e(1836).then(a.bind(a,1836)).then((function(e){var t=e.default,a=Y;a&&(Z?Z.toggle():Z=new t({player:a}))}))}function De(){Z&&(Z.destroy(),Z=null)}function Ce(e){var t=Y;Be?Be.toggle(e):t&&(Be=new M(t))}function Ee(){Be&&(Be.destroy(),Be=null)}function xe(e){if(!e.target.contains(R))return e.preventDefault(),e.stopPropagation(),!1}function Re(e){if(R=e.target,!(e.ctrlKey||e.altKey||e.metaKey)){var t=k.Ay.getKeyName(e),a=st.querySelector(".btnPause");if(32!==e.keyCode){if(I.A.tv&&!$)switch(t){case"ArrowLeft":case"ArrowRight":return void(e.shiftKey||(c(ze),ze.dispatchEvent(new KeyboardEvent(e.type,e))));case"Enter":return d.f.playPause(Y),void c(a)}if(I.A.tv&&k.Ay.isNavigationKey(t))e.shiftKey||c();else switch(t){case"Enter":c();break;case"Escape":case"Back":"osd"!==$||W()||(D(),e.stopPropagation());break;case"k":case"K":e.shiftKey||(e.preventDefault(),d.f.playPause(Y),c(a));break;case"ArrowUp":case"Up":e.shiftKey||(e.preventDefault(),d.f.volumeUp(Y));break;case"ArrowDown":case"Down":e.shiftKey||(e.preventDefault(),d.f.volumeDown(Y));break;case"l":case"L":case"ArrowRight":case"Right":e.shiftKey||(e.preventDefault(),d.f.fastForward(Y),c(rt));break;case"j":case"J":case"ArrowLeft":case"Left":e.shiftKey||(e.preventDefault(),d.f.rewind(Y),c(at));break;case"f":case"F":e.shiftKey||(e.preventDefault(),d.f.toggleFullscreen(Y));break;case"m":case"M":e.shiftKey||(e.preventDefault(),d.f.toggleMute(Y));break;case"p":case"P":e.shiftKey&&(e.preventDefault(),d.f.previousTrack(Y));break;case"n":case"N":e.shiftKey&&(e.preventDefault(),d.f.nextTrack(Y));break;case"NavigationLeft":case"GamepadDPadLeft":case"GamepadLeftThumbstickLeft":document.hasFocus()&&(d.f.rewind(Y),c(at));break;case"NavigationRight":case"GamepadDPadRight":case"GamepadLeftThumbstickRight":document.hasFocus()&&(d.f.fastForward(Y),c(rt));break;case"Home":e.shiftKey||(e.preventDefault(),d.f.seekPercent(0,Y));break;case"End":e.shiftKey||(e.preventDefault(),d.f.seekPercent(100,Y));break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e.preventDefault();var r=10*parseInt(t,10);d.f.seekPercent(r,Y);break;case">":e.preventDefault(),d.f.increasePlaybackRate(Y);break;case"<":e.preventDefault(),d.f.decreasePlaybackRate(Y);break;case"PageUp":e.shiftKey||(e.preventDefault(),d.f.nextChapter(Y));break;case"PageDown":e.shiftKey||(e.preventDefault(),d.f.previousChapter(Y));break;case"g":case"G":var i;e.shiftKey||(e.preventDefault(),null===(i=Be)||void 0===i||i.decrementOffset());break;case"h":case"H":var n;e.shiftKey||(e.preventDefault(),null===(n=Be)||void 0===n||n.incrementOffset())}}else"BUTTON"===e.target.tagName&&I.A.tv?c():(d.f.playPause(Y),c(a),e.preventDefault(),e.stopPropagation(),R=null)}}function Me(){re()}function qe(e){W()||(e.deltaY<0&&d.f.volumeUp(Y),e.deltaY>0&&d.f.volumeDown(Y))}function Oe(e){R=e.target,o=!0,re()}function Fe(){o=!1,re()}function He(){o=!1,re()}function Ne(){if(d.f.isPlayingVideo()){w.A.disableFullscreen(),clearTimeout(K);var t=Y;e.removeEventListener("viewbeforehide",Ne),ge(),d.f.stop(t)}}w.A.enableFullscreen();var Be,_e=this,Ke=[],Ve=0,Ue=0,We=0,Ye=0,je=0,Xe=null,Ge=e.querySelector(".osdVolumeSlider"),Je=e.querySelector(".osdVolumeSliderContainer"),ze=e.querySelector(".osdPositionSlider"),Qe=e.querySelector(".osdPositionText"),$e=e.querySelector(".osdDurationText"),Ze=e.querySelector(".startTimeText"),et=e.querySelector(".endTimeText"),tt=e.querySelector(".endsAtText"),at=e.querySelector(".btnRewind"),rt=e.querySelector(".btnFastForward"),it=m.Ay.whichTransitionEvent(),nt=document.querySelector(".skinHeader"),st=e.querySelector(".videoOsdBottom-maincontrols");ze.enableKeyboardDragging(),Ge.enableKeyboardDragging(),I.A.tv&&ze.classList.add("focusable"),$e.addEventListener("click",(function(){P.enableVideoRemainingTime(!P.enableVideoRemainingTime());var e=d.f.getPlayerState(Y),t=e.PlayState,a=e.NowPlayingItem;Ie(t.PositionTicks,a.RunTimeTicks,t.PlaybackStartTimeTicks,t.PlaybackRate,t.BufferedRanges||[])})),e.addEventListener("viewbeforeshow",(function(){nt.classList.add("osdHeader"),(0,F.FB)(F.KH.Full)})),e.addEventListener("viewshow",(function(){try{T.A.on(d.f,"playerchange",oe),he(d.f.getCurrentPlayer()),m.Ay.addEventListener(document,window.PointerEvent?"pointermove":"mousemove",ie,{passive:!0}),c(),p.default.on(window,ne),document.addEventListener("keydown",Re),m.Ay.addEventListener(document,"keydown",Me,{capture:!0,passive:!0}),document.addEventListener("wheel",qe),m.Ay.addEventListener(window,window.PointerEvent?"pointerdown":"mousedown",Oe,{capture:!0,passive:!0}),m.Ay.addEventListener(window,window.PointerEvent?"pointerup":"mouseup",Fe,{capture:!0,passive:!0}),m.Ay.addEventListener(window,"touchstart",Oe,{capture:!0,passive:!0}),["touchend","touchcancel"].forEach((function(e){m.Ay.addEventListener(window,e,Fe,{capture:!0,passive:!0})})),m.Ay.addEventListener(window,"dragend",He,{capture:!0,passive:!0}),(f.A.firefox||f.A.edge)&&m.Ay.addEventListener(document,"click",xe,{capture:!0})}catch(e){(0,F.FB)(F.KH.None),q.appRouter.goHome()}})),e.addEventListener("viewbeforehide",(function(){Z&&Z.enabled(!1),document.removeEventListener("keydown",Re),m.Ay.removeEventListener(document,"keydown",Me,{capture:!0,passive:!0}),document.removeEventListener("wheel",qe),m.Ay.removeEventListener(window,window.PointerEvent?"pointerdown":"mousedown",Oe,{capture:!0,passive:!0}),m.Ay.removeEventListener(window,window.PointerEvent?"pointerup":"mouseup",Fe,{capture:!0,passive:!0}),m.Ay.removeEventListener(window,"touchstart",Oe,{capture:!0,passive:!0}),["touchend","touchcancel"].forEach((function(e){m.Ay.removeEventListener(window,e,Fe,{capture:!0,passive:!0})})),m.Ay.removeEventListener(window,"dragend",He,{capture:!0,passive:!0}),(f.A.firefox||f.A.edge)&&m.Ay.removeEventListener(document,"click",xe,{capture:!0}),C(),nt.classList.remove("osdHeader"),nt.classList.remove("osdHeader-hidden"),m.Ay.removeEventListener(document,window.PointerEvent?"pointermove":"mousemove",ie,{passive:!0}),p.default.off(window,ne),T.A.off(d.f,"playerchange",oe),ge()})),e.querySelector(".btnFullscreen").addEventListener("click",(function(){d.f.toggleFullscreen(Y)})),e.querySelector(".btnPip").addEventListener("click",(function(){d.f.togglePictureInPicture(Y)})),e.querySelector(".btnAirPlay").addEventListener("click",(function(){d.f.toggleAirPlay(Y)})),e.querySelector(".btnVideoOsdSettings").addEventListener("click",(function(){var e=this;a.e(38122).then(a.bind(a,38122)).then((function(t){var a=Y;if(a){var r,i=d.f.getPlayerState(a),n=d.f.supportSubtitleOffset(a)&&d.f.canHandleOffsetOnCurrentSubtitle(a);t.show({mediaType:"Video",player:a,positionTo:e,quality:null===(r=i.MediaSource)||void 0===r?void 0:r.SupportsTranscoding,stats:!0,suboffset:n,onOption:Le}).finally((function(){re()})),setTimeout(re,0)}}))})),e.addEventListener("viewhide",(function(){nt.classList.remove("hide")})),e.addEventListener("viewdestroy",(function(){_e.touchHelper&&(_e.touchHelper.destroy(),_e.touchHelper=null),z&&(z.destroy(),z=null),De(),Ee()}));var ot=0;m.Ay.addEventListener(e,window.PointerEvent?"pointerdown":"click",(function(e){if(m.Ay.parentWithClass(e.target,["videoOsdBottom","upNextContainer"]))c();else{var t=e.pointerType||(I.A.mobile?"touch":"mouse"),a=(new Date).getTime();switch(t){case"touch":a-ot>300&&(ot=a,"osd"===$?D():$||c());break;case"mouse":e.button||(K?(clearTimeout(K),K=0):K=setTimeout((function(){d.f.playPause(Y),c(),K=0}),300));break;default:d.f.playPause(Y),c()}}}),{passive:!0}),m.Ay.addEventListener(e,"dblclick",(function(t){t.target===e&&d.f.toggleFullscreen(Y)})),e.querySelector(".buttonMute").addEventListener("click",(function(){d.f.toggleMute(Y)})),Ge.addEventListener("input",(function(e){d.f.setVolume(e.target.value,Y)})),ze.addEventListener("change",(function(){var e=Y;if(e){var t=parseFloat(this.value);if(Q){var a=t/100*(Ye-We)*1e4;a+=1e4*We,a-=je,d.f.seek(a,e)}else d.f.seekPercent(t,e)}})),ze.addEventListener("keydown",(function(e){e.defaultPrevented||"Enter"===k.Ay.getKeyName(e)&&d.f.playPause(Y)})),ze.updateBubbleHtml=function(e,t){c();var a=J,r=Ve*t/100;return!(!Xe||null==a||!a.Trickplay)&&function(e,t,a,r,i,n){var s,o,c,l,u,d=!1,f=i.querySelector(".chapterThumbContainer");if(f)o=f.querySelector(".chapterThumbWrapper"),c=f.querySelector("h2.chapterThumbText"),l=f.querySelector("div.chapterThumbText");else{d=!0,(f=document.createElement("div")).classList.add("chapterThumbContainer"),f.style.overflow="hidden",(o=document.createElement("div")).classList.add("chapterThumbWrapper"),o.style.overflow="hidden",o.style.width=t.Width+"px",o.style.height=t.Height+"px",f.appendChild(o);var m=document.createElement("div");m.classList.add("chapterThumbTextContainer"),f.appendChild(m),(l=document.createElement("div")).classList.add("chapterThumbText","chapterThumbText-dim"),m.appendChild(l),(c=document.createElement("h2")).classList.add("chapterThumbText"),m.appendChild(c)}var p,v=function(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=_(e))){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){o=!0,n=e},f:function(){try{s||null==a.return||a.return()}finally{if(o)throw n}}}}(a.Chapters||[]);try{for(v.s();!(p=v.n()).done;){var h=p.value;if(n<h.StartPositionTicks)break;u=h}}catch(e){v.e(e)}finally{v.f()}var g=n/1e4,b=Math.floor(g/t.Interval),T=t.TileWidth*t.TileHeight,S=b%T,A=Math.floor(b/T),I=S%t.TileWidth,P=Math.floor(S/t.TileWidth),k=-I*t.Width,L=-P*t.Height,w=e.getUrl("Videos/"+a.Id+"/Trickplay/"+t.Width+"/"+A+".jpg",{api_key:e.accessToken(),MediaSourceId:r});return o.style.backgroundImage="url('".concat(w,"')"),o.style.backgroundPositionX=k+"px",o.style.backgroundPositionY=L+"px",c.textContent=y.Ay.getDisplayRunningTime(n),l.textContent=(null===(s=u)||void 0===s?void 0:s.Name)||"",d&&(i.innerHTML=f.outerHTML),!0}(L.A.getApiClient(a.ServerId),Xe,a,Y.streamInfo.mediaSource.Id,e,r)},ze.getBubbleHtml=function(e){var t;if(c(),Q){if(We&&Ye){var a=Ye-We;return a/=100,a*=e,a+=We,'<h1 class="sliderBubbleText">'+n(new Date(parseInt(a,10)),!0)+"</h1>"}return"--:--"}if(!Ve)return"--:--";var r=Ve;r/=100,r*=e;var i=J;if(null!=i&&null!==(t=i.Chapters)&&void 0!==t&&t.length&&i.Chapters[0].ImageTag){var s=function(e,t,a,r){for(var i,n=-1,s=0,o=a.length;s<o;s++){var c=a[s];r>=c.StartPositionTicks&&(i=c,n=s)}if(!i)return null;var u=function(e,t,a,r,i){return t.ImageTag?i.getScaledImageUrl(e.Id,{maxWidth:400,tag:t.ImageTag,type:"Chapter",index:a}):null}(t,i,n,0,e);if(u){var d='<div class="chapterThumbContainer">';return d+='<img class="chapterThumb" src="'+u+'" />',d+='<div class="chapterThumbTextContainer">',d+='<div class="chapterThumbText chapterThumbText-dim">',d+=l()(i.Name),d+="</div>",d+='<h2 class="chapterThumbText">',d+=y.Ay.getDisplayRunningTime(r),d+="</h2>",(d+="</div>")+"</div>"}return null}(L.A.getApiClient(i.ServerId),i,i.Chapters,r);if(s)return s}return'<h1 class="sliderBubbleText">'+y.Ay.getDisplayRunningTime(r)+"</h1>"},ze.getMarkerInfo=function(){var e;return(null===(e=J)||void 0===e||null===(e=e.Chapters)||void 0===e?void 0:e.map((function(e){return{name:e.Name,progress:e.StartPositionTicks/J.RunTimeTicks}})))||[]},e.querySelector(".btnPreviousTrack").addEventListener("click",(function(){d.f.previousTrack(Y)})),e.querySelector(".btnPreviousChapter").addEventListener("click",(function(){d.f.previousChapter(Y)})),e.querySelector(".btnPause").addEventListener("click",(function(){d.f.playPause(Y)})),e.querySelector(".btnNextChapter").addEventListener("click",(function(){d.f.nextChapter(Y)})),e.querySelector(".btnNextTrack").addEventListener("click",(function(){d.f.nextTrack(Y)})),at.addEventListener("click",(function(){d.f.rewind(Y)})),rt.addEventListener("click",(function(){d.f.fastForward(Y)})),e.querySelector(".btnAudio").addEventListener("click",(function(){var e=Y,t=d.f.audioTracks(e),r=d.f.getAudioStreamIndex(e),i=t.map((function(e){var t={name:e.DisplayTitle,id:e.Index};return e.Index===r&&(t.selected=!0),t})),n=this;Promise.resolve().then(a.bind(a,62882)).then((function(t){t.default.show({items:i,title:S.Ay.translate("Audio"),positionTo:n}).then((function(t){var a=parseInt(t,10);a!==r&&d.f.setAudioStreamIndex(a,e)})).finally((function(){re()})),setTimeout(re,0)}))})),e.querySelector(".btnSubtitles").addEventListener("click",(function(){var e=Y,t=d.f.subtitleTracks(e),r=d.f.secondarySubtitleTracks(e),i=d.f.getSubtitleStreamIndex(e);null==i&&(i=-1),t.unshift({Index:-1,DisplayTitle:S.Ay.translate("Off")});var n=t.map((function(e){var t={name:e.DisplayTitle,id:e.Index};return e.Index===i&&(t.selected=!0),t}));if(d.f.playerHasSecondarySubtitleSupport(e)&&t.length>1&&r.length>0&&-1!==i&&d.f.trackHasSecondarySubtitleSupport(d.f.getSubtitleStream(e,i),e)){var s={name:S.Ay.translate("SecondarySubtitles"),id:"secondarysubtitle"};n.unshift(s)}var o=this;Promise.resolve().then(a.bind(a,62882)).then((function(t){var a=t.default;a.show({title:S.Ay.translate("Subtitles"),items:n,positionTo:o}).then((function(t){if("secondarysubtitle"===t)try{!function(e,t){var a=Y;if(d.f.playerHasSecondarySubtitleSupport(a)){var r=d.f.getSecondarySubtitleStreamIndex(a),i=d.f.secondarySubtitleTracks(a);null==r&&(r=-1),i.unshift({Index:-1,DisplayTitle:S.Ay.translate("Off")});var n=i.map((function(e){var t={name:e.DisplayTitle,id:e.Index};return e.Index===r&&(t.selected=!0),t}));e.show({title:S.Ay.translate("SecondarySubtitles"),items:n,positionTo:t}).then((function(e){if(e){var t=parseInt(e,10);t!==r&&d.f.setSecondarySubtitleStreamIndex(t,a)}})).finally((function(){re()})),setTimeout(re,0)}}(a,o)}catch(e){console.error(e)}else{var r=parseInt(t,10);r!==i&&d.f.setSubtitleStreamIndex(r,e)}Ce()})).finally((function(){re()})),setTimeout(re,0)}))})),e.querySelector(".btnUserRating").classList.remove("emby-button");var ct=function(t){var a="",r="",i="oneShotPulse",n=1500,s=e.querySelector("#syncPlayIcon");switch(t){case"schedule-play":a="sync spin",r="play_arrow centered",i="infinitePulse",n=-1,D();break;case"unpause":a="play_circle_outline";break;case"pause":a="pause_circle_outline",c();break;case"seek":a="update",i="infinitePulse",n=-1;break;case"buffering":a="schedule",i="infinitePulse",n=-1;break;case"wait-pause":a="schedule",r="pause shifted",i="infinitePulse",n=-1;break;case"wait-unpause":a="schedule",r="play_arrow shifted",i="infinitePulse",n=-1;break;default:return void(s.style.visibility="hidden")}s.setAttribute("class","syncPlayIconCircle "+i),s.querySelector(".primary-icon").setAttribute("class","primary-icon material-icons "+a),s.querySelector(".secondary-icon").setAttribute("class","secondary-icon material-icons "+r);var o=s.cloneNode(!0);o.style.visibility="visible",s.parentNode.replaceChild(o,s),n<0||setTimeout((function(){o.style.visibility="hidden"}),n)},lt=null===(t=H.X.firstOfType(N.Q.SyncPlay))||void 0===t?void 0:t.instance;lt&&(T.A.on(lt.Manager,"enabled",(function(t,a){a||(e.querySelector("#syncPlayIcon").style.visibility="hidden")})),T.A.on(lt.Manager,"notify-osd",(function(e,t){ct(t)})),T.A.on(lt.Manager,"group-state-update",(function(e,t,a){"Playing"===t&&"Unpause"===a||"Playing"===t&&"Ready"===a?ct("schedule-play"):"Paused"===t&&"Pause"===a?ct("pause"):"Paused"===t&&"Ready"===a?ct("clear"):"Waiting"===t&&"Seek"===a?ct("seek"):"Waiting"===t&&"Buffer"===a?ct("buffering"):"Waiting"===t&&"Pause"===a?ct("wait-pause"):"Waiting"===t&&"Unpause"===a&&ct("wait-unpause")})))}},12383:function(e,t,a){a(96054);var r=Object.create(HTMLDivElement.prototype);function i(){var e=parseInt(this.getAttribute("data-starttime"),10),t=parseInt(this.getAttribute("data-endtime"),10),a=((new Date).getTime()-e)/(t-e)*100;a=Math.min(100,a),a=Math.max(0,a),this.querySelector(".itemProgressBarForeground").style.width=a+"%"}r.attachedCallback=function(){this.timeInterval&&clearInterval(this.timeInterval),"time"===this.getAttribute("data-automode")&&(this.timeInterval=setInterval(i.bind(this),6e4))},r.detachedCallback=function(){this.timeInterval&&(clearInterval(this.timeInterval),this.timeInterval=null)},document.registerElement("emby-progressbar",{prototype:r,extends:"div"})},15605:function(e,t,a){"use strict";a.r(t);var r=a(10736),i=a(5898),n=a(44797),s=a(10353),o=a(86191);function c(){var e=this,t=e.getAttribute("data-id"),a=e.getAttribute("data-serverid"),r=o.A.getApiClient(a),i=this.getAttribute("data-likes");i="true"===i||"false"!==i&&null,function(e,t,a,r,i){return t.updateFavoriteStatus(t.getCurrentUserId(),a,!i)}(0,r,t,0,"true"===this.getAttribute("data-isfavorite")).then((function(t){u(e,t.Likes,t.IsFavorite)}))}function l(e,t,a){a.ItemId===this.getAttribute("data-id")&&u(this,a.Likes,a.IsFavorite)}function u(e,t,a,r){var i=e.querySelector(".material-icons");a?(i&&(i.classList.add("favorite"),i.classList.add("ratingbutton-icon-withrating")),e.classList.add("ratingbutton-withrating")):(i&&(i.classList.add("favorite"),i.classList.remove("ratingbutton-icon-withrating")),e.classList.remove("ratingbutton-withrating")),!1!==r&&(e.setAttribute("data-isfavorite",a),e.setAttribute("data-likes",null===t?"":t)),d(e,a)}function d(e,t){e.title=t?i.Ay.translate("Favorite"):i.Ay.translate("AddToFavorites");var a=e.querySelector(".button-text");a&&(a.innerText=e.title)}function f(e){var t,a,i;e.removeEventListener("click",c),(i=(t=e)[a="UserDataChanged"])&&(n.A.off(r.default,a,i),t[a]=null)}function m(e){var t,a,i;f(e),e.addEventListener("click",c),t=e,a="UserDataChanged",i=l.bind(t),n.A.on(r.default,a,i),t[a]=i}var p=Object.create(s.A);p.createdCallback=function(){s.A.createdCallback&&s.A.createdCallback.call(this)},p.attachedCallback=function(){s.A.attachedCallback&&s.A.attachedCallback.call(this);var e=this.getAttribute("data-id"),t=this.getAttribute("data-serverid");if(e&&t){var a=this.getAttribute("data-likes");u(this,a="true"===a||"false"!==a&&null,"true"===this.getAttribute("data-isfavorite"),!1),m(this)}else d(this)},p.detachedCallback=function(){s.A.detachedCallback&&s.A.detachedCallback.call(this),f(this)},p.setItem=function(e){if(e){this.setAttribute("data-id",e.Id),this.setAttribute("data-serverid",e.ServerId);var t=e.UserData||{};u(this,t.Likes,t.IsFavorite),m(this)}else this.removeAttribute("data-id"),this.removeAttribute("data-serverid"),this.removeAttribute("data-likes"),this.removeAttribute("data-isfavorite"),f(this)},document.registerElement("emby-ratingbutton",{prototype:p,extends:"button"})},32203:function(e,t,a){"use strict";a.d(t,{Bq:function(){return o},Jd:function(){return s}});var r=a(65369),i=a(11444),n="assets/img/devices/";function s(e){switch(e){case r.X.Movies:return"movie";case r.X.Music:return"music_note";case r.X.Homevideos:case r.X.Photos:return"photo";case r.X.Livetv:return"live_tv";case r.X.Tvshows:return"tv";case r.X.Trailers:return"theaters";case r.X.Musicvideos:return"music_video";case r.X.Books:return"book";case r.X.Boxsets:return"video_library";case r.X.Playlists:return"queue";case"channels":return"videocam";case void 0:return"quiz";default:return"folder"}}function o(e,t){switch(e){case i.D.MusicAlbum:return"album";case i.D.MusicArtist:case i.D.Person:return"person";case i.D.Audio:return"audiotrack";case i.D.Movie:return"movie";case i.D.Episode:case i.D.Series:return"tv";case i.D.Program:return"live_tv";case i.D.Book:return"book";case i.D.Folder:return"folder";case i.D.BoxSet:return"video_library";case i.D.Playlist:return"queue";case i.D.Photo:return"photo";case i.D.PhotoAlbum:return"photo_album";default:return t}}t.Ay={getDeviceIcon:function(e){var t;switch(e.AppName||e.Client){case"Samsung Smart TV":return n+"samsung.svg";case"Xbox One":return n+"xbox.svg";case"Sony PS4":return n+"playstation.svg";case"Kodi":case"Kodi JellyCon":return n+"kodi.svg";case"Jellyfin Android":case"AndroidTV":case"Android TV":return n+"android.svg";case"Jellyfin Mobile (iOS)":case"Jellyfin Mobile (iPadOS)":case"Jellyfin iOS":case"Infuse":return n+"apple.svg";case"Home Assistant":return n+"home-assistant.svg";case"Jellyfin Roku":return n+"roku.svg";case"Finamp":return n+"finamp.svg";case"Jellyfin Web":return function(e){switch(e){case"Opera":case"Opera TV":case"Opera Android":return n+"opera.svg";case"Chrome":case"Chrome Android":return n+"chrome.svg";case"Firefox":case"Firefox Android":return n+"firefox.svg";case"Safari":case"Safari iPad":case"Safari iPhone":return n+"safari.svg";case"Edge Chromium":case"Edge Chromium Android":case"Edge Chromium iPad":case"Edge Chromium iPhone":return n+"edgechromium.svg";case"Edge":return n+"edge.svg";case"Internet Explorer":return n+"msie.svg";default:return n+"html5.svg"}}(e.Name||e.DeviceName);default:if(null===(t=e.Capabilities)||void 0===t?void 0:t.IconUrl)try{return new URL(e.Capabilities.IconUrl).toString()}catch(t){console.error("[getDeviceIcon] device capabilities has invalid IconUrl",e,t)}return n+"other.svg"}},getLibraryIcon:s,getItemTypeIcon:o}}}]);