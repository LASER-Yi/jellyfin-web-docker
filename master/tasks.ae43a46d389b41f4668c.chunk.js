"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[38919],{13478:function(t,e,n){var r=n(62540),o=(n(63696),n(92779)),a=n(10822),i=n(89348);e.A=function(t){var e=t.task.CurrentProgressPercentage;return(0,r.jsx)(o.A,{sx:{display:"flex",alignItems:"center",height:"1.2rem",mr:2,minWidth:"170px"},children:null!=e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.A,{sx:{width:"100%",mr:1},children:(0,r.jsx)(a.A,{variant:"determinate",value:e})}),(0,r.jsx)(o.A,{children:(0,r.jsx)(i.A,{variant:"body1",children:"".concat(Math.round(e),"%")})})]}):(0,r.jsx)(o.A,{sx:{width:"100%"},children:(0,r.jsx)(a.A,{})})})}},22204:function(t,e,n){n.d(e,{V:function(){return l}});var r=n(53875),o=n(38596),a=n(69410),i=n(31297),u=n(71607),l=function(){var t=(0,a.gf)().api;return(0,o.n)({mutationFn:function(e){return(0,r.g)(t).startTask(e)},onSuccess:function(){i.q.invalidateQueries({queryKey:[u.t]})}})}},36041:function(t,e,n){n.r(e),n.d(e,{Component:function(){return U}});var r=n(62540),o=n(63696),a=n(65242),i=n(5898),u=n(92779),l=n(70140);function c(t,e){return t?t.filter((function(t){return t.Category==e})).sort((function(t,e){var n;return t.Name&&e.Name?null===(n=t.Name)||void 0===n?void 0:n.localeCompare(e.Name):0})):[]}var s=n(84849),f=n(28335),y=n(89348),d=n(35117),p=n(69018),h=n(98634),b=n(73828),v=n(60434),m=n(13478),x=n(41906),g=n(34401),j=n(80096),A=n(52457),S=function(t){var e,n,a=t.task,u=(0,x.Y)().dateFnsLocale,l=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}((0,o.useMemo)((function(){var t,e;if((null===(t=a.LastExecutionResult)||void 0===t?void 0:t.StartTimeUtc)&&(null===(e=a.LastExecutionResult)||void 0===e?void 0:e.EndTimeUtc)){var n=(0,g.A)(a.LastExecutionResult.EndTimeUtc),r=(0,g.A)(a.LastExecutionResult.StartTimeUtc);return[(0,j.A)(n,{locale:u,addSuffix:!0}),(0,A.A)(r,n,{locale:u})]}return[]}),[a,u]),2),c=l[0],s=l[1];if("Idle"!=a.State)return(0,r.jsx)(y.A,{sx:{color:"text.secondary"},children:i.Ay.translate("LabelStopping")});if((null===(e=a.LastExecutionResult)||void 0===e?void 0:e.StartTimeUtc)&&(null===(n=a.LastExecutionResult)||void 0===n?void 0:n.EndTimeUtc)){var f=a.LastExecutionResult.Status;return(0,r.jsxs)(y.A,{sx:{lineHeight:"1.2rem",color:"text.secondary"},variant:"body1",children:[i.Ay.translate("LabelScheduledTaskLastRan",c,s),"Failed"==f&&(0,r.jsx)(y.A,{display:"inline",color:"error",children:" (".concat(i.Ay.translate("LabelFailed"),")")}),"Cancelled"==f&&(0,r.jsx)(y.A,{display:"inline",color:"blue",children:" (".concat(i.Ay.translate("LabelCancelled"),")")}),"Aborted"==f&&(0,r.jsx)(y.A,{display:"inline",color:"error",children:" (".concat(i.Ay.translate("LabelAbortedByServerShutdown"),")")})]})}},w=n(75487),k=n(2066),O=n(7729),T=n(22204),P=n(53875),C=n(38596),E=n(69410),I=n(31297),L=n(71607),R=n(95858),q=function(t){var e,n=t.task,a=(0,T.V)(),i=(e=(0,E.gf)().api,(0,C.n)({mutationFn:function(t){return(0,P.g)(e).stopTask(t)},onSuccess:function(){I.q.invalidateQueries({queryKey:[L.t]})}})),u=(0,o.useCallback)((function(){n.Id&&a.mutate({taskId:n.Id})}),[n,a]),l=(0,o.useCallback)((function(){n.Id&&i.mutate({taskId:n.Id})}),[n,i]);return(0,r.jsx)(d.Ay,{disablePadding:!0,secondaryAction:(0,r.jsx)(w.A,{onClick:"Running"==n.State?l:u,children:"Running"==n.State?(0,r.jsx)(O.A,{}):(0,r.jsx)(k.A,{})}),children:(0,r.jsxs)(R.A,{to:"/dashboard/tasks/".concat(n.Id),children:[(0,r.jsx)(b.A,{children:(0,r.jsx)(p.A,{sx:{bgcolor:"primary.main"},children:(0,r.jsx)(h.A,{sx:{color:"#fff"}})})}),(0,r.jsx)(v.A,{primary:(0,r.jsx)(y.A,{variant:"h3",children:n.Name}),secondary:"Running"==n.State?(0,r.jsx)(m.A,{task:n}):(0,r.jsx)(S,{task:n}),disableTypography:!0})]})})},F=function(t){var e=t.category,n=t.tasks;return(0,r.jsxs)(l.A,{spacing:2,children:[(0,r.jsx)(y.A,{variant:"h2",children:e}),(0,r.jsx)(f.A,{sx:{bgcolor:"background.paper"},children:n.map((function(t){return(0,r.jsx)(q,{task:t},t.Id)}))})]})},N=n(54861),U=function(){var t=(0,N.A)({isHidden:!1}),e=t.data;if(t.isPending||!e)return(0,r.jsx)(s.A,{});var n=function(t){var e,n;if(!t)return[];var r=[];try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),a=o.next();!a.done;a=o.next()){var i=a.value;i.Category&&!r.includes(i.Category)&&r.push(i.Category)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r.sort((function(t,e){return t.localeCompare(e)}))}(e);return(0,r.jsx)(a.A,{id:"scheduledTasksPage",title:i.Ay.translate("TabScheduledTasks"),className:"mainAnimatedPage type-interior",children:(0,r.jsx)(u.A,{className:"content-primary",children:(0,r.jsx)(u.A,{className:"readOnlyContent",children:(0,r.jsx)(l.A,{spacing:3,mt:2,children:n.map((function(t){return(0,r.jsx)(F,{category:t,tasks:c(e,t)},t)}))})})})})};U.displayName="TasksPage"},38596:function(t,e,n){n.d(e,{n:function(){return d}}),n(29305),n(32733),n(84701),n(81678),n(14382),n(69892),n(44962),n(89336),n(4754),n(94),n(33087),n(36947),n(36457),n(88908),n(83810),n(78557),n(95021),n(73687),n(83994),n(23630),n(82367);var r=n(63696),o=n(427),a=n(52672),i=n(26073),u=n(9790);function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return(e=function(t){var e=function(t){if("object"!=l(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){var n,l,c=(0,u.jE)(e),f=(n=r.useState((function(){return new o._(c,t)})),l=1,function(t){if(Array.isArray(t))return t}(n)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,u=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(u.push(r.value),u.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return u}}(n,l)||function(t,e){if(t){if("string"==typeof t)return y(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}(n,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];r.useEffect((function(){f.setOptions(t)}),[f,t]);var d=r.useSyncExternalStore(r.useCallback((function(t){return f.subscribe(a.jG.batchCalls(t))}),[f]),(function(){return f.getCurrentResult()}),(function(){return f.getCurrentResult()})),p=r.useCallback((function(t,e){f.mutate(t,e).catch(i.lQ)}),[f]);if(d.error&&(0,i.GU)(f.options.throwOnError,[d.error]))throw d.error;return s(s({},d),{},{mutate:p,mutateAsync:d.mutate})}},40694:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}n.d(e,{A:function(){return r}})},41906:function(t,e,n){n.d(e,{Y:function(){return f}});var r=n(62864),o=n(63696),a=n(5898),i=n(93721),u=n(28626),l=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{l(r.next(t))}catch(t){a(t)}}function u(t){try{l(r.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,u)}l((r=r.apply(t,e||[])).next())}))},c=function(t,e){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(l){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}},s=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};function f(){var t=this,e=(0,u.Q)(),n=e.dateTimeLocale,f=e.language,y=s((0,o.useState)(r.A),2),d=y[0],p=y[1],h=(0,o.useMemo)((function(){return(0,a.Tl)(f||(0,a.i5)())}),[f]),b=(0,o.useMemo)((function(){return n?(0,a.Tl)(n):h}),[n,h]);return(0,o.useEffect)((function(){l(t,void 0,void 0,(function(){var t,e;return c(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,i.Fq)((0,i.QC)(b))];case 1:return t=n.sent(),p(t),[3,3];case 2:return e=n.sent(),console.warn("[useLocale] failed to fetch dateFns locale",e),[3,3];case 3:return[2]}}))}))}),[b]),{locale:h,dateTimeLocale:b,dateFnsLocale:d}}},54861:function(t,e,n){var r=n(63696),o=n(69410),a=n(71607),i=n(31297),u=n(44797),l=n(10736),c=n(10749);e.A=function(t){var e=(0,o.gf)().__legacyApiClient__,n=(0,a.s)(t);return(0,r.useEffect)((function(){var t=function(t,e,n){i.q.setQueryData([a.t],n)},n=setInterval((function(){(null==e?void 0:e.isMessageChannelOpen())||i.q.invalidateQueries({queryKey:[a.t]})}),1e4);return null==e||e.sendMessage(c.Y.ScheduledTasksInfoStart,"1000,1000"),u.A.on(l.default,c.Y.ScheduledTasksInfo,t),function(){clearInterval(n),null==e||e.sendMessage(c.Y.ScheduledTasksInfoStop,null),u.A.off(l.default,c.Y.ScheduledTasksInfo,t)}}),[e]),n}},71607:function(t,e,n){n.d(e,{s:function(){return u},t:function(){return i}});var r=n(53875),o=n(80401),a=n(69410),i="Tasks",u=function(t){var e=(0,a.gf)().api;return(0,o.I)({queryKey:[i],queryFn:function(n){var o=n.signal;return function(t,e,n){return o=void 0,a=void 0,u=function(){return function(t,e){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=u(0),i.throw=u(1),i.return=u(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(l){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}}(this,(function(o){switch(o.label){case 0:return[4,(0,r.g)(t).getTasks(e,n)];case 1:return[2,o.sent().data]}}))},new((i=void 0)||(i=Promise))((function(t,e){function n(t){try{l(u.next(t))}catch(t){e(t)}}function r(t){try{l(u.throw(t))}catch(t){e(t)}}function l(e){var o;e.done?t(e.value):(o=e.value,o instanceof i?o:new i((function(t){t(o)}))).then(n,r)}l((u=u.apply(o,a||[])).next())}));var o,a,i,u}(e,t,{signal:o})},enabled:!!e})}},95858:function(t,e,n){var r=n(62540),o=n(79772),a=(n(63696),n(87404)),i=n(9055),u=function(){return u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},u.apply(this,arguments)},l=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};e.A=function(t){var e=t.children,n=t.to,c=t.includePaths,s=void 0===c?[]:c,f=t.excludePaths,y=void 0===f?[]:f,d=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(t,["children","to","includePaths","excludePaths"]),p=(0,a.zy)(),h=l((0,i.ok)(),1)[0],b=l(n.split("?"),2),v=b[0],m=b[1],x=new URLSearchParams("?".concat(m)),g=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([v],l(s),!1).includes(p.pathname)&&!y.includes(p.pathname+p.search)&&(!m||function(t,e){var n,r;try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),a=o.next();!a.done;a=o.next()){var i=a.value;if(e.get(i[0])!==i[1])return!1}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!0}(x,h));return(0,r.jsx)(o.A,u({component:i.N_,to:n,selected:g},d,{children:e}))}}}]);