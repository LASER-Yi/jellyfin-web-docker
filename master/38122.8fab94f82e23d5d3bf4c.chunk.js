"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[38122],{38122:function(e,t,a){a.r(t),a.d(t,{show:function(){return p}}),a(14382),a(76281),a(84734),a(86584),a(78557),a(96054),a(90076),a(99425);var i=a(79617),n=a(80669),r=a(5898),s=a(73706),o=a(86191);function u(e,t,a){var o,u=n.f.getSupportedCommands(t),p=[];if(-1!==u.indexOf("SetAspectRatio")){var l=n.f.getAspectRatio(t),d=n.f.getSupportedAspectRatios(t).filter((function(e){return e.id===l}))[0];p.push({name:r.Ay.translate("AspectRatio"),id:"aspectratio",asideText:d?d.name:null})}if(-1!==u.indexOf("PlaybackRate")){var c=n.f.getPlaybackRate(t),m=n.f.getSupportedPlaybackRates(t).filter((function(e){return e.id===c}))[0];p.push({name:r.Ay.translate("PlaybackRate"),id:"playbackrate",asideText:m?m.name:null})}if(e.quality&&u.includes("SetMaxStreamingBitrate")&&null!=a&&null!==(o=a.Policy)&&void 0!==o&&o.EnableVideoPlaybackTranscoding){var f=function(e){var t=n.f.getPlayerState(e),a=n.f.currentMediaSource(e).MediaStreams.filter((function(e){return"Video"===e.Type}))[0],i=a?a.Width:null,r=a?a.Height:null,o=s.Ay.getVideoQualityOptions({currentMaxBitrate:n.f.getMaxStreamingBitrate(e),isAutomaticBitrateEnabled:n.f.enableAutomaticBitrateDetection(e),videoWidth:i,videoHeight:r,enableAuto:!0}).filter((function(e){return e.selected}));if(!o.length)return null;var u=(o=o[0]).name;return o.autoText&&(t.PlayState&&"Transcode"!==t.PlayState.PlayMethod?u+=" - Direct":u+=" "+o.autoText),u}(t);p.push({name:r.Ay.translate("Quality"),id:"quality",asideText:f})}var b=n.f.getRepeatMode(t);return-1!==u.indexOf("SetRepeatMode")&&n.f.currentMediaSource(t).RunTimeTicks&&p.push({name:r.Ay.translate("RepeatMode"),id:"repeatmode",asideText:"RepeatNone"===b?r.Ay.translate("None"):r.Ay.translate(""+b)}),e.suboffset&&p.push({name:r.Ay.translate("SubtitleOffset"),id:"suboffset",asideText:null}),e.stats&&p.push({name:r.Ay.translate("PlaybackData"),id:"stats",asideText:null}),i.default.show({items:p,positionTo:e.positionTo}).then((function(a){return function(e,t,a){switch(e){case"quality":return function(e,t){var a=n.f.currentMediaSource(e).MediaStreams.filter((function(e){return"Video"===e.Type}))[0],r=a?a.Width:null,o=a?a.Height:null,u=s.Ay.getVideoQualityOptions({currentMaxBitrate:n.f.getMaxStreamingBitrate(e),isAutomaticBitrateEnabled:n.f.enableAutomaticBitrateDetection(e),videoWidth:r,videoHeight:o,enableAuto:!0}),p=u.map((function(e){var t={name:e.name,id:e.bitrate,asideText:e.secondaryText};return e.selected&&(t.selected=!0),t})),l=u.filter((function(e){return e.selected})),d=l.length?l[0].bitrate:null;return i.default.show({items:p,positionTo:t}).then((function(t){var a=parseInt(t,10);a!==d&&n.f.setMaxStreamingBitrate({enableAutomaticBitrateDetection:!a,maxBitrate:a},e)}))}(a,t.positionTo);case"aspectratio":return function(e,t){var a=n.f.getAspectRatio(e),r=n.f.getSupportedAspectRatios(e).map((function(e){return{id:e.id,name:e.name,selected:e.id===a}}));return i.default.show({items:r,positionTo:t}).then((function(t){return t?(n.f.setAspectRatio(t,e),Promise.resolve()):Promise.reject()}))}(a,t.positionTo);case"playbackrate":return function(e,t){var a=n.f.getPlaybackRate(e),r=n.f.getSupportedPlaybackRates(e).map((function(e){return{id:e.id,name:e.name,selected:e.id===a}}));return i.default.show({items:r,positionTo:t}).then((function(t){return t?(n.f.setPlaybackRate(t,e),Promise.resolve()):Promise.reject()}))}(a,t.positionTo);case"repeatmode":return function(e,t){var a=[],s=n.f.getRepeatMode(e);return a.push({name:r.Ay.translate("RepeatAll"),id:"RepeatAll",selected:"RepeatAll"===s}),a.push({name:r.Ay.translate("RepeatOne"),id:"RepeatOne",selected:"RepeatOne"===s}),a.push({name:r.Ay.translate("None"),id:"RepeatNone",selected:"RepeatNone"===s}),i.default.show({items:a,positionTo:t}).then((function(t){t&&n.f.setRepeatMode(t,e)}))}(a,t.positionTo);case"stats":return t.onOption&&t.onOption("stats"),Promise.resolve();case"suboffset":return t.onOption&&t.onOption("suboffset"),Promise.resolve()}return Promise.reject()}(a,e,t)}))}function p(e){var t=e.player,a=n.f.currentItem(t);return null!=a&&a.ServerId?o.A.getApiClient(a.ServerId).getCurrentUser().then((function(a){return u(e,t,a)})):u(e,t,null)}t.default={show:p}},73706:function(e,t,a){var i=a(22622),n=a(5898),r=a(90381);t.Ay={getVideoQualityOptions:function(e){var t,a=e.currentMaxBitrate,s=e.videoWidth,o=e.videoHeight;s/o<16/9&&(s=o*(16/9));var u=null==e.maxVideoWidth?r.A.maxVideoWidth():e.maxVideoWidth,p=(u<0?null===(t=i.g.screen())||void 0===t?void 0:t.maxAllowedWidth:u)||4096,l=s||4096,d=[],c={name:n.Ay.translate("Auto"),bitrate:0,selected:e.isAutomaticBitrateEnabled};if(e.enableAuto&&d.push(c),l>=3800&&p>=1930&&(d.push({name:"4K - 120 Mbps",maxHeight:2160,bitrate:12e7}),d.push({name:"4K - 80 Mbps",maxHeight:2160,bitrate:8e7})),l>=1900&&p>=1290&&(d.push({name:"1080p - 60 Mbps",maxHeight:1080,bitrate:6e7}),d.push({name:"1080p - 40 Mbps",maxHeight:1080,bitrate:4e7}),d.push({name:"1080p - 20 Mbps",maxHeight:1080,bitrate:2e7}),d.push({name:"1080p - 15 Mbps",maxHeight:1080,bitrate:15e6}),d.push({name:"1080p - 10 Mbps",maxHeight:1080,bitrate:1e7})),l>=1260&&p>=650&&(d.push({name:"720p - 8 Mbps",maxHeight:720,bitrate:8e6}),d.push({name:"720p - 6 Mbps",maxHeight:720,bitrate:6e6}),d.push({name:"720p - 4 Mbps",maxHeight:720,bitrate:4e6})),l>=620&&(d.push({name:"480p - 3 Mbps",maxHeight:480,bitrate:3e6}),d.push({name:"480p - 1.5 Mbps",maxHeight:480,bitrate:15e5}),d.push({name:"480p - 720 kbps",maxHeight:480,bitrate:72e4})),d.push({name:"360p - 420 kbps",maxHeight:360,bitrate:42e4}),a){for(var m=d.length-1,f=0,b=d.length;f<b;f++){var h=d[f];if(h.bitrate>0&&h.bitrate<=a){m=f;break}}var g=d[m];e.isAutomaticBitrateEnabled?c.autoText=g.name:g.selected=!0}return d},getAudioQualityOptions:function(e){var t=e.currentMaxBitrate,a=[],i={name:n.Ay.translate("Auto"),bitrate:0,selected:e.isAutomaticBitrateEnabled};if(e.enableAuto&&a.push(i),a.push({name:"2 Mbps",bitrate:2e6}),a.push({name:"1.5 Mbps",bitrate:15e5}),a.push({name:"1 Mbps",bitrate:1e6}),a.push({name:"320 kbps",bitrate:32e4}),a.push({name:"256 kbps",bitrate:256e3}),a.push({name:"192 kbps",bitrate:192e3}),a.push({name:"128 kbps",bitrate:128e3}),a.push({name:"96 kbps",bitrate:96e3}),a.push({name:"64 kbps",bitrate:64e3}),t){for(var r=a.length-1,s=0,o=a.length;s<o;s++){var u=a[s];if(u.bitrate>0&&u.bitrate<=t){r=s;break}}var p=a[r];e.isAutomaticBitrateEnabled?i.autoText=p.name:p.selected=!0}return a}}}}]);