/*! For license information please see sessionPlayer-plugin.b0fb6e5a7eb9fb4d93e5.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[64706],{9112:function(e,t,a){a.r(t),a(29305),a(32733),a(84701),a(81678),a(2623),a(14382),a(44962),a(86584),a(4754),a(10849),a(70389),a(94),a(77575),a(36947),a(26437),a(52697),a(78557),a(90076),a(83994),a(23630),a(82367);var n=a(39738),r=a(67430),i=a(10736),l=a(38783),o=a(44797),u=a(98526);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function y(){var e,t,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",r=a.toStringTag||"@@toStringTag";function i(a,n,r,i){var u=n&&n.prototype instanceof o?n:o,s=Object.create(u.prototype);return c(s,"_invoke",function(a,n,r){var i,o,u,s=0,y=r||[],c=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,a){return i=t,o=0,u=e,d.n=a,l}};function f(a,n){for(o=a,u=n,t=0;!c&&s&&!r&&t<y.length;t++){var r,i=y[t],f=d.p,v=i[2];a>3?(r=v===n)&&(u=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=e):i[0]<=f&&((r=a<2&&f<i[1])?(o=0,d.v=n,d.n=i[1]):f<v&&(r=a<3||i[0]>n||n>v)&&(i[4]=a,i[5]=n,d.n=v,o=0))}if(r||a>1)return l;throw c=!0,n}return function(r,y,v){if(s>1)throw TypeError("Generator is already running");for(c&&1===y&&f(y,v),o=y,u=v;(t=o<2?e:u)||!c;){i||(o?o<3?(o>1&&(d.n=-1),f(o,u)):d.n=u:d.v=u);try{if(s=2,i){if(o||(r="next"),t=i[r]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,o<2&&(o=0)}else 1===o&&(t=i.return)&&t.call(i),o<2&&(u=TypeError("The iterator does not provide a '"+r+"' method"),o=1);i=e}else if((t=(c=d.n<0)?u:a.call(n,d))!==l)break}catch(t){i=e,o=1,u=t}finally{s=1}}return{value:t,done:c}}}(a,r,i),!0),s}var l={};function o(){}function u(){}function s(){}t=Object.getPrototypeOf;var d=[][n]?t(t([][n]())):(c(t={},n,(function(){return this})),t),f=s.prototype=o.prototype=Object.create(d);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,c(e,r,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=s,c(f,"constructor",s),c(s,"constructor",u),u.displayName="GeneratorFunction",c(s,r,"GeneratorFunction"),c(f),c(f,r,"Generator"),c(f,n,(function(){return this})),c(f,"toString",(function(){return"[object Generator]"})),(y=function(){return{w:i,m:v}})()}function c(e,t,a,n){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}c=function(e,t,a,n){if(t)r?r(e,t,{value:a,enumerable:!n,configurable:!n,writable:!n}):e[t]=a;else{var i=function(t,a){c(e,t,(function(e){return this._invoke(t,a,e)}))};i("next",0),i("throw",1),i("return",2)}},c(e,t,a,n)}function d(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function f(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=s(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}function v(e,t,a,n,r,i,l){try{var o=e[i](l),u=o.value}catch(e){return void a(e)}o.done?t(u):Promise.resolve(u).then(n,r)}function m(){var e=n.f.getPlayerInfo();return e?e.id:null}function p(e,t,a){var n=m(),r={ItemIds:(t.ids||t.items.map((function(e){return e.Id}))).join(","),PlayCommand:a};return t.startPositionTicks&&(r.StartPositionTicks=t.startPositionTicks),t.mediaSourceId&&(r.MediaSourceId=t.mediaSourceId),null!=t.audioStreamIndex&&(r.AudioStreamIndex=t.audioStreamIndex),null!=t.subtitleStreamIndex&&(r.SubtitleStreamIndex=t.subtitleStreamIndex),null!=t.startIndex&&(r.StartIndex=t.startIndex),e.sendPlayCommand(n,r)}function I(e,t,a){var n=m();e.sendPlayStateCommand(n,t,a)}function P(e){var t=e.currentServerId;return t?r.tF.getApiClient(t):r.tF.currentApiClient()}function h(e,t,a){var n={Name:t};a&&(n.Arguments=a),e.sendCommand(n)}function g(){var e;return e=y().m((function e(t,a){var r,i,l,o;return y().w((function(e){for(;;)switch(e.n){case 0:return r={ids:a.map((function(e){return e.Id})),serverId:P(t).serverId()},e.n=1,n.f.getItemsForPlayback(r.serverId,{Ids:r.ids.join(",")});case 1:return i=e.v,e.n=2,n.f.translateItemsForPlayback(i.Items,r);case 2:for(l=e.v,o=0;o<l.length;o++)l[o].PlaylistItemId=a[o].PlaylistItemId;t.playlist=l;case 3:return e.a(2)}}),e)})),g=function(){var t=this,a=arguments;return new Promise((function(n,r){var i=e.apply(t,a);function l(e){v(i,n,r,l,o,"next",e)}function o(e){v(i,n,r,l,o,"throw",e)}l(void 0)}))},g.apply(this,arguments)}function k(e,t,a){var r=a.serverId();t.forEach((function(e){e.NowPlayingItem&&(e.NowPlayingItem.ServerId=r)}));var i=m(),l=t.filter((function(e){return e.Id===i}))[0];if(l){!function(e,t){if(null!=e&&e.NowPlayingItem){var a=e.NowPlayingItem;(!a.ImageTags||!a.ImageTags.Primary&&a.PrimaryImageTag)&&(a.ImageTags=a.ImageTags||{},a.ImageTags.Primary=a.PrimaryImageTag),a.BackdropImageTag&&a.BackdropItemId===a.Id&&(a.BackdropImageTags=[a.BackdropImageTag]),a.BackdropImageTag&&a.BackdropItemId!==a.Id&&(a.ParentBackdropImageTags=[a.BackdropImageTag],a.ParentBackdropItemId=a.BackdropItemId),a.ServerId||(a.ServerId=t.serverId())}}(l,a),function(e,t){var a=t.NowPlayingQueue;if(!e.isUpdatingPlaylist&&(!e.lastPlayerData||function(e,t){if(e.length!==t.length)return!0;for(var a=0;a<e.length;a++)if(e[a].Id!==t[a].Id||e[a].PlaylistItemId!==t[a].PlaylistItemId)return!0;return!1}(a,e.playlist))){e.isUpdatingPlaylist=!0;var n=function(){e.isUpdatingPlaylist=!1,e.isPlaylistRendered=!0};(function(e,t){return g.apply(this,arguments)})(e,a).then(n,n)}}(e,l);var s=function(e,t){if(!(null!=e&&e.PlayState&&null!=t&&t.PlayState&&(e.TranscodingInfo===t.TranscodingInfo||e.TranscodingInfo&&t.TranscodingInfo)))return["statechange"];var a=function(e,t){var a=[];return e.PlayState.PositionTicks!==t.PlayState.PositionTicks&&a.push("timeupdate"),e.PlayState.IsPaused!==t.PlayState.IsPaused&&a.push(t.PlayState.IsPaused?"pause":"unpause"),e.PlayState.IsMuted===t.PlayState.IsMuted&&e.PlayState.VolumeLevel===t.PlayState.VolumeLevel||a.push("volumechange"),e.PlayState.RepeatMode!==t.PlayState.RepeatMode&&a.push("repeatmodechange"),a}(e,t);return function(e,t){var a=function(e,t,a){Object.hasOwn(t,a)?e[a]=t[a]:delete e[a]};a(e.PlayState,t.PlayState,"PositionTicks"),e.TranscodingInfo&&(a(e.TranscodingInfo,t.TranscodingInfo,"CompletionPercentage"),a(e.TranscodingInfo,t.TranscodingInfo,"Framerate")),a(e,t,"LastActivityDate"),a(e,t,"LastPlaybackCheckIn"),a(e.PlayState,t.PlayState,"IsPaused"),a(e,t,"LastPausedDate"),a(e.PlayState,t.PlayState,"IsMuted"),a(e.PlayState,t.PlayState,"VolumeLevel"),a(e.PlayState,t.PlayState,"RepeatMode"),a(e.PlayState,t.PlayState,"OrderMode")}(e,t),(0,u.A)(e,t)?a:["statechange"]}(e.lastPlayerData,l);e.lastPlayerData=l,s.forEach((function(t){o.A.trigger(e,t,[l])}))}else e.lastPlayerData=l,n.f.setDefaultPlayerActive()}function S(){var e=this,t=P(e);t.isMessageChannelOpen()||t.getSessions().then((function(a){k(e,a,t)}))}function T(e){e.isUpdating=!0,P(e).sendMessage("SessionsStart","100,800"),e.pollInterval&&(clearInterval(e.pollInterval),e.pollInterval=null),e.pollInterval=setInterval(S.bind(e),5e3)}var b=function(){return e=function e(){var t,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n=void 0,(a=f(a="lastPlaylistItemId"))in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n;var r=this;this.name="Remote Control",this.type=l.Q.MediaPlayer,this.isLocalPlayer=!1,this.id="remoteplayer",this.playlist=[],this.isPlaylistRendered=!0,this.isUpdatingPlaylist=!1,o.A.on(i.default,"Sessions",(function(e,t,a){k(r,a,t)}))},(t=[{key:"beginPlayerUpdates",value:function(){this.playerListenerCount=this.playerListenerCount||0,this.playerListenerCount<=0&&(this.playerListenerCount=0,T(this)),this.playerListenerCount++}},{key:"endPlayerUpdates",value:function(){var e;this.playerListenerCount=this.playerListenerCount||0,this.playerListenerCount--,this.playerListenerCount<=0&&((e=this).isUpdating=!0,P(e).sendMessage("SessionsStop"),e.pollInterval&&(clearInterval(e.pollInterval),e.pollInterval=null),this.playerListenerCount=0)}},{key:"getPlayerState",value:function(){return this.lastPlayerData||{}}},{key:"getTargets",value:function(){var e=P(this),t={ControllableByUserId:e.getCurrentUserId()};if(e){var a=this.name;return e.getSessions(t).then((function(t){return t.filter((function(t){return t.DeviceId!==e.deviceId()})).map((function(e){return{name:e.DeviceName,deviceName:e.DeviceName,deviceType:e.DeviceType,id:e.Id,playerName:a,appName:e.Client,playableMediaTypes:e.PlayableMediaTypes,isLocalPlayer:!1,supportedCommands:e.Capabilities.SupportedCommands,user:e.UserId?{Id:e.UserId,Name:e.UserName,PrimaryImageTag:e.UserPrimaryImageTag}:null}}))}))}return Promise.resolve([])}},{key:"sendCommand",value:function(e){var t=m();P(this).sendCommand(t,e)}},{key:"play",value:function(e){return(e=Object.assign({},e)).items&&(e.ids=e.items.map((function(e){return e.Id})),e.items=null),p(P(this),e,"PlayNow")}},{key:"shuffle",value:function(e){p(P(this),{ids:[e.Id]},"PlayShuffle")}},{key:"instantMix",value:function(e){p(P(this),{ids:[e.Id]},"PlayInstantMix")}},{key:"queue",value:function(e){p(P(this),e,"PlayLast")}},{key:"queueNext",value:function(e){p(P(this),e,"PlayNext")}},{key:"canPlayMediaType",value:function(e){return"audio"===(e=(e||"").toLowerCase())||"video"===e}},{key:"canQueueMediaType",value:function(e){return this.canPlayMediaType(e)}},{key:"stop",value:function(){I(P(this),"stop")}},{key:"nextTrack",value:function(){I(P(this),"nextTrack")}},{key:"previousTrack",value:function(){I(P(this),"previousTrack")}},{key:"seek",value:function(e){I(P(this),"seek",{SeekPositionTicks:e})}},{key:"currentTime",value:function(e){if(null!=e)return this.seek(1e4*e);var t=this.lastPlayerData||{};return(t=t.PlayState||{}).PositionTicks/1e4}},{key:"duration",value:function(){var e=this.lastPlayerData||{};return(e=e.NowPlayingItem||{}).RunTimeTicks}},{key:"paused",value:function(){var e=this.lastPlayerData||{};return(e=e.PlayState||{}).IsPaused}},{key:"getVolume",value:function(){var e=this.lastPlayerData||{};return(e=e.PlayState||{}).VolumeLevel}},{key:"isMuted",value:function(){var e=this.lastPlayerData||{};return(e=e.PlayState||{}).IsMuted}},{key:"pause",value:function(){I(P(this),"Pause")}},{key:"unpause",value:function(){I(P(this),"Unpause")}},{key:"playPause",value:function(){I(P(this),"PlayPause")}},{key:"setMute",value:function(e){h(this,e?"Mute":"Unmute")}},{key:"toggleMute",value:function(){h(this,"ToggleMute")}},{key:"setVolume",value:function(e){h(this,"SetVolume",{Volume:e})}},{key:"volumeUp",value:function(){h(this,"VolumeUp")}},{key:"volumeDown",value:function(){h(this,"VolumeDown")}},{key:"toggleFullscreen",value:function(){h(this,"ToggleFullscreen")}},{key:"audioTracks",value:function(){var e=this.lastPlayerData||{};return((e=e.NowPlayingItem||{}).MediaStreams||[]).filter((function(e){return"Audio"===e.Type}))}},{key:"getAudioStreamIndex",value:function(){var e=this.lastPlayerData||{};return(e=e.PlayState||{}).AudioStreamIndex}},{key:"playTrailers",value:function(e){h(this,"PlayTrailers",{ItemId:e.Id})}},{key:"setAudioStreamIndex",value:function(e){h(this,"SetAudioStreamIndex",{Index:e})}},{key:"subtitleTracks",value:function(){var e=this.lastPlayerData||{};return((e=e.NowPlayingItem||{}).MediaStreams||[]).filter((function(e){return"Subtitle"===e.Type}))}},{key:"getSubtitleStreamIndex",value:function(){var e=this.lastPlayerData||{};return(e=e.PlayState||{}).SubtitleStreamIndex}},{key:"setSubtitleStreamIndex",value:function(e){h(this,"SetSubtitleStreamIndex",{Index:e})}},{key:"setRepeatMode",value:function(e){h(this,"SetRepeatMode",{RepeatMode:e})}},{key:"getRepeatMode",value:function(){}},{key:"setQueueShuffleMode",value:function(e){h(this,"SetShuffleQueue",{ShuffleMode:e})}},{key:"getQueueShuffleMode",value:function(){}},{key:"displayContent",value:function(e){h(this,"DisplayContent",e)}},{key:"isPlaying",value:function(e){var t=this.lastPlayerData||{};return null!=t.NowPlayingItem&&(t.NowPlayingItem.MediaType===e||!e)}},{key:"isPlayingVideo",value:function(){var e=this.lastPlayerData||{};return"Video"===(e=e.NowPlayingItem||{}).MediaType}},{key:"isPlayingAudio",value:function(){var e=this.lastPlayerData||{};return"Audio"===(e=e.NowPlayingItem||{}).MediaType}},{key:"getTrackIndex",value:function(e){for(var t=0;t<this.playlist.length;t++)if(this.playlist[t].PlaylistItemId===e)return t}},{key:"getPlaylist",value:function(){var e;return this.lastPlayerData&&(e=this.lastPlayerData.PlaylistItemId),this.playlist.length>0&&(this.isPlaylistRendered||e!==this.lastPlaylistItemId)?(this.isPlaylistRendered=!1,this.lastPlaylistItemId=e,Promise.resolve(this.playlist)):Promise.resolve([])}},{key:"movePlaylistItem",value:function(e,t){var a=this.getTrackIndex(e);if(a!==t){var n=this.getCurrentPlaylistItemId(),r=0;n===e&&(r=t);var i=t+1>=this.playlist.length;t>a&&t++;for(var l=[],o=this.playlist[a],u=0;u<this.playlist.length;u++)u!==a&&(u===t&&l.push(o.Id),this.playlist[u].PlaylistItemId===n&&(r=l.length),l.push(this.playlist[u].Id));i&&l.push(o.Id);var s={ids:l,startIndex:r};return p(P(this),s,"PlayNow")}}},{key:"getCurrentPlaylistItemId",value:function(){return this.lastPlayerData.PlaylistItemId}},{key:"setCurrentPlaylistItem",value:function(e){var t={ids:this.playlist.map((function(e){return e.Id})),startIndex:this.getTrackIndex(e)};return p(P(this),t,"PlayNow")}},{key:"removeFromPlaylist",value:function(){return Promise.resolve()}},{key:"tryPair",value:function(){return Promise.resolve()}}])&&d(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();t.default=b}}]);